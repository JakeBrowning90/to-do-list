/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={917:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}","",{version:3,sources:["webpack://./src/reset.css"],names:[],mappings:"AAAA;;;CAGC;;AAED;;;;;;;;;;;;;CAaC,SAAS;CACT,UAAU;CACV,SAAS;CACT,eAAe;CACf,aAAa;CACb,wBAAwB;AACzB;AACA,gDAAgD;AAChD;;CAEC,cAAc;AACf;AACA;CACC,cAAc;AACf;AACA;CACC,gBAAgB;AACjB;AACA;CACC,YAAY;AACb;AACA;;CAEC,WAAW;CACX,aAAa;AACd;AACA;CACC,yBAAyB;CACzB,iBAAiB;AAClB",sourcesContent:["/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}"],sourceRoot:""}]);const a=o},426:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(537),i=n.n(r),s=n(645),o=n.n(s),a=n(667),c=n.n(a),u=new URL(n(287),n.b),l=o()(i()),h=c()(u);l.push([t.id,":root {\n    --dark: rgba(0, 0, 0, 0.5);\n    --light: rgba(0, 0, 0, 0.4);\n}\n\n@font-face {\n    font-family: Rodin;\n    src: url("+h+");\n}\n\nhtml {\n    background: linear-gradient(#b5d2f0, #6b7052, #706458);\n    background-size: cover;\n}\n\nhtml, body {\n    font-family: Rodin;\n    font-style: italic;\n    height: 100vh;\n    width: 100vw; \n    box-sizing: border-box;\n}\n\nbody {\n    color: white;\n    accent-color: yellow;\n    display: flex;\n    flex-direction: column;\n}\n\na, a:visited {\n    color: white;\n}\n\n#addTaskButton {\n    font-weight: bold;\n    font-style: italic;\n}\n\ntextarea {\n    resize: none;\n    height: 50%;\n}\n\nh1 {\n    font-size: 2em;\n}\n\nbutton, input, select {\n    font-family: Rodin;\n    box-sizing: border-box;\n    height: 100%;\n    padding: 5px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    text-align: center;\n}\n\nheader, footer {\n    background-color: var(--dark);\n    padding: 10px;\n}\n\nheader {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 20px;\n    font-style: italic;\n    font-weight: bold;\n}\n\nmain {\n    /* background-color: rgba(255, 255, 255, 0.311); */\n    box-sizing: border-box;\n    height: 100%;\n    max-height: 100%;\n    /* margin: 0 50px 0 50px; */\n    padding: 20px 50px 20px 50px;\n    /* grid-column: 2 / -2; */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n.taskFormContent, .listViewContent {\n margin: auto;\n}\n\n.taskFormContent {\n    height: 50vh;\n    width: 50vw; \n    box-sizing: border-box;\n    background-color: rgba(128, 128, 128, 0.526);\n    place-self: center;\n}\n\n.listViewContent {\n    box-sizing: border-box;\n    height: 100%;\n    max-height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    gap: 40px;\n    /* overflow: hidden; */\n}\n\n.listViewContent > * {\n    box-sizing: border-box;\n    overflow: hidden;\n    height: 100%;\n    width: 40vw;\n}\n\n.taskListColumn {\n    height: 100%;\n    max-height: 100%;\n    gap: 5px;\n    display: flex;\n    flex-direction: column;\n}\n\n.taskListColumn > * {\n    /* box-sizing: border-box; */\n}\n\n.taskCategoryTabs {\n    box-sizing: border-box;\n    height: 12.5%;\n    max-height: 12.5%;\n    width: 100%;\n    border-bottom: solid black 2px;\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    align-self: center;\n    margin: 5px 0 5px 0;\n}\n\n.taskCategoryTabs > * {\n    display: flex;\n\tjustify-content: center;\n\talign-items: center;\n    font-weight: bold;\n}\n\n.displayedTasks {\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    height: 1fr;\n    max-height: 1fr;\n    gap: 4px;\n    overflow: scroll;\n}\n\n.taskRow {\n    /* background-color: greenyellow; */\n    background-color: var(--dark);\n    box-sizing: border-box;\n    border: solid var(--light) 2px;\n    display: grid;\n    grid-template-columns: 1fr 30px;\n    grid-template-rows: 40px 20px;\n    padding-left: 10px;\n}\n\n.taskRow > * {\n    overflow-inline: hidden;\n}\n\n.taskRow:hover {\n    box-sizing: border-box;\n    border: solid white 2px;\n}\n\n.taskRowName {\n    grid-column: 1 / 2;\n    font-weight: bold;\n    font-size: 1.1em;\n    margin: auto 0px;\n}\n\n.taskRowDate {\n    grid-column: 1 / 2;   \n    color: yellow;\n    margin: auto 0px;\n}\n\n.taskRowDefaultMark {\n    grid-column: 2 / -1;\n    grid-row: 1 / -1;\n    background-color: rgba(88, 88, 88, 0.533);\n    display: flex;\n    align-content: center;\n    justify-content: center;\n}\n\n.taskDescColumn {\n    /* max-height: 90%; */\n    box-sizing: border-box;\n    background-color: var(--dark);\n    display: grid;\n    grid-template-columns: 1fr 1fr 2fr;\n    grid-template-rows: 2fr 1fr 15fr 1fr; \n    padding: 10px;\n}\n\n.taskDescColumn > * {\n    display: flex;\n    box-sizing: border-box;\n    /* border: 1px solid black; */\n    padding: 5px; \n    /* font-size: 1vw; */\n}\n\n.blankDescPlaceholder {\n    grid-column: 1 / -1;\n}\n\n.taskDetailName, .taskDetailCategory,  .taskDetailPriority, .taskDetailDueDate {\n    align-items: center;\n    /* box-sizing: border-box; */\n    /* overflow: scroll; */\n}\n\n.taskDetailName {\n    grid-column: 1 / -1;\n    border-bottom: solid var(--light) 2px;\n    font-weight: bold;\n    font-size: 1.3em;\n}\n\n.taskDetailCategory {\n    grid-column: 1 / 2;\n}\n\n.taskDetailPriority {\n    grid-column: 2 / 3;\n}\n\n.taskDetailDueDate{\n    grid-column: 3 / 4;\n    color: yellow;\n}\n\n.taskDetailDescription {\n    grid-column: 1 / -1;\n    border-bottom: solid var(--light) 2px;\n    /* padding-top: 10px; */\n    /* overflow: scroll; */\n}\n\n.editTaskBtn, .deleteTaskBtn {\n    font-size: 5px;\n}\n\n.editTaskBtn {\n    grid-column: -2 / -3\n}\n\n.deleteTaskBtn {\n    width: 50%;\n    grid-column: -1 / -2\n}\n\n/* Style for form view */\n.taskFormContent {\n    padding: 20px;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: 1fr 1fr 3fr .5fr;\n    gap: 5px;\n    background-color: var(--dark);\n}\n\n.taskFormContent > * {\n    /* border: black solid 1px; */\n}\n\n.formTextInput {\n    display: flex;\n    flex-direction: column;\n    gap: 3px;\n}\n\n.taskNameDiv, .taskDescDiv {\n    grid-column: 1 / -1;\n}\n\n.formButtonDiv {\n    grid-column: -1 / -2;\n    display: flex;\n    flex-direction: row;\n    align-content: stretch;\n    justify-content: space-between;\n}\n\nfooter {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n}","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"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",sourcesContent:[":root {\n    --dark: rgba(0, 0, 0, 0.5);\n    --light: rgba(0, 0, 0, 0.4);\n}\n\n@font-face {\n    font-family: Rodin;\n    src: url(fot-rodin-pro-cufonfonts/FOTRodin\\ Pro\\ M.otf);\n}\n\nhtml {\n    background: linear-gradient(#b5d2f0, #6b7052, #706458);\n    background-size: cover;\n}\n\nhtml, body {\n    font-family: Rodin;\n    font-style: italic;\n    height: 100vh;\n    width: 100vw; \n    box-sizing: border-box;\n}\n\nbody {\n    color: white;\n    accent-color: yellow;\n    display: flex;\n    flex-direction: column;\n}\n\na, a:visited {\n    color: white;\n}\n\n#addTaskButton {\n    font-weight: bold;\n    font-style: italic;\n}\n\ntextarea {\n    resize: none;\n    height: 50%;\n}\n\nh1 {\n    font-size: 2em;\n}\n\nbutton, input, select {\n    font-family: Rodin;\n    box-sizing: border-box;\n    height: 100%;\n    padding: 5px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    text-align: center;\n}\n\nheader, footer {\n    background-color: var(--dark);\n    padding: 10px;\n}\n\nheader {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 20px;\n    font-style: italic;\n    font-weight: bold;\n}\n\nmain {\n    /* background-color: rgba(255, 255, 255, 0.311); */\n    box-sizing: border-box;\n    height: 100%;\n    max-height: 100%;\n    /* margin: 0 50px 0 50px; */\n    padding: 20px 50px 20px 50px;\n    /* grid-column: 2 / -2; */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n.taskFormContent, .listViewContent {\n margin: auto;\n}\n\n.taskFormContent {\n    height: 50vh;\n    width: 50vw; \n    box-sizing: border-box;\n    background-color: rgba(128, 128, 128, 0.526);\n    place-self: center;\n}\n\n.listViewContent {\n    box-sizing: border-box;\n    height: 100%;\n    max-height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    gap: 40px;\n    /* overflow: hidden; */\n}\n\n.listViewContent > * {\n    box-sizing: border-box;\n    overflow: hidden;\n    height: 100%;\n    width: 40vw;\n}\n\n.taskListColumn {\n    height: 100%;\n    max-height: 100%;\n    gap: 5px;\n    display: flex;\n    flex-direction: column;\n}\n\n.taskListColumn > * {\n    /* box-sizing: border-box; */\n}\n\n.taskCategoryTabs {\n    box-sizing: border-box;\n    height: 12.5%;\n    max-height: 12.5%;\n    width: 100%;\n    border-bottom: solid black 2px;\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    align-self: center;\n    margin: 5px 0 5px 0;\n}\n\n.taskCategoryTabs > * {\n    display: flex;\n\tjustify-content: center;\n\talign-items: center;\n    font-weight: bold;\n}\n\n.displayedTasks {\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    height: 1fr;\n    max-height: 1fr;\n    gap: 4px;\n    overflow: scroll;\n}\n\n.taskRow {\n    /* background-color: greenyellow; */\n    background-color: var(--dark);\n    box-sizing: border-box;\n    border: solid var(--light) 2px;\n    display: grid;\n    grid-template-columns: 1fr 30px;\n    grid-template-rows: 40px 20px;\n    padding-left: 10px;\n}\n\n.taskRow > * {\n    overflow-inline: hidden;\n}\n\n.taskRow:hover {\n    box-sizing: border-box;\n    border: solid white 2px;\n}\n\n.taskRowName {\n    grid-column: 1 / 2;\n    font-weight: bold;\n    font-size: 1.1em;\n    margin: auto 0px;\n}\n\n.taskRowDate {\n    grid-column: 1 / 2;   \n    color: yellow;\n    margin: auto 0px;\n}\n\n.taskRowDefaultMark {\n    grid-column: 2 / -1;\n    grid-row: 1 / -1;\n    background-color: rgba(88, 88, 88, 0.533);\n    display: flex;\n    align-content: center;\n    justify-content: center;\n}\n\n.taskDescColumn {\n    /* max-height: 90%; */\n    box-sizing: border-box;\n    background-color: var(--dark);\n    display: grid;\n    grid-template-columns: 1fr 1fr 2fr;\n    grid-template-rows: 2fr 1fr 15fr 1fr; \n    padding: 10px;\n}\n\n.taskDescColumn > * {\n    display: flex;\n    box-sizing: border-box;\n    /* border: 1px solid black; */\n    padding: 5px; \n    /* font-size: 1vw; */\n}\n\n.blankDescPlaceholder {\n    grid-column: 1 / -1;\n}\n\n.taskDetailName, .taskDetailCategory,  .taskDetailPriority, .taskDetailDueDate {\n    align-items: center;\n    /* box-sizing: border-box; */\n    /* overflow: scroll; */\n}\n\n.taskDetailName {\n    grid-column: 1 / -1;\n    border-bottom: solid var(--light) 2px;\n    font-weight: bold;\n    font-size: 1.3em;\n}\n\n.taskDetailCategory {\n    grid-column: 1 / 2;\n}\n\n.taskDetailPriority {\n    grid-column: 2 / 3;\n}\n\n.taskDetailDueDate{\n    grid-column: 3 / 4;\n    color: yellow;\n}\n\n.taskDetailDescription {\n    grid-column: 1 / -1;\n    border-bottom: solid var(--light) 2px;\n    /* padding-top: 10px; */\n    /* overflow: scroll; */\n}\n\n.editTaskBtn, .deleteTaskBtn {\n    font-size: 5px;\n}\n\n.editTaskBtn {\n    grid-column: -2 / -3\n}\n\n.deleteTaskBtn {\n    width: 50%;\n    grid-column: -1 / -2\n}\n\n/* Style for form view */\n.taskFormContent {\n    padding: 20px;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: 1fr 1fr 3fr .5fr;\n    gap: 5px;\n    background-color: var(--dark);\n}\n\n.taskFormContent > * {\n    /* border: black solid 1px; */\n}\n\n.formTextInput {\n    display: flex;\n    flex-direction: column;\n    gap: 3px;\n}\n\n.taskNameDiv, .taskDescDiv {\n    grid-column: 1 / -1;\n}\n\n.formButtonDiv {\n    grid-column: -1 / -2;\n    display: flex;\n    flex-direction: row;\n    align-content: stretch;\n    justify-content: space-between;\n}\n\nfooter {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n}"],sourceRoot:""}]);const d=l},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},537:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */"),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([s]).join("\n")}return[e].join("\n")}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var c=t[a],u=r.base?c[0]+r.base:c[0],l=s[u]||0,h="".concat(u," ").concat(l);s[u]=l+1;var d=n(h),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var g=i(f,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:g,references:1})}o.push(h)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var c=r(t,i),u=0;u<s.length;u++){var l=n(s[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}s=c}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},287:(t,e,n)=>{t.exports=n.p+"3503afff0c6b252264cf.otf"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var t=n(379),e=n.n(t),r=n(795),i=n.n(r),s=n(569),o=n.n(s),a=n(565),c=n.n(a),u=n(216),l=n.n(u),h=n(589),d=n.n(h),f=n(917),g={};g.styleTagTransform=d(),g.setAttributes=c(),g.insert=o().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=l(),e()(f.Z,g),f.Z&&f.Z.locals&&f.Z.locals;var m=n(426),p={};p.styleTagTransform=d(),p.setAttributes=c(),p.insert=o().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=l(),e()(m.Z,p),m.Z&&m.Z.locals&&m.Z.locals;const y=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==o||null==a)throw new A;const c=i<<2|s>>4;if(r.push(c),64!==o){const t=s<<4&240|o>>2;if(r.push(t),64!==a){const t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w=function(t){return function(t){const e=y(t);return v.encodeByteArray(e,!0)}(t).replace(/\./g,"")},b=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return v.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}};class C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class E extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(I,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new E(r,o,n)}}const I=/\{\$([^}]+)}/g;function k(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(S(n)&&S(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function S(t){return null!==t&&"object"==typeof t}function D(t){return t&&t._delegate?t._delegate:t}class x{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const _="[DEFAULT]";class N{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new C;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:_})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=_){return this.instances.has(t)}getOptions(t=_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===_?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=_){return this.component?this.component.multipleInstances?t:_:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class B{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new N(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const M=[];var L,R;(R=L||(L={}))[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT";const O={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},P=L.INFO,F={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},U=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=F[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class V{constructor(t){this.name=t,this._logLevel=P,this._logHandler=U,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in L))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?O[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...t),this._logHandler(this,L.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...t),this._logHandler(this,L.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,L.INFO,...t),this._logHandler(this,L.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,L.WARN,...t),this._logHandler(this,L.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...t),this._logHandler(this,L.ERROR,...t)}}let j,q;const z=new WeakMap,$=new WeakMap,H=new WeakMap,W=new WeakMap,G=new WeakMap;let K={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return $.get(t);if("objectStoreNames"===e)return t.objectStoreNames||H.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Y(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Q(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(X(this),t),Y(z.get(this))}:function(...t){return Y(e.apply(X(this),t))}:function(t,...n){const r=e.call(X(this),t,...n);return H.set(r,t.sort?t.sort():[t]),Y(r)}:(t instanceof IDBTransaction&&function(t){if($.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));$.set(t,e)}(t),n=t,(j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,K):t);var e,n}function Y(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(Y(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&z.set(e,t)})).catch((()=>{})),G.set(e,t),e}(t);if(W.has(t))return W.get(t);const e=Q(t);return e!==t&&(W.set(t,e),G.set(e,t)),e}const X=t=>G.get(t),J=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],tt=new Map;function et(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(tt.get(e))return tt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Z.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!J.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return tt.set(e,s),s}var nt;nt=K,K={...nt,get:(t,e,n)=>et(t,e)||nt.get(t,e,n),has:(t,e)=>!!et(t,e)||nt.has(t,e)};class rt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const it="@firebase/app",st="0.9.9",ot=new V("@firebase/app"),at="[DEFAULT]",ct={[it]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ut=new Map,lt=new Map;function ht(t,e){try{t.container.addComponent(e)}catch(n){ot.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dt(t){const e=t.name;if(lt.has(e))return ot.debug(`There were multiple attempts to register component ${e}.`),!1;lt.set(e,t);for(const e of ut.values())ht(e,t);return!0}const ft=new T("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new x("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}function mt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:at,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ft.create("bad-app-name",{appName:String(i)});if(n||(n=null===(s=b())||void 0===s?void 0:s.config),!n)throw ft.create("no-options");var s;const o=ut.get(i);if(o){if(k(n,o.options)&&k(r,o.config))return o;throw ft.create("duplicate-app",{appName:i})}const a=new B(i);for(const t of lt.values())a.addComponent(t);const c=new gt(n,r,a);return ut.set(i,c),c}function pt(t,e,n){var r;let i=null!==(r=ct[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ot.warn(t.join(" "))}dt(new x(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const yt="firebase-heartbeat-store";let vt=null;function At(){return vt||(vt=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Y(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(Y(o.result),t.oldVersion,t.newVersion,Y(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(yt)}}).catch((t=>{throw ft.create("idb-open",{originalErrorMessage:t.message})}))),vt}async function wt(t,e){try{const n=(await At()).transaction(yt,"readwrite"),r=n.objectStore(yt);return await r.put(e,bt(t)),n.done}catch(t){if(t instanceof E)ot.warn(t.message);else{const e=ft.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});ot.warn(e.message)}}}function bt(t){return`${t.name}!${t.options.appId}`}class Ct{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Tt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Et();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Et(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),It(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),It(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=w(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Et(){return(new Date).toISOString().substring(0,10)}class Tt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){return await this._canUseIndexedDBPromise&&await async function(t){try{return(await At()).transaction(yt).objectStore(yt).get(bt(t))}catch(t){if(t instanceof E)ot.warn(t.message);else{const e=ft.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});ot.warn(e.message)}}}(this.app)||{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function It(t){return w(JSON.stringify({version:2,heartbeats:t})).length}dt(new x("platform-logger",(t=>new rt(t)),"PRIVATE")),dt(new x("heartbeat",(t=>new Ct(t)),"PRIVATE")),pt(it,st,""),pt(it,st,"esm2017"),pt("fire-js",""),pt("firebase","9.21.0","app");var kt,St="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dt={},xt=xt||{},_t=St||self;function Nt(){}function Bt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Mt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Lt="closure_uid_"+(1e9*Math.random()>>>0),Rt=0;function Ot(t,e,n){return t.call.apply(t.bind,arguments)}function Pt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ft(t,e,n){return(Ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ot:Pt).apply(null,arguments)}function Ut(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Vt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function jt(){this.s=this.s,this.o=this.o}jt.prototype.s=!1,jt.prototype.ra=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Lt)&&t[Lt]||(t[Lt]=++Rt))},jt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function zt(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function $t(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Bt(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function Ht(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var Wt=function(){if(!_t.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_t.addEventListener("test",Nt,e),_t.removeEventListener("test",Nt,e)}catch(t){}return t}();function Gt(t){return/^[\s\xa0]*$/.test(t)}var Kt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Qt(t,e){return t<e?-1:t>e?1:0}function Yt(){var t=_t.navigator;return t&&(t=t.userAgent)?t:""}function Xt(t){return-1!=Yt().indexOf(t)}function Jt(t){return Jt[" "](t),t}function Zt(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}Jt[" "]=Nt;var te,ee,ne=Xt("Opera"),re=Xt("Trident")||Xt("MSIE"),ie=Xt("Edge"),se=ie||re,oe=Xt("Gecko")&&!(-1!=Yt().toLowerCase().indexOf("webkit")&&!Xt("Edge"))&&!(Xt("Trident")||Xt("MSIE"))&&!Xt("Edge"),ae=-1!=Yt().toLowerCase().indexOf("webkit")&&!Xt("Edge");function ce(){var t=_t.document;return t?t.documentMode:void 0}t:{var ue="",le=(ee=Yt(),oe?/rv:([^\);]+)(\)|;)/.exec(ee):ie?/Edge\/([\d\.]+)/.exec(ee):re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ee):ae?/WebKit\/(\S+)/.exec(ee):ne?/(?:Version)[ \/]?(\S+)/.exec(ee):void 0);if(le&&(ue=le?le[1]:""),re){var he=ce();if(null!=he&&he>parseFloat(ue)){te=String(he);break t}}te=ue}var de,fe={};_t.document&&re?de=ce()||parseInt(te,10)||void 0:de=void 0;var ge=de;function me(t,e){if(Ht.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(oe){t:{try{Jt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:pe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&me.$.h.call(this)}}Vt(me,Ht);var pe={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Ae(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++ve,this.fa=this.ia=!1}function we(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function be(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Ce(t){const e={};for(const n in t)e[n]=t[n];return e}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<Ee.length;e++)n=Ee[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ie(t){this.src=t,this.g={},this.h=0}function ke(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=qt(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(we(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Se(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Ie.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Se(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Ae(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var De="closure_lm_"+(1e6*Math.random()|0),xe={};function _e(t,e,n,r,i){if(r&&r.once)return Be(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)_e(t,e[s],n,r,i);return null}return n=Ue(n),t&&t[ye]?t.O(e,n,Mt(r)?!!r.capture:!!r,i):Ne(t,e,n,!1,r,i)}function Ne(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Mt(i)?!!i.capture:!!i,a=Pe(t);if(a||(t[De]=a=new Ie(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){const t=Oe;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Wt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Re(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Be(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Be(t,e[s],n,r,i);return null}return n=Ue(n),t&&t[ye]?t.P(e,n,Mt(r)?!!r.capture:!!r,i):Ne(t,e,n,!0,r,i)}function Me(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Me(t,e[s],n,r,i);else r=Mt(r)?!!r.capture:!!r,n=Ue(n),t&&t[ye]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Se(s=t.g[e],n,r,i))&&(we(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Pe(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Se(e,n,r,i)),(n=-1<t?e[t]:null)&&Le(n))}function Le(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ye])ke(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Re(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Pe(e))?(ke(n,t),0==n.h&&(n.src=null,e[De]=null)):we(t)}}}function Re(t){return t in xe?xe[t]:xe[t]="on"+t}function Oe(t,e){if(t.fa)t=!0;else{e=new me(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Le(t),t=n.call(r,e)}return t}function Pe(t){return(t=t[De])instanceof Ie?t:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(t){return"function"==typeof t?t:(t[Fe]||(t[Fe]=function(e){return t.handleEvent(e)}),t[Fe])}function Ve(){jt.call(this),this.i=new Ie(this),this.S=this,this.J=null}function je(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Ht(e,t);else if(e instanceof Ht)e.target=e.target||t;else{var i=e;Te(e=new Ht(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=qe(o,r,!0,e)&&i}if(i=qe(o=e.g=t,r,!0,e)&&i,i=qe(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=qe(o=e.g=n[s],r,!1,e)&&i}function qe(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ke(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Vt(Ve,jt),Ve.prototype[ye]=!0,Ve.prototype.removeEventListener=function(t,e,n,r){Me(this,t,e,n,r)},Ve.prototype.N=function(){if(Ve.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)we(n[r]);delete e.g[t],e.h--}}this.J=null},Ve.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ve.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ze=_t.JSON.stringify;function $e(){var t=Xe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var He,We=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Ge),(t=>t.reset()));class Ge{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Ke(t){_t.setTimeout((()=>{throw t}),0)}function Qe(t,e){He||function(){var t=_t.Promise.resolve(void 0);He=function(){t.then(Je)}}(),Ye||(He(),Ye=!0),Xe.add(t,e)}var Ye=!1,Xe=new class{constructor(){this.h=this.g=null}add(t,e){const n=We.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Je(){for(var t;t=$e();){try{t.h.call(t.g)}catch(t){Ke(t)}var e=We;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ye=!1}function Ze(t,e){Ve.call(this),this.h=t||1,this.g=e||_t,this.j=Ft(this.qb,this),this.l=Date.now()}function tn(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function en(t,e,n){if("function"==typeof t)n&&(t=Ft(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ft(t.handleEvent,t)}return 2147483647<Number(e)?-1:_t.setTimeout(t,e||0)}function nn(t){t.g=en((()=>{t.g=null,t.i&&(t.i=!1,nn(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Vt(Ze,Ve),(kt=Ze.prototype).ga=!1,kt.T=null,kt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),je(this,"tick"),this.ga&&(tn(this),this.start()))}},kt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.N=function(){Ze.$.N.call(this),tn(this),delete this.g};class rn extends jt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:nn(this)}N(){super.N(),this.g&&(_t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(t){jt.call(this),this.h=t,this.g={}}Vt(sn,jt);var on=[];function an(t,e,n,r){Array.isArray(n)||(n&&(on[0]=n.toString()),n=on);for(var i=0;i<n.length;i++){var s=_e(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function cn(t){be(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Le(t)}),t),t.g={}}function un(){this.g=!0}function ln(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ze(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}sn.prototype.N=function(){sn.$.N.call(this),cn(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},un.prototype.Ea=function(){this.g=!1},un.prototype.info=function(){};var hn={},dn=null;function fn(){return dn=dn||new Ve}function gn(t){Ht.call(this,hn.Ta,t)}function mn(t){const e=fn();je(e,new gn(e))}function pn(t,e){Ht.call(this,hn.STAT_EVENT,t),this.stat=e}function yn(t){const e=fn();je(e,new pn(e,t))}function vn(t,e){Ht.call(this,hn.Ua,t),this.size=e}function An(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return _t.setTimeout((function(){t()}),e)}hn.Ta="serverreachability",Vt(gn,Ht),hn.STAT_EVENT="statevent",Vt(pn,Ht),hn.Ua="timingevent",Vt(vn,Ht);var wn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},bn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Cn(){}function En(t){return t.h||(t.h=t.i())}function Tn(){}Cn.prototype.h=null;var In,kn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sn(){Ht.call(this,"d")}function Dn(){Ht.call(this,"c")}function xn(){}function _n(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new sn(this),this.P=Bn,t=se?125:void 0,this.V=new Ze(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Nn}function Nn(){this.i=null,this.g="",this.h=!1}Vt(Sn,Ht),Vt(Dn,Ht),Vt(xn,Cn),xn.prototype.g=function(){return new XMLHttpRequest},xn.prototype.i=function(){return{}},In=new xn;var Bn=45e3,Mn={},Ln={};function Rn(t,e,n){t.L=1,t.v=tr(Qn(e)),t.s=n,t.S=!0,On(t,null)}function On(t,e){t.G=Date.now(),Vn(t),t.A=Qn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),fr(n.i,"t",r),t.C=0,n=t.l.I,t.h=new Nn,t.g=di(t.l,n?e:null,!t.s),0<t.O&&(t.M=new rn(Ft(t.Pa,t,t.g),t.O)),an(t.U,t.g,"readystatechange",t.nb),e=t.I?Ce(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),mn(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function Pn(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function Fn(t,e,n){let r,i=!0;for(;!t.J&&t.C<n.length;){if(r=Un(t,n),r==Ln){4==e&&(t.o=4,yn(14),i=!1),ln(t.j,t.m,null,"[Incomplete Response]");break}if(r==Mn){t.o=4,yn(15),ln(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ln(t.j,t.m,r,null),Hn(t,r)}Pn(t)&&r!=Ln&&r!=Mn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,yn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ca&&(t.ca=!0,(e=t.l).g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ii(e),e.L=!0,yn(11))):(ln(t.j,t.m,n,"[Invalid Chunked Response]"),$n(t),zn(t))}function Un(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ln:(n=Number(e.substring(n,r)),isNaN(n)?Mn:(r+=1)+n>e.length?Ln:(e=e.substr(r,n),t.C=r+n,e))}function Vn(t){t.Y=Date.now()+t.P,jn(t,t.P)}function jn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=An(Ft(t.lb,t),e)}function qn(t){t.B&&(_t.clearTimeout(t.B),t.B=null)}function zn(t){0==t.l.H||t.J||ai(t.l,t)}function $n(t){qn(t);var e=t.M;e&&"function"==typeof e.ra&&e.ra(),t.M=null,tn(t.V),cn(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Hn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Ar(n.h,t)))if(!t.K&&Ar(n.h,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;oi(n),Yr(n)}ri(n),yn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=An(Ft(n.ib,n),6e3));if(1>=vr(n.h)&&n.na){try{n.na()}catch(t){}n.na=void 0}}else ui(n,11)}else if((t.K||n.g==t)&&oi(n),!Gt(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.J=u[1],n.oa=u[2];const e=u[3];null!=e&&(n.qa=e,n.j.info("VER="+n.qa));const i=u[4];null!=i&&(n.Ga=i,n.j.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(wr(s,s.h),s.h=null))}if(r.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,Zn(r.G,r.F,t))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=hi(r,r.I?r.oa:null,r.Y),o.K){br(r.h,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(qn(a),Vn(a)),r.g=o}else ni(r);0<n.i.length&&Jr(n)}else"stop"!=u[0]&&"close"!=u[0]||ui(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ui(n,7):Qr(n):"noop"!=u[0]&&n.l&&n.l.Aa(u),n.A=0)}mn()}catch(t){}}function Wn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.sa&&"function"==typeof t.sa)return t.sa();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Bt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Bt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(kt=_n.prototype).setTimeout=function(t){this.P=t},kt.nb=function(t){t=t.target;const e=this.M;e&&3==zr(t)?e.l():this.Pa(t)},kt.Pa=function(t){try{if(t==this.g)t:{const l=zr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||se||this.g&&(this.h.h||this.g.ja()||$r(this.g)))){this.J||4!=l||7==e||mn(),qn(this);var n=this.g.da();this.aa=n;e:if(Pn(this)){var r=$r(this.g);t="";var i=r.length,s=4==zr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$n(this),zn(this);var o="";break e}this.h.i=new _t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.ba&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gt(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,yn(12),$n(this),zn(this);break t}ln(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hn(this,n)}this.S?(Fn(this,l,o),se&&this.i&&3==l&&(an(this.U,this.V,"tick",this.mb),this.V.start())):(ln(this.j,this.m,o,null),Hn(this,o)),4==l&&$n(this),this.i&&!this.J&&(4==l?ai(this.l,this):(this.i=!1,Vn(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,yn(12)):(this.o=0,yn(13)),$n(this),zn(this)}}}catch(t){}},kt.mb=function(){if(this.g){var t=zr(this.g),e=this.g.ja();this.C<e.length&&(qn(this),Fn(this,t,e),this.i&&4!=t&&Vn(this))}},kt.cancel=function(){this.J=!0,$n(this)},kt.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(mn(),yn(17)),$n(this),this.o=2,zn(this)):jn(this,this.Y-t)};var Gn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Kn){this.h=void 0!==e?e:t.h,Yn(this,t.j),this.s=t.s,this.g=t.g,Xn(this,t.m),this.l=t.l,e=t.i;var n=new ur;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Jn(this,n),this.o=t.o}else t&&(n=String(t).match(Gn))?(this.h=!!e,Yn(this,n[1]||"",!0),this.s=er(n[2]||""),this.g=er(n[3]||"",!0),Xn(this,n[4]),this.l=er(n[5]||"",!0),Jn(this,n[6]||"",!0),this.o=er(n[7]||"")):(this.h=!!e,this.i=new ur(null,this.h))}function Qn(t){return new Kn(t)}function Yn(t,e,n){t.j=n?er(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Jn(t,e,n){e instanceof ur?(t.i=e,function(t,e){e&&!t.j&&(lr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(hr(this,e),fr(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=nr(e,ar)),t.i=new ur(e,t.h))}function Zn(t,e,n){t.i.set(e,n)}function tr(t){return Zn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function er(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,rr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Kn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(nr(e,ir,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(nr(e,ir,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(nr(n,"/"==n.charAt(0)?or:sr,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",nr(n,cr)),t.join("")};var ir=/[#\/\?@]/g,sr=/[#\?:]/g,or=/[#\?]/g,ar=/[#\?@]/g,cr=/#/g;function ur(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function lr(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function hr(t,e){lr(t),e=gr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function dr(t,e){return lr(t),e=gr(t,e),t.g.has(e)}function fr(t,e,n){hr(t,e),0<n.length&&(t.i=null,t.g.set(gr(t,e),zt(n)),t.h+=n.length)}function gr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function mr(t){this.l=t||pr,t=_t.PerformanceNavigationTiming?0<(t=_t.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(_t.g&&_t.g.Ka&&_t.g.Ka()&&_t.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=ur.prototype).add=function(t,e){lr(this),this.i=null,t=gr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},kt.forEach=function(t,e){lr(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},kt.sa=function(){lr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},kt.Z=function(t){lr(this);let e=[];if("string"==typeof t)dr(this,t)&&(e=e.concat(this.g.get(gr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},kt.set=function(t,e){return lr(this),this.i=null,dr(this,t=gr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},kt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var pr=10;function yr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function vr(t){return t.h?1:t.g?t.g.size:0}function Ar(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function wr(t,e){t.g?t.g.add(e):t.h=e}function br(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Cr(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return zt(t.i)}function Er(){}function Tr(){this.g=new Er}function Ir(t,e,n){const r=n||"";try{Wn(t,(function(t,n){let i=t;Mt(t)&&(i=ze(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function kr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Sr(t){this.l=t.fc||null,this.j=t.ob||!1}function Dr(t,e){Ve.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=xr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mr.prototype.cancel=function(){if(this.i=Cr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Er.prototype.stringify=function(t){return _t.JSON.stringify(t,void 0)},Er.prototype.parse=function(t){return _t.JSON.parse(t,void 0)},Vt(Sr,Cn),Sr.prototype.g=function(){return new Dr(this.l,this.j)},Sr.prototype.i=function(t){return function(){return t}}({}),Vt(Dr,Ve);var xr=0;function _r(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Nr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Br(t)}function Br(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(kt=Dr.prototype).open=function(t,e){if(this.readyState!=xr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Br(this)},kt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||_t).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nr(this)),this.readyState=xr},kt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==_t.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_r(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},kt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nr(this):Br(this),3==this.readyState&&_r(this)}},kt.Za=function(t){this.g&&(this.response=this.responseText=t,Nr(this))},kt.Ya=function(t){this.g&&(this.response=t,Nr(this))},kt.ka=function(){this.g&&Nr(this)},kt.setRequestHeader=function(t,e){this.v.append(t,e)},kt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Mr=_t.JSON.parse;function Lr(t){Ve.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Rr,this.L=this.M=!1}Vt(Lr,Ve);var Rr="",Or=/^https?$/i,Pr=["POST","PUT"];function Fr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ur(t),jr(t)}function Ur(t){t.F||(t.F=!0,je(t,"complete"),je(t,"error"))}function Vr(t){if(t.h&&void 0!==xt&&(!t.C[1]||4!=zr(t)||2!=t.da()))if(t.v&&4==zr(t))en(t.La,0,t);else if(je(t,"readystatechange"),4==zr(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.I).match(Gn)[1]||null;if(!i&&_t.self&&_t.self.location){var s=_t.self.location.protocol;i=s.substr(0,s.length-1)}r=!Or.test(i?i.toLowerCase():"")}n=r}if(n)je(t,"complete"),je(t,"success");else{t.m=6;try{var o=2<zr(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.da()+"]",Ur(t)}}finally{jr(t)}}}function jr(t,e){if(t.g){qr(t);const n=t.g,r=t.C[0]?Nt:null;t.g=null,t.C=null,e||je(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function qr(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(_t.clearTimeout(t.A),t.A=null)}function zr(t){return t.g?t.g.readyState:0}function $r(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Rr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Hr(t){let e="";return be(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Wr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Hr(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Zn(t,e,n))}function Gr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Kr(t){this.Ga=0,this.i=[],this.j=new un,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gr("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gr("baseRetryDelayMs",5e3,t),this.hb=Gr("retryDelaySeedMs",1e4,t),this.eb=Gr("forwardChannelMaxRetries",2,t),this.xa=Gr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new mr(t&&t.concurrentRequestLimit),this.Ja=new Tr,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Qr(t){if(Xr(t),3==t.H){var e=t.W++,n=Qn(t.G);Zn(n,"SID",t.J),Zn(n,"RID",e),Zn(n,"TYPE","terminate"),ti(t,n),(e=new _n(t,t.j,e,void 0)).L=2,e.v=tr(Qn(n)),n=!1,_t.navigator&&_t.navigator.sendBeacon&&(n=_t.navigator.sendBeacon(e.v.toString(),"")),!n&&_t.Image&&((new Image).src=e.v,n=!0),n||(e.g=di(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Vn(e)}li(t)}function Yr(t){t.g&&(ii(t),t.g.cancel(),t.g=null)}function Xr(t){Yr(t),t.u&&(_t.clearTimeout(t.u),t.u=null),oi(t),t.h.cancel(),t.m&&("number"==typeof t.m&&_t.clearTimeout(t.m),t.m=null)}function Jr(t){yr(t.h)||t.m||(t.m=!0,Qe(t.Na,t),t.C=0)}function Zr(t,e){var n;n=e?e.m:t.W++;const r=Qn(t.G);Zn(r,"SID",t.J),Zn(r,"RID",n),Zn(r,"AID",t.V),ti(t,r),t.o&&t.s&&Wr(r,t.o,t.s),n=new _n(t,t.j,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=ei(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),wr(t.h,n),Rn(n,r,e)}function ti(t,e){t.ma&&be(t.ma,(function(t,n){Zn(e,n,t)})),t.l&&Wn({},(function(t,n){Zn(e,n,t)}))}function ei(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Ft(t.l.Va,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{Ir(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.F=t,r}function ni(t){t.g||t.u||(t.ba=1,Qe(t.Ma,t),t.A=0)}function ri(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=An(Ft(t.Ma,t),ci(t,t.A)),t.A++,0))}function ii(t){null!=t.B&&(_t.clearTimeout(t.B),t.B=null)}function si(t){t.g=new _n(t,t.j,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Qn(t.wa);Zn(e,"RID","rpc"),Zn(e,"SID",t.J),Zn(e,"CI",t.M?"0":"1"),Zn(e,"AID",t.V),Zn(e,"TYPE","xmlhttp"),ti(t,e),t.o&&t.s&&Wr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=tr(Qn(e)),n.s=null,n.S=!0,On(n,t)}function oi(t){null!=t.v&&(_t.clearTimeout(t.v),t.v=null)}function ai(t,e){var n=null;if(t.g==e){oi(t),ii(t),t.g=null;var r=2}else{if(!Ar(t.h,e))return;n=e.F,br(t.h,e),r=1}if(0!=t.H)if(t.ta=e.aa,e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;je(r=fn(),new vn(r,n)),Jr(t)}else ni(t);else if(3==(i=e.o)||0==i&&0<t.ta||!(1==r&&function(t,e){return!(vr(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.F.concat(t.i),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=An(Ft(t.Na,t,e),ci(t,t.C)),t.C++,0)))}(t,e)||2==r&&ri(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:ui(t,5);break;case 4:ui(t,10);break;case 3:ui(t,6);break;default:ui(t,2)}}function ci(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function ui(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var r=Ft(t.pb,t);n||(n=new Kn("//www.google.com/images/cleardot.gif"),_t.location&&"http"==_t.location.protocol||Yn(n,"https"),tr(n)),function(t,e){const n=new un;if(_t.Image){const r=new Image;r.onload=Ut(kr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ut(kr,n,r,"TestLoadImage: error",!1,e),r.onabort=Ut(kr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ut(kr,n,r,"TestLoadImage: timeout",!1,e),_t.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else yn(2);t.H=0,t.l&&t.l.za(e),li(t),Xr(t)}function li(t){if(t.H=0,t.pa=[],t.l){const e=Cr(t.h);0==e.length&&0==t.i.length||($t(t.pa,e),$t(t.pa,t.i),t.h.i.length=0,zt(t.i),t.i.length=0),t.l.ya()}}function hi(t,e,n){var r=n instanceof Kn?Qn(n):new Kn(n,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Xn(r,r.m);else{var i=_t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Kn(null,void 0);r&&Yn(s,r),e&&(s.g=e),i&&Xn(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Zn(r,n,e),Zn(r,"VER",t.qa),ti(t,r),r}function di(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new Lr(new Sr({ob:!0})):new Lr(t.va)).Oa(t.I),e}function fi(){}function gi(){if(re&&!(10<=Number(ge)))throw Error("Environmental error: no available transport.")}function mi(t,e){Ve.call(this),this.g=new Kr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Gt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gt(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new vi(this)}function pi(t){Sn.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function yi(){Dn.call(this),this.status=1}function vi(t){this.g=t}function Ai(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wi(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function bi(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(kt=Lr.prototype).Oa=function(t){this.M=t},kt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():In.g(),this.C=this.u?En(this.u):En(In),this.g.onreadystatechange=Ft(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Fr(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=_t.FormData&&t instanceof _t.FormData,!(0<=qt(Pr,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qr(this),0<this.B&&((this.L=function(t){return re&&Zt(fe,9,(function(){let t=0;const e=Kt(String(te)).split("."),n=Kt("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=Qt(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Qt(0==i[2].length,0==s[2].length)||Qt(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}))&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.ua,this)):this.A=en(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Fr(this,t)}},kt.ua=function(){void 0!==xt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,je(this,"timeout"),this.abort(8))},kt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,je(this,"complete"),je(this,"abort"),jr(this))},kt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jr(this,!0)),Lr.$.N.call(this)},kt.La=function(){this.s||(this.G||this.v||this.l?Vr(this):this.kb())},kt.kb=function(){Vr(this)},kt.da=function(){try{return 2<zr(this)?this.g.status:-1}catch(t){return-1}},kt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},kt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Mr(e)}},kt.Ia=function(){return this.m},kt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=Kr.prototype).qa=8,kt.H=1,kt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new _n(this,this.j,t,void 0);let s=this.s;if(this.U&&(s?(s=Ce(s),Te(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ei(this,i,e),Zn(n=Qn(this.G),"RID",t),Zn(n,"CVER",22),this.F&&Zn(n,"X-HTTP-Session-Id",this.F),ti(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Hr(s)))+"&"+e:this.o&&Wr(n,this.o,s)),wr(this.h,i),this.bb&&Zn(n,"TYPE","init"),this.P?(Zn(n,"$req",e),Zn(n,"SID","null"),i.ba=!0,Rn(i,n,null)):Rn(i,n,e),this.H=2}}else 3==this.H&&(t?Zr(this,t):0==this.i.length||yr(this.h)||Zr(this))},kt.Ma=function(){if(this.u=null,si(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=An(Ft(this.jb,this),t)}},kt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,yn(10),Yr(this),si(this))},kt.ib=function(){null!=this.v&&(this.v=null,Yr(this),ri(this),yn(19))},kt.pb=function(t){t?(this.j.info("Successfully pinged google.com"),yn(2)):(this.j.info("Failed to ping google.com"),yn(1))},(kt=fi.prototype).Ba=function(){},kt.Aa=function(){},kt.za=function(){},kt.ya=function(){},kt.Va=function(){},gi.prototype.g=function(t,e){return new mi(t,e)},Vt(mi,Ve),mi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;yn(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=hi(t,null,t.Y),Jr(t)},mi.prototype.close=function(){Qr(this.g)},mi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=ze(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.fb++,t)),3==e.H&&Jr(e)},mi.prototype.N=function(){this.g.l=null,delete this.j,Qr(this.g),delete this.g,mi.$.N.call(this)},Vt(pi,Sn),Vt(yi,Dn),Vt(vi,fi),vi.prototype.Ba=function(){je(this.g,"a")},vi.prototype.Aa=function(t){je(this.g,new pi(t))},vi.prototype.za=function(t){je(this.g,new yi)},vi.prototype.ya=function(){je(this.g,"b")},Vt(Ai,(function(){this.blockSize=-1})),Ai.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ai.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)wi(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){wi(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){wi(this,r),i=0;break}}this.h=i,this.i+=e},Ai.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Ci={};function Ei(t){return-128<=t&&128>t?Zt(Ci,t,(function(t){return new bi([0|t],0>t?-1:0)})):new bi([0|t],0>t?-1:0)}function Ti(t){if(isNaN(t)||!isFinite(t))return ki;if(0>t)return Ni(Ti(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ii;return new bi(e,0)}var Ii=4294967296,ki=Ei(0),Si=Ei(1),Di=Ei(16777216);function xi(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function _i(t){return-1==t.h}function Ni(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new bi(n,~t.h).add(Si)}function Bi(t,e){return t.add(Ni(e))}function Mi(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Li(t,e){this.g=t,this.h=e}function Ri(t,e){if(xi(e))throw Error("division by zero");if(xi(t))return new Li(ki,ki);if(_i(t))return e=Ri(Ni(t),e),new Li(Ni(e.g),Ni(e.h));if(_i(e))return e=Ri(t,Ni(e)),new Li(Ni(e.g),e.h);if(30<t.g.length){if(_i(t)||_i(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Si,r=e;0>=r.X(t);)n=Oi(n),r=Oi(r);var i=Pi(n,1),s=Pi(r,1);for(r=Pi(r,2),n=Pi(n,2);!xi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Pi(r,1),n=Pi(n,1)}return e=Bi(t,i.R(e)),new Li(i,e)}for(i=ki;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ti(n)).R(e);_i(o)||0<o.X(t);)o=(s=Ti(n-=r)).R(e);xi(s)&&(s=Si),i=i.add(s),t=Bi(t,o)}return new Li(i,t)}function Oi(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new bi(n,t.h)}function Pi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new bi(i,t.h)}(kt=bi.prototype).ea=function(){if(_i(this))return-Ni(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ii+r)*e,e*=Ii}return t},kt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(xi(this))return"0";if(_i(this))return"-"+Ni(this).toString(t);for(var e=Ti(Math.pow(t,6)),n=this,r="";;){var i=Ri(n,e).g,s=((0<(n=Bi(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(xi(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},kt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},kt.X=function(t){return _i(t=Bi(this,t))?-1:xi(t)?0:1},kt.abs=function(){return _i(this)?Ni(this):this},kt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new bi(n,-2147483648&n[n.length-1]?-1:0)},kt.R=function(t){if(xi(this)||xi(t))return ki;if(_i(this))return _i(t)?Ni(this).R(Ni(t)):Ni(Ni(this).R(t));if(_i(t))return Ni(this.R(Ni(t)));if(0>this.X(Di)&&0>t.X(Di))return Ti(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,c=65535&t.D(i);n[2*r+2*i]+=o*c,Mi(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Mi(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Mi(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Mi(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new bi(n,0)},kt.gb=function(t){return Ri(this,t).h},kt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new bi(n,this.h&t.h)},kt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new bi(n,this.h|t.h)},kt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new bi(n,this.h^t.h)},gi.prototype.createWebChannel=gi.prototype.g,mi.prototype.send=mi.prototype.u,mi.prototype.open=mi.prototype.m,mi.prototype.close=mi.prototype.close,wn.NO_ERROR=0,wn.TIMEOUT=8,wn.HTTP_ERROR=6,bn.COMPLETE="complete",Tn.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.O,Lr.prototype.listenOnce=Lr.prototype.P,Lr.prototype.getLastError=Lr.prototype.Sa,Lr.prototype.getLastErrorCode=Lr.prototype.Ia,Lr.prototype.getStatus=Lr.prototype.da,Lr.prototype.getResponseJson=Lr.prototype.Wa,Lr.prototype.getResponseText=Lr.prototype.ja,Lr.prototype.send=Lr.prototype.ha,Lr.prototype.setWithCredentials=Lr.prototype.Oa,Ai.prototype.digest=Ai.prototype.l,Ai.prototype.reset=Ai.prototype.reset,Ai.prototype.update=Ai.prototype.j,bi.prototype.add=bi.prototype.add,bi.prototype.multiply=bi.prototype.R,bi.prototype.modulo=bi.prototype.gb,bi.prototype.compare=bi.prototype.X,bi.prototype.toNumber=bi.prototype.ea,bi.prototype.toString=bi.prototype.toString,bi.prototype.getBits=bi.prototype.D,bi.fromNumber=Ti,bi.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Ni(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ti(Math.pow(n,8)),i=ki,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Ti(Math.pow(n,o)),i=i.R(o).add(Ti(a))):i=(i=i.R(r)).add(Ti(a))}return i};var Fi=Dt.createWebChannelTransport=function(){return new gi},Ui=Dt.getStatEventTarget=function(){return fn()},Vi=Dt.ErrorCode=wn,ji=Dt.EventType=bn,qi=Dt.Event=hn,zi=Dt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$i=Dt.FetchXmlHttpFactory=Sr,Hi=Dt.WebChannel=Tn,Wi=Dt.XhrIo=Lr,Gi=Dt.Md5=Ai,Ki=Dt.Integer=bi;const Qi="@firebase/firestore";class Yi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");let Xi="9.21.0";const Ji=new V("@firebase/firestore");function Zi(){return Ji.logLevel}function ts(t,...e){if(Ji.logLevel<=L.DEBUG){const n=e.map(rs);Ji.debug(`Firestore (${Xi}): ${t}`,...n)}}function es(t,...e){if(Ji.logLevel<=L.ERROR){const n=e.map(rs);Ji.error(`Firestore (${Xi}): ${t}`,...n)}}function ns(t,...e){if(Ji.logLevel<=L.WARN){const n=e.map(rs);Ji.warn(`Firestore (${Xi}): ${t}`,...n)}}function rs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function is(t="Unexpected state"){const e=`FIRESTORE (${Xi}) INTERNAL ASSERTION FAILED: `+t;throw es(e),new Error(e)}function ss(t,e){t||is()}function os(t,e){return t}const as={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cs extends E{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class us{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ls{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Yi.UNAUTHENTICATED)))}shutdown(){}}class ds{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class fs{constructor(t){this.t=t,this.currentUser=Yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new us;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new us,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{ts("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ts("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new us)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ts("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ss("string"==typeof e.accessToken),new ls(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ss(null===t||"string"==typeof t),new Yi(t)}}class gs{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=Yi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ms{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new gs(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Yi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ps{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ys{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=t=>{null!=t.error&&ts("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.T;return this.T=t.token,ts("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{ts("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.I.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.I.getImmediate({optional:!0});t?r(t):ts("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ss("string"==typeof t.token),this.T=t.token,new ps(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vs(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class As{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=vs(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function ws(t,e){return t<e?-1:t>e?1:0}function bs(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class Cs{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new cs(as.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new cs(as.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new cs(as.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new cs(as.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Cs.fromMillis(Date.now())}static fromDate(t){return Cs.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Cs(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ws(this.nanoseconds,t.nanoseconds):ws(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Es{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Es(t)}static min(){return new Es(new Cs(0,0))}static max(){return new Es(new Cs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ts{constructor(t,e,n){void 0===e?e=0:e>t.length&&is(),void 0===n?n=t.length-e:n>t.length-e&&is(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Ts.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ts?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Is extends Ts{construct(t,e,n){return new Is(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new cs(as.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Is(e)}static emptyPath(){return new Is([])}}const ks=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ss extends Ts{construct(t,e,n){return new Ss(t,e,n)}static isValidIdentifier(t){return ks.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ss.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ss(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new cs(as.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new cs(as.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new cs(as.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new cs(as.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ss(e)}static emptyPath(){return new Ss([])}}class Ds{constructor(t){this.path=t}static fromPath(t){return new Ds(Is.fromString(t))}static fromName(t){return new Ds(Is.fromString(t).popFirst(5))}static empty(){return new Ds(Is.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Is.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Is.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ds(new Is(t.slice()))}}function xs(t){return new _s(t.readTime,t.key,-1)}class _s{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new _s(Es.min(),Ds.empty(),-1)}static max(){return new _s(Es.max(),Ds.empty(),-1)}}function Ns(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ds.comparator(t.documentKey,e.documentKey),0!==n?n:ws(t.largestBatchId,e.largestBatchId))}class Bs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ms(t){if(t.code!==as.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;ts("LocalStore","Unexpectedly lost primary lease")}class Ls{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&is(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ls(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ls?e:Ls.resolve(e)}catch(t){return Ls.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ls.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ls.reject(e)}static resolve(t){return new Ls(((e,n)=>{e(t)}))}static reject(t){return new Ls(((e,n)=>{n(t)}))}static waitFor(t){return new Ls(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=Ls.resolve(!1);for(const n of t)e=e.next((t=>t?Ls.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new Ls(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new Ls(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function Rs(t){return"IndexedDbTransactionError"===t.name}class Os{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ot(t),this.ut=t=>e.writeSequenceNumber(t))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}function Ps(t){return null==t}function Fs(t){return 0===t&&1/t==-1/0}Os.ct=-1;function Us(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function js(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qs{constructor(t,e){this.comparator=t,this.root=e||$s.EMPTY}insert(t,e){return new qs(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(t){return new qs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$s.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zs(this.root,t,this.comparator,!1)}getReverseIterator(){return new zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zs(this.root,t,this.comparator,!0)}}class zs{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $s{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:$s.RED,this.left=null!=r?r:$s.EMPTY,this.right=null!=i?i:$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new $s(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return $s.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw is();if(this.right.isRed())throw is();const t=this.left.check();if(t!==this.right.check())throw is();return t+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw is()}get value(){throw is()}get color(){throw is()}get left(){throw is()}get right(){throw is()}copy(t,e,n,r,i){return this}insert(t,e,n){return new $s(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hs{constructor(t){this.comparator=t,this.data=new qs(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ws(this.data.getIterator())}getIteratorFrom(t){return new Ws(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Hs))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Hs(this.comparator);return e.data=t,e}}class Ws{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gs{constructor(t){this.fields=t,t.sort(Ss.comparator)}static empty(){return new Gs([])}unionWith(t){let e=new Hs(Ss.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Gs(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return bs(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Ks extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qs{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ks("Invalid base64 string: "+t):t}}(t);return new Qs(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Qs(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ws(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qs.EMPTY_BYTE_STRING=new Qs("");const Ys=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(t){if(ss(!!t),"string"==typeof t){let e=0;const n=Ys.exec(t);if(ss(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Js(t.seconds),nanos:Js(t.nanos)}}function Js(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zs(t){return"string"==typeof t?Qs.fromBase64String(t):Qs.fromUint8Array(t)}function to(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eo(t){const e=t.mapValue.fields.__previous_value__;return to(e)?eo(e):e}function no(t){const e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new Cs(e.seconds,e.nanos)}class ro{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class io{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof io&&t.projectId===this.projectId&&t.database===this.database}}const so={fields:{__type__:{stringValue:"__max__"}}};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?to(t)?4:wo(t)?9007199254740991:10:is()}function ao(t,e){if(t===e)return!0;const n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return no(t).isEqual(no(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Xs(t.timestampValue),r=Xs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zs(t.bytesValue).isEqual(Zs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Js(t.geoPointValue.latitude)===Js(e.geoPointValue.latitude)&&Js(t.geoPointValue.longitude)===Js(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Js(t.integerValue)===Js(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Js(t.doubleValue),r=Js(e.doubleValue);return n===r?Fs(n)===Fs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Us(n)!==Us(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!ao(n[t],r[t])))return!1;return!0}(t,e);default:return is()}}function co(t,e){return void 0!==(t.values||[]).find((t=>ao(t,e)))}function uo(t,e){if(t===e)return 0;const n=oo(t),r=oo(e);if(n!==r)return ws(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ws(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Js(t.integerValue||t.doubleValue),r=Js(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return lo(t.timestampValue,e.timestampValue);case 4:return lo(no(t),no(e));case 5:return ws(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Zs(t),r=Zs(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=ws(n[t],r[t]);if(0!==e)return e}return ws(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=ws(Js(t.latitude),Js(e.latitude));return 0!==n?n:ws(Js(t.longitude),Js(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=uo(n[t],r[t]);if(e)return e}return ws(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===so&&e===so)return 0;if(t===so)return 1;if(e===so)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=ws(r[t],s[t]);if(0!==e)return e;const o=uo(n[r[t]],i[s[t]]);if(0!==o)return o}return ws(r.length,s.length)}(t.mapValue,e.mapValue);default:throw is()}}function lo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ws(t,e);const n=Xs(t),r=Xs(e),i=ws(n.seconds,r.seconds);return 0!==i?i:ws(n.nanos,r.nanos)}function ho(t){return fo(t)}function fo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Xs(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ds.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=fo(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${fo(t.fields[i])}`;return n+"}"}(t.mapValue):is();var e,n}function go(t){return!!t&&"integerValue"in t}function mo(t){return!!t&&"arrayValue"in t}function po(t){return!!t&&"nullValue"in t}function yo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vo(t){return!!t&&"mapValue"in t}function Ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ao(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class bo{constructor(t){this.value=t}static empty(){return new bo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!vo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ao(e)}setAll(t){let e=Ss.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Ao(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());vo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ao(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];vo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Vs(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new bo(Ao(this.value))}}function Co(t){const e=[];return Vs(t.fields,((t,n)=>{const r=new Ss([t]);if(vo(n)){const t=Co(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new Gs(e)}class Eo{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Eo(t,0,Es.min(),Es.min(),Es.min(),bo.empty(),0)}static newFoundDocument(t,e,n,r){return new Eo(t,1,e,Es.min(),n,r,0)}static newNoDocument(t,e){return new Eo(t,2,e,Es.min(),Es.min(),bo.empty(),0)}static newUnknownDocument(t,e){return new Eo(t,3,e,Es.min(),Es.min(),bo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Es.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Es.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Eo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Eo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class To{constructor(t,e){this.position=t,this.inclusive=e}}function Io(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Ds.comparator(Ds.fromName(o.referenceValue),n.key):uo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ko(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ao(t.position[n],e.position[n]))return!1;return!0}class So{constructor(t,e="asc"){this.field=t,this.dir=e}}function Do(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class xo{}class _o extends xo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Po(t,e,n):"array-contains"===e?new jo(t,n):"in"===e?new qo(t,n):"not-in"===e?new zo(t,n):"array-contains-any"===e?new $o(t,n):new _o(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Fo(t,n):new Uo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(uo(e,this.value)):null!==e&&oo(this.value)===oo(e)&&this.matchesComparison(uo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return is()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class No extends xo{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new No(t,e)}matches(t){return Bo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt((t=>t.isInequality()));return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function Bo(t){return"and"===t.op}function Mo(t){return function(t){for(const e of t.filters)if(e instanceof No)return!1;return!0}(t)&&Bo(t)}function Lo(t){if(t instanceof _o)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(Mo(t))return t.filters.map((t=>Lo(t))).join(",");{const e=t.filters.map((t=>Lo(t))).join(",");return`${t.op}(${e})`}}function Ro(t,e){return t instanceof _o?function(t,e){return e instanceof _o&&t.op===e.op&&t.field.isEqual(e.field)&&ao(t.value,e.value)}(t,e):t instanceof No?function(t,e){return e instanceof No&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&Ro(n,e.filters[r])),!0)}(t,e):void is()}function Oo(t){return t instanceof _o?function(t){return`${t.field.canonicalString()} ${t.op} ${ho(t.value)}`}(t):t instanceof No?function(t){return t.op.toString()+" {"+t.getFilters().map(Oo).join(" ,")+"}"}(t):"Filter"}class Po extends _o{constructor(t,e,n){super(t,e,n),this.key=Ds.fromName(n.referenceValue)}matches(t){const e=Ds.comparator(t.key,this.key);return this.matchesComparison(e)}}class Fo extends _o{constructor(t,e){super(t,"in",e),this.keys=Vo(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Uo extends _o{constructor(t,e){super(t,"not-in",e),this.keys=Vo(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Vo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Ds.fromName(t.referenceValue)))}class jo extends _o{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return mo(e)&&co(e.arrayValue,this.value)}}class qo extends _o{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&co(this.value.arrayValue,e)}}class zo extends _o{constructor(t,e){super(t,"not-in",e)}matches(t){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!co(this.value.arrayValue,e)}}class $o extends _o{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!mo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>co(this.value.arrayValue,t)))}}class Ho{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ft=null}}function Wo(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ho(t,e,n,r,i,s,o)}function Go(t){const e=os(t);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Lo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Ps(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ho(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ho(t))).join(",")),e.ft=t}return e.ft}function Ko(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Do(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ro(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ko(t.startAt,e.startAt)&&ko(t.endAt,e.endAt)}function Qo(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Yo{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function Xo(t){return new Yo(t)}function Jo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Zo(t){const e=os(t);if(null===e.dt){e.dt=[];const t=function(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.dt.push(new So(t)),e.dt.push(new So(Ss.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.dt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new So(Ss.keyField(),t))}}}return e.dt}function ta(t){const e=os(t);if(!e._t)if("F"===e.limitType)e._t=Wo(e.path,e.collectionGroup,Zo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Zo(e)){const e="desc"===n.dir?"asc":"desc";t.push(new So(n.field,e))}const n=e.endAt?new To(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new To(e.startAt.position,e.startAt.inclusive):null;e._t=Wo(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e._t}function ea(t,e,n){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function na(t,e){return Ko(ta(t),ta(e))&&t.limitType===e.limitType}function ra(t){return`${Go(ta(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Oo(t))).join(", ")}]`),Ps(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ho(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ho(t))).join(",")),`Target(${e})`}(ta(t))}; limitType=${t.limitType})`}function sa(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ds.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Zo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=Io(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Zo(t),e)||t.endAt&&!function(t,e,n){const r=Io(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Zo(t),e))}(t,e)}function oa(t){return(e,n)=>{let r=!1;for(const i of Zo(t)){const t=aa(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function aa(t,e,n){const r=t.field.isKeyField()?Ds.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?uo(r,i):is()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return is()}}class ca{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Vs(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return js(this.inner)}size(){return this.innerSize}}const ua=new qs(Ds.comparator);function la(){return ua}const ha=new qs(Ds.comparator);function da(...t){let e=ha;for(const n of t)e=e.insert(n.key,n);return e}function fa(t){let e=ha;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ga(){return pa()}function ma(){return pa()}function pa(){return new ca((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ya=new qs(Ds.comparator),va=new Hs(Ds.comparator);function Aa(...t){let e=va;for(const n of t)e=e.add(n);return e}const wa=new Hs(ws);function ba(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fs(e)?"-0":e}}function Ca(t){return{integerValue:""+t}}function Ea(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Fs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Ca(e):ba(t,e)}class Ta{constructor(){this._=void 0}}function Ia(t,e,n){return t instanceof Da?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&to(e)&&(e=eo(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xa?_a(t,e):t instanceof Na?Ba(t,e):function(t,e){const n=Sa(t,e),r=La(n)+La(t.wt);return go(n)&&go(t.wt)?Ca(r):ba(t.serializer,r)}(t,e)}function ka(t,e,n){return t instanceof xa?_a(t,e):t instanceof Na?Ba(t,e):n}function Sa(t,e){return t instanceof Ma?go(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Da extends Ta{}class xa extends Ta{constructor(t){super(),this.elements=t}}function _a(t,e){const n=Ra(e);for(const e of t.elements)n.some((t=>ao(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Na extends Ta{constructor(t){super(),this.elements=t}}function Ba(t,e){let n=Ra(e);for(const e of t.elements)n=n.filter((t=>!ao(t,e)));return{arrayValue:{values:n}}}class Ma extends Ta{constructor(t,e){super(),this.serializer=t,this.wt=e}}function La(t){return Js(t.integerValue||t.doubleValue)}function Ra(t){return mo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Oa{constructor(t,e){this.version=t,this.transformResults=e}}class Pa{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Pa}static exists(t){return new Pa(void 0,t)}static updateTime(t){return new Pa(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Fa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ua{}function Va(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ya(t.key,Pa.none()):new Ha(t.key,t.data,Pa.none());{const n=t.data,r=bo.empty();let i=new Hs(Ss.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Wa(t.key,r,new Gs(i.toArray()),Pa.none())}}function ja(t,e,n){t instanceof Ha?function(t,e,n){const r=t.value.clone(),i=Ka(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Wa?function(t,e,n){if(!Fa(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ka(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ga(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function qa(t,e,n,r){return t instanceof Ha?function(t,e,n,r){if(!Fa(t.precondition,e))return n;const i=t.value.clone(),s=Qa(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wa?function(t,e,n,r){if(!Fa(t.precondition,e))return n;const i=Qa(t.fieldTransforms,r,e),s=e.data;return s.setAll(Ga(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Fa(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function za(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=Sa(r.transform,t||null);null!=i&&(null===n&&(n=bo.empty()),n.set(r.field,i))}return n||null}function $a(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&bs(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xa&&e instanceof xa||t instanceof Na&&e instanceof Na?bs(t.elements,e.elements,ao):t instanceof Ma&&e instanceof Ma?ao(t.wt,e.wt):t instanceof Da&&e instanceof Da}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ha extends Ua{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wa extends Ua{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ga(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ka(t,e,n){const r=new Map;ss(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ka(o,a,n[i]))}return r}function Qa(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Ia(t,s,e))}return r}class Ya extends Ua{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xa extends Ua{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ja{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&ja(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=qa(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=qa(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=ma();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=Va(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Es.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Aa())}isEqual(t){return this.batchId===t.batchId&&bs(this.mutations,t.mutations,((t,e)=>$a(t,e)))&&bs(this.baseMutations,t.baseMutations,((t,e)=>$a(t,e)))}}class Za{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){ss(t.mutations.length===n.length);let r=ya;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new Za(t,e,n,r)}}class tc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ec{constructor(t,e){this.count=t,this.unchangedNames=e}}var nc,rc;function ic(t){if(void 0===t)return es("GRPC error has no .code"),as.UNKNOWN;switch(t){case nc.OK:return as.OK;case nc.CANCELLED:return as.CANCELLED;case nc.UNKNOWN:return as.UNKNOWN;case nc.DEADLINE_EXCEEDED:return as.DEADLINE_EXCEEDED;case nc.RESOURCE_EXHAUSTED:return as.RESOURCE_EXHAUSTED;case nc.INTERNAL:return as.INTERNAL;case nc.UNAVAILABLE:return as.UNAVAILABLE;case nc.UNAUTHENTICATED:return as.UNAUTHENTICATED;case nc.INVALID_ARGUMENT:return as.INVALID_ARGUMENT;case nc.NOT_FOUND:return as.NOT_FOUND;case nc.ALREADY_EXISTS:return as.ALREADY_EXISTS;case nc.PERMISSION_DENIED:return as.PERMISSION_DENIED;case nc.FAILED_PRECONDITION:return as.FAILED_PRECONDITION;case nc.ABORTED:return as.ABORTED;case nc.OUT_OF_RANGE:return as.OUT_OF_RANGE;case nc.UNIMPLEMENTED:return as.UNIMPLEMENTED;case nc.DATA_LOSS:return as.DATA_LOSS;default:return is()}}(rc=nc||(nc={}))[rc.OK=0]="OK",rc[rc.CANCELLED=1]="CANCELLED",rc[rc.UNKNOWN=2]="UNKNOWN",rc[rc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rc[rc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rc[rc.NOT_FOUND=5]="NOT_FOUND",rc[rc.ALREADY_EXISTS=6]="ALREADY_EXISTS",rc[rc.PERMISSION_DENIED=7]="PERMISSION_DENIED",rc[rc.UNAUTHENTICATED=16]="UNAUTHENTICATED",rc[rc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rc[rc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rc[rc.ABORTED=10]="ABORTED",rc[rc.OUT_OF_RANGE=11]="OUT_OF_RANGE",rc[rc.UNIMPLEMENTED=12]="UNIMPLEMENTED",rc[rc.INTERNAL=13]="INTERNAL",rc[rc.UNAVAILABLE=14]="UNAVAILABLE",rc[rc.DATA_LOSS=15]="DATA_LOSS";class sc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return oc}static getOrCreateInstance(){return null===oc&&(oc=new sc),oc}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let oc=null;const ac=new Ki([4294967295,4294967295],0);function cc(t){const e=(new TextEncoder).encode(t),n=new Gi;return n.update(e),new Uint8Array(n.digest())}function uc(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ki([n,r],0),new Ki([i,s],0)]}class lc{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new hc(`Invalid padding: ${e}`);if(n<0)throw new hc(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new hc(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new hc(`Invalid padding when bitmap length is 0: ${e}`);this.yt=8*t.length-e,this.It=Ki.fromNumber(this.yt)}Tt(t,e,n){let r=t.add(e.multiply(Ki.fromNumber(n)));return 1===r.compare(ac)&&(r=new Ki([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}Et(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}At(t){if(0===this.yt)return!1;const e=cc(t),[n,r]=uc(e);for(let t=0;t<this.hashCount;t++){const e=this.Tt(n,r,t);if(!this.Et(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new lc(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.yt)return;const e=cc(t),[n,r]=uc(e);for(let t=0;t<this.hashCount;t++){const e=this.Tt(n,r,t);this.Rt(e)}}Rt(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dc{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,fc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new dc(Es.min(),r,new qs(ws),la(),Aa())}}class fc{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new fc(n,e,Aa(),Aa(),Aa())}}class gc{constructor(t,e,n,r){this.vt=t,this.removedTargetIds=e,this.key=n,this.Pt=r}}class mc{constructor(t,e){this.targetId=t,this.bt=e}}class pc{constructor(t,e,n=Qs.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class yc{constructor(){this.Vt=0,this.St=wc(),this.Dt=Qs.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(t){t.approximateByteSize()>0&&(this.xt=!0,this.Dt=t)}Ot(){let t=Aa(),e=Aa(),n=Aa();return this.St.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:is()}})),new fc(this.Dt,this.Ct,t,e,n)}$t(){this.xt=!1,this.St=wc()}Ft(t,e){this.xt=!0,this.St=this.St.insert(t,e)}Bt(t){this.xt=!0,this.St=this.St.remove(t)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class vc{constructor(t){this.Kt=t,this.Gt=new Map,this.Qt=la(),this.jt=Ac(),this.zt=new qs(ws)}Wt(t){for(const e of t.vt)t.Pt&&t.Pt.isFoundDocument()?this.Ht(e,t.Pt):this.Jt(e,t.key,t.Pt);for(const e of t.removedTargetIds)this.Jt(e,t.key,t.Pt)}Yt(t){this.forEachTarget(t,(e=>{const n=this.Xt(e);switch(t.state){case 0:this.Zt(e)&&n.Mt(t.resumeToken);break;case 1:n.qt(),n.Nt||n.$t(),n.Mt(t.resumeToken);break;case 2:n.qt(),n.Nt||this.removeTarget(e);break;case 3:this.Zt(e)&&(n.Ut(),n.Mt(t.resumeToken));break;case 4:this.Zt(e)&&(this.te(e),n.Mt(t.resumeToken));break;default:is()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Gt.forEach(((t,n)=>{this.Zt(n)&&e(n)}))}ee(t){var e;const n=t.targetId,r=t.bt.count,i=this.ne(n);if(i){const s=i.target;if(Qo(s))if(0===r){const t=new Ds(s.path);this.Jt(n,t,Eo.newNoDocument(t,Es.min()))}else ss(1===r);else{const i=this.se(n);if(i!==r){const r=this.ie(t,i);if(0!==r){this.te(n);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,t)}null===(e=sc.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n){var r,i,s,o,a,c;const u={localCacheCount:e,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(u.bloomFilter={applied:0===t,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==l?void 0:l.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}(r,i,t.bt))}}}}ie(t,e){const{unchangedNames:n,count:r}=t.bt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=Zs(i).toUint8Array()}catch(t){if(t instanceof Ks)return ns("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw t}try{c=new lc(a,s,o)}catch(t){return ns(t instanceof hc?"BloomFilter error: ":"Applying bloom filter failed: ",t),1}return 0===c.yt?1:r!==e-this.re(t.targetId,c)?2:0}re(t,e){const n=this.Kt.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Kt.oe(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.At(s)||(this.Jt(t,n,null),r++)})),r}ue(t){const e=new Map;this.Gt.forEach(((n,r)=>{const i=this.ne(r);if(i){if(n.current&&Qo(i.target)){const e=new Ds(i.target.path);null!==this.Qt.get(e)||this.ce(r,e)||this.Jt(r,e,Eo.newNoDocument(e,t))}n.kt&&(e.set(r,n.Ot()),n.$t())}}));let n=Aa();this.jt.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.ne(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.Qt.forEach(((e,n)=>n.setReadTime(t)));const r=new dc(t,e,this.zt,this.Qt,n);return this.Qt=la(),this.jt=Ac(),this.zt=new qs(ws),r}Ht(t,e){if(!this.Zt(t))return;const n=this.ce(t,e.key)?2:0;this.Xt(t).Ft(e.key,n),this.Qt=this.Qt.insert(e.key,e),this.jt=this.jt.insert(e.key,this.ae(e.key).add(t))}Jt(t,e,n){if(!this.Zt(t))return;const r=this.Xt(t);this.ce(t,e)?r.Ft(e,1):r.Bt(e),this.jt=this.jt.insert(e,this.ae(e).delete(t)),n&&(this.Qt=this.Qt.insert(e,n))}removeTarget(t){this.Gt.delete(t)}se(t){const e=this.Xt(t).Ot();return this.Kt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Lt(t){this.Xt(t).Lt()}Xt(t){let e=this.Gt.get(t);return e||(e=new yc,this.Gt.set(t,e)),e}ae(t){let e=this.jt.get(t);return e||(e=new Hs(ws),this.jt=this.jt.insert(t,e)),e}Zt(t){const e=null!==this.ne(t);return e||ts("WatchChangeAggregator","Detected inactive target",t),e}ne(t){const e=this.Gt.get(t);return e&&e.Nt?null:this.Kt.he(t)}te(t){this.Gt.set(t,new yc),this.Kt.getRemoteKeysForTarget(t).forEach((e=>{this.Jt(t,e,null)}))}ce(t,e){return this.Kt.getRemoteKeysForTarget(t).has(e)}}function Ac(){return new qs(Ds.comparator)}function wc(){return new qs(Ds.comparator)}const bc={asc:"ASCENDING",desc:"DESCENDING"},Cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ec={and:"AND",or:"OR"};class Tc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ic(t,e){return t.useProto3Json||Ps(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Dc(t,e){return kc(t,e.toTimestamp())}function xc(t){return ss(!!t),Es.fromTimestamp(function(t){const e=Xs(t);return new Cs(e.seconds,e.nanos)}(t))}function _c(t,e){return function(t){return new Is(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Nc(t){const e=Is.fromString(t);return ss(Qc(e)),e}function Bc(t,e){return _c(t.databaseId,e.path)}function Mc(t,e){const n=Nc(e);if(n.get(1)!==t.databaseId.projectId)throw new cs(as.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new cs(as.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ds(Oc(n))}function Lc(t,e){return _c(t.databaseId,e)}function Rc(t){return new Is(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Oc(t){return ss(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Pc(t,e,n){return{name:Bc(t,e),fields:n.value.mapValue.fields}}function Fc(t,e){return{documents:[Lc(t,e.path)]}}function Uc(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Lc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Lc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0!==t.length)return Gc(No.create(t,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Hc(t.field),direction:qc(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ic(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Vc(t){let e=function(t){const e=Nc(t);return 4===e.length?Is.emptyPath():Oc(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ss(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=jc(t);return e instanceof No&&Mo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new So(Wc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Ps(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new To(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new To(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new Yo(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,u)}function jc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Wc(t.unaryFilter.field);return _o.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Wc(t.unaryFilter.field);return _o.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wc(t.unaryFilter.field);return _o.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wc(t.unaryFilter.field);return _o.create(i,"!=",{nullValue:"NULL_VALUE"});default:return is()}}(t):void 0!==t.fieldFilter?function(t){return _o.create(Wc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return is()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return No.create(t.compositeFilter.filters.map((t=>jc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return is()}}(t.compositeFilter.op))}(t):is()}function qc(t){return bc[t]}function zc(t){return Cc[t]}function $c(t){return Ec[t]}function Hc(t){return{fieldPath:t.canonicalString()}}function Wc(t){return Ss.fromServerFormat(t.fieldPath)}function Gc(t){return t instanceof _o?function(t){if("=="===t.op){if(yo(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NAN"}};if(po(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yo(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NAN"}};if(po(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(t.field),op:zc(t.op),value:t.value}}}(t):t instanceof No?function(t){const e=t.getFilters().map((t=>Gc(t)));return 1===e.length?e[0]:{compositeFilter:{op:$c(t.op),filters:e}}}(t):is()}function Kc(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Qc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Yc{constructor(t,e,n,r,i=Es.min(),s=Es.min(),o=Qs.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Yc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Xc{constructor(t){this.le=t}}function Jc(t){const e=Vc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ea(e,e.limit,"L"):e}class Zc{constructor(){}_e(t,e){this.we(t,e),e.me()}we(t,e){if("nullValue"in t)this.ge(e,5);else if("booleanValue"in t)this.ge(e,10),e.ye(t.booleanValue?1:0);else if("integerValue"in t)this.ge(e,15),e.ye(Js(t.integerValue));else if("doubleValue"in t){const n=Js(t.doubleValue);isNaN(n)?this.ge(e,13):(this.ge(e,15),Fs(n)?e.ye(0):e.ye(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ge(e,20),"string"==typeof n?e.pe(n):(e.pe(`${n.seconds||""}`),e.ye(n.nanos||0))}else if("stringValue"in t)this.Ie(t.stringValue,e),this.Te(e);else if("bytesValue"in t)this.ge(e,30),e.Ee(Zs(t.bytesValue)),this.Te(e);else if("referenceValue"in t)this.Ae(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ge(e,45),e.ye(n.latitude||0),e.ye(n.longitude||0)}else"mapValue"in t?wo(t)?this.ge(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Te(e)):"arrayValue"in t?(this.ve(t.arrayValue,e),this.Te(e)):is()}Ie(t,e){this.ge(e,25),this.Pe(t,e)}Pe(t,e){e.pe(t)}Re(t,e){const n=t.fields||{};this.ge(e,55);for(const t of Object.keys(n))this.Ie(t,e),this.we(n[t],e)}ve(t,e){const n=t.values||[];this.ge(e,50);for(const t of n)this.we(t,e)}Ae(t,e){this.ge(e,37),Ds.fromName(t).path.forEach((t=>{this.ge(e,60),this.Pe(t,e)}))}ge(t,e){t.ye(e)}Te(t){t.ye(2)}}Zc.be=new Zc;class tu{constructor(){this.sn=new eu}addToCollectionParentIndex(t,e){return this.sn.add(e),Ls.resolve()}getCollectionParents(t,e){return Ls.resolve(this.sn.getEntries(e))}addFieldIndex(t,e){return Ls.resolve()}deleteFieldIndex(t,e){return Ls.resolve()}getDocumentsMatchingTarget(t,e){return Ls.resolve(null)}getIndexType(t,e){return Ls.resolve(0)}getFieldIndexes(t,e){return Ls.resolve([])}getNextCollectionGroupToUpdate(t){return Ls.resolve(null)}getMinOffset(t,e){return Ls.resolve(_s.min())}getMinOffsetFromCollectionGroup(t,e){return Ls.resolve(_s.min())}updateCollectionGroup(t,e,n){return Ls.resolve()}updateIndexEntries(t,e){return Ls.resolve()}}class eu{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Hs(Is.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Hs(Is.comparator)).toArray()}}new Uint8Array(0);class nu{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new nu(t,nu.DEFAULT_COLLECTION_PERCENTILE,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}nu.DEFAULT_COLLECTION_PERCENTILE=10,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nu.DEFAULT=new nu(41943040,nu.DEFAULT_COLLECTION_PERCENTILE,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nu.DISABLED=new nu(-1,0,0);class ru{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static Nn(){return new ru(0)}static kn(){return new ru(-1)}}class iu{constructor(){this.changes=new ca((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Eo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ls.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class su{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class ou{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&qa(n.mutation,t,Gs.empty(),Cs.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Aa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Aa()){const r=ga();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=da();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ga();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Aa())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=la();const s=pa(),o=pa();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Wa)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),qa(o.mutation,e,o.mutation.getFieldMask(),Cs.now())):s.set(e.key,Gs.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new su(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=pa();let r=new qs(((t,e)=>t-e)),i=Aa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Gs.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||Aa()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=ma();c.forEach((t=>{if(!i.has(t)){const r=Va(e.get(t),n.get(t));null!==r&&u.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,u))}return Ls.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):Ls.resolve(ga());let o=-1,a=i;return s.next((e=>Ls.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?Ls.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,Aa()))).next((t=>({batchId:o,changes:fa(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ds(e)).next((t=>{let e=da();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const r=e.collectionGroup;let i=da();return this.indexManager.getCollectionParents(t,r).next((s=>Ls.forEach(s,(s=>{const o=function(t,e){return new Yo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(t,e,n){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r)))).next((t=>{r.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,Eo.newInvalidDocument(r)))}));let n=da();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&qa(s.mutation,i,Gs.empty(),Cs.now()),sa(e,i)&&(n=n.insert(t,i))})),n}))}}class au{constructor(t){this.serializer=t,this.us=new Map,this.cs=new Map}getBundleMetadata(t,e){return Ls.resolve(this.us.get(e))}saveBundleMetadata(t,e){var n;return this.us.set(e.id,{id:(n=e).id,version:n.version,createTime:xc(n.createTime)}),Ls.resolve()}getNamedQuery(t,e){return Ls.resolve(this.cs.get(e))}saveNamedQuery(t,e){return this.cs.set(e.name,function(t){return{name:t.name,query:Jc(t.bundledQuery),readTime:xc(t.readTime)}}(e)),Ls.resolve()}}class cu{constructor(){this.overlays=new qs(Ds.comparator),this.hs=new Map}getOverlay(t,e){return Ls.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ga();return Ls.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.de(t,e,r)})),Ls.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hs.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.hs.delete(n)),Ls.resolve()}getOverlaysForCollection(t,e,n){const r=ga(),i=e.length+1,s=new Ds(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return Ls.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new qs(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=ga(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ga(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return Ls.resolve(o)}de(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.hs.get(r.largestBatchId).delete(n.key);this.hs.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new tc(e,n));let i=this.hs.get(e);void 0===i&&(i=Aa(),this.hs.set(e,i)),this.hs.set(e,i.add(n.key))}}class uu{constructor(){this.ls=new Hs(lu.fs),this.ds=new Hs(lu._s)}isEmpty(){return this.ls.isEmpty()}addReference(t,e){const n=new lu(t,e);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}ws(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.gs(new lu(t,e))}ys(t,e){t.forEach((t=>this.removeReference(t,e)))}ps(t){const e=new Ds(new Is([])),n=new lu(e,t),r=new lu(e,t+1),i=[];return this.ds.forEachInRange([n,r],(t=>{this.gs(t),i.push(t.key)})),i}Is(){this.ls.forEach((t=>this.gs(t)))}gs(t){this.ls=this.ls.delete(t),this.ds=this.ds.delete(t)}Ts(t){const e=new Ds(new Is([])),n=new lu(e,t),r=new lu(e,t+1);let i=Aa();return this.ds.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new lu(t,0),n=this.ls.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class lu{constructor(t,e){this.key=t,this.Es=e}static fs(t,e){return Ds.comparator(t.key,e.key)||ws(t.Es,e.Es)}static _s(t,e){return ws(t.Es,e.Es)||Ds.comparator(t.key,e.key)}}class hu{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.As=1,this.Rs=new Hs(lu.fs)}checkEmpty(t){return Ls.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ja(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.Rs=this.Rs.add(new lu(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Ls.resolve(s)}lookupMutationBatch(t,e){return Ls.resolve(this.vs(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Ps(n),i=r<0?0:r;return Ls.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ls.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(t){return Ls.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new lu(e,0),r=new lu(e,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(t=>{const e=this.vs(t.Es);i.push(e)})),Ls.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Hs(ws);return e.forEach((t=>{const e=new lu(t,0),r=new lu(t,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([e,r],(t=>{n=n.add(t.Es)}))})),Ls.resolve(this.bs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;Ds.isDocumentKey(i)||(i=i.child(""));const s=new lu(new Ds(i),0);let o=new Hs(ws);return this.Rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.Es)),!0)}),s),Ls.resolve(this.bs(o))}bs(t){const e=[];return t.forEach((t=>{const n=this.vs(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ss(0===this.Vs(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Ls.forEach(e.mutations,(r=>{const i=new lu(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Rs=n}))}Dn(t){}containsKey(t,e){const n=new lu(e,0),r=this.Rs.firstAfterOrEqual(n);return Ls.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ls.resolve()}Vs(t,e){return this.Ps(t)}Ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}vs(t){const e=this.Ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class du{constructor(t){this.Ss=t,this.docs=new qs(Ds.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ss(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ls.resolve(n?n.document.mutableCopy():Eo.newInvalidDocument(e))}getEntries(t,e){let n=la();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Eo.newInvalidDocument(t))})),Ls.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=la();const s=e.path,o=new Ds(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Ns(xs(o),n)<=0||(r.has(o.key)||sa(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ls.resolve(i)}getAllFromCollectionGroup(t,e,n,r){is()}Ds(t,e){return Ls.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new fu(this)}getSize(t){return Ls.resolve(this.size)}}class fu extends iu{constructor(t){super(),this.rs=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.rs.addEntry(t,r)):this.rs.removeEntry(n)})),Ls.waitFor(e)}getFromCache(t,e){return this.rs.getEntry(t,e)}getAllFromCache(t,e){return this.rs.getEntries(t,e)}}class gu{constructor(t){this.persistence=t,this.Cs=new ca((t=>Go(t)),Ko),this.lastRemoteSnapshotVersion=Es.min(),this.highestTargetId=0,this.xs=0,this.Ns=new uu,this.targetCount=0,this.ks=ru.Nn()}forEachTarget(t,e){return this.Cs.forEach(((t,n)=>e(n))),Ls.resolve()}getLastRemoteSnapshotVersion(t){return Ls.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ls.resolve(this.xs)}allocateTargetId(t){return this.highestTargetId=this.ks.next(),Ls.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.xs&&(this.xs=e),Ls.resolve()}$n(t){this.Cs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ks=new ru(e),this.highestTargetId=e),t.sequenceNumber>this.xs&&(this.xs=t.sequenceNumber)}addTargetData(t,e){return this.$n(e),this.targetCount+=1,Ls.resolve()}updateTargetData(t,e){return this.$n(e),Ls.resolve()}removeTargetData(t,e){return this.Cs.delete(e.target),this.Ns.ps(e.targetId),this.targetCount-=1,Ls.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Cs.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Cs.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),Ls.waitFor(i).next((()=>r))}getTargetCount(t){return Ls.resolve(this.targetCount)}getTargetData(t,e){const n=this.Cs.get(e)||null;return Ls.resolve(n)}addMatchingKeys(t,e,n){return this.Ns.ws(e,n),Ls.resolve()}removeMatchingKeys(t,e,n){this.Ns.ys(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),Ls.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Ns.ps(e),Ls.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Ns.Ts(e);return Ls.resolve(n)}containsKey(t,e){return Ls.resolve(this.Ns.containsKey(e))}}class mu{constructor(t,e){this.Ms={},this.overlays={},this.Os=new Os(0),this.$s=!1,this.$s=!0,this.referenceDelegate=t(this),this.Fs=new gu(this),this.indexManager=new tu,this.remoteDocumentCache=function(t){return new du(t)}((t=>this.referenceDelegate.Bs(t))),this.serializer=new Xc(e),this.Ls=new au(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new cu,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Ms[t.toKey()];return n||(n=new hu(e,this.referenceDelegate),this.Ms[t.toKey()]=n),n}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(t,e,n){ts("MemoryPersistence","Starting transaction:",t);const r=new pu(this.Os.next());return this.referenceDelegate.qs(),n(r).next((t=>this.referenceDelegate.Us(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ks(t,e){return Ls.or(Object.values(this.Ms).map((n=>()=>n.containsKey(t,e))))}}class pu extends Bs{constructor(t){super(),this.currentSequenceNumber=t}}class yu{constructor(t){this.persistence=t,this.Gs=new uu,this.Qs=null}static js(t){return new yu(t)}get zs(){if(this.Qs)return this.Qs;throw is()}addReference(t,e,n){return this.Gs.addReference(n,e),this.zs.delete(n.toString()),Ls.resolve()}removeReference(t,e,n){return this.Gs.removeReference(n,e),this.zs.add(n.toString()),Ls.resolve()}markPotentiallyOrphaned(t,e){return this.zs.add(e.toString()),Ls.resolve()}removeTarget(t,e){this.Gs.ps(e.targetId).forEach((t=>this.zs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.zs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}qs(){this.Qs=new Set}Us(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ls.forEach(this.zs,(n=>{const r=Ds.fromPath(n);return this.Ws(t,r).next((t=>{t||e.removeEntry(r,Es.min())}))})).next((()=>(this.Qs=null,e.apply(t))))}updateLimboDocument(t,e){return this.Ws(t,e).next((t=>{t?this.zs.delete(e.toString()):this.zs.add(e.toString())}))}Bs(t){return 0}Ws(t,e){return Ls.or([()=>Ls.resolve(this.Gs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ks(t,e)])}}class vu{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.$i=n,this.Fi=r}static Bi(t,e){let n=Aa(),r=Aa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new vu(t,e.fromCache,n,r)}}class Au{constructor(){this.Li=!1}initialize(t,e){this.qi=t,this.indexManager=e,this.Li=!0}getDocumentsMatchingQuery(t,e,n,r){return this.Ui(t,e).next((i=>i||this.Ki(t,e,r,n))).next((n=>n||this.Gi(t,e)))}Ui(t,e){if(Jo(e))return Ls.resolve(null);let n=ta(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=ea(e,null,"F"),n=ta(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=Aa(...r);return this.qi.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Qi(e,r);return this.ji(e,s,i,n.readTime)?this.Ui(t,ea(e,null,"F")):this.zi(t,s,e,n)}))))})))))}Ki(t,e,n,r){return Jo(e)||r.isEqual(Es.min())?this.Gi(t,e):this.qi.getDocuments(t,n).next((i=>{const s=this.Qi(e,i);return this.ji(e,s,n,r)?this.Gi(t,e):(Zi()<=L.DEBUG&&ts("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ia(e)),this.zi(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Es.fromTimestamp(1e9===r?new Cs(n+1,0):new Cs(n,r));return new _s(i,Ds.empty(),e)}(r,-1)))}))}Qi(t,e){let n=new Hs(oa(t));return e.forEach(((e,r)=>{sa(t,r)&&(n=n.add(r))})),n}ji(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Gi(t,e){return Zi()<=L.DEBUG&&ts("QueryEngine","Using full collection scan to execute query:",ia(e)),this.qi.getDocumentsMatchingQuery(t,e,_s.min())}zi(t,e,n,r){return this.qi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class wu{constructor(t,e,n,r){this.persistence=t,this.Wi=e,this.serializer=r,this.Hi=new qs(ws),this.Ji=new ca((t=>Go(t)),Ko),this.Yi=new Map,this.Xi=t.getRemoteDocumentCache(),this.Fs=t.getTargetCache(),this.Ls=t.getBundleCache(),this.Zi(n)}Zi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ou(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Hi)))}}async function bu(t,e){const n=os(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.Zi(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=Aa();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({tr:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Cu(t){const e=os(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Fs.getLastRemoteSnapshotVersion(t)))}function Eu(t,e){const n=os(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Tu(t,e,n){const r=os(t),i=r.Hi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Rs(t))throw t;ts("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(i.target)}function Iu(t,e,n){const r=os(t);let i=Es.min(),s=Aa();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=os(t),i=r.Ji.get(n);return void 0!==i?Ls.resolve(r.Hi.get(i)):r.Fs.getTargetData(e,n)}(r,t,ta(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Wi.getDocumentsMatchingQuery(t,e,n?i:Es.min(),n?s:Aa()))).next((t=>(function(t,e,n){let r=t.Yi.get(e)||Es.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Yi.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,sr:s})))))}class ku{constructor(){this.activeTargetIds=wa}hr(t){this.activeTargetIds=this.activeTargetIds.add(t)}lr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ar(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Su{constructor(){this.Wr=new ku,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Wr.hr(t),this.Hr[t]||"not-current"}updateQueryState(t,e,n){this.Hr[t]=e}removeLocalQueryTarget(t){this.Wr.lr(t)}isLocalQueryTarget(t){return this.Wr.activeTargetIds.has(t)}clearQueryState(t){delete this.Hr[t]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(t){return this.Wr.activeTargetIds.has(t)}start(){return this.Wr=new ku,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Du{Jr(t){}shutdown(){}}class xu{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(t){this.no.push(t)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){ts("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.no)t(0)}eo(){ts("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.no)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _u=null;function Nu(){return null===_u?_u=268435456+Math.round(2147483648*Math.random()):_u++,"0x"+_u.toString(16)}const Bu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mu{constructor(t){this.io=t.io,this.ro=t.ro}oo(t){this.uo=t}co(t){this.ao=t}onMessage(t){this.ho=t}close(){this.ro()}send(t){this.io(t)}lo(){this.uo()}fo(t){this.ao(t)}_o(t){this.ho(t)}}const Lu="WebChannelConnection";class Ru extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.wo=e+"://"+t.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(t,e,n,r,i){const s=Nu(),o=this.Io(t,e);ts("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={};return this.To(a,r,i),this.Eo(t,o,a,n).then((e=>(ts("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw ns("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Ao(t,e,n,r,i,s){return this.po(t,e,n,r,i)}To(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Xi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}Io(t,e){const n=Bu[t];return`${this.wo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Eo(t,e,n,r){const i=Nu();return new Promise(((s,o)=>{const a=new Wi;a.setWithCredentials(!0),a.listenOnce(ji.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Vi.NO_ERROR:const e=a.getResponseJson();ts(Lu,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case Vi.TIMEOUT:ts(Lu,`RPC '${t}' ${i} timed out`),o(new cs(as.DEADLINE_EXCEEDED,"Request time out"));break;case Vi.HTTP_ERROR:const n=a.getStatus();if(ts(Lu,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(as).indexOf(e)>=0?e:as.UNKNOWN}(e.status);o(new cs(t,e.message))}else o(new cs(as.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new cs(as.UNAVAILABLE,"Connection failed."));break;default:is()}}finally{ts(Lu,`RPC '${t}' ${i} completed.`)}}));const c=JSON.stringify(r);ts(Lu,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",c,n,15)}))}Ro(t,e,n){const r=Nu(),i=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Fi(),o=Ui(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new $i({})),this.To(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");ts(Lu,`Creating RPC '${t}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let l=!1,h=!1;const d=new Mu({io:e=>{h?ts(Lu,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(l||(ts(Lu,`Opening RPC '${t}' stream ${r} transport.`),u.open(),l=!0),ts(Lu,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},ro:()=>u.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(u,Hi.EventType.OPEN,(()=>{h||ts(Lu,`RPC '${t}' stream ${r} transport opened.`)})),f(u,Hi.EventType.CLOSE,(()=>{h||(h=!0,ts(Lu,`RPC '${t}' stream ${r} transport closed`),d.fo())})),f(u,Hi.EventType.ERROR,(e=>{h||(h=!0,ns(Lu,`RPC '${t}' stream ${r} transport errored:`,e),d.fo(new cs(as.UNAVAILABLE,"The operation could not be completed")))})),f(u,Hi.EventType.MESSAGE,(e=>{var n;if(!h){const i=e.data[0];ss(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ts(Lu,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=nc[t];if(void 0!==e)return ic(e)}(e),i=o.message;void 0===n&&(n=as.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),h=!0,d.fo(new cs(n,i)),u.close()}else ts(Lu,`RPC '${t}' stream ${r} received:`,i),d._o(i)}})),f(o,qi.STAT_EVENT,(e=>{e.stat===zi.PROXY?ts(Lu,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===zi.NOPROXY&&ts(Lu,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{d.lo()}),0),d}}function Ou(){return"undefined"!=typeof document?document:null}function Pu(t){return new Tc(t,!0)}class Fu{constructor(t,e,n=1e3,r=1.5,i=6e4){this.si=t,this.timerId=e,this.vo=n,this.Po=r,this.bo=i,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(t){this.cancel();const e=Math.floor(this.Vo+this.No()),n=Math.max(0,Date.now()-this.Do),r=Math.max(0,e-n);r>0&&ts("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Vo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Do=Date.now(),t()))),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Uu{constructor(t,e,n,r,i,s,o,a){this.si=t,this.Mo=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new Fu(t,e)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(()=>this.jo())))}zo(t){this.Wo(),this.stream.send(t)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(t,e){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==t?this.Lo.reset():e&&e.code===as.RESOURCE_EXHAUSTED?(es(e.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):e&&e.code===as.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.co(e)}Jo(){}auth(){this.state=1;const t=this.Yo(this.$o),e=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.$o===e&&this.Xo(t,n)}),(e=>{t((()=>{const t=new cs(as.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Zo(t)}))}))}Xo(t,e){const n=this.Yo(this.$o);this.stream=this.tu(t,e),this.stream.oo((()=>{n((()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Uo()&&(this.state=3),Promise.resolve()))),this.listener.oo())))})),this.stream.co((t=>{n((()=>this.Zo(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Ko(){this.state=5,this.Lo.xo((async()=>{this.state=0,this.start()}))}Zo(t){return ts("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Yo(t){return e=>{this.si.enqueueAndForget((()=>this.$o===t?e():(ts("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Vu extends Uu{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}tu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.Lo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:is()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(ss(void 0===e||"string"==typeof e),Qs.fromBase64String(e||"")):(ss(void 0===e||e instanceof Uint8Array),Qs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?as.UNKNOWN:ic(t.code);return new cs(e,t.message||"")}(o);n=new pc(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mc(t,r.document.name),s=xc(r.document.updateTime),o=r.document.createTime?xc(r.document.createTime):Es.min(),a=new bo({mapValue:{fields:r.document.fields}}),c=Eo.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new gc(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Mc(t,r.document),s=r.readTime?xc(r.readTime):Es.min(),o=Eo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Mc(t,r.document),s=r.removedTargetIds||[];n=new gc([],s,i,null)}else{if(!("filter"in e))return is();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new ec(r,i),o=t.targetId;n=new mc(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Es.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Es.min():e.readTime?xc(e.readTime):Es.min()}(t);return this.listener.eu(e,n)}nu(t){const e={};e.database=Rc(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Qo(r)?{documents:Fc(t,r)}:{query:Uc(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Sc(t,e.resumeToken);const r=Ic(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(Es.min())>0){n.readTime=kc(t,e.snapshotVersion.toTimestamp());const r=Ic(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return is()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.zo(e)}su(t){const e={};e.database=Rc(this.serializer),e.removeTarget=t,this.zo(e)}}class ju extends Uu{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(ss(!!t.streamToken),this.lastStreamToken=t.streamToken,this.iu){this.Lo.reset();const e=function(t,e){return t&&t.length>0?(ss(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?xc(t.updateTime):xc(e);return n.isEqual(Es.min())&&(n=xc(e)),new Oa(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=xc(t.commitTime);return this.listener.uu(n,e)}return ss(!t.writeResults||0===t.writeResults.length),this.iu=!0,this.listener.cu()}au(){const t={};t.database=Rc(this.serializer),this.zo(t)}ou(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ha)n={update:Pc(t,e.key,e.value)};else if(e instanceof Ya)n={delete:Bc(t,e.key)};else if(e instanceof Wa)n={update:Pc(t,e.key,e.data),updateMask:Kc(e.fieldMask)};else{if(!(e instanceof Xa))return is();n={verify:Bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Da)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xa)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Na)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ma)return{fieldPath:e.field.canonicalString(),increment:n.wt};throw is()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Dc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:is()}(t,e.precondition)),n}(this.serializer,t)))};this.zo(e)}}class qu extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.hu=!1}lu(){if(this.hu)throw new cs(as.FAILED_PRECONDITION,"The client has already been terminated.")}po(t,e,n){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.po(t,e,n,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===as.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new cs(as.UNKNOWN,t.toString())}))}Ao(t,e,n,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Ao(t,e,n,i,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===as.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new cs(as.UNKNOWN,t.toString())}))}terminate(){this.hu=!0}}class zu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve()))))}pu(t){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.gu("Offline")))}set(t){this.Iu(),this.du=0,"Online"===t&&(this.wu=!1),this.gu(t)}gu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}yu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(es(e),this.wu=!1):ts("OnlineStateTracker",e)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class $u{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=i,this.vu.Jr((t=>{n.enqueueAndForget((async()=>{Zu(this)&&(ts("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=os(t);e.Au.add(4),await Wu(e),e.Pu.set("Unknown"),e.Au.delete(4),await Hu(e)}(this))}))})),this.Pu=new zu(n,r)}}async function Hu(t){if(Zu(t))for(const e of t.Ru)await e(!0)}async function Wu(t){for(const e of t.Ru)await e(!1)}function Gu(t,e){const n=os(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),Ju(n)?Xu(n):pl(n).Uo()&&Qu(n,e))}function Ku(t,e){const n=os(t),r=pl(n);n.Eu.delete(e),r.Uo()&&Yu(n,e),0===n.Eu.size&&(r.Uo()?r.Qo():Zu(n)&&n.Pu.set("Unknown"))}function Qu(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Es.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pl(t).nu(e)}function Yu(t,e){t.bu.Lt(e),pl(t).su(e)}function Xu(t){t.bu=new vc({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),pl(t).start(),t.Pu.mu()}function Ju(t){return Zu(t)&&!pl(t).qo()&&t.Eu.size>0}function Zu(t){return 0===os(t).Au.size}function tl(t){t.bu=void 0}async function el(t){t.Eu.forEach(((e,n)=>{Qu(t,e)}))}async function nl(t,e){tl(t),Ju(t)?(t.Pu.pu(e),Xu(t)):t.Pu.set("Unknown")}async function rl(t,e,n){if(t.Pu.set("Online"),e instanceof pc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.Eu.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.Eu.delete(r),t.bu.removeTarget(r))}(t,e)}catch(n){ts("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await il(t,n)}else if(e instanceof gc?t.bu.Wt(e):e instanceof mc?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(Es.min()))try{const e=await Cu(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.bu.ue(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Eu.get(r);i&&t.Eu.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.Eu.get(e);if(!r)return;t.Eu.set(e,r.withResumeToken(Qs.EMPTY_BYTE_STRING,r.snapshotVersion)),Yu(t,e);const i=new Yc(r.target,e,n,r.sequenceNumber);Qu(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){ts("RemoteStore","Failed to raise snapshot:",e),await il(t,e)}}async function il(t,e,n){if(!Rs(e))throw e;t.Au.add(1),await Wu(t),t.Pu.set("Offline"),n||(n=()=>Cu(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ts("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await Hu(t)}))}function sl(t,e){return e().catch((n=>il(t,n,e)))}async function ol(t){const e=os(t),n=yl(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;al(e);)try{const t=await Eu(e.localStore,r);if(null===t){0===e.Tu.length&&n.Qo();break}r=t.batchId,cl(e,t)}catch(t){await il(e,t)}ul(e)&&ll(e)}function al(t){return Zu(t)&&t.Tu.length<10}function cl(t,e){t.Tu.push(e);const n=yl(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function ul(t){return Zu(t)&&!yl(t).qo()&&t.Tu.length>0}function ll(t){yl(t).start()}async function hl(t){yl(t).au()}async function dl(t){const e=yl(t);for(const n of t.Tu)e.ou(n.mutations)}async function fl(t,e,n){const r=t.Tu.shift(),i=Za.from(r,e,n);await sl(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ol(t)}async function gl(t,e){e&&yl(t).ru&&await async function(t,e){if(function(t){switch(t){default:return is();case as.CANCELLED:case as.UNKNOWN:case as.DEADLINE_EXCEEDED:case as.RESOURCE_EXHAUSTED:case as.INTERNAL:case as.UNAVAILABLE:case as.UNAUTHENTICATED:return!1;case as.INVALID_ARGUMENT:case as.NOT_FOUND:case as.ALREADY_EXISTS:case as.PERMISSION_DENIED:case as.FAILED_PRECONDITION:case as.ABORTED:case as.OUT_OF_RANGE:case as.UNIMPLEMENTED:case as.DATA_LOSS:return!0}}(n=e.code)&&n!==as.ABORTED){const n=t.Tu.shift();yl(t).Go(),await sl(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await ol(t)}var n}(t,e),ul(t)&&ll(t)}async function ml(t,e){const n=os(t);n.asyncQueue.verifyOperationInProgress(),ts("RemoteStore","RemoteStore received new credentials");const r=Zu(n);n.Au.add(3),await Wu(n),r&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await Hu(n)}function pl(t){return t.Vu||(t.Vu=function(t,e,n){const r=os(t);return r.lu(),new Vu(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{oo:el.bind(null,t),co:nl.bind(null,t),eu:rl.bind(null,t)}),t.Ru.push((async e=>{e?(t.Vu.Go(),Ju(t)?Xu(t):t.Pu.set("Unknown")):(await t.Vu.stop(),tl(t))}))),t.Vu}function yl(t){return t.Su||(t.Su=function(t,e,n){const r=os(t);return r.lu(),new ju(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{oo:hl.bind(null,t),co:gl.bind(null,t),cu:dl.bind(null,t),uu:fl.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Go(),await ol(t)):(await t.Su.stop(),t.Tu.length>0&&(ts("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))}))),t.Su}class vl{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new vl(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cs(as.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Al(t,e){if(es("AsyncQueue",`${e}: ${t}`),Rs(t))return new cs(as.UNAVAILABLE,`${e}: ${t}`);throw t}class wl{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ds.comparator(e.key,n.key):(t,e)=>Ds.comparator(t.key,e.key),this.keyedMap=da(),this.sortedSet=new qs(this.comparator)}static emptySet(t){return new wl(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof wl))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new wl;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class bl{constructor(){this.Du=new qs(Ds.comparator)}track(t){const e=t.doc.key,n=this.Du.get(e);n?0!==t.type&&3===n.type?this.Du=this.Du.insert(e,t):3===t.type&&1!==n.type?this.Du=this.Du.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Du=this.Du.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Du=this.Du.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Du=this.Du.remove(e):1===t.type&&2===n.type?this.Du=this.Du.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Du=this.Du.insert(e,{type:2,doc:t.doc}):is():this.Du=this.Du.insert(e,t)}Cu(){const t=[];return this.Du.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Cl{constructor(t,e,n,r,i,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Cl(t,e,wl.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&na(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class El{constructor(){this.xu=void 0,this.listeners=[]}}class Tl{constructor(){this.queries=new ca((t=>ra(t)),na),this.onlineState="Unknown",this.Nu=new Set}}function Il(t,e){const n=os(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.Mu(t)&&(r=!0);i.xu=t}}r&&Sl(n)}function kl(t,e,n){const r=os(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Sl(t){t.Nu.forEach((t=>{t.next()}))}class Dl{constructor(t,e,n){this.query=t,this.Ou=e,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=n||{}}Mu(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Cl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.$u?this.Bu(t)&&(this.Ou.next(t),e=!0):this.Lu(t,this.onlineState)&&(this.qu(t),e=!0),this.Fu=t,e}onError(t){this.Ou.error(t)}ku(t){this.onlineState=t;let e=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,t)&&(this.qu(this.Fu),e=!0),e}Lu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Uu||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Bu(t){if(t.docChanges.length>0)return!0;const e=this.Fu&&this.Fu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}qu(t){t=Cl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.$u=!0,this.Ou.next(t)}}class xl{constructor(t){this.key=t}}class _l{constructor(t){this.key=t}}class Nl{constructor(t,e){this.query=t,this.Ju=e,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Aa(),this.mutatedKeys=Aa(),this.Zu=oa(t),this.tc=new wl(this.Zu)}get ec(){return this.Ju}nc(t,e){const n=e?e.sc:new bl,r=e?e.tc:this.tc;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),l=sa(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.ic(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Zu(l,a)>0||c&&this.Zu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{tc:s,sc:n,ji:o,mutatedKeys:i}}ic(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.tc;this.tc=t.tc,this.mutatedKeys=t.mutatedKeys;const i=t.sc.Cu();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return is()}};return n(t)-n(e)}(t.type,e.type)||this.Zu(t.doc,e.doc))),this.rc(n);const s=e?this.oc():[],o=0===this.Xu.size&&this.current?1:0,a=o!==this.Yu;return this.Yu=o,0!==i.length||a?{snapshot:new Cl(this.query,t.tc,r,i,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:s}:{uc:s}}ku(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({tc:this.tc,sc:new bl,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(t){return!this.Ju.has(t)&&!!this.tc.has(t)&&!this.tc.get(t).hasLocalMutations}rc(t){t&&(t.addedDocuments.forEach((t=>this.Ju=this.Ju.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ju=this.Ju.delete(t))),this.current=t.current)}oc(){if(!this.current)return[];const t=this.Xu;this.Xu=Aa(),this.tc.forEach((t=>{this.cc(t.key)&&(this.Xu=this.Xu.add(t.key))}));const e=[];return t.forEach((t=>{this.Xu.has(t)||e.push(new _l(t))})),this.Xu.forEach((n=>{t.has(n)||e.push(new xl(n))})),e}ac(t){this.Ju=t.sr,this.Xu=Aa();const e=this.nc(t.documents);return this.applyChanges(e,!0)}hc(){return Cl.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class Bl{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Ml{constructor(t){this.key=t,this.lc=!1}}class Ll{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fc={},this.dc=new ca((t=>ra(t)),na),this._c=new Map,this.wc=new Set,this.mc=new qs(Ds.comparator),this.gc=new Map,this.yc=new uu,this.Ic={},this.Tc=new Map,this.Ec=ru.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}async function Rl(t,e){const n=function(t){const e=os(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ul.bind(null,e),e.fc.eu=Il.bind(null,e.eventManager),e.fc.vc=kl.bind(null,e.eventManager),e}(t);let r,i;const s=n.dc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.hc();else{const t=await function(t,e){const n=os(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Fs.getTargetData(t,e).next((i=>i?(r=i,Ls.resolve(r)):n.Fs.allocateTargetId(t).next((i=>(r=new Yc(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Fs.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.Hi.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(t.targetId,t),n.Ji.set(e,t.targetId)),t}))}(n.localStore,ta(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r,i){t.Rc=(e,n,r)=>async function(t,e,n,r){let i=e.view.nc(n);i.ji&&(i=await Iu(t.localStore,e.query,!1).then((({documents:t})=>e.view.nc(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return Wl(t,e.targetId,o.uc),o.snapshot}(t,e,n,r);const s=await Iu(t.localStore,e,!0),o=new Nl(e,s.sr),a=o.nc(s.documents),c=fc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=o.applyChanges(a,t.isPrimaryClient,c);Wl(t,n,u.uc);const l=new Bl(e,n,o);return t.dc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}(n,e,r,"current"===s,t.resumeToken),n.isPrimaryClient&&Gu(n.remoteStore,t)}return i}async function Ol(t,e){const n=os(t),r=n.dc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((t=>!na(t,e)))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Tu(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ku(n.remoteStore,r.targetId),$l(n,r.targetId)})).catch(Ms)):($l(n,r.targetId),await Tu(n.localStore,r.targetId,!0))}async function Pl(t,e){const n=os(t);try{const t=await function(t,e){const n=os(t),r=e.snapshotVersion;let i=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Hi;const o=[];e.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Fs.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Fs.addMatchingKeys(t,s.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?u=u.withResumeToken(Qs.EMPTY_BYTE_STRING,Es.min()).withLastLimboFreeSnapshotVersion(Es.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Fs.updateTargetData(t,u))}));let a=la(),c=Aa();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=Aa(),i=Aa();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=la();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Es.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):ts("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{er:r,nr:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.er,c=t.nr}))),!r.isEqual(Es.min())){const e=n.Fs.getLastRemoteSnapshotVersion(t).next((e=>n.Fs.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return Ls.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Hi=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.gc.get(e);r&&(ss(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.lc=!0:t.modifiedDocuments.size>0?ss(r.lc):t.removedDocuments.size>0&&(ss(r.lc),r.lc=!1))})),await Ql(n,t,e)}catch(t){await Ms(t)}}function Fl(t,e,n){const r=os(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.dc.forEach(((n,r)=>{const i=r.view.ku(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=os(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.ku(e)&&(r=!0)})),r&&Sl(n)}(r.eventManager,e),t.length&&r.fc.eu(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ul(t,e,n){const r=os(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.gc.get(e),s=i&&i.key;if(s){let t=new qs(Ds.comparator);t=t.insert(s,Eo.newNoDocument(s,Es.min()));const n=Aa().add(s),i=new dc(Es.min(),new Map,new qs(ws),t,n);await Pl(r,i),r.mc=r.mc.remove(s),r.gc.delete(e),Kl(r)}else await Tu(r.localStore,e,!1).then((()=>$l(r,e,n))).catch(Ms)}async function Vl(t,e){const n=os(t),r=e.batch.batchId;try{const t=await function(t,e){const n=os(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=Ls.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);ss(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Aa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);zl(n,r,null),ql(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ql(n,t)}catch(t){await Ms(t)}}async function jl(t,e,n){const r=os(t);try{const t=await function(t,e){const n=os(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(ss(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);zl(r,e,n),ql(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ql(r,t)}catch(n){await Ms(n)}}function ql(t,e){(t.Tc.get(e)||[]).forEach((t=>{t.resolve()})),t.Tc.delete(e)}function zl(t,e,n){const r=os(t);let i=r.Ic[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Ic[r.currentUser.toKey()]=i}}function $l(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.dc.delete(r),n&&t.fc.vc(r,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach((e=>{t.yc.containsKey(e)||Hl(t,e)}))}function Hl(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);null!==n&&(Ku(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),Kl(t))}function Wl(t,e,n){for(const r of n)r instanceof xl?(t.yc.addReference(r.key,e),Gl(t,r)):r instanceof _l?(ts("SyncEngine","Document no longer in limbo: "+r.key),t.yc.removeReference(r.key,e),t.yc.containsKey(r.key)||Hl(t,r.key)):is()}function Gl(t,e){const n=e.key,r=n.path.canonicalString();t.mc.get(n)||t.wc.has(r)||(ts("SyncEngine","New document in limbo: "+n),t.wc.add(r),Kl(t))}function Kl(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new Ds(Is.fromString(e)),r=t.Ec.next();t.gc.set(r,new Ml(n)),t.mc=t.mc.insert(n,r),Gu(t.remoteStore,new Yc(ta(Xo(n.path)),r,"TargetPurposeLimboResolution",Os.ct))}}async function Ql(t,e,n){const r=os(t),i=[],s=[],o=[];r.dc.isEmpty()||(r.dc.forEach(((t,a)=>{o.push(r.Rc(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=vu.Bi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.fc.eu(i),await async function(t,e){const n=os(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ls.forEach(e,(e=>Ls.forEach(e.$i,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>Ls.forEach(e.Fi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!Rs(t))throw t;ts("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Hi.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Hi=n.Hi.insert(e,i)}}}(r.localStore,s))}async function Yl(t,e){const n=os(t);if(!n.currentUser.isEqual(e)){ts("SyncEngine","User change. New user:",e.toKey());const t=await bu(n.localStore,e);n.currentUser=e,function(t,e){t.Tc.forEach((t=>{t.forEach((t=>{t.reject(new cs(as.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Tc.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ql(n,t.tr)}}function Xl(t,e){const n=os(t),r=n.gc.get(e);if(r&&r.lc)return Aa().add(r.key);{let t=Aa();const r=n._c.get(e);if(!r)return t;for(const e of r){const r=n.dc.get(e);t=t.unionWith(r.view.ec)}return t}}function Jl(t){const e=os(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jl.bind(null,e),e}class Zl{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Pu(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,r){return new wu(t,e,n,r)}(this.persistence,new Au,t.initialUser,this.serializer)}createPersistence(t){return new mu(yu.js,this.serializer)}createSharedClientState(t){return new Su}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class th{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Fl(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yl.bind(null,this.syncEngine),await async function(t,e){const n=os(t);e?(n.Au.delete(2),await Hu(n)):e||(n.Au.add(2),await Wu(n),n.Pu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Tl}createDatastore(t){const e=Pu(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new Ru(r));var r;return function(t,e,n,r){return new qu(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>Fl(this.syncEngine,t,0),s=xu.D()?new xu:new Du,new $u(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Ll(t,e,n,r,i,s);return o&&(a.Ac=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=os(t);ts("RemoteStore","RemoteStore shutting down."),e.Au.add(5),await Wu(e),e.vu.shutdown(),e.Pu.set("Unknown")}(this.remoteStore)}}class eh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Vc(this.observer.next,t)}error(t){this.observer.error?this.Vc(this.observer.error,t):es("Uncaught Error in snapshot listener:",t.toString())}Sc(){this.muted=!0}Vc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class nh{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Yi.UNAUTHENTICATED,this.clientId=As.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{ts("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(ts("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new cs(as.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Al(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function rh(t,e){t.asyncQueue.verifyOperationInProgress(),ts("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await bu(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ih(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ts("FirestoreClient","Using user provided OfflineComponentProvider");try{await rh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===as.FAILED_PRECONDITION||t.code===as.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;ns("Error using user provided cache. Falling back to memory cache: "+n),await rh(t,new Zl)}}else ts("FirestoreClient","Using default OfflineComponentProvider"),await rh(t,new Zl);return t._offlineComponents}(t);ts("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>ml(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>ml(e.remoteStore,n))),t._onlineComponents=e}async function sh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ts("FirestoreClient","Using user provided OnlineComponentProvider"),await ih(t,t._uninitializedComponentsProvider._online)):(ts("FirestoreClient","Using default OnlineComponentProvider"),await ih(t,new th))),t._onlineComponents}async function oh(t){const e=await sh(t),n=e.eventManager;return n.onListen=Rl.bind(null,e.syncEngine),n.onUnlisten=Ol.bind(null,e.syncEngine),n}function ah(t,e,n={}){const r=new us;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new eh({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=os(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new cs(as.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Dl(n,s,{includeMetadataChanges:!0,Uu:!0});return async function(t,e){const n=os(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new El),i)try{s.xu=await n.onListen(r)}catch(t){const n=Al(t,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.ku(n.onlineState),s.xu&&e.Mu(s.xu)&&Sl(n)}(t,o)}(await oh(t),t.asyncQueue,e,n,r))),r.promise}const ch=new Map;function uh(t,e,n){if(!n)throw new cs(as.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lh(t){if(!Ds.isDocumentKey(t))throw new cs(as.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hh(t){if(Ds.isDocumentKey(t))throw new cs(as.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":is()}function fh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new cs(as.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(t);throw new cs(as.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class gh{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new cs(as.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new cs(as.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new cs(as.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class mh{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new cs(as.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new cs(as.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gh(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new hs;switch(t.type){case"firstParty":return new ms(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new cs(as.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=ch.get(t);e&&(ts("ComponentProvider","Removing Datastore"),ch.delete(t),e.terminate())}(this),Promise.resolve()}}class ph{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ph(this.firestore,t,this._key)}}class yh{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new yh(this.firestore,t,this._query)}}class vh extends yh{constructor(t,e,n){super(t,e,Xo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ph(this.firestore,null,new Ds(t))}withConverter(t){return new vh(this.firestore,t,this._path)}}function Ah(t,e,...n){if(t=D(t),1===arguments.length&&(e=As.A()),uh("doc","path",e),t instanceof mh){const r=Is.fromString(e,...n);return lh(r),new ph(t,null,new Ds(r))}{if(!(t instanceof ph||t instanceof vh))throw new cs(as.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Is.fromString(e,...n));return lh(r),new ph(t.firestore,t instanceof vh?t.converter:null,new Ds(r))}}class wh{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new Fu(this,"async_queue_retry"),this.Yc=()=>{const t=Ou();t&&ts("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const t=Ou();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Xc(),this.Zc(t)}enterRestrictedMode(t){if(!this.Qc){this.Qc=!0,this.Hc=t||!1;const e=Ou();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Yc)}}enqueue(t){if(this.Xc(),this.Qc)return new Promise((()=>{}));const e=new us;return this.Zc((()=>this.Qc&&this.Hc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Gc.push(t),this.ta())))}async ta(){if(0!==this.Gc.length){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(t){if(!Rs(t))throw t;ts("AsyncQueue","Operation failed with retryable error: "+t)}this.Gc.length>0&&this.Lo.xo((()=>this.ta()))}}Zc(t){const e=this.Kc.then((()=>(this.Wc=!0,t().catch((t=>{this.zc=t,this.Wc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw es("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Wc=!1,t))))));return this.Kc=e,e}enqueueAfterDelay(t,e,n){this.Xc(),this.Jc.indexOf(t)>-1&&(e=0);const r=vl.createAndSchedule(this,t,e,n,(t=>this.ea(t)));return this.jc.push(r),r}Xc(){this.zc&&is()}verifyOperationInProgress(){}async na(){let t;do{t=this.Kc,await t}while(t!==this.Kc)}sa(t){for(const e of this.jc)if(e.timerId===t)return!0;return!1}ia(t){return this.na().then((()=>{this.jc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.jc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.na()}))}ra(t){this.Jc.push(t)}ea(t){const e=this.jc.indexOf(t);this.jc.splice(e,1)}}class bh extends mh{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new wh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Eh(this),this._firestoreClient.terminate()}}function Ch(t){return t._firestoreClient||Eh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Eh(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new ro(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new nh(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Th{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Th(Qs.fromBase64String(t))}catch(t){throw new cs(as.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Th(Qs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Ih{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new cs(as.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ss(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class kh{constructor(t){this._methodName=t}}class Sh{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new cs(as.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new cs(as.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ws(this._lat,t._lat)||ws(this._long,t._long)}}const Dh=/^__.*__$/;class xh{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Wa(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ha(t,this.data,e,this.fieldTransforms)}}function _h(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw is()}}class Nh{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.oa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(t){return new Nh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ca({path:n,ha:!1});return r.la(t),r}fa(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ca({path:n,ha:!1});return r.oa(),r}da(t){return this.ca({path:void 0,ha:!0})}_a(t){return qh(t,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}oa(){if(this.path)for(let t=0;t<this.path.length;t++)this.la(this.path.get(t))}la(t){if(0===t.length)throw this._a("Document fields must not be empty");if(_h(this.ua)&&Dh.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class Bh{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Pu(t)}ga(t,e,n,r=!1){return new Nh({ua:t,methodName:e,ma:n,path:Ss.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mh(t){const e=t._freezeSettings(),n=Pu(t._databaseId);return new Bh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Lh(t,e,n,r,i,s={}){const o=t.ga(s.merge||s.mergeFields?2:0,e,n,i);Fh("Data must be an object, but it was:",o,r);const a=Oh(r,o);let c,u;if(s.merge)c=new Gs(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=Uh(e,r,n);if(!o.contains(i))throw new cs(as.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);zh(t,i)||t.push(i)}c=new Gs(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new xh(new bo(a),c,u)}function Rh(t,e){if(Ph(t=D(t)))return Fh("Unsupported field value:",e,t),Oh(t,e);if(t instanceof kh)return function(t,e){if(!_h(e.ua))throw e._a(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e._a(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=Rh(i,e.da(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=D(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ea(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Cs.fromDate(t);return{timestampValue:kc(e.serializer,n)}}if(t instanceof Cs){const n=new Cs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kc(e.serializer,n)}}if(t instanceof Sh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Th)return{bytesValue:Sc(e.serializer,t._byteString)};if(t instanceof ph){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_c(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e._a(`Unsupported field value: ${dh(t)}`)}(t,e)}function Oh(t,e){const n={};return js(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,((t,r)=>{const i=Rh(r,e.aa(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ph(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Cs||t instanceof Sh||t instanceof Th||t instanceof ph||t instanceof kh)}function Fh(t,e,n){if(!Ph(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=dh(n);throw"an object"===r?e._a(t+" a custom object"):e._a(t+" "+r)}}function Uh(t,e,n){if((e=D(e))instanceof Ih)return e._internalPath;if("string"==typeof e)return jh(t,e);throw qh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vh=new RegExp("[~\\*/\\[\\]]");function jh(t,e,n){if(e.search(Vh)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch(r){throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new cs(as.INVALID_ARGUMENT,a+t+c)}function zh(t,e){return t.some((t=>t.isEqual(e)))}class $h{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ph(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Hh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Wh("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Hh extends $h{data(){return super.data()}}function Wh(t,e){return"string"==typeof e?jh(t,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}class Gh{convertValue(t,e="none"){switch(oo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Js(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw is()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Vs(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Sh(Js(t.latitude),Js(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=eo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(no(t));default:return null}}convertTimestamp(t){const e=Xs(t);return new Cs(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Is.fromString(t);ss(Qc(n));const r=new io(n.get(1),n.get(3)),i=new Ds(n.popFirst(5));return r.isEqual(e)||es(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class Kh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qh extends $h{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Wh("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Yh extends Qh{data(t={}){return super.data(t)}}class Xh{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Kh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Yh(this._firestore,this._userDataWriter,n.key,n,new Kh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new cs(as.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Yh(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Kh(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Yh(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kh(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Jh(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Jh(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return is()}}class Zh extends Gh{constructor(t){super(),this.firestore=t}convertBytes(t){return new Th(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ph(this.firestore,null,e)}}function td(t,e){return function(t,e){const n=new us;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=Jl(t);try{const t=await function(t,e){const n=os(t),r=Cs.now(),i=e.reduce(((t,e)=>t.add(e.key)),Aa());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=la(),c=Aa();return n.Xi.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=za(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Wa(t.key,e,Co(e.value.mapValue),Pa.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:fa(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Ic[t.currentUser.toKey()];r||(r=new qs(ws)),r=r.insert(e,n),t.Ic[t.currentUser.toKey()]=r}(r,t.batchId,n),await Ql(r,t.changes),await ol(r.remoteStore)}catch(t){const e=Al(t,"Failed to persist write");n.reject(e)}}(await function(t){return sh(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Ch(t),e)}!function(t,e=!0){Xi="9.21.0",dt(new x("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new bh(new fs(t.getProvider("auth-internal")),new ys(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new cs(as.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),pt(Qi,"3.11.0",t),pt(Qi,"3.11.0","esm2017")}();const ed=function(t,e){const n="string"==typeof t?t:"(default)",r=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=at){const e=ut.get(t);if(!e&&t===at)return mt();if(!e)throw ft.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=b())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");t&&function(t,e,n,r={}){var i;const s=(t=fh(t,mh))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=Yi.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[w(JSON.stringify({alg:"none",type:"JWT"})),w(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new cs(as.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Yi(s)}t._authCredentials=new ds(new ls(e,n))}}(r,...t)}return r}(mt({apiKey:"AIzaSyCHxTqQvnTAjl5ooscMWvpQah6OHCMCXJ4",authDomain:"to-do-list-953be.firebaseapp.com",projectId:"to-do-list-953be",storageBucket:"to-do-list-953be.appspot.com",messagingSenderId:"42011707913",appId:"1:42011707913:web:1d400cc3a58e78372d86d8",measurementId:"G-1B2229JLQY"}));async function nd(t){const e=function(t,e,...n){if(t=D(t),uh("collection","path",e),t instanceof mh){const r=Is.fromString(e,...n);return hh(r),new vh(t,null,r)}{if(!(t instanceof ph||t instanceof vh))throw new cs(as.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Is.fromString(e,...n));return hh(r),new vh(t.firestore,null,r)}}(t,"tasks");return(await function(t){t=fh(t,yh);const e=fh(t.firestore,bh),n=Ch(e),r=new Zh(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new cs(as.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),ah(n,t._query).then((n=>new Xh(e,r,t,n)))}(e)).docs.map((t=>t.data()))}class rd{constructor(t,e,n,r,i){this.title=t,this.description=e,this.dueDate=n,this.priorityLevel=r,this.taskCategory=i}}function id(){const t=document.querySelector("main");for(;t.firstChild;)t.removeChild(t.lastChild)}function sd(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function od(t){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(t)}function ad(t){return sd(1,arguments),t instanceof Date||"object"===od(t)&&"[object Date]"===Object.prototype.toString.call(t)}function cd(t){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(t)}function ud(t){sd(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===cd(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function ld(t){if(sd(1,arguments),!ad(t)&&"number"!=typeof t)return!1;var e=ud(t);return!isNaN(Number(e))}function hd(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function dd(t,e){sd(2,arguments);var n=ud(t).getTime(),r=hd(e);return new Date(n+r)}function fd(t,e){sd(2,arguments);var n=hd(e);return dd(t,-n)}var gd=864e5;function md(t){sd(1,arguments);var e=1,n=ud(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function pd(t){sd(1,arguments);var e=ud(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=md(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=md(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function yd(t){sd(1,arguments);var e=pd(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=md(n);return r}var vd=6048e5,Ad={};function wd(){return Ad}function bd(t,e){var n,r,i,s,o,a,c,u;sd(1,arguments);var l=wd(),h=hd(null!==(n=null!==(r=null!==(i=null!==(s=null==e?void 0:e.weekStartsOn)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(c=l.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=ud(t),f=d.getUTCDay(),g=(f<h?7:0)+f-h;return d.setUTCDate(d.getUTCDate()-g),d.setUTCHours(0,0,0,0),d}function Cd(t,e){var n,r,i,s,o,a,c,u;sd(1,arguments);var l=ud(t),h=l.getUTCFullYear(),d=wd(),f=hd(null!==(n=null!==(r=null!==(i=null!==(s=null==e?void 0:e.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:d.firstWeekContainsDate)&&void 0!==r?r:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,f),g.setUTCHours(0,0,0,0);var m=bd(g,e),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var y=bd(p,e);return l.getTime()>=m.getTime()?h+1:l.getTime()>=y.getTime()?h:h-1}function Ed(t,e){var n,r,i,s,o,a,c,u;sd(1,arguments);var l=wd(),h=hd(null!==(n=null!==(r=null!==(i=null!==(s=null==e?void 0:e.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:l.firstWeekContainsDate)&&void 0!==r?r:null===(c=l.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1),d=Cd(t,e),f=new Date(0);f.setUTCFullYear(d,0,h),f.setUTCHours(0,0,0,0);var g=bd(f,e);return g}var Td=6048e5;function Id(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const kd=function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return Id("yy"===e?r%100:r,e.length)},Sd=function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):Id(n+1,2)},Dd=function(t,e){return Id(t.getUTCDate(),e.length)},xd=function(t,e){return Id(t.getUTCHours()%12||12,e.length)},_d=function(t,e){return Id(t.getUTCHours(),e.length)},Nd=function(t,e){return Id(t.getUTCMinutes(),e.length)},Bd=function(t,e){return Id(t.getUTCSeconds(),e.length)},Md=function(t,e){var n=e.length,r=t.getUTCMilliseconds();return Id(Math.floor(r*Math.pow(10,n-3)),e.length)};var Ld={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return kd(t,e)},Y:function(t,e,n,r){var i=Cd(t,r),s=i>0?i:1-i;return"YY"===e?Id(s%100,2):"Yo"===e?n.ordinalNumber(s,{unit:"year"}):Id(s,e.length)},R:function(t,e){return Id(pd(t),e.length)},u:function(t,e){return Id(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Id(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Id(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Sd(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return Id(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=function(t,e){sd(1,arguments);var n=ud(t),r=bd(n,e).getTime()-Ed(n,e).getTime();return Math.round(r/Td)+1}(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Id(i,e.length)},I:function(t,e,n){var r=function(t){sd(1,arguments);var e=ud(t),n=md(e).getTime()-yd(e).getTime();return Math.round(n/vd)+1}(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):Id(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Dd(t,e)},D:function(t,e,n){var r=function(t){sd(1,arguments);var e=ud(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/gd)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):Id(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Id(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Id(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return Id(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xd(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):_d(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):Id(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):Id(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Nd(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Bd(t,e)},S:function(t,e){return Md(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return Od(i);case"XXXX":case"XX":return Pd(i);default:return Pd(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Od(i);case"xxxx":case"xx":return Pd(i);default:return Pd(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Rd(i,":");default:return"GMT"+Pd(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Rd(i,":");default:return"GMT"+Pd(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return Id(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return Id((r._originalDate||t).getTime(),e.length)}};function Rd(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(0===s)return n+String(i);var o=e||"";return n+String(i)+o+Id(s,2)}function Od(t,e){return t%60==0?(t>0?"-":"+")+Id(Math.abs(t)/60,2):Pd(t,e)}function Pd(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+Id(Math.floor(i/60),2)+n+Id(i%60,2)}const Fd=Ld;var Ud=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Vd=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const jd={p:Vd,P:function(t,e){var n,r=t.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Ud(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",Ud(i,e)).replace("{{time}}",Vd(s,e))}};function qd(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var zd=["D","DD"],$d=["YY","YYYY"];function Hd(t){return-1!==zd.indexOf(t)}function Wd(t){return-1!==$d.indexOf(t)}function Gd(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Kd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Qd(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}const Yd={date:Qd({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Qd({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Qd({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Xd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Jd(t){return function(e,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,s=null!=n&&n.width?String(n.width):i;r=t.formattingValues[s]||t.formattingValues[i]}else{var o=t.defaultWidth,a=null!=n&&n.width?String(n.width):t.defaultWidth;r=t.values[a]||t.values[o]}return r[t.argumentCallback?t.argumentCallback(e):e]}}const Zd={ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Jd({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Jd({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Jd({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Jd({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Jd({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function tf(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o,a=s[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?nf(c,(function(t){return t.test(a)})):ef(c,(function(t){return t.test(a)}));o=t.valueCallback?t.valueCallback(u):u,o=n.valueCallback?n.valueCallback(o):o;var l=e.slice(a.length);return{value:o,rest:l}}}function ef(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function nf(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}var rf,sf={ordinalNumber:(rf={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(rf.matchPattern);if(!n)return null;var r=n[0],i=t.match(rf.parsePattern);if(!i)return null;var s=rf.valueCallback?rf.valueCallback(i[0]):i[0];s=e.valueCallback?e.valueCallback(s):s;var o=t.slice(r.length);return{value:s,rest:o}}),era:tf({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tf({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:tf({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tf({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tf({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const of={code:"en-US",formatDistance:function(t,e,n){var r,i=Kd[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Yd,formatRelative:function(t,e,n,r){return Xd[t]},localize:Zd,match:sf,options:{weekStartsOn:0,firstWeekContainsDate:1}};var af=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uf=/^'([^]*?)'?$/,lf=/''/g,hf=/[a-zA-Z]/;function df(t,e,n){var r,i,s,o,a,c,u,l,h,d,f,g,m,p,y,v,A,w;sd(2,arguments);var b=String(e),C=wd(),E=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:C.locale)&&void 0!==r?r:of,T=hd(null!==(s=null!==(o=null!==(a=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(u=n.locale)||void 0===u||null===(l=u.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:C.firstWeekContainsDate)&&void 0!==o?o:null===(h=C.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=hd(null!==(f=null!==(g=null!==(m=null!==(p=null==n?void 0:n.weekStartsOn)&&void 0!==p?p:null==n||null===(y=n.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:C.weekStartsOn)&&void 0!==g?g:null===(A=C.locale)||void 0===A||null===(w=A.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==f?f:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var k=ud(t);if(!ld(k))throw new RangeError("Invalid time value");var S=qd(k),D=fd(k,S),x={firstWeekContainsDate:T,weekStartsOn:I,locale:E,_originalDate:k},_=b.match(cf).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,jd[e])(t,E.formatLong):t})).join("").match(af).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return ff(r);var s=Fd[i];if(s)return null!=n&&n.useAdditionalWeekYearTokens||!Wd(r)||Gd(r,e,String(t)),null!=n&&n.useAdditionalDayOfYearTokens||!Hd(r)||Gd(r,e,String(t)),s(D,r,E.localize,x);if(i.match(hf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("");return _}function ff(t){var e=t.match(uf);return e?e[1].replace(lf,"'"):t}async function gf(t,e,n,r,i,s){await nd(ed);let o=t;const a=document.querySelector("main"),c=document.createElement("form");c.classList.add("taskFormContent");const u=document.createElement("div");u.classList.add("formTextInput","taskNameDiv");const l=document.createElement("label");l.setAttribute("for","taskName"),l.textContent="Task name:";const h=document.createElement("input");h.setAttribute("required",""),null!=t&&h.setAttribute("value",t),h.setAttribute("id","taskName"),h.setAttribute("name","taskName");const d=document.createElement("div");d.classList.add("formTextInput","taskDescDiv");const f=document.createElement("label");f.setAttribute("for","taskDesc"),f.textContent="Description:";const g=document.createElement("textarea");g.setAttribute("required",""),null!=e&&(g.textContent=e),g.setAttribute("id","taskDesc"),g.setAttribute("name","taskDesc");const m=document.createElement("div");m.classList.add("formTextInput","taskPriorityDiv");const p=document.createElement("label");p.setAttribute("for","taskPriority"),p.textContent="Priority:";const y=document.createElement("select");y.setAttribute("required",""),null!=r&&y.setAttribute("value",r),y.setAttribute("id","taskPriority"),y.setAttribute("name","taskPriority");const v=document.createElement("option");v.textContent="Essential",v.setAttribute("value","Essential");const A=document.createElement("option");A.textContent="Normal",A.setAttribute("value","Normal"),y.appendChild(A),y.appendChild(v);const w=document.createElement("div");w.classList.add("formTextInput","taskCategoryDiv");const b=document.createElement("label");b.setAttribute("for","taskCategory"),b.textContent="Category:";const C=document.createElement("select"),E=document.createElement("option");E.textContent="Work",E.setAttribute("value","Work");const T=document.createElement("option");T.textContent="House",T.setAttribute("value","House");const I=document.createElement("option");I.textContent="Hobby",I.setAttribute("value","Hobby"),C.appendChild(E),C.appendChild(T),C.appendChild(I),C.setAttribute("required",""),null!=i&&C.setAttribute("value",i),C.setAttribute("id","category"),C.setAttribute("name","category");const k=document.createElement("div");k.classList.add("formTextInput","dueDateDiv");const S=document.createElement("label");S.setAttribute("for","dueDate"),S.textContent="Due date:";const D=document.createElement("input");D.setAttribute("type","date"),D.setAttribute("required",""),null!=s&&D.setAttribute("value",s),D.setAttribute("id","dueDateInput"),D.setAttribute("name","dueDateInput");const x=document.createElement("input");x.setAttribute("type","submit"),x.setAttribute("id","addTask"),x.textContent="Add Task";const _=document.createElement("button");_.classList.add("cancelNewTaskBtn"),_.textContent="Cancel",_.addEventListener("click",(function(){id(),yf()})),c.appendChild(u),u.appendChild(l),u.appendChild(h),c.appendChild(w),w.appendChild(b),w.appendChild(C),c.appendChild(m),m.appendChild(p),m.appendChild(y),c.appendChild(k),k.appendChild(S),k.appendChild(D),c.appendChild(d),d.appendChild(f),d.appendChild(g);const N=document.createElement("div");N.classList.add("formButtonDiv"),c.appendChild(N),N.appendChild(_),N.appendChild(x),c.addEventListener("submit",(t=>{t.preventDefault();let e=df(new Date(`${dueDateInput.value}T00:00`),"PP");(function(t,e){!function(t,e,n){t=fh(t,ph);const r=fh(t.firestore,bh),i=function(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e,n);td(r,[Lh(Mh(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Pa.none())])}(Ah(ed,"tasks",e),{title:t.title,description:t.description,dueDate:t.dueDate,priorityLevel:t.priorityLevel,taskCategory:t.taskCategory})})(new rd(taskName.value,taskDesc.value,e,y.value,category.value),o),id(),yf()})),a.appendChild(c)}function mf(t,e,n,r,i){const s=document.querySelector(".taskDescColumn");for(;s.firstChild;)s.removeChild(s.lastChild);const o=document.createElement("div");o.classList.add("taskDetailName"),o.textContent=t;const a=document.createElement("div");a.classList.add("taskDetailCategory"),a.textContent=r;const c=document.createElement("div");c.classList.add("taskDetailPriority"),c.textContent=n;const u=document.createElement("div");u.classList.add("taskDetailDueDate"),u.textContent=df(new Date(i),"PP");const l=document.createElement("div");l.classList.add("taskDetailDescription"),l.textContent=e;const h=document.createElement("button");h.classList.add("editTaskBtn"),h.textContent="Edit",h.addEventListener("click",(function(){id(),gf(t,e)}));const d=document.createElement("button");d.classList.add("deleteTaskBtn"),d.textContent="Delete",d.addEventListener("click",(function(){console.log("removed!"),async function(t){var e;await(e=Ah(ed,"tasks",t),td(fh(e.firestore,bh),[new Ya(e._key,Pa.none())]))}(t),id(),yf()})),s.appendChild(o),s.appendChild(a),s.appendChild(c),s.appendChild(u),s.appendChild(l),s.appendChild(h),s.appendChild(d)}async function pf(t){const e=document.querySelector(".displayedTasks");for(;e.firstChild;)e.removeChild(e.lastChild);let n=await nd(ed);if(null==t)for(const t in n){let r=document.createElement("div");r.classList.add("taskRow");let i=document.createElement("label"),s=document.createElement("div");s.classList.add("taskRowName");let o=document.createElement("div");o.classList.add("taskRowDate");let a=document.createElement("div");a.classList.add("taskRowDefaultMark");let c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name","currentSelection"),s.textContent=n[t].title,o.textContent=df(new Date(n[t].dueDate),"PP"),r.appendChild(s),r.appendChild(o),r.appendChild(a),a.appendChild(c),r.addEventListener("click",(function(){mf(n[t].title,n[t].description,n[t].priorityLevel,n[t].taskCategory,n[t].dueDate)})),i.appendChild(r),e.appendChild(i)}else for(const r in n)if(n[r].taskCategory==t){let t=document.createElement("div");t.classList.add("taskRow");let i=document.createElement("label"),s=document.createElement("div");s.classList.add("taskRowName");let o=document.createElement("div");o.classList.add("taskRowDate");let a=document.createElement("div");a.classList.add("taskRowDefaultMark");let c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name","currentSelection"),s.textContent=n[r].title,o.textContent=n[r].dueDate,t.appendChild(s),t.appendChild(o),t.appendChild(a),a.appendChild(c),t.addEventListener("click",(function(){mf(n[r].title,n[r].description,n[r].priorityLevel,n[r].taskCategory,n[r].dueDate)})),i.appendChild(t),e.appendChild(i)}}const yf=()=>{const t=document.querySelector("main"),e=document.createElement("div");e.classList.add("listViewContent");const n=document.createElement("div");n.classList.add("taskListColumn");const r=document.createElement("div");r.classList.add("taskCategoryTabs");const i=document.createElement("button"),s=document.createElement("button"),o=document.createElement("button"),a=document.createElement("button");i.textContent="All",o.textContent="House",s.textContent="Work",a.textContent="Hobbies",i.addEventListener("click",(function(){pf()})),s.addEventListener("click",(function(){pf("Work")})),o.addEventListener("click",(function(){pf("House")})),a.addEventListener("click",(function(){pf("Hobby")}));const c=document.createElement("div");c.classList.add("displayedTasks");const u=document.createElement("div");u.classList.add("taskDescColumn");const l=document.createElement("div");l.classList.add("blankDescPlaceholder"),l.textContent="Select a task to display details and options",t.appendChild(e),e.appendChild(n),n.appendChild(r),n.appendChild(c),r.appendChild(i),r.appendChild(o),r.appendChild(s),r.appendChild(a),e.appendChild(u),u.appendChild(l),pf()};!function(t){let e;try{e=window.localStorage;const t="__storage_test__";e.setItem(t,t),e.removeItem(t)}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}(),yf(),document.getElementById("addTaskButton").addEventListener("click",(function(){id(),gf()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBU1csY0FBYyxPQUNwRGtzRSxFQUFxQjlELFVBQVU5NkQsSUFBSSx3QkFDbkM0K0QsRUFBcUIzRCxZQUFjLCtDQUVuQzF0RSxFQUFRaUYsWUFBWTZyRSxHQUNwQkEsRUFBZ0I3ckUsWUFBWThyRSxHQUM1QkEsRUFBZTlyRSxZQUFZK3JFLEdBQzNCRCxFQUFlOXJFLFlBQVlvckUsR0FDM0JXLEVBQWlCL3JFLFlBQVlnc0UsR0FDN0JELEVBQWlCL3JFLFlBQVlrc0UsR0FDN0JILEVBQWlCL3JFLFlBQVlpc0UsR0FDN0JGLEVBQWlCL3JFLFlBQVltc0UsR0FDN0JOLEVBQWdCN3JFLFlBQVkwcUUsR0FDNUJBLEVBQWUxcUUsWUFBWW9zRSxHQUUzQmpCLElBQWMsR0N6Q2xCLFNBQTBCbGhFLEdBQ3hCLElBQUlvaUUsRUFDSixJQUNFQSxFQUFVNXNFLE9BQVcsYUFDckIsTUFBTTZjLEVBQUksbUJBQ1YrdkQsRUFBUUMsUUFBUWh3RCxFQUFHQSxHQUNuQit2RCxFQUFRRSxXQUFXandELEVBa0JyQixDQWhCRSxNQUFPemMsR0FDUCxPQUNFQSxhQUFhaVMsZUFFRCxLQUFYalMsRUFBRXlJLE1BRVUsT0FBWHpJLEVBQUV5SSxNQUdTLHVCQUFYekksRUFBRTJHLE1BRVMsK0JBQVgzRyxFQUFFMkcsT0FFSjZsRSxHQUNtQixJQUFuQkEsRUFBUW54RSxNQUVaLENBQ0YsQ0FFSXN4RSxHQVNKMUMsS0FHc0J2cUUsU0FBU2t0RSxlQUFlLGlCQUNoQzE2RCxpQkFBaUIsU0FBUyxXQUNwQ3luRCxLQUNBME8sSUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvcmVzZXQuY3NzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90by1kby1saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby1saXN0L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvLWxpc3Qvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly90by1kby1saXN0L3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL3Jlc2V0LmNzcz9lZGUwIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9zcmMvc3R5bGUuY3NzPzcxNjMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy90YXNrRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vc3JjL2NsZWFyVmlldy5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVmFsaWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vYWRkTWlsbGlzZWNvbmRzL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N1Yk1pbGxpc2Vjb25kcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2dldFVUQ0RheU9mWWVhci9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3N0YXJ0T2ZVVENJU09XZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZ2V0VVRDSVNPV2Vla1llYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9zdGFydE9mVVRDSVNPV2Vla1llYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9nZXRVVENJU09XZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9zdGFydE9mVVRDV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2dldFVUQ1dlZWtZZWFyL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvc3RhcnRPZlVUQ1dlZWtZZWFyL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZ2V0VVRDV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2FkZExlYWRpbmdaZXJvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2Zvcm1hdC9saWdodEZvcm1hdHRlcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9mb3JtYXQvZm9ybWF0dGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2Zvcm1hdC9sb25nRm9ybWF0dGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9wcm90ZWN0ZWRUb2tlbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL19saWIvYnVpbGRGb3JtYXRMb25nRm4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0TG9uZy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRSZWxhdGl2ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9sb2NhbGUvX2xpYi9idWlsZExvY2FsaXplRm4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL19saWIvbG9jYWxpemUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL19saWIvYnVpbGRNYXRjaEZuL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2xvY2FsZS9lbi1VUy9fbGliL21hdGNoL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2xvY2FsZS9fbGliL2J1aWxkTWF0Y2hQYXR0ZXJuRm4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vbG9jYWxlL2VuLVVTL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvZGVmYXVsdExvY2FsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9mb3JtYXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9kcmF3Rm9ybVZpZXcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9maWxsVGFza0Rlc2MuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9wb3B1bGF0ZUxpc3QuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9kcmF3TGlzdFZpZXcuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvIFxcbiAgIHYyLjAgfCAyMDExMDEyNlxcbiAgIExpY2Vuc2U6IG5vbmUgKHB1YmxpYyBkb21haW4pXFxuKi9cXG5cXG5odG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXFxuaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLFxcbmEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSxcXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXFxuc21hbGwsIHN0cmlrZSwgc3Ryb25nLCBzdWIsIHN1cCwgdHQsIHZhcixcXG5iLCB1LCBpLCBjZW50ZXIsXFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcXG5maWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCxcXG50YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCxcXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCwgXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBcXG5tZW51LCBuYXYsIG91dHB1dCwgcnVieSwgc2VjdGlvbiwgc3VtbWFyeSxcXG50aW1lLCBtYXJrLCBhdWRpbywgdmlkZW8ge1xcblxcdG1hcmdpbjogMDtcXG5cXHRwYWRkaW5nOiAwO1xcblxcdGJvcmRlcjogMDtcXG5cXHRmb250LXNpemU6IDEwMCU7XFxuXFx0Zm9udDogaW5oZXJpdDtcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxufVxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBcXG5mb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5ib2R5IHtcXG5cXHRsaW5lLWhlaWdodDogMTtcXG59XFxub2wsIHVsIHtcXG5cXHRsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlLCBxIHtcXG5cXHRxdW90ZXM6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLCBxOmFmdGVyIHtcXG5cXHRjb250ZW50OiAnJztcXG5cXHRjb250ZW50OiBub25lO1xcbn1cXG50YWJsZSB7XFxuXFx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG5cXHRib3JkZXItc3BhY2luZzogMDtcXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3Jlc2V0LmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTs7O0NBR0M7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Q0FhQyxTQUFTO0NBQ1QsVUFBVTtDQUNWLFNBQVM7Q0FDVCxlQUFlO0NBQ2YsYUFBYTtDQUNiLHdCQUF3QjtBQUN6QjtBQUNBLGdEQUFnRDtBQUNoRDs7Q0FFQyxjQUFjO0FBQ2Y7QUFDQTtDQUNDLGNBQWM7QUFDZjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxZQUFZO0FBQ2I7QUFDQTs7Q0FFQyxXQUFXO0NBQ1gsYUFBYTtBQUNkO0FBQ0E7Q0FDQyx5QkFBeUI7Q0FDekIsaUJBQWlCO0FBQ2xCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qIGh0dHA6Ly9tZXllcndlYi5jb20vZXJpYy90b29scy9jc3MvcmVzZXQvIFxcbiAgIHYyLjAgfCAyMDExMDEyNlxcbiAgIExpY2Vuc2U6IG5vbmUgKHB1YmxpYyBkb21haW4pXFxuKi9cXG5cXG5odG1sLCBib2R5LCBkaXYsIHNwYW4sIGFwcGxldCwgb2JqZWN0LCBpZnJhbWUsXFxuaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgYmxvY2txdW90ZSwgcHJlLFxcbmEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSxcXG5kZWwsIGRmbiwgZW0sIGltZywgaW5zLCBrYmQsIHEsIHMsIHNhbXAsXFxuc21hbGwsIHN0cmlrZSwgc3Ryb25nLCBzdWIsIHN1cCwgdHQsIHZhcixcXG5iLCB1LCBpLCBjZW50ZXIsXFxuZGwsIGR0LCBkZCwgb2wsIHVsLCBsaSxcXG5maWVsZHNldCwgZm9ybSwgbGFiZWwsIGxlZ2VuZCxcXG50YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCxcXG5hcnRpY2xlLCBhc2lkZSwgY2FudmFzLCBkZXRhaWxzLCBlbWJlZCwgXFxuZmlndXJlLCBmaWdjYXB0aW9uLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBcXG5tZW51LCBuYXYsIG91dHB1dCwgcnVieSwgc2VjdGlvbiwgc3VtbWFyeSxcXG50aW1lLCBtYXJrLCBhdWRpbywgdmlkZW8ge1xcblxcdG1hcmdpbjogMDtcXG5cXHRwYWRkaW5nOiAwO1xcblxcdGJvcmRlcjogMDtcXG5cXHRmb250LXNpemU6IDEwMCU7XFxuXFx0Zm9udDogaW5oZXJpdDtcXG5cXHR2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XFxufVxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBcXG5mb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcblxcdGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5ib2R5IHtcXG5cXHRsaW5lLWhlaWdodDogMTtcXG59XFxub2wsIHVsIHtcXG5cXHRsaXN0LXN0eWxlOiBub25lO1xcbn1cXG5ibG9ja3F1b3RlLCBxIHtcXG5cXHRxdW90ZXM6IG5vbmU7XFxufVxcbmJsb2NrcXVvdGU6YmVmb3JlLCBibG9ja3F1b3RlOmFmdGVyLFxcbnE6YmVmb3JlLCBxOmFmdGVyIHtcXG5cXHRjb250ZW50OiAnJztcXG5cXHRjb250ZW50OiBub25lO1xcbn1cXG50YWJsZSB7XFxuXFx0Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG5cXHRib3JkZXItc3BhY2luZzogMDtcXG59XCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCJmb3Qtcm9kaW4tcHJvLWN1Zm9uZm9udHMvRk9UUm9kaW4gUHJvIE0ub3RmXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiOnJvb3Qge1xcbiAgICAtLWRhcms6IHJnYmEoMCwgMCwgMCwgMC41KTtcXG4gICAgLS1saWdodDogcmdiYSgwLCAwLCAwLCAwLjQpO1xcbn1cXG5cXG5AZm9udC1mYWNlIHtcXG4gICAgZm9udC1mYW1pbHk6IFJvZGluO1xcbiAgICBzcmM6IHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gKyBcIik7XFxufVxcblxcbmh0bWwge1xcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoI2I1ZDJmMCwgIzZiNzA1MiwgIzcwNjQ1OCk7XFxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XFxufVxcblxcbmh0bWwsIGJvZHkge1xcbiAgICBmb250LWZhbWlseTogUm9kaW47XFxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcXG4gICAgaGVpZ2h0OiAxMDB2aDtcXG4gICAgd2lkdGg6IDEwMHZ3OyBcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxuYm9keSB7XFxuICAgIGNvbG9yOiB3aGl0ZTtcXG4gICAgYWNjZW50LWNvbG9yOiB5ZWxsb3c7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxufVxcblxcbmEsIGE6dmlzaXRlZCB7XFxuICAgIGNvbG9yOiB3aGl0ZTtcXG59XFxuXFxuI2FkZFRhc2tCdXR0b24ge1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xcbn1cXG5cXG50ZXh0YXJlYSB7XFxuICAgIHJlc2l6ZTogbm9uZTtcXG4gICAgaGVpZ2h0OiA1MCU7XFxufVxcblxcbmgxIHtcXG4gICAgZm9udC1zaXplOiAyZW07XFxufVxcblxcbmJ1dHRvbiwgaW5wdXQsIHNlbGVjdCB7XFxuICAgIGZvbnQtZmFtaWx5OiBSb2RpbjtcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgICBwYWRkaW5nOiA1cHg7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbmhlYWRlciwgZm9vdGVyIHtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFyayk7XFxuICAgIHBhZGRpbmc6IDEwcHg7XFxufVxcblxcbmhlYWRlciB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgICBnYXA6IDIwcHg7XFxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxufVxcblxcbm1haW4ge1xcbiAgICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMzExKTsgKi9cXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgICBtYXgtaGVpZ2h0OiAxMDAlO1xcbiAgICAvKiBtYXJnaW46IDAgNTBweCAwIDUwcHg7ICovXFxuICAgIHBhZGRpbmc6IDIwcHggNTBweCAyMHB4IDUwcHg7XFxuICAgIC8qIGdyaWQtY29sdW1uOiAyIC8gLTI7ICovXFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbn1cXG5cXG4udGFza0Zvcm1Db250ZW50LCAubGlzdFZpZXdDb250ZW50IHtcXG4gbWFyZ2luOiBhdXRvO1xcbn1cXG5cXG4udGFza0Zvcm1Db250ZW50IHtcXG4gICAgaGVpZ2h0OiA1MHZoO1xcbiAgICB3aWR0aDogNTB2dzsgXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTI4LCAxMjgsIDEyOCwgMC41MjYpO1xcbiAgICBwbGFjZS1zZWxmOiBjZW50ZXI7XFxufVxcblxcbi5saXN0Vmlld0NvbnRlbnQge1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIG1heC1oZWlnaHQ6IDEwMCU7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gICAgZ2FwOiA0MHB4O1xcbiAgICAvKiBvdmVyZmxvdzogaGlkZGVuOyAqL1xcbn1cXG5cXG4ubGlzdFZpZXdDb250ZW50ID4gKiB7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgd2lkdGg6IDQwdnc7XFxufVxcblxcbi50YXNrTGlzdENvbHVtbiB7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgbWF4LWhlaWdodDogMTAwJTtcXG4gICAgZ2FwOiA1cHg7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxufVxcblxcbi50YXNrTGlzdENvbHVtbiA+ICoge1xcbiAgICAvKiBib3gtc2l6aW5nOiBib3JkZXItYm94OyAqL1xcbn1cXG5cXG4udGFza0NhdGVnb3J5VGFicyB7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGhlaWdodDogMTIuNSU7XFxuICAgIG1heC1oZWlnaHQ6IDEyLjUlO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgYm9yZGVyLWJvdHRvbTogc29saWQgYmxhY2sgMnB4O1xcbiAgICBkaXNwbGF5OiBncmlkO1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg0LCAxZnIpO1xcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XFxuICAgIG1hcmdpbjogNXB4IDAgNXB4IDA7XFxufVxcblxcbi50YXNrQ2F0ZWdvcnlUYWJzID4gKiB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuXFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuXFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxufVxcblxcbi5kaXNwbGF5ZWRUYXNrcyB7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGhlaWdodDogMWZyO1xcbiAgICBtYXgtaGVpZ2h0OiAxZnI7XFxuICAgIGdhcDogNHB4O1xcbiAgICBvdmVyZmxvdzogc2Nyb2xsO1xcbn1cXG5cXG4udGFza1JvdyB7XFxuICAgIC8qIGJhY2tncm91bmQtY29sb3I6IGdyZWVueWVsbG93OyAqL1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrKTtcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgYm9yZGVyOiBzb2xpZCB2YXIoLS1saWdodCkgMnB4O1xcbiAgICBkaXNwbGF5OiBncmlkO1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAzMHB4O1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDQwcHggMjBweDtcXG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xcbn1cXG5cXG4udGFza1JvdyA+ICoge1xcbiAgICBvdmVyZmxvdy1pbmxpbmU6IGhpZGRlbjtcXG59XFxuXFxuLnRhc2tSb3c6aG92ZXIge1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICBib3JkZXI6IHNvbGlkIHdoaXRlIDJweDtcXG59XFxuXFxuLnRhc2tSb3dOYW1lIHtcXG4gICAgZ3JpZC1jb2x1bW46IDEgLyAyO1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgZm9udC1zaXplOiAxLjFlbTtcXG4gICAgbWFyZ2luOiBhdXRvIDBweDtcXG59XFxuXFxuLnRhc2tSb3dEYXRlIHtcXG4gICAgZ3JpZC1jb2x1bW46IDEgLyAyOyAgIFxcbiAgICBjb2xvcjogeWVsbG93O1xcbiAgICBtYXJnaW46IGF1dG8gMHB4O1xcbn1cXG5cXG4udGFza1Jvd0RlZmF1bHRNYXJrIHtcXG4gICAgZ3JpZC1jb2x1bW46IDIgLyAtMTtcXG4gICAgZ3JpZC1yb3c6IDEgLyAtMTtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg4OCwgODgsIDg4LCAwLjUzMyk7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxufVxcblxcbi50YXNrRGVzY0NvbHVtbiB7XFxuICAgIC8qIG1heC1oZWlnaHQ6IDkwJTsgKi9cXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFyayk7XFxuICAgIGRpc3BsYXk6IGdyaWQ7XFxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAyZnI7XFxuICAgIGdyaWQtdGVtcGxhdGUtcm93czogMmZyIDFmciAxNWZyIDFmcjsgXFxuICAgIHBhZGRpbmc6IDEwcHg7XFxufVxcblxcbi50YXNrRGVzY0NvbHVtbiA+ICoge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICAvKiBib3JkZXI6IDFweCBzb2xpZCBibGFjazsgKi9cXG4gICAgcGFkZGluZzogNXB4OyBcXG4gICAgLyogZm9udC1zaXplOiAxdnc7ICovXFxufVxcblxcbi5ibGFua0Rlc2NQbGFjZWhvbGRlciB7XFxuICAgIGdyaWQtY29sdW1uOiAxIC8gLTE7XFxufVxcblxcbi50YXNrRGV0YWlsTmFtZSwgLnRhc2tEZXRhaWxDYXRlZ29yeSwgIC50YXNrRGV0YWlsUHJpb3JpdHksIC50YXNrRGV0YWlsRHVlRGF0ZSB7XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIC8qIGJveC1zaXppbmc6IGJvcmRlci1ib3g7ICovXFxuICAgIC8qIG92ZXJmbG93OiBzY3JvbGw7ICovXFxufVxcblxcbi50YXNrRGV0YWlsTmFtZSB7XFxuICAgIGdyaWQtY29sdW1uOiAxIC8gLTE7XFxuICAgIGJvcmRlci1ib3R0b206IHNvbGlkIHZhcigtLWxpZ2h0KSAycHg7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICBmb250LXNpemU6IDEuM2VtO1xcbn1cXG5cXG4udGFza0RldGFpbENhdGVnb3J5IHtcXG4gICAgZ3JpZC1jb2x1bW46IDEgLyAyO1xcbn1cXG5cXG4udGFza0RldGFpbFByaW9yaXR5IHtcXG4gICAgZ3JpZC1jb2x1bW46IDIgLyAzO1xcbn1cXG5cXG4udGFza0RldGFpbER1ZURhdGV7XFxuICAgIGdyaWQtY29sdW1uOiAzIC8gNDtcXG4gICAgY29sb3I6IHllbGxvdztcXG59XFxuXFxuLnRhc2tEZXRhaWxEZXNjcmlwdGlvbiB7XFxuICAgIGdyaWQtY29sdW1uOiAxIC8gLTE7XFxuICAgIGJvcmRlci1ib3R0b206IHNvbGlkIHZhcigtLWxpZ2h0KSAycHg7XFxuICAgIC8qIHBhZGRpbmctdG9wOiAxMHB4OyAqL1xcbiAgICAvKiBvdmVyZmxvdzogc2Nyb2xsOyAqL1xcbn1cXG5cXG4uZWRpdFRhc2tCdG4sIC5kZWxldGVUYXNrQnRuIHtcXG4gICAgZm9udC1zaXplOiA1cHg7XFxufVxcblxcbi5lZGl0VGFza0J0biB7XFxuICAgIGdyaWQtY29sdW1uOiAtMiAvIC0zXFxufVxcblxcbi5kZWxldGVUYXNrQnRuIHtcXG4gICAgd2lkdGg6IDUwJTtcXG4gICAgZ3JpZC1jb2x1bW46IC0xIC8gLTJcXG59XFxuXFxuLyogU3R5bGUgZm9yIGZvcm0gdmlldyAqL1xcbi50YXNrRm9ybUNvbnRlbnQge1xcbiAgICBwYWRkaW5nOiAyMHB4O1xcbiAgICBkaXNwbGF5OiBncmlkO1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciAxZnIgM2ZyIC41ZnI7XFxuICAgIGdhcDogNXB4O1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrKTtcXG59XFxuXFxuLnRhc2tGb3JtQ29udGVudCA+ICoge1xcbiAgICAvKiBib3JkZXI6IGJsYWNrIHNvbGlkIDFweDsgKi9cXG59XFxuXFxuLmZvcm1UZXh0SW5wdXQge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBnYXA6IDNweDtcXG59XFxuXFxuLnRhc2tOYW1lRGl2LCAudGFza0Rlc2NEaXYge1xcbiAgICBncmlkLWNvbHVtbjogMSAvIC0xO1xcbn1cXG5cXG4uZm9ybUJ1dHRvbkRpdiB7XFxuICAgIGdyaWQtY29sdW1uOiAtMSAvIC0yO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgICBhbGlnbi1jb250ZW50OiBzdHJldGNoO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XFxufVxcblxcbmZvb3RlciB7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSwwQkFBMEI7SUFDMUIsMkJBQTJCO0FBQy9COztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLDRDQUF1RDtBQUMzRDs7QUFFQTtJQUNJLHNEQUFzRDtJQUN0RCxzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixZQUFZO0lBQ1osc0JBQXNCO0FBQzFCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLG9CQUFvQjtJQUNwQixhQUFhO0lBQ2Isc0JBQXNCO0FBQzFCOztBQUVBO0lBQ0ksWUFBWTtBQUNoQjs7QUFF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SSxrQkFBa0I7SUFDbEIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixxQ0FBcUM7SUFDckMsdUJBQXVCO0lBQ3ZCLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLGNBQWM7QUFDbEI7O0FBRUE7SUFDSTtBQUNKOztBQUVBO0lBQ0ksVUFBVTtJQUNWO0FBQ0o7O0FBRUEsd0JBQXdCO0FBQ3hCO0lBQ0ksYUFBYTtJQUNiLGFBQWE7SUFDYixxQ0FBcUM7SUFDckMsb0NBQW9DO0lBQ3BDLFFBQVE7SUFDUiw2QkFBNkI7QUFDakM7O0FBRUE7SUFDSSw2QkFBNkI7QUFDakM7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLFFBQVE7QUFDWjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLG9CQUFvQjtJQUNwQixhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLHNCQUFzQjtJQUN0Qiw4QkFBOEI7QUFDbEM7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQix5QkFBeUI7QUFDN0JcIixcInNvdXJjZXNDb250ZW50XCI6W1wiOnJvb3Qge1xcbiAgICAtLWRhcms6IHJnYmEoMCwgMCwgMCwgMC41KTtcXG4gICAgLS1saWdodDogcmdiYSgwLCAwLCAwLCAwLjQpO1xcbn1cXG5cXG5AZm9udC1mYWNlIHtcXG4gICAgZm9udC1mYW1pbHk6IFJvZGluO1xcbiAgICBzcmM6IHVybChmb3Qtcm9kaW4tcHJvLWN1Zm9uZm9udHMvRk9UUm9kaW5cXFxcIFByb1xcXFwgTS5vdGYpO1xcbn1cXG5cXG5odG1sIHtcXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KCNiNWQyZjAsICM2YjcwNTIsICM3MDY0NTgpO1xcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xcbn1cXG5cXG5odG1sLCBib2R5IHtcXG4gICAgZm9udC1mYW1pbHk6IFJvZGluO1xcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICAgIGhlaWdodDogMTAwdmg7XFxuICAgIHdpZHRoOiAxMDB2dzsgXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxufVxcblxcbmJvZHkge1xcbiAgICBjb2xvcjogd2hpdGU7XFxuICAgIGFjY2VudC1jb2xvcjogeWVsbG93O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbn1cXG5cXG5hLCBhOnZpc2l0ZWQge1xcbiAgICBjb2xvcjogd2hpdGU7XFxufVxcblxcbiNhZGRUYXNrQnV0dG9uIHtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcXG59XFxuXFxudGV4dGFyZWEge1xcbiAgICByZXNpemU6IG5vbmU7XFxuICAgIGhlaWdodDogNTAlO1xcbn1cXG5cXG5oMSB7XFxuICAgIGZvbnQtc2l6ZTogMmVtO1xcbn1cXG5cXG5idXR0b24sIGlucHV0LCBzZWxlY3Qge1xcbiAgICBmb250LWZhbWlseTogUm9kaW47XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgcGFkZGluZzogNXB4O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG5oZWFkZXIsIGZvb3RlciB7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcmspO1xcbiAgICBwYWRkaW5nOiAxMHB4O1xcbn1cXG5cXG5oZWFkZXIge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gICAgZ2FwOiAyMHB4O1xcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG5tYWluIHtcXG4gICAgLyogYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMxMSk7ICovXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgbWF4LWhlaWdodDogMTAwJTtcXG4gICAgLyogbWFyZ2luOiAwIDUwcHggMCA1MHB4OyAqL1xcbiAgICBwYWRkaW5nOiAyMHB4IDUwcHggMjBweCA1MHB4O1xcbiAgICAvKiBncmlkLWNvbHVtbjogMiAvIC0yOyAqL1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuLnRhc2tGb3JtQ29udGVudCwgLmxpc3RWaWV3Q29udGVudCB7XFxuIG1hcmdpbjogYXV0bztcXG59XFxuXFxuLnRhc2tGb3JtQ29udGVudCB7XFxuICAgIGhlaWdodDogNTB2aDtcXG4gICAgd2lkdGg6IDUwdnc7IFxcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuNTI2KTtcXG4gICAgcGxhY2Utc2VsZjogY2VudGVyO1xcbn1cXG5cXG4ubGlzdFZpZXdDb250ZW50IHtcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgaGVpZ2h0OiAxMDAlO1xcbiAgICBtYXgtaGVpZ2h0OiAxMDAlO1xcbiAgICB3aWR0aDogMTAwJTtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICAgIGdhcDogNDBweDtcXG4gICAgLyogb3ZlcmZsb3c6IGhpZGRlbjsgKi9cXG59XFxuXFxuLmxpc3RWaWV3Q29udGVudCA+ICoge1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIHdpZHRoOiA0MHZ3O1xcbn1cXG5cXG4udGFza0xpc3RDb2x1bW4ge1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxuICAgIG1heC1oZWlnaHQ6IDEwMCU7XFxuICAgIGdhcDogNXB4O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbn1cXG5cXG4udGFza0xpc3RDb2x1bW4gPiAqIHtcXG4gICAgLyogYm94LXNpemluZzogYm9yZGVyLWJveDsgKi9cXG59XFxuXFxuLnRhc2tDYXRlZ29yeVRhYnMge1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICBoZWlnaHQ6IDEyLjUlO1xcbiAgICBtYXgtaGVpZ2h0OiAxMi41JTtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGJvcmRlci1ib3R0b206IHNvbGlkIGJsYWNrIDJweDtcXG4gICAgZGlzcGxheTogZ3JpZDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNCwgMWZyKTtcXG4gICAgYWxpZ24tc2VsZjogY2VudGVyO1xcbiAgICBtYXJnaW46IDVweCAwIDVweCAwO1xcbn1cXG5cXG4udGFza0NhdGVnb3J5VGFicyA+ICoge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcblxcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xcblxcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG4uZGlzcGxheWVkVGFza3Mge1xcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBoZWlnaHQ6IDFmcjtcXG4gICAgbWF4LWhlaWdodDogMWZyO1xcbiAgICBnYXA6IDRweDtcXG4gICAgb3ZlcmZsb3c6IHNjcm9sbDtcXG59XFxuXFxuLnRhc2tSb3cge1xcbiAgICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbnllbGxvdzsgKi9cXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFyayk7XFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGJvcmRlcjogc29saWQgdmFyKC0tbGlnaHQpIDJweDtcXG4gICAgZGlzcGxheTogZ3JpZDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMzBweDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiA0MHB4IDIwcHg7XFxuICAgIHBhZGRpbmctbGVmdDogMTBweDtcXG59XFxuXFxuLnRhc2tSb3cgPiAqIHtcXG4gICAgb3ZlcmZsb3ctaW5saW5lOiBoaWRkZW47XFxufVxcblxcbi50YXNrUm93OmhvdmVyIHtcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgYm9yZGVyOiBzb2xpZCB3aGl0ZSAycHg7XFxufVxcblxcbi50YXNrUm93TmFtZSB7XFxuICAgIGdyaWQtY29sdW1uOiAxIC8gMjtcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgIGZvbnQtc2l6ZTogMS4xZW07XFxuICAgIG1hcmdpbjogYXV0byAwcHg7XFxufVxcblxcbi50YXNrUm93RGF0ZSB7XFxuICAgIGdyaWQtY29sdW1uOiAxIC8gMjsgICBcXG4gICAgY29sb3I6IHllbGxvdztcXG4gICAgbWFyZ2luOiBhdXRvIDBweDtcXG59XFxuXFxuLnRhc2tSb3dEZWZhdWx0TWFyayB7XFxuICAgIGdyaWQtY29sdW1uOiAyIC8gLTE7XFxuICAgIGdyaWQtcm93OiAxIC8gLTE7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoODgsIDg4LCA4OCwgMC41MzMpO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbn1cXG5cXG4udGFza0Rlc2NDb2x1bW4ge1xcbiAgICAvKiBtYXgtaGVpZ2h0OiA5MCU7ICovXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhcmspO1xcbiAgICBkaXNwbGF5OiBncmlkO1xcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMmZyO1xcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDJmciAxZnIgMTVmciAxZnI7IFxcbiAgICBwYWRkaW5nOiAxMHB4O1xcbn1cXG5cXG4udGFza0Rlc2NDb2x1bW4gPiAqIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gICAgLyogYm9yZGVyOiAxcHggc29saWQgYmxhY2s7ICovXFxuICAgIHBhZGRpbmc6IDVweDsgXFxuICAgIC8qIGZvbnQtc2l6ZTogMXZ3OyAqL1xcbn1cXG5cXG4uYmxhbmtEZXNjUGxhY2Vob2xkZXIge1xcbiAgICBncmlkLWNvbHVtbjogMSAvIC0xO1xcbn1cXG5cXG4udGFza0RldGFpbE5hbWUsIC50YXNrRGV0YWlsQ2F0ZWdvcnksICAudGFza0RldGFpbFByaW9yaXR5LCAudGFza0RldGFpbER1ZURhdGUge1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICAvKiBib3gtc2l6aW5nOiBib3JkZXItYm94OyAqL1xcbiAgICAvKiBvdmVyZmxvdzogc2Nyb2xsOyAqL1xcbn1cXG5cXG4udGFza0RldGFpbE5hbWUge1xcbiAgICBncmlkLWNvbHVtbjogMSAvIC0xO1xcbiAgICBib3JkZXItYm90dG9tOiBzb2xpZCB2YXIoLS1saWdodCkgMnB4O1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgZm9udC1zaXplOiAxLjNlbTtcXG59XFxuXFxuLnRhc2tEZXRhaWxDYXRlZ29yeSB7XFxuICAgIGdyaWQtY29sdW1uOiAxIC8gMjtcXG59XFxuXFxuLnRhc2tEZXRhaWxQcmlvcml0eSB7XFxuICAgIGdyaWQtY29sdW1uOiAyIC8gMztcXG59XFxuXFxuLnRhc2tEZXRhaWxEdWVEYXRle1xcbiAgICBncmlkLWNvbHVtbjogMyAvIDQ7XFxuICAgIGNvbG9yOiB5ZWxsb3c7XFxufVxcblxcbi50YXNrRGV0YWlsRGVzY3JpcHRpb24ge1xcbiAgICBncmlkLWNvbHVtbjogMSAvIC0xO1xcbiAgICBib3JkZXItYm90dG9tOiBzb2xpZCB2YXIoLS1saWdodCkgMnB4O1xcbiAgICAvKiBwYWRkaW5nLXRvcDogMTBweDsgKi9cXG4gICAgLyogb3ZlcmZsb3c6IHNjcm9sbDsgKi9cXG59XFxuXFxuLmVkaXRUYXNrQnRuLCAuZGVsZXRlVGFza0J0biB7XFxuICAgIGZvbnQtc2l6ZTogNXB4O1xcbn1cXG5cXG4uZWRpdFRhc2tCdG4ge1xcbiAgICBncmlkLWNvbHVtbjogLTIgLyAtM1xcbn1cXG5cXG4uZGVsZXRlVGFza0J0biB7XFxuICAgIHdpZHRoOiA1MCU7XFxuICAgIGdyaWQtY29sdW1uOiAtMSAvIC0yXFxufVxcblxcbi8qIFN0eWxlIGZvciBmb3JtIHZpZXcgKi9cXG4udGFza0Zvcm1Db250ZW50IHtcXG4gICAgcGFkZGluZzogMjBweDtcXG4gICAgZGlzcGxheTogZ3JpZDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgMWZyKTtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgMWZyIDNmciAuNWZyO1xcbiAgICBnYXA6IDVweDtcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFyayk7XFxufVxcblxcbi50YXNrRm9ybUNvbnRlbnQgPiAqIHtcXG4gICAgLyogYm9yZGVyOiBibGFjayBzb2xpZCAxcHg7ICovXFxufVxcblxcbi5mb3JtVGV4dElucHV0IHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gICAgZ2FwOiAzcHg7XFxufVxcblxcbi50YXNrTmFtZURpdiwgLnRhc2tEZXNjRGl2IHtcXG4gICAgZ3JpZC1jb2x1bW46IDEgLyAtMTtcXG59XFxuXFxuLmZvcm1CdXR0b25EaXYge1xcbiAgICBncmlkLWNvbHVtbjogLTEgLyAtMjtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcXG4gICAgYWxpZ24tY29udGVudDogc3RyZXRjaDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbn1cXG5cXG5mb290ZXIge1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107XG5cbiAgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IFwiXCI7XG4gICAgICB2YXIgbmVlZExheWVyID0gdHlwZW9mIGl0ZW1bNV0gIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH07XG5cbiAgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgbGlzdC5pID0gZnVuY3Rpb24gaShtb2R1bGVzLCBtZWRpYSwgZGVkdXBlLCBzdXBwb3J0cywgbGF5ZXIpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIHVuZGVmaW5lZF1dO1xuICAgIH1cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2tdWzBdO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbGF5ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtWzVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs1XSA9IGxheWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1cHBvcnRzKSB7XG4gICAgICAgIGlmICghaXRlbVs0XSkge1xuICAgICAgICAgIGl0ZW1bNF0gPSBcIlwiLmNvbmNhdChzdXBwb3J0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzRdID0gc3VwcG9ydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgdXJsID0gU3RyaW5nKHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmwpO1xuXG4gIC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuICBpZiAoL15bJ1wiXS4qWydcIl0kLy50ZXN0KHVybCkpIHtcbiAgICB1cmwgPSB1cmwuc2xpY2UoMSwgLTEpO1xuICB9XG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9XG5cbiAgLy8gU2hvdWxkIHVybCBiZSB3cmFwcGVkP1xuICAvLyBTZWUgaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuICBpZiAoL1tcIicoKSBcXHRcXG5dfCglMjApLy50ZXN0KHVybCkgfHwgb3B0aW9ucy5uZWVkUXVvdGVzKSB7XG4gICAgcmV0dXJuIFwiXFxcIlwiLmNvbmNhdCh1cmwucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpLCBcIlxcXCJcIik7XG4gIH1cbiAgcmV0dXJuIHVybDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdO1xuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8IFwiXCIpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRE9NID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4QnlJZGVudGlmaWVyICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cGRhdGVyID0gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmJ5SW5kZXggPSBpO1xuICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKGksIDAsIHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogdXBkYXRlcixcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgYXBpID0gb3B0aW9ucy5kb21BUEkob3B0aW9ucyk7XG4gIGFwaS51cGRhdGUob2JqKTtcblxuICB2YXIgdXBkYXRlciA9IGZ1bmN0aW9uIHVwZGF0ZXIobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCAmJiBuZXdPYmouc3VwcG9ydHMgPT09IG9iai5zdXBwb3J0cyAmJiBuZXdPYmoubGF5ZXIgPT09IG9iai5sYXllcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gdXBkYXRlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRE9NW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRPTVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRPTS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cblxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxuZnVuY3Rpb24gaW5zZXJ0QnlTZWxlY3RvcihpbnNlcnQsIHN0eWxlKSB7XG4gIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoaW5zZXJ0KTtcblxuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cblxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydEJ5U2VsZWN0b3I7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gIG9wdGlvbnMuc2V0QXR0cmlidXRlcyhlbGVtZW50LCBvcHRpb25zLmF0dHJpYnV0ZXMpO1xuICBvcHRpb25zLmluc2VydChlbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgaWYgKG5vbmNlKSB7XG4gICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlczsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gXCJcIjtcblxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuXG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuXG4gIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2Ygb2JqLmxheWVyICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cblxuICBjc3MgKz0gb2JqLmNzcztcblxuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIG9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG5mdW5jdGlvbiBkb21BUEkob3B0aW9ucykge1xuICB2YXIgc3R5bGVFbGVtZW50ID0gb3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gIHJldHVybiB7XG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUob2JqKSB7XG4gICAgICBhcHBseShzdHlsZUVsZW1lbnQsIG9wdGlvbnMsIG9iaik7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3R5bGVUYWdUcmFuc2Zvcm07IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcmVzZXQuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9yZXNldC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUJhc2U2NFN0cmluZ0Vycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cclxuICovXHJcbmNsYXNzIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3InO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0c0Zyb21HbG9iYWwgPSAoKSA9PiBnZXRHbG9iYWwoKS5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbi8qKlxyXG4gKiBBdHRlbXB0IHRvIHJlYWQgZGVmYXVsdHMgZnJvbSBhIEpTT04gc3RyaW5nIHByb3ZpZGVkIHRvXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxyXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cclxuICogVGhlIGRvdHMgYXJlIGluIHBhcmVucyBiZWNhdXNlIGNlcnRhaW4gY29tcGlsZXJzIChWaXRlPykgY2Fubm90XHJcbiAqIGhhbmRsZSBzZWVpbmcgdGhhdCB2YXJpYWJsZSBpbiBjb21tZW50cy5cclxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzY4MzhcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4gICAgaWYgKGRlZmF1bHRzSnNvblN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXHJcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcclxuICAgIHJldHVybiBkZWNvZGVkICYmIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbn07XHJcbi8qKlxyXG4gKiBHZXQgdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuIEl0IGNoZWNrcyBpbiBvcmRlcjpcclxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxyXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICogKDMpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBpbiBhIGNvb2tpZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0cyA9ICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcclxuICAgICAgICAgKiB0byBhbnkgZW52aXJvbm1lbnQgY2FzZSB3ZSBoYXZlIG5vdCBhY2NvdW50ZWQgZm9yLiBMb2cgdG9cclxuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXHJcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3Qgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcclxuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcclxuICAgIGlmICghaG9zdCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XHJcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XHJcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXHJcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQgb3Igc3BlY2lmaWVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGZvcmNlRW52aXJvbm1lbnQgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yY2VFbnZpcm9ubWVudDtcclxuICAgIGlmIChmb3JjZUVudmlyb25tZW50ID09PSAnbm9kZScpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdicm93c2VyJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWplY3RzIGlmIHRoZSBnaXZlbiBwcm9taXNlIGRvZXNuJ3QgcmVzb2x2ZSBpbiB0aW1lSW5NUyBtaWxsaXNlY29uZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZVdpdGhUaW1lb3V0KHByb21pc2UsIHRpbWVJbk1TID0gMjAwMCkge1xyXG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcclxuICAgIHByb21pc2UudGhlbihkZWZlcnJlZFByb21pc2UucmVzb2x2ZSwgZGVmZXJyZWRQcm9taXNlLnJlamVjdCk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgdXVpZC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgdXVpZHY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XHJcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XHJcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0LCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldERlZmF1bHRzLCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkxBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGEsIGluc3RhbmNlT2ZBbnkgYXMgaSwgcmVwbGFjZVRyYXBzIGFzIHIsIHVud3JhcCBhcyB1LCB3cmFwIGFzIHcgfTtcbiIsImltcG9ydCB7IHcgYXMgd3JhcCwgciBhcyByZXBsYWNlVHJhcHMgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcbmV4cG9ydCB7IHUgYXMgdW53cmFwLCB3IGFzIHdyYXAgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XG4gICAgaWYgKHVwZ3JhZGUpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgb3BlblByb21pc2VcbiAgICAgICAgLnRoZW4oKGRiKSA9PiB7XG4gICAgICAgIGlmICh0ZXJtaW5hdGVkKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB0ZXJtaW5hdGVkKCkpO1xuICAgICAgICBpZiAoYmxvY2tpbmcpIHtcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCAoZXZlbnQpID0+IGJsb2NraW5nKGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICByZXR1cm4gb3BlblByb21pc2U7XG59XG4vKipcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICovXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyYXAocmVxdWVzdCkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xufVxuXG5jb25zdCByZWFkTWV0aG9kcyA9IFsnZ2V0JywgJ2dldEtleScsICdnZXRBbGwnLCAnZ2V0QWxsS2V5cycsICdjb3VudCddO1xuY29uc3Qgd3JpdGVNZXRob2RzID0gWydwdXQnLCAnYWRkJywgJ2RlbGV0ZScsICdjbGVhciddO1xuY29uc3QgY2FjaGVkTWV0aG9kcyA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHtcbiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBJREJEYXRhYmFzZSAmJlxuICAgICAgICAhKHByb3AgaW4gdGFyZ2V0KSAmJlxuICAgICAgICB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApKVxuICAgICAgICByZXR1cm4gY2FjaGVkTWV0aG9kcy5nZXQocHJvcCk7XG4gICAgY29uc3QgdGFyZ2V0RnVuY05hbWUgPSBwcm9wLnJlcGxhY2UoL0Zyb21JbmRleCQvLCAnJyk7XG4gICAgY29uc3QgdXNlSW5kZXggPSBwcm9wICE9PSB0YXJnZXRGdW5jTmFtZTtcbiAgICBjb25zdCBpc1dyaXRlID0gd3JpdGVNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKTtcbiAgICBpZiAoXG4gICAgLy8gQmFpbCBpZiB0aGUgdGFyZ2V0IGRvZXNuJ3QgZXhpc3Qgb24gdGhlIHRhcmdldC4gRWcsIGdldEFsbCBpc24ndCBpbiBFZGdlLlxuICAgICEodGFyZ2V0RnVuY05hbWUgaW4gKHVzZUluZGV4ID8gSURCSW5kZXggOiBJREJPYmplY3RTdG9yZSkucHJvdG90eXBlKSB8fFxuICAgICAgICAhKGlzV3JpdGUgfHwgcmVhZE1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1ldGhvZCA9IGFzeW5jIGZ1bmN0aW9uIChzdG9yZU5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogdW5kZWZpbmVkIGd6aXBwcyBiZXR0ZXIsIGJ1dCBmYWlscyBpbiBFZGdlIDooXG4gICAgICAgIGNvbnN0IHR4ID0gdGhpcy50cmFuc2FjdGlvbihzdG9yZU5hbWUsIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gdHguc3RvcmU7XG4gICAgICAgIGlmICh1c2VJbmRleClcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbmRleChhcmdzLnNoaWZ0KCkpO1xuICAgICAgICAvLyBNdXN0IHJlamVjdCBpZiBvcCByZWplY3RzLlxuICAgICAgICAvLyBJZiBpdCdzIGEgd3JpdGUgb3BlcmF0aW9uLCBtdXN0IHJlamVjdCBpZiB0eC5kb25lIHJlamVjdHMuXG4gICAgICAgIC8vIE11c3QgcmVqZWN0IHdpdGggb3AgcmVqZWN0aW9uIGZpcnN0LlxuICAgICAgICAvLyBNdXN0IHJlc29sdmUgd2l0aCBvcCB2YWx1ZS5cbiAgICAgICAgLy8gTXVzdCBoYW5kbGUgYm90aCBwcm9taXNlcyAobm8gdW5oYW5kbGVkIHJlamVjdGlvbnMpXG4gICAgICAgIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGFyZ2V0W3RhcmdldEZ1bmNOYW1lXSguLi5hcmdzKSxcbiAgICAgICAgICAgIGlzV3JpdGUgJiYgdHguZG9uZSxcbiAgICAgICAgXSkpWzBdO1xuICAgIH07XG4gICAgY2FjaGVkTWV0aG9kcy5zZXQocHJvcCwgbWV0aG9kKTtcbiAgICByZXR1cm4gbWV0aG9kO1xufVxucmVwbGFjZVRyYXBzKChvbGRUcmFwcykgPT4gKHtcbiAgICAuLi5vbGRUcmFwcyxcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXG4gICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAhIWdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmhhcyh0YXJnZXQsIHByb3ApLFxufSkpO1xuXG5leHBvcnQgeyBkZWxldGVEQiwgb3BlbkRCIH07XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBnZXREZWZhdWx0QXBwQ29uZmlnLCBkZWVwRXF1YWwsIEZpcmViYXNlRXJyb3IsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjkuOVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjIxLjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBBcHBFcnJvci5JREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQihhcHApIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICByZXR1cm4gZGJcclxuICAgICAgICAgICAgLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAuZ2V0KGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQihhcHAsIGhlYXJ0YmVhdE9iamVjdCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KGhlYXJ0YmVhdE9iamVjdCwgY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICByZXR1cm4gdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIGNvbnN0IHBsYXRmb3JtTG9nZ2VyID0gdGhpcy5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdwbGF0Zm9ybS1sb2dnZXInKVxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgXCJGaXJlYmFzZSB1c2VyIGFnZW50XCIgc3RyaW5nIGZyb20gdGhlIHBsYXRmb3JtIGxvZ2dlclxyXG4gICAgICAgIC8vIHNlcnZpY2UsIG5vdCB0aGUgYnJvd3NlciB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGFnZW50ID0gcGxhdGZvcm1Mb2dnZXIuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IGF3YWl0IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIGl0J3Mgc3RpbGwgbnVsbCBvciB0aGUgYXJyYXkgaXMgZW1wdHksIHRoZXJlIGlzIG5vIGRhdGEgdG8gc2VuZC5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICByZXR1cm4gaWRiSGVhcnRiZWF0T2JqZWN0IHx8IHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBvdmVyd3JpdGUgdGhlIHN0b3JhZ2Ugd2l0aCB0aGUgcHJvdmlkZWQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgb3ZlcndyaXRlKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogaGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGFkZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBhZGQoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uaGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2FsY3VsYXRlIGJ5dGVzIG9mIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IGFycmF5IGFmdGVyIGJlaW5nIHdyYXBwZWRcclxuICogaW4gYSBwbGF0Zm9ybSBsb2dnaW5nIGhlYWRlciBKU09OIG9iamVjdCwgc3RyaW5naWZpZWQsIGFuZCBjb252ZXJ0ZWRcclxuICogdG8gYmFzZSA2NC5cclxuICovXHJcbmZ1bmN0aW9uIGNvdW50Qnl0ZXMoaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAvLyBiYXNlNjQgaGFzIGEgcmVzdHJpY3RlZCBzZXQgb2YgY2hhcmFjdGVycywgYWxsIG9mIHdoaWNoIHNob3VsZCBiZSAxIGJ5dGUuXHJcbiAgICByZXR1cm4gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoXHJcbiAgICAvLyBoZWFydGJlYXRzQ2FjaGUgd3JhcHBlciBwcm9wZXJ0aWVzXHJcbiAgICBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNDYWNoZSB9KSkubGVuZ3RoO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdoZWFydGJlYXQnLCBjb250YWluZXIgPT4gbmV3IEhlYXJ0YmVhdFNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIENvbXBvbmVudFR5cGUuUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgdmFyaWFudCk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBcHBcclxuICpcclxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjIxLjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZXNtID0ge307XG5cbi8qXG5cbiBDb3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xuXG52YXIgayxnb29nPWdvb2d8fHt9LGw9Y29tbW9uanNHbG9iYWx8fHNlbGY7ZnVuY3Rpb24gYWEoKXt9ZnVuY3Rpb24gYmEoYSl7dmFyIGI9dHlwZW9mIGE7Yj1cIm9iamVjdFwiIT1iP2I6YT9BcnJheS5pc0FycmF5KGEpP1wiYXJyYXlcIjpiOlwibnVsbFwiO3JldHVybiBcImFycmF5XCI9PWJ8fFwib2JqZWN0XCI9PWImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiBwKGEpe3ZhciBiPXR5cGVvZiBhO3JldHVybiBcIm9iamVjdFwiPT1iJiZudWxsIT1hfHxcImZ1bmN0aW9uXCI9PWJ9ZnVuY3Rpb24gY2EoYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGRhKSYmYVtkYV18fChhW2RhXT0rK2VhKX12YXIgZGE9XCJjbG9zdXJlX3VpZF9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKSxlYT0wO2Z1bmN0aW9uIGZhKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gaGEoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShlLGQpO3JldHVybiBhLmFwcGx5KGIsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcShhLGIsYyl7RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT9xPWZhOnE9aGE7cmV0dXJuIHEuYXBwbHkobnVsbCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gamEoYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO2QucHVzaC5hcHBseShkLGFyZ3VtZW50cyk7cmV0dXJuIGEuYXBwbHkodGhpcyxkKX19ZnVuY3Rpb24gcihhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS4kPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5hYz1mdW5jdGlvbihkLGUsZil7Zm9yKHZhciBoPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksbT0yO208YXJndW1lbnRzLmxlbmd0aDttKyspaFttLTJdPWFyZ3VtZW50c1ttXTtyZXR1cm4gYi5wcm90b3R5cGVbZV0uYXBwbHkoZCxoKX07fWZ1bmN0aW9uIHYoKXt0aGlzLnM9dGhpcy5zO3RoaXMubz10aGlzLm87fXZhciBrYT0wO3YucHJvdG90eXBlLnM9ITE7di5wcm90b3R5cGUucmE9ZnVuY3Rpb24oKXtpZighdGhpcy5zJiYodGhpcy5zPSEwLHRoaXMuTigpLDAhPWthKSl7Y2EodGhpcyk7fX07di5wcm90b3R5cGUuTj1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX07ZnVuY3Rpb24gbmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfVxuZnVuY3Rpb24gb2EoYSxiKXtmb3IobGV0IGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXtjb25zdCBkPWFyZ3VtZW50c1tjXTtpZihiYShkKSl7Y29uc3QgZT1hLmxlbmd0aHx8MCxmPWQubGVuZ3RofHwwO2EubGVuZ3RoPWUrZjtmb3IobGV0IGg9MDtoPGY7aCsrKWFbZStoXT1kW2hdO31lbHNlIGEucHVzaChkKTt9fWZ1bmN0aW9uIHcoYSxiKXt0aGlzLnR5cGU9YTt0aGlzLmc9dGhpcy50YXJnZXQ9Yjt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITE7fXcucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7fTt2YXIgcGE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiBxYShhKXtyZXR1cm4gL15bXFxzXFx4YTBdKiQvLnRlc3QoYSl9dmFyIHJhPVN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihhKXtyZXR1cm4gYS50cmltKCl9OmZ1bmN0aW9uKGEpe3JldHVybiAvXltcXHNcXHhhMF0qKFtcXHNcXFNdKj8pW1xcc1xceGEwXSokLy5leGVjKGEpWzFdfTtmdW5jdGlvbiBzYShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH1mdW5jdGlvbiB0YSgpe3ZhciBhPWwubmF2aWdhdG9yO3JldHVybiBhJiYoYT1hLnVzZXJBZ2VudCk/YTpcIlwifWZ1bmN0aW9uIHgoYSl7cmV0dXJuIC0xIT10YSgpLmluZGV4T2YoYSl9ZnVuY3Rpb24gdWEoYSl7dWFbXCIgXCJdKGEpO3JldHVybiBhfXVhW1wiIFwiXT1hYTtmdW5jdGlvbiB2YShhLGIsYyl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpP2FbYl06YVtiXT1jKGIpfXZhciB3YT14KFwiT3BlcmFcIikseT14KFwiVHJpZGVudFwiKXx8eChcIk1TSUVcIikseGE9eChcIkVkZ2VcIikseWE9eGF8fHksemE9eChcIkdlY2tvXCIpJiYhKC0xIT10YSgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYmtpdFwiKSYmIXgoXCJFZGdlXCIpKSYmISh4KFwiVHJpZGVudFwiKXx8eChcIk1TSUVcIikpJiYheChcIkVkZ2VcIiksQWE9LTEhPXRhKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYheChcIkVkZ2VcIik7ZnVuY3Rpb24gQmEoKXt2YXIgYT1sLmRvY3VtZW50O3JldHVybiBhP2EuZG9jdW1lbnRNb2RlOnZvaWQgMH12YXIgQ2E7XG5hOnt2YXIgRGE9XCJcIixFYT1mdW5jdGlvbigpe3ZhciBhPXRhKCk7aWYoemEpcmV0dXJuIC9ydjooW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZih4YSlyZXR1cm4gL0VkZ2VcXC8oW1xcZFxcLl0rKS8uZXhlYyhhKTtpZih5KXJldHVybiAvXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoQWEpcmV0dXJuIC9XZWJLaXRcXC8oXFxTKykvLmV4ZWMoYSk7aWYod2EpcmV0dXJuIC8oPzpWZXJzaW9uKVsgXFwvXT8oXFxTKykvLmV4ZWMoYSl9KCk7RWEmJihEYT1FYT9FYVsxXTpcIlwiKTtpZih5KXt2YXIgRmE9QmEoKTtpZihudWxsIT1GYSYmRmE+cGFyc2VGbG9hdChEYSkpe0NhPVN0cmluZyhGYSk7YnJlYWsgYX19Q2E9RGE7fXZhciBHYT17fTtcbmZ1bmN0aW9uIEhhKCl7cmV0dXJuIHZhKEdhLDksZnVuY3Rpb24oKXtsZXQgYT0wO2NvbnN0IGI9cmEoU3RyaW5nKENhKSkuc3BsaXQoXCIuXCIpLGM9cmEoXCI5XCIpLnNwbGl0KFwiLlwiKSxkPU1hdGgubWF4KGIubGVuZ3RoLGMubGVuZ3RoKTtmb3IobGV0IGg9MDswPT1hJiZoPGQ7aCsrKXt2YXIgZT1iW2hdfHxcIlwiLGY9Y1toXXx8XCJcIjtkb3tlPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGUpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07Zj0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhmKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2lmKDA9PWVbMF0ubGVuZ3RoJiYwPT1mWzBdLmxlbmd0aClicmVhazthPXNhKDA9PWVbMV0ubGVuZ3RoPzA6cGFyc2VJbnQoZVsxXSwxMCksMD09ZlsxXS5sZW5ndGg/MDpwYXJzZUludChmWzFdLDEwKSl8fHNhKDA9PWVbMl0ubGVuZ3RoLDA9PWZbMl0ubGVuZ3RoKXx8c2EoZVsyXSxmWzJdKTtlPWVbM107Zj1mWzNdO313aGlsZSgwPT1hKX1yZXR1cm4gMDw9YX0pfXZhciBJYTtcbmlmKGwuZG9jdW1lbnQmJnkpe3ZhciBKYT1CYSgpO0lhPUphP0phOnBhcnNlSW50KENhLDEwKXx8dm9pZCAwO31lbHNlIElhPXZvaWQgMDt2YXIgS2E9SWE7ZnVuY3Rpb24geihhLGIpe3cuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZih6YSl7YTp7dHJ5e3VhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpOYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZ6LiQuaC5jYWxsKHRoaXMpO319cih6LHcpO3ZhciBOYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTt6LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7ei4kLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBBPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgT2E9MDtmdW5jdGlvbiBQYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMubGE9ZTt0aGlzLmtleT0rK09hO3RoaXMuZmE9dGhpcy5pYT0hMTt9ZnVuY3Rpb24gUWEoYSl7YS5mYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5sYT1udWxsO31mdW5jdGlvbiBSYShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIFNhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9Y29uc3QgVGE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gVWEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8VGEubGVuZ3RoO2YrKyljPVRhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIFZhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO31WYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9V2EoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmlhPSExKSk6KGI9bmV3IFBhKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5pYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFhhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1tYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKFFhKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIFdhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmZhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5sYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIFlhPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksWmE9e307ZnVuY3Rpb24gYWIoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIGJiKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspYWIoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWNiKGMpO3JldHVybiBhJiZhW0FdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6ZGIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGRiKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1wKGUpPyEhZS5jYXB0dXJlOiEhZSxtPWViKGEpO218fChhW1lhXT1tPW5ldyBWYShhKSk7Yz1tLmFkZChiLGMsZCxoLGYpO2lmKGMucHJveHkpcmV0dXJuIGM7ZD1mYigpO2MucHJveHk9ZDtkLnNyYz1hO2QubGlzdGVuZXI9YztpZihhLmFkZEV2ZW50TGlzdGVuZXIpcGF8fChlPWgpLHZvaWQgMD09PWUmJihlPSExKSxhLmFkZEV2ZW50TGlzdGVuZXIoYi50b1N0cmluZygpLGQsZSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQoZ2IoYi50b1N0cmluZygpKSxkKTtlbHNlIGlmKGEuYWRkTGlzdGVuZXImJmEucmVtb3ZlTGlzdGVuZXIpYS5hZGRMaXN0ZW5lcihkKTtlbHNlIHRocm93IEVycm9yKFwiYWRkRXZlbnRMaXN0ZW5lciBhbmQgYXR0YWNoRXZlbnQgYXJlIHVuYXZhaWxhYmxlLlwiKTtyZXR1cm4gY31cbmZ1bmN0aW9uIGZiKCl7ZnVuY3Rpb24gYShjKXtyZXR1cm4gYi5jYWxsKGEuc3JjLGEubGlzdGVuZXIsYyl9Y29uc3QgYj1oYjtyZXR1cm4gYX1mdW5jdGlvbiBiYihhLGIsYyxkLGUpe2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWJiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1jYihjKTtyZXR1cm4gYSYmYVtBXT9hLlAoYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmRiKGEsYixjLCEwLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUpe2lmKEFycmF5LmlzQXJyYXkoYikpZm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspaWIoYSxiW2ZdLGMsZCxlKTtlbHNlIChkPXAoZCk/ISFkLmNhcHR1cmU6ISFkLGM9Y2IoYyksYSYmYVtBXSk/KGE9YS5pLGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmcmJihmPWEuZ1tiXSxjPVdhKGYsYyxkLGUpLC0xPGMmJihRYShmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuZ1tiXSxhLmgtLSkpKSk6YSYmKGE9ZWIoYSkpJiYoYj1hLmdbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVdhKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJmpiKGMpKTt9XG5mdW5jdGlvbiBqYihhKXtpZihcIm51bWJlclwiIT09dHlwZW9mIGEmJmEmJiFhLmZhKXt2YXIgYj1hLnNyYztpZihiJiZiW0FdKVhhKGIuaSxhKTtlbHNlIHt2YXIgYz1hLnR5cGUsZD1hLnByb3h5O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGEuY2FwdHVyZSk6Yi5kZXRhY2hFdmVudD9iLmRldGFjaEV2ZW50KGdiKGMpLGQpOmIuYWRkTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXIoZCk7KGM9ZWIoYikpPyhYYShjLGEpLDA9PWMuaCYmKGMuc3JjPW51bGwsYltZYV09bnVsbCkpOlFhKGEpO319fWZ1bmN0aW9uIGdiKGEpe3JldHVybiBhIGluIFphP1phW2FdOlphW2FdPVwib25cIithfWZ1bmN0aW9uIGhiKGEsYil7aWYoYS5mYSlhPSEwO2Vsc2Uge2I9bmV3IHooYix0aGlzKTt2YXIgYz1hLmxpc3RlbmVyLGQ9YS5sYXx8YS5zcmM7YS5pYSYmamIoYSk7YT1jLmNhbGwoZCxiKTt9cmV0dXJuIGF9XG5mdW5jdGlvbiBlYihhKXthPWFbWWFdO3JldHVybiBhIGluc3RhbmNlb2YgVmE/YTpudWxsfXZhciBrYj1cIl9fY2xvc3VyZV9ldmVudHNfZm5fXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCk7ZnVuY3Rpb24gY2IoYSl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpcmV0dXJuIGE7YVtrYl18fChhW2tiXT1mdW5jdGlvbihiKXtyZXR1cm4gYS5oYW5kbGVFdmVudChiKX0pO3JldHVybiBhW2tiXX1mdW5jdGlvbiBCKCl7di5jYWxsKHRoaXMpO3RoaXMuaT1uZXcgVmEodGhpcyk7dGhpcy5TPXRoaXM7dGhpcy5KPW51bGw7fXIoQix2KTtCLnByb3RvdHlwZVtBXT0hMDtCLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe2liKHRoaXMsYSxiLGMsZCk7fTtcbmZ1bmN0aW9uIEMoYSxiKXt2YXIgYyxkPWEuSjtpZihkKWZvcihjPVtdO2Q7ZD1kLkopYy5wdXNoKGQpO2E9YS5TO2Q9Yi50eXBlfHxiO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYiliPW5ldyB3KGIsYSk7ZWxzZSBpZihiIGluc3RhbmNlb2YgdyliLnRhcmdldD1iLnRhcmdldHx8YTtlbHNlIHt2YXIgZT1iO2I9bmV3IHcoZCxhKTtVYShiLGUpO31lPSEwO2lmKGMpZm9yKHZhciBmPWMubGVuZ3RoLTE7MDw9ZjtmLS0pe3ZhciBoPWIuZz1jW2ZdO2U9bGIoaCxkLCEwLGIpJiZlO31oPWIuZz1hO2U9bGIoaCxkLCEwLGIpJiZlO2U9bGIoaCxkLCExLGIpJiZlO2lmKGMpZm9yKGY9MDtmPGMubGVuZ3RoO2YrKyloPWIuZz1jW2ZdLGU9bGIoaCxkLCExLGIpJiZlO31cbkIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtCLiQuTi5jYWxsKHRoaXMpO2lmKHRoaXMuaSl7dmFyIGE9dGhpcy5pLGM7Zm9yKGMgaW4gYS5nKXtmb3IodmFyIGQ9YS5nW2NdLGU9MDtlPGQubGVuZ3RoO2UrKylRYShkW2VdKTtkZWxldGUgYS5nW2NdO2EuaC0tO319dGhpcy5KPW51bGw7fTtCLnByb3RvdHlwZS5PPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCExLGMsZCl9O0IucHJvdG90eXBlLlA9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITAsYyxkKX07XG5mdW5jdGlvbiBsYihhLGIsYyxkKXtiPWEuaS5nW1N0cmluZyhiKV07aWYoIWIpcmV0dXJuICEwO2I9Yi5jb25jYXQoKTtmb3IodmFyIGU9ITAsZj0wO2Y8Yi5sZW5ndGg7KytmKXt2YXIgaD1iW2ZdO2lmKGgmJiFoLmZhJiZoLmNhcHR1cmU9PWMpe3ZhciBtPWgubGlzdGVuZXIsdD1oLmxhfHxoLnNyYztoLmlhJiZYYShhLmksaCk7ZT0hMSE9PW0uY2FsbCh0LGQpJiZlO319cmV0dXJuIGUmJiFkLmRlZmF1bHRQcmV2ZW50ZWR9dmFyIG1iPWwuSlNPTi5zdHJpbmdpZnk7ZnVuY3Rpb24gbmIoKXt2YXIgYT1vYjtsZXQgYj1udWxsO2EuZyYmKGI9YS5nLGEuZz1hLmcubmV4dCxhLmd8fChhLmg9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWNsYXNzIHBie2NvbnN0cnVjdG9yKCl7dGhpcy5oPXRoaXMuZz1udWxsO31hZGQoYSxiKXtjb25zdCBjPXFiLmdldCgpO2Muc2V0KGEsYik7dGhpcy5oP3RoaXMuaC5uZXh0PWM6dGhpcy5nPWM7dGhpcy5oPWM7fX12YXIgcWI9bmV3IGNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5pPWE7dGhpcy5qPWI7dGhpcy5oPTA7dGhpcy5nPW51bGw7fWdldCgpe2xldCBhOzA8dGhpcy5oPyh0aGlzLmgtLSxhPXRoaXMuZyx0aGlzLmc9YS5uZXh0LGEubmV4dD1udWxsKTphPXRoaXMuaSgpO3JldHVybiBhfX0oKCk9Pm5ldyByYixhPT5hLnJlc2V0KCkpO1xuY2xhc3MgcmJ7Y29uc3RydWN0b3IoKXt0aGlzLm5leHQ9dGhpcy5nPXRoaXMuaD1udWxsO31zZXQoYSxiKXt0aGlzLmg9YTt0aGlzLmc9Yjt0aGlzLm5leHQ9bnVsbDt9cmVzZXQoKXt0aGlzLm5leHQ9dGhpcy5nPXRoaXMuaD1udWxsO319ZnVuY3Rpb24gc2IoYSl7bC5zZXRUaW1lb3V0KCgpPT57dGhyb3cgYTt9LDApO31mdW5jdGlvbiB0YihhLGIpe3VifHx2YigpO3difHwodWIoKSx3Yj0hMCk7b2IuYWRkKGEsYik7fXZhciB1YjtmdW5jdGlvbiB2Yigpe3ZhciBhPWwuUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk7dWI9ZnVuY3Rpb24oKXthLnRoZW4oeGIpO307fXZhciB3Yj0hMSxvYj1uZXcgcGI7ZnVuY3Rpb24geGIoKXtmb3IodmFyIGE7YT1uYigpOyl7dHJ5e2EuaC5jYWxsKGEuZyk7fWNhdGNoKGMpe3NiKGMpO312YXIgYj1xYjtiLmooYSk7MTAwPmIuaCYmKGIuaCsrLGEubmV4dD1iLmcsYi5nPWEpO313Yj0hMTt9ZnVuY3Rpb24geWIoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5oPWF8fDE7dGhpcy5nPWJ8fGw7dGhpcy5qPXEodGhpcy5xYix0aGlzKTt0aGlzLmw9RGF0ZS5ub3coKTt9cih5YixCKTtrPXliLnByb3RvdHlwZTtrLmdhPSExO2suVD1udWxsO2sucWI9ZnVuY3Rpb24oKXtpZih0aGlzLmdhKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMubDswPGEmJmE8LjgqdGhpcy5oP3RoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oLWEpOih0aGlzLlQmJih0aGlzLmcuY2xlYXJUaW1lb3V0KHRoaXMuVCksdGhpcy5UPW51bGwpLEModGhpcyxcInRpY2tcIiksdGhpcy5nYSYmKHpiKHRoaXMpLHRoaXMuc3RhcnQoKSkpO319O2suc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmdhPSEwO3RoaXMuVHx8KHRoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oKSx0aGlzLmw9RGF0ZS5ub3coKSk7fTtcbmZ1bmN0aW9uIHpiKGEpe2EuZ2E9ITE7YS5UJiYoYS5nLmNsZWFyVGltZW91dChhLlQpLGEuVD1udWxsKTt9ay5OPWZ1bmN0aW9uKCl7eWIuJC5OLmNhbGwodGhpcyk7emIodGhpcyk7ZGVsZXRlIHRoaXMuZzt9O2Z1bmN0aW9uIEFiKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSljJiYoYT1xKGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXEoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6bC5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gQmIoYSl7YS5nPUFiKCgpPT57YS5nPW51bGw7YS5pJiYoYS5pPSExLEJiKGEpKTt9LGEuaik7Y29uc3QgYj1hLmg7YS5oPW51bGw7YS5tLmFwcGx5KG51bGwsYik7fWNsYXNzIENiIGV4dGVuZHMgdntjb25zdHJ1Y3RvcihhLGIpe3N1cGVyKCk7dGhpcy5tPWE7dGhpcy5qPWI7dGhpcy5oPW51bGw7dGhpcy5pPSExO3RoaXMuZz1udWxsO31sKGEpe3RoaXMuaD1hcmd1bWVudHM7dGhpcy5nP3RoaXMuaT0hMDpCYih0aGlzKTt9Tigpe3N1cGVyLk4oKTt0aGlzLmcmJihsLmNsZWFyVGltZW91dCh0aGlzLmcpLHRoaXMuZz1udWxsLHRoaXMuaT0hMSx0aGlzLmg9bnVsbCk7fX1mdW5jdGlvbiBEYihhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O31yKERiLHYpO3ZhciBFYj1bXTtmdW5jdGlvbiBHYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEViWzBdPWMudG9TdHJpbmcoKSksYz1FYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWFiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gSGIoYSl7UmEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZqYihiKTt9LGEpO2EuZz17fTt9RGIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtEYi4kLk4uY2FsbCh0aGlzKTtIYih0aGlzKTt9O0RiLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIEliKCl7dGhpcy5nPSEwO31JYi5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBKYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBtPWYuc3BsaXQoXCImXCIpLHQ9MDt0PG0ubGVuZ3RoO3QrKyl7dmFyIG49bVt0XS5zcGxpdChcIj1cIik7aWYoMTxuLmxlbmd0aCl7dmFyIHU9blswXTtuPW5bMV07dmFyIEw9dS5zcGxpdChcIl9cIik7aD0yPD1MLmxlbmd0aCYmXCJ0eXBlXCI9PUxbMV0/aCsodStcIj1cIituK1wiJlwiKTpoKyh1K1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIEtiKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBEKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK0xiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBNYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9SWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gTGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIG1iKGMpfWNhdGNoKG0pe3JldHVybiBifX12YXIgRT17fSxOYj1udWxsO2Z1bmN0aW9uIE9iKCl7cmV0dXJuIE5iPU5ifHxuZXcgQn1FLlRhPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gUGIoYSl7dy5jYWxsKHRoaXMsRS5UYSxhKTt9cihQYix3KTtmdW5jdGlvbiBRYihhKXtjb25zdCBiPU9iKCk7QyhiLG5ldyBQYihiKSk7fUUuU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFJiKGEsYil7dy5jYWxsKHRoaXMsRS5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO31yKFJiLHcpO2Z1bmN0aW9uIEYoYSl7Y29uc3QgYj1PYigpO0MoYixuZXcgUmIoYixhKSk7fUUuVWE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFNiKGEsYil7dy5jYWxsKHRoaXMsRS5VYSxhKTt0aGlzLnNpemU9Yjt9cihTYix3KTtcbmZ1bmN0aW9uIFRiKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBVYj17Tk9fRVJST1I6MCxyYjoxLEViOjIsRGI6Myx5Yjo0LENiOjUsRmI6NixRYTo3LFRJTUVPVVQ6OCxJYjo5fTt2YXIgVmI9e3diOlwiY29tcGxldGVcIixTYjpcInN1Y2Nlc3NcIixSYTpcImVycm9yXCIsUWE6XCJhYm9ydFwiLEtiOlwicmVhZHlcIixMYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEdiOlwiaW5jcmVtZW50YWxkYXRhXCIsSmI6XCJwcm9ncmVzc1wiLHpiOlwiZG93bmxvYWRwcm9ncmVzc1wiLCRiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gV2IoKXt9V2IucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBYYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiBZYigpe312YXIgWmI9e09QRU46XCJhXCIsdmI6XCJiXCIsUmE6XCJjXCIsSGI6XCJkXCJ9O2Z1bmN0aW9uICRiKCl7dy5jYWxsKHRoaXMsXCJkXCIpO31yKCRiLHcpO2Z1bmN0aW9uIGFjKCl7dy5jYWxsKHRoaXMsXCJjXCIpO31yKGFjLHcpO3ZhciBiYztmdW5jdGlvbiBjYygpe31yKGNjLFdiKTtjYy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9O2NjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKCl7cmV0dXJuIHt9fTtiYz1uZXcgY2M7ZnVuY3Rpb24gZGMoYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5XPWR8fDE7dGhpcy5VPW5ldyBEYih0aGlzKTt0aGlzLlA9ZWM7YT15YT8xMjU6dm9pZCAwO3RoaXMuVj1uZXcgeWIoYSk7dGhpcy5JPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuTD10aGlzLkc9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRj1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5hYT0tMTt0aGlzLko9ITE7dGhpcy5PPTA7dGhpcy5NPW51bGw7dGhpcy5jYT10aGlzLks9dGhpcy5iYT10aGlzLlM9ITE7dGhpcy5oPW5ldyBmYzt9ZnVuY3Rpb24gZmMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBlYz00NUUzLGdjPXt9LGhjPXt9O2s9ZGMucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuTD0xO2Eudj1qYyhHKGIpKTthLnM9YzthLlM9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkc9RGF0ZS5ub3coKTtsYyhhKTthLkE9RyhhLnYpO3ZhciBjPWEuQSxkPWEuVztBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5pLFwidFwiLGQpO2EuQz0wO2M9YS5sLkk7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5NPW5ldyBDYihxKGEuUGEsYSxhLmcpLGEuTykpO0diKGEuVSxhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5uYik7Yj1hLkk/U2EoYS5JKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5oYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5oYShhLkEsYS51LG51bGwsYikpO1FiKCk7SmIoYS5qLGEudSxhLkEsYS5tLGEuVyxhLnMpO31cbmsubmI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTTtiJiYzPT1IKGEpP2IubCgpOnRoaXMuUGEoYSk7fTtcbmsuUGE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCB1PUgodGhpcy5nKTt2YXIgYj10aGlzLmcuSWEoKTtjb25zdCBMPXRoaXMuZy5kYSgpO2lmKCEoMz51KSYmKDMhPXV8fHlhfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmphKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5KfHw0IT11fHw3PT1ifHwoOD09Ynx8MD49TD9RYigzKTpRYigyKSk7cGModGhpcyk7dmFyIGM9dGhpcy5nLmRhKCk7dGhpcy5hYT1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09SCh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7SSh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmphKCk7dGhpcy5pPTIwMD09YztLYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5XLHUsYyk7aWYodGhpcy5pKXtpZih0aGlzLmJhJiYhdGhpcy5LKXtiOntpZih0aGlzLmcpe3ZhciBtLHQ9dGhpcy5nO2lmKChtPXQuZz90LmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKTpudWxsKSYmIXFhKG0pKXt2YXIgbj1tO2JyZWFrIGJ9fW49bnVsbDt9aWYoYz1uKUQodGhpcy5qLHRoaXMubSxjLFwiSW5pdGlhbCBoYW5kc2hha2UgcmVzcG9uc2UgdmlhIFgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpLHRoaXMuSz0hMCxzYyh0aGlzLGMpO2Vsc2Uge3RoaXMuaT0hMTt0aGlzLm89MztGKDEyKTtJKHRoaXMpO3JjKHRoaXMpO2JyZWFrIGF9fXRoaXMuUz8odGModGhpcyx1LGgpLHlhJiZ0aGlzLmkmJjM9PXUmJihHYih0aGlzLlUsdGhpcy5WLFwidGlja1wiLHRoaXMubWIpLFxudGhpcy5WLnN0YXJ0KCkpKTooRCh0aGlzLmosdGhpcy5tLGgsbnVsbCksc2ModGhpcyxoKSk7ND09dSYmSSh0aGlzKTt0aGlzLmkmJiF0aGlzLkomJig0PT11P3VjKHRoaXMubCx0aGlzKToodGhpcy5pPSExLGxjKHRoaXMpKSk7fWVsc2UgNDAwPT1jJiYwPGguaW5kZXhPZihcIlVua25vd24gU0lEXCIpPyh0aGlzLm89MyxGKDEyKSk6KHRoaXMubz0wLEYoMTMpKSxJKHRoaXMpLHJjKHRoaXMpO319fWNhdGNoKHUpe31maW5hbGx5e319O2Z1bmN0aW9uIHFjKGEpe3JldHVybiBhLmc/XCJHRVRcIj09YS51JiYyIT1hLkwmJmEubC5IYTohMX1cbmZ1bmN0aW9uIHRjKGEsYixjKXtsZXQgZD0hMCxlO2Zvcig7IWEuSiYmYS5DPGMubGVuZ3RoOylpZihlPXZjKGEsYyksZT09aGMpezQ9PWImJihhLm89NCxGKDE0KSxkPSExKTtEKGEuaixhLm0sbnVsbCxcIltJbmNvbXBsZXRlIFJlc3BvbnNlXVwiKTticmVha31lbHNlIGlmKGU9PWdjKXthLm89NDtGKDE1KTtEKGEuaixhLm0sYyxcIltJbnZhbGlkIENodW5rXVwiKTtkPSExO2JyZWFrfWVsc2UgRChhLmosYS5tLGUsbnVsbCksc2MoYSxlKTtxYyhhKSYmZSE9aGMmJmUhPWdjJiYoYS5oLmc9XCJcIixhLkM9MCk7NCE9Ynx8MCE9Yy5sZW5ndGh8fGEuaC5ofHwoYS5vPTEsRigxNiksZD0hMSk7YS5pPWEuaSYmZDtkPzA8Yy5sZW5ndGgmJiFhLmNhJiYoYS5jYT0hMCxiPWEubCxiLmc9PWEmJmIuY2EmJiFiLkwmJihiLmouaW5mbyhcIkdyZWF0LCBubyBidWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQuIEJ5dGVzIHJlY2VpdmVkOiBcIitjLmxlbmd0aCksd2MoYiksYi5MPSEwLEYoMTEpKSk6KEQoYS5qLGEubSxcbmMsXCJbSW52YWxpZCBDaHVua2VkIFJlc3BvbnNlXVwiKSxJKGEpLHJjKGEpKTt9ay5tYj1mdW5jdGlvbigpe2lmKHRoaXMuZyl7dmFyIGE9SCh0aGlzLmcpLGI9dGhpcy5nLmphKCk7dGhpcy5DPGIubGVuZ3RoJiYocGModGhpcyksdGModGhpcyxhLGIpLHRoaXMuaSYmNCE9YSYmbGModGhpcykpO319O2Z1bmN0aW9uIHZjKGEsYil7dmFyIGM9YS5DLGQ9Yi5pbmRleE9mKFwiXFxuXCIsYyk7aWYoLTE9PWQpcmV0dXJuIGhjO2M9TnVtYmVyKGIuc3Vic3RyaW5nKGMsZCkpO2lmKGlzTmFOKGMpKXJldHVybiBnYztkKz0xO2lmKGQrYz5iLmxlbmd0aClyZXR1cm4gaGM7Yj1iLnN1YnN0cihkLGMpO2EuQz1kK2M7cmV0dXJuIGJ9ay5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLko9ITA7SSh0aGlzKTt9O2Z1bmN0aW9uIGxjKGEpe2EuWT1EYXRlLm5vdygpK2EuUDt4YyhhLGEuUCk7fVxuZnVuY3Rpb24geGMoYSxiKXtpZihudWxsIT1hLkIpdGhyb3cgRXJyb3IoXCJXYXRjaERvZyB0aW1lciBub3QgbnVsbFwiKTthLkI9VGIocShhLmxiLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5sYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oTWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5MJiYoUWIoKSxGKDE3KSksSSh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuSHx8YS5KfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIEkoYSl7cGMoYSk7dmFyIGI9YS5NO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIucmEmJmIucmEoKTthLk09bnVsbDt6YihhLlYpO0hiKGEuVSk7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIucmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuSCYmKGMuZz09YXx8eWMoYy5oLGEpKSlpZighYS5LJiZ5YyhjLmgsYSkmJjM9PWMuSCl7dHJ5e3ZhciBkPWMuSmEuZy5wYXJzZShiKTt9Y2F0Y2gobil7ZD1udWxsO31pZihBcnJheS5pc0FycmF5KGQpJiYzPT1kLmxlbmd0aCl7dmFyIGU9ZDtpZigwPT1lWzBdKWE6e2lmKCFjLnUpe2lmKGMuZylpZihjLmcuRyszRTM8YS5HKXpjKGMpLEFjKGMpO2Vsc2UgYnJlYWsgYTtCYyhjKTtGKDE4KTt9fWVsc2UgYy5GYT1lWzFdLDA8Yy5GYS1jLlYmJjM3NTAwPmVbMl0mJmMuTSYmMD09Yy5BJiYhYy52JiYoYy52PVRiKHEoYy5pYixjKSw2RTMpKTtpZigxPj1DYyhjLmgpJiZjLm5hKXt0cnl7Yy5uYSgpO31jYXRjaChuKXt9Yy5uYT12b2lkIDA7fX1lbHNlIEooYywxMSk7fWVsc2UgaWYoKGEuS3x8Yy5nPT1hKSYmemMoYyksIXFhKGIpKWZvcihlPWMuSmEuZy5wYXJzZShiKSxiPTA7YjxlLmxlbmd0aDtiKyspe2xldCBuPWVbYl07Yy5WPVxublswXTtuPW5bMV07aWYoMj09Yy5IKWlmKFwiY1wiPT1uWzBdKXtjLko9blsxXTtjLm9hPW5bMl07Y29uc3QgdT1uWzNdO251bGwhPXUmJihjLnFhPXUsYy5qLmluZm8oXCJWRVI9XCIrYy5xYSkpO2NvbnN0IEw9bls0XTtudWxsIT1MJiYoYy5HYT1MLGMuai5pbmZvKFwiU1ZFUj1cIitjLkdhKSk7Y29uc3QgTGE9bls1XTtudWxsIT1MYSYmXCJudW1iZXJcIj09PXR5cGVvZiBMYSYmMDxMYSYmKGQ9MS41KkxhLGMuSz1kLGMuai5pbmZvKFwiYmFja0NoYW5uZWxSZXF1ZXN0VGltZW91dE1zXz1cIitkKSk7ZD1jO2NvbnN0IGlhPWEuZztpZihpYSl7Y29uc3QgTWE9aWEuZz9pYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTpudWxsO2lmKE1hKXt2YXIgZj1kLmg7Zi5nfHwtMT09TWEuaW5kZXhPZihcInNwZHlcIikmJi0xPT1NYS5pbmRleE9mKFwicXVpY1wiKSYmLTE9PU1hLmluZGV4T2YoXCJoMlwiKXx8KGYuaj1mLmwsZi5nPW5ldyBTZXQsZi5oJiYoRGMoZixmLmgpLGYuaD1udWxsKSk7fWlmKGQuRil7Y29uc3QgRmI9XG5pYS5nP2lhLmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKTpudWxsO0ZiJiYoZC5EYT1GYixLKGQuRyxkLkYsRmIpKTt9fWMuSD0zO2MubCYmYy5sLkJhKCk7Yy5jYSYmKGMuUz1EYXRlLm5vdygpLWEuRyxjLmouaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuUytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLndhPUVjKGQsZC5JP2Qub2E6bnVsbCxkLlkpO2lmKGguSyl7RmMoZC5oLGgpO3ZhciBtPWgsdD1kLks7dCYmbS5zZXRUaW1lb3V0KHQpO20uQiYmKHBjKG0pLGxjKG0pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMuaS5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1uWzBdJiZcImNsb3NlXCIhPW5bMF18fEooYyw3KTtlbHNlIDM9PWMuSCYmKFwic3RvcFwiPT1uWzBdfHxcImNsb3NlXCI9PW5bMF0/XCJzdG9wXCI9PW5bMF0/SihjLDcpOkljKGMpOlwibm9vcFwiIT1uWzBdJiZjLmwmJmMubC5BYShuKSxjLkE9MCk7fVFiKDQpO31jYXRjaChuKXt9fWZ1bmN0aW9uIEpjKGEpe2lmKGEuWiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5aKXJldHVybiBhLlooKTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcHx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBTZXQmJmEgaW5zdGFuY2VvZiBTZXQpcmV0dXJuIEFycmF5LmZyb20oYS52YWx1ZXMoKSk7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGJhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIEtjKGEpe2lmKGEuc2EmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuc2EpcmV0dXJuIGEuc2EoKTtpZighYS5afHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBhLlope2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgTWFwJiZhIGluc3RhbmNlb2YgTWFwKXJldHVybiBBcnJheS5mcm9tKGEua2V5cygpKTtpZighKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KSl7aWYoYmEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGI9W107YT1hLmxlbmd0aDtmb3IodmFyIGM9MDtjPGE7YysrKWIucHVzaChjKTtyZXR1cm4gYn1iPVtdO2M9MDtmb3IoY29uc3QgZCBpbiBhKWJbYysrXT1kO3JldHVybiBifX19XG5mdW5jdGlvbiBMYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLHZvaWQgMCk7ZWxzZSBmb3IodmFyIGM9S2MoYSksZD1KYyhhKSxlPWQubGVuZ3RoLGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpO312YXIgTWM9UmVnRXhwKFwiXig/OihbXjovPyMuXSspOik/KD86Ly8oPzooW15cXFxcXFxcXC8/I10qKUApPyhbXlxcXFxcXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFxcXFxcLz8jXXwkKSk/KFtePyNdKyk/KD86XFxcXD8oW14jXSopKT8oPzojKFtcXFxcc1xcXFxTXSopKT8kXCIpO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gTShhLGIpe3RoaXMuZz10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuaD0hMTtpZihhIGluc3RhbmNlb2YgTSl7dGhpcy5oPXZvaWQgMCE9PWI/YjphLmg7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7dGhpcy5nPWEuZztQYyh0aGlzLGEubSk7dGhpcy5sPWEubDtiPWEuaTt2YXIgYz1uZXcgUWM7Yy5pPWIuaTtiLmcmJihjLmc9bmV3IE1hcChiLmcpLGMuaD1iLmgpO1JjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5oPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1TYyhjWzJdfHxcIlwiKSx0aGlzLmc9U2MoY1szXXx8XCJcIiwhMCksUGModGhpcyxjWzRdKSx0aGlzLmw9U2MoY1s1XXx8XCJcIiwhMCksUmModGhpcyxjWzZdfHxcIlwiLCEwKSx0aGlzLm89U2MoY1s3XXx8XCJcIikpOih0aGlzLmg9ISFiLHRoaXMuaT1uZXcgUWMobnVsbCx0aGlzLmgpKTt9XG5NLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChUYyhiLFVjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5nO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChUYyhiLFVjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5nJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFRjKGMsXCIvXCI9PWMuY2hhckF0KDApP1ZjOldjLCEwKSk7KGM9dGhpcy5pLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFRjKGMsWGMpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBHKGEpe3JldHVybiBuZXcgTShhKX1cbmZ1bmN0aW9uIE9jKGEsYixjKXthLmo9Yz9TYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gUGMoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EubT1iO31lbHNlIGEubT1udWxsO31mdW5jdGlvbiBSYyhhLGIsYyl7YiBpbnN0YW5jZW9mIFFjPyhhLmk9YixZYyhhLmksYS5oKSk6KGN8fChiPVRjKGIsWmMpKSxhLmk9bmV3IFFjKGIsYS5oKSk7fWZ1bmN0aW9uIEsoYSxiLGMpe2EuaS5zZXQoYixjKTt9ZnVuY3Rpb24gamMoYSl7SyhhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5EYXRlLm5vdygpKS50b1N0cmluZygzNikpO3JldHVybiBhfVxuZnVuY3Rpb24gU2MoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFRjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsJGMpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uICRjKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIFVjPS9bI1xcL1xcP0BdL2csV2M9L1sjXFw/Ol0vZyxWYz0vWyNcXD9dL2csWmM9L1sjXFw/QF0vZyxYYz0vIy9nO2Z1bmN0aW9uIFFjKGEsYil7dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuaT1hfHxudWxsO3RoaXMuaj0hIWI7fVxuZnVuY3Rpb24gTihhKXthLmd8fChhLmc9bmV3IE1hcCxhLmg9MCxhLmkmJk5jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVFjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gYWQoYSxiKXtOKGEpO2I9TyhhLGIpO2EuZy5oYXMoYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGEuZy5kZWxldGUoYikpO31mdW5jdGlvbiBiZChhLGIpe04oYSk7Yj1PKGEsYik7cmV0dXJuIGEuZy5oYXMoYil9XG5rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtrLnNhPWZ1bmN0aW9uKCl7Tih0aGlzKTtjb25zdCBhPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSksYz1bXTtmb3IobGV0IGQ9MDtkPGIubGVuZ3RoO2QrKyl7Y29uc3QgZT1hW2RdO2ZvcihsZXQgZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTt9cmV0dXJuIGN9O2suWj1mdW5jdGlvbihhKXtOKHRoaXMpO2xldCBiPVtdO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSliZCh0aGlzLGEpJiYoYj1iLmNvbmNhdCh0aGlzLmcuZ2V0KE8odGhpcyxhKSkpKTtlbHNlIHthPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKyliPWIuY29uY2F0KGFbY10pO31yZXR1cm4gYn07XG5rLnNldD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7YmQodGhpcyxhKSYmKHRoaXMuaC09dGhpcy5nLmdldChhKS5sZW5ndGgpO3RoaXMuZy5zZXQoYSxbYl0pO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ay5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gYjthPXRoaXMuWihhKTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24gbWMoYSxiLGMpe2FkKGEsYik7MDxjLmxlbmd0aCYmKGEuaT1udWxsLGEuZy5zZXQoTyhhLGIpLG5hKGMpKSxhLmgrPWMubGVuZ3RoKTt9XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5pKXJldHVybiB0aGlzLmk7aWYoIXRoaXMuZylyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtjb25zdCBmPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpLGg9dGhpcy5aKGQpO2ZvcihkPTA7ZDxoLmxlbmd0aDtkKyspe3ZhciBlPWY7XCJcIiE9PWhbZF0mJihlKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGhbZF0pKSk7YS5wdXNoKGUpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBPKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifVxuZnVuY3Rpb24gWWMoYSxiKXtiJiYhYS5qJiYoTihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoYWQodGhpcyxkKSxtYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgY2Q9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmg9YTt0aGlzLmc9Yjt9fTtmdW5jdGlvbiBkZChhKXt0aGlzLmw9YXx8ZWQ7bC5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9bC5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShsLmcmJmwuZy5LYSYmbC5nLkthKCkmJmwuZy5LYSgpLmVjKTt0aGlzLmo9YT90aGlzLmw6MTt0aGlzLmc9bnVsbDsxPHRoaXMuaiYmKHRoaXMuZz1uZXcgU2V0KTt0aGlzLmg9bnVsbDt0aGlzLmk9W107fXZhciBlZD0xMDtmdW5jdGlvbiBmZChhKXtyZXR1cm4gYS5oPyEwOmEuZz9hLmcuc2l6ZT49YS5qOiExfWZ1bmN0aW9uIENjKGEpe3JldHVybiBhLmg/MTphLmc/YS5nLnNpemU6MH1mdW5jdGlvbiB5YyhhLGIpe3JldHVybiBhLmg/YS5oPT1iOmEuZz9hLmcuaGFzKGIpOiExfWZ1bmN0aW9uIERjKGEsYil7YS5nP2EuZy5hZGQoYik6YS5oPWI7fVxuZnVuY3Rpb24gRmMoYSxiKXthLmgmJmEuaD09Yj9hLmg9bnVsbDphLmcmJmEuZy5oYXMoYikmJmEuZy5kZWxldGUoYik7fWRkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLmk9Z2QodGhpcyk7aWYodGhpcy5oKXRoaXMuaC5jYW5jZWwoKSx0aGlzLmg9bnVsbDtlbHNlIGlmKHRoaXMuZyYmMCE9PXRoaXMuZy5zaXplKXtmb3IoY29uc3QgYSBvZiB0aGlzLmcudmFsdWVzKCkpYS5jYW5jZWwoKTt0aGlzLmcuY2xlYXIoKTt9fTtmdW5jdGlvbiBnZChhKXtpZihudWxsIT1hLmgpcmV0dXJuIGEuaS5jb25jYXQoYS5oLkYpO2lmKG51bGwhPWEuZyYmMCE9PWEuZy5zaXplKXtsZXQgYj1hLmk7Zm9yKGNvbnN0IGMgb2YgYS5nLnZhbHVlcygpKWI9Yi5jb25jYXQoYy5GKTtyZXR1cm4gYn1yZXR1cm4gbmEoYS5pKX1mdW5jdGlvbiBoZCgpe31oZC5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKGEpe3JldHVybiBsLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX07aGQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfTtmdW5jdGlvbiBpZCgpe3RoaXMuZz1uZXcgaGQ7fWZ1bmN0aW9uIGpkKGEsYixjKXtjb25zdCBkPWN8fFwiXCI7dHJ5e0xjKGEsZnVuY3Rpb24oZSxmKXtsZXQgaD1lO3AoZSkmJihoPW1iKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChoKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24ga2QoYSxiKXtjb25zdCBjPW5ldyBJYjtpZihsLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1qYShsZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiKTtkLm9uZXJyb3I9amEobGQsYyxkLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxiKTtkLm9uYWJvcnQ9amEobGQsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD1qYShsZCxjLGQsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYik7bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZC5vbnRpbWVvdXQpZC5vbnRpbWVvdXQoKTt9LDFFNCk7ZC5zcmM9YTt9ZWxzZSBiKCExKTt9ZnVuY3Rpb24gbGQoYSxiLGMsZCxlKXt0cnl7Yi5vbmxvYWQ9bnVsbCxiLm9uZXJyb3I9bnVsbCxiLm9uYWJvcnQ9bnVsbCxiLm9udGltZW91dD1udWxsLGUoZCk7fWNhdGNoKGYpe319ZnVuY3Rpb24gbWQoYSl7dGhpcy5sPWEuZmN8fG51bGw7dGhpcy5qPWEub2J8fCExO31yKG1kLFdiKTttZC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgbmQodGhpcy5sLHRoaXMuail9O21kLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0oe30pO2Z1bmN0aW9uIG5kKGEsYil7Qi5jYWxsKHRoaXMpO3RoaXMuRj1hO3RoaXMudT1iO3RoaXMubT12b2lkIDA7dGhpcy5yZWFkeVN0YXRlPW9kO3RoaXMuc3RhdHVzPTA7dGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT10aGlzLnN0YXR1c1RleHQ9XCJcIjt0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLmg9bnVsbDt0aGlzLkM9XCJHRVRcIjt0aGlzLkI9XCJcIjt0aGlzLmc9ITE7dGhpcy5BPXRoaXMuaj10aGlzLmw9bnVsbDt9cihuZCxCKTt2YXIgb2Q9MDtrPW5kLnByb3RvdHlwZTtcbmsub3Blbj1mdW5jdGlvbihhLGIpe2lmKHRoaXMucmVhZHlTdGF0ZSE9b2QpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLkM9YTt0aGlzLkI9Yjt0aGlzLnJlYWR5U3RhdGU9MTtwZCh0aGlzKTt9O2suc2VuZD1mdW5jdGlvbihhKXtpZigxIT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwibmVlZCB0byBjYWxsIG9wZW4oKSBmaXJzdC4gXCIpO3RoaXMuZz0hMDtjb25zdCBiPXtoZWFkZXJzOnRoaXMudixtZXRob2Q6dGhpcy5DLGNyZWRlbnRpYWxzOnRoaXMubSxjYWNoZTp2b2lkIDB9O2EmJihiLmJvZHk9YSk7KHRoaXMuRnx8bCkuZmV0Y2gobmV3IFJlcXVlc3QodGhpcy5CLGIpKS50aGVuKHRoaXMuJGEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307XG5rLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLnN0YXR1cz0wO3RoaXMuaiYmdGhpcy5qLmNhbmNlbChcIlJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpLmNhdGNoKCgpPT57fSk7MTw9dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLmcmJjQhPXRoaXMucmVhZHlTdGF0ZSYmKHRoaXMuZz0hMSxxZCh0aGlzKSk7dGhpcy5yZWFkeVN0YXRlPW9kO307XG5rLiRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyYmKHRoaXMubD1hLHRoaXMuaHx8KHRoaXMuc3RhdHVzPXRoaXMubC5zdGF0dXMsdGhpcy5zdGF0dXNUZXh0PXRoaXMubC5zdGF0dXNUZXh0LHRoaXMuaD1hLmhlYWRlcnMsdGhpcy5yZWFkeVN0YXRlPTIscGQodGhpcykpLHRoaXMuZyYmKHRoaXMucmVhZHlTdGF0ZT0zLHBkKHRoaXMpLHRoaXMuZykpKWlmKFwiYXJyYXlidWZmZXJcIj09PXRoaXMucmVzcG9uc2VUeXBlKWEuYXJyYXlCdWZmZXIoKS50aGVuKHRoaXMuWWEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBsLlJlYWRhYmxlU3RyZWFtJiZcImJvZHlcImluIGEpe3RoaXMuaj1hLmJvZHkuZ2V0UmVhZGVyKCk7aWYodGhpcy51KXtpZih0aGlzLnJlc3BvbnNlVHlwZSl0aHJvdyBFcnJvcigncmVzcG9uc2VUeXBlIG11c3QgYmUgZW1wdHkgZm9yIFwic3RyZWFtQmluYXJ5Q2h1bmtzXCIgbW9kZSByZXNwb25zZXMuJyk7dGhpcy5yZXNwb25zZT1cbltdO31lbHNlIHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIix0aGlzLkE9bmV3IFRleHREZWNvZGVyO3JkKHRoaXMpO31lbHNlIGEudGV4dCgpLnRoZW4odGhpcy5aYS5iaW5kKHRoaXMpLHRoaXMua2EuYmluZCh0aGlzKSk7fTtmdW5jdGlvbiByZChhKXthLmoucmVhZCgpLnRoZW4oYS5YYS5iaW5kKGEpKS5jYXRjaChhLmthLmJpbmQoYSkpO31rLlhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7aWYodGhpcy51JiZhLnZhbHVlKXRoaXMucmVzcG9uc2UucHVzaChhLnZhbHVlKTtlbHNlIGlmKCF0aGlzLnUpe3ZhciBiPWEudmFsdWU/YS52YWx1ZTpuZXcgVWludDhBcnJheSgwKTtpZihiPXRoaXMuQS5kZWNvZGUoYix7c3RyZWFtOiFhLmRvbmV9KSl0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0Kz1iO31hLmRvbmU/cWQodGhpcyk6cGQodGhpcyk7Mz09dGhpcy5yZWFkeVN0YXRlJiZyZCh0aGlzKTt9fTtcbmsuWmE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1hLHFkKHRoaXMpKTt9O2suWWE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT1hLHFkKHRoaXMpKTt9O2sua2E9ZnVuY3Rpb24oKXt0aGlzLmcmJnFkKHRoaXMpO307ZnVuY3Rpb24gcWQoYSl7YS5yZWFkeVN0YXRlPTQ7YS5sPW51bGw7YS5qPW51bGw7YS5BPW51bGw7cGQoYSk7fWsuc2V0UmVxdWVzdEhlYWRlcj1mdW5jdGlvbihhLGIpe3RoaXMudi5hcHBlbmQoYSxiKTt9O2suZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaD90aGlzLmguZ2V0KGEudG9Mb3dlckNhc2UoKSl8fFwiXCI6XCJcIn07XG5rLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe2lmKCF0aGlzLmgpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPXRoaXMuaC5lbnRyaWVzKCk7Zm9yKHZhciBjPWIubmV4dCgpOyFjLmRvbmU7KWM9Yy52YWx1ZSxhLnB1c2goY1swXStcIjogXCIrY1sxXSksYz1iLm5leHQoKTtyZXR1cm4gYS5qb2luKFwiXFxyXFxuXCIpfTtmdW5jdGlvbiBwZChhKXthLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYS5vbnJlYWR5c3RhdGVjaGFuZ2UuY2FsbChhKTt9T2JqZWN0LmRlZmluZVByb3BlcnR5KG5kLnByb3RvdHlwZSxcIndpdGhDcmVkZW50aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmNsdWRlXCI9PT10aGlzLm19LHNldDpmdW5jdGlvbihhKXt0aGlzLm09YT9cImluY2x1ZGVcIjpcInNhbWUtb3JpZ2luXCI7fX0pO3ZhciBzZD1sLkpTT04ucGFyc2U7ZnVuY3Rpb24gUChhKXtCLmNhbGwodGhpcyk7dGhpcy5oZWFkZXJzPW5ldyBNYXA7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkk9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5HPXRoaXMudj10aGlzLkY9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5LPXRkO3RoaXMuTD10aGlzLk09ITE7fXIoUCxCKTt2YXIgdGQ9XCJcIix1ZD0vXmh0dHBzPyQvaSx2ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1QLnByb3RvdHlwZTtrLk9hPWZ1bmN0aW9uKGEpe3RoaXMuTT1hO307XG5rLmhhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZyl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIit0aGlzLkkrXCI7IG5ld1VyaT1cIithKTtiPWI/Yi50b1VwcGVyQ2FzZSgpOlwiR0VUXCI7dGhpcy5JPWE7dGhpcy5qPVwiXCI7dGhpcy5tPTA7dGhpcy5GPSExO3RoaXMuaD0hMDt0aGlzLmc9dGhpcy51P3RoaXMudS5nKCk6YmMuZygpO3RoaXMuQz10aGlzLnU/WGIodGhpcy51KTpYYihiYyk7dGhpcy5nLm9ucmVhZHlzdGF0ZWNoYW5nZT1xKHRoaXMuTGEsdGhpcyk7dHJ5e3RoaXMuRz0hMCx0aGlzLmcub3BlbihiLFN0cmluZyhhKSwhMCksdGhpcy5HPSExO31jYXRjaChmKXt3ZCh0aGlzLGYpO3JldHVybn1hPWN8fFwiXCI7Yz1uZXcgTWFwKHRoaXMuaGVhZGVycyk7aWYoZClpZihPYmplY3QuZ2V0UHJvdG90eXBlT2YoZCk9PT1PYmplY3QucHJvdG90eXBlKWZvcih2YXIgZSBpbiBkKWMuc2V0KGUsZFtlXSk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PT1cbnR5cGVvZiBkLmtleXMmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBkLmdldClmb3IoY29uc3QgZiBvZiBkLmtleXMoKSljLnNldChmLGQuZ2V0KGYpKTtlbHNlIHRocm93IEVycm9yKFwiVW5rbm93biBpbnB1dCB0eXBlIGZvciBvcHRfaGVhZGVyczogXCIrU3RyaW5nKGQpKTtkPUFycmF5LmZyb20oYy5rZXlzKCkpLmZpbmQoZj0+XCJjb250ZW50LXR5cGVcIj09Zi50b0xvd2VyQ2FzZSgpKTtlPWwuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBsLkZvcm1EYXRhOyEoMDw9bWEodmQsYikpfHxkfHxlfHxjLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7Zm9yKGNvbnN0IFtmLGhdb2YgYyl0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihmLGgpO3RoaXMuSyYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5LKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5NJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz1cbnRoaXMuTSk7dHJ5e3hkKHRoaXMpLDA8dGhpcy5CJiYoKHRoaXMuTD15ZCh0aGlzLmcpKT8odGhpcy5nLnRpbWVvdXQ9dGhpcy5CLHRoaXMuZy5vbnRpbWVvdXQ9cSh0aGlzLnVhLHRoaXMpKTp0aGlzLkE9QWIodGhpcy51YSx0aGlzLkIsdGhpcykpLHRoaXMudj0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnY9ITE7fWNhdGNoKGYpe3dkKHRoaXMsZik7fX07ZnVuY3Rpb24geWQoYSl7cmV0dXJuIHkmJkhhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1rLnVhPWZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJnRoaXMuZyYmKHRoaXMuaj1cIlRpbWVkIG91dCBhZnRlciBcIit0aGlzLkIrXCJtcywgYWJvcnRpbmdcIix0aGlzLm09OCxDKHRoaXMsXCJ0aW1lb3V0XCIpLHRoaXMuYWJvcnQoOCkpO307XG5mdW5jdGlvbiB3ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTt6ZChhKTtBZChhKTt9ZnVuY3Rpb24gemQoYSl7YS5GfHwoYS5GPSEwLEMoYSxcImNvbXBsZXRlXCIpLEMoYSxcImVycm9yXCIpKTt9ay5hYm9ydD1mdW5jdGlvbihhKXt0aGlzLmcmJnRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmw9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5sPSExLHRoaXMubT1hfHw3LEModGhpcyxcImNvbXBsZXRlXCIpLEModGhpcyxcImFib3J0XCIpLEFkKHRoaXMpKTt9O2suTj1mdW5jdGlvbigpe3RoaXMuZyYmKHRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmw9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5sPSExKSxBZCh0aGlzLCEwKSk7UC4kLk4uY2FsbCh0aGlzKTt9O2suTGE9ZnVuY3Rpb24oKXt0aGlzLnN8fCh0aGlzLkd8fHRoaXMudnx8dGhpcy5sP0JkKHRoaXMpOnRoaXMua2IoKSk7fTtrLmtiPWZ1bmN0aW9uKCl7QmQodGhpcyk7fTtcbmZ1bmN0aW9uIEJkKGEpe2lmKGEuaCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJighYS5DWzFdfHw0IT1IKGEpfHwyIT1hLmRhKCkpKWlmKGEudiYmND09SChhKSlBYihhLkxhLDAsYSk7ZWxzZSBpZihDKGEsXCJyZWFkeXN0YXRlY2hhbmdlXCIpLDQ9PUgoYSkpe2EuaD0hMTt0cnl7Y29uc3QgbT1hLmRhKCk7YTpzd2l0Y2gobSl7Y2FzZSAyMDA6Y2FzZSAyMDE6Y2FzZSAyMDI6Y2FzZSAyMDQ6Y2FzZSAyMDY6Y2FzZSAzMDQ6Y2FzZSAxMjIzOnZhciBiPSEwO2JyZWFrIGE7ZGVmYXVsdDpiPSExO312YXIgYztpZighKGM9Yikpe3ZhciBkO2lmKGQ9MD09PW0pe3ZhciBlPVN0cmluZyhhLkkpLm1hdGNoKE1jKVsxXXx8bnVsbDtpZighZSYmbC5zZWxmJiZsLnNlbGYubG9jYXRpb24pe3ZhciBmPWwuc2VsZi5sb2NhdGlvbi5wcm90b2NvbDtlPWYuc3Vic3RyKDAsZi5sZW5ndGgtMSk7fWQ9IXVkLnRlc3QoZT9lLnRvTG93ZXJDYXNlKCk6XCJcIik7fWM9ZDt9aWYoYylDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXG5cInN1Y2Nlc3NcIik7ZWxzZSB7YS5tPTY7dHJ5e3ZhciBoPTI8SChhKT9hLmcuc3RhdHVzVGV4dDpcIlwiO31jYXRjaCh0KXtoPVwiXCI7fWEuaj1oK1wiIFtcIithLmRhKCkrXCJdXCI7emQoYSk7fX1maW5hbGx5e0FkKGEpO319fWZ1bmN0aW9uIEFkKGEsYil7aWYoYS5nKXt4ZChhKTtjb25zdCBjPWEuZyxkPWEuQ1swXT9hYTpudWxsO2EuZz1udWxsO2EuQz1udWxsO2J8fEMoYSxcInJlYWR5XCIpO3RyeXtjLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO31jYXRjaChlKXt9fX1mdW5jdGlvbiB4ZChhKXthLmcmJmEuTCYmKGEuZy5vbnRpbWVvdXQ9bnVsbCk7YS5BJiYobC5jbGVhclRpbWVvdXQoYS5BKSxhLkE9bnVsbCk7fWZ1bmN0aW9uIEgoYSl7cmV0dXJuIGEuZz9hLmcucmVhZHlTdGF0ZTowfWsuZGE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDI8SCh0aGlzKT90aGlzLmcuc3RhdHVzOi0xfWNhdGNoKGEpe3JldHVybiAtMX19O1xuay5qYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5nP3RoaXMuZy5yZXNwb25zZVRleHQ6XCJcIn1jYXRjaChhKXtyZXR1cm4gXCJcIn19O2suV2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXt2YXIgYj10aGlzLmcucmVzcG9uc2VUZXh0O2EmJjA9PWIuaW5kZXhPZihhKSYmKGI9Yi5zdWJzdHJpbmcoYS5sZW5ndGgpKTtyZXR1cm4gc2QoYil9fTtmdW5jdGlvbiBvYyhhKXt0cnl7aWYoIWEuZylyZXR1cm4gbnVsbDtpZihcInJlc3BvbnNlXCJpbiBhLmcpcmV0dXJuIGEuZy5yZXNwb25zZTtzd2l0Y2goYS5LKXtjYXNlIHRkOmNhc2UgXCJ0ZXh0XCI6cmV0dXJuIGEuZy5yZXNwb25zZVRleHQ7Y2FzZSBcImFycmF5YnVmZmVyXCI6aWYoXCJtb3pSZXNwb25zZUFycmF5QnVmZmVyXCJpbiBhLmcpcmV0dXJuIGEuZy5tb3pSZXNwb25zZUFycmF5QnVmZmVyfXJldHVybiBudWxsfWNhdGNoKGIpe3JldHVybiBudWxsfX1rLklhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubX07XG5rLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgdGhpcy5qP3RoaXMuajpTdHJpbmcodGhpcy5qKX07ZnVuY3Rpb24gQ2QoYSl7bGV0IGI9XCJcIjtSYShhLGZ1bmN0aW9uKGMsZCl7Yis9ZDtiKz1cIjpcIjtiKz1jO2IrPVwiXFxyXFxuXCI7fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gRGQoYSxiLGMpe2E6e2ZvcihkIGluIGMpe3ZhciBkPSExO2JyZWFrIGF9ZD0hMDt9ZHx8KGM9Q2QoYyksXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhudWxsIT1jJiZlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKSk6SyhhLGIsYykpO31mdW5jdGlvbiBFZChhLGIsYyl7cmV0dXJuIGMmJmMuaW50ZXJuYWxDaGFubmVsUGFyYW1zP2MuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdfHxiOmJ9XG5mdW5jdGlvbiBGZChhKXt0aGlzLkdhPTA7dGhpcy5pPVtdO3RoaXMuaj1uZXcgSWI7dGhpcy5vYT10aGlzLndhPXRoaXMuRz10aGlzLlk9dGhpcy5nPXRoaXMuRGE9dGhpcy5GPXRoaXMubWE9dGhpcy5vPXRoaXMuVT10aGlzLnM9bnVsbDt0aGlzLmZiPXRoaXMuVz0wO3RoaXMuY2I9RWQoXCJmYWlsRmFzdFwiLCExLGEpO3RoaXMuTT10aGlzLnY9dGhpcy51PXRoaXMubT10aGlzLmw9bnVsbDt0aGlzLmFhPSEwO3RoaXMudGE9dGhpcy5GYT10aGlzLlY9LTE7dGhpcy5iYT10aGlzLkE9dGhpcy5DPTA7dGhpcy5hYj1FZChcImJhc2VSZXRyeURlbGF5TXNcIiw1RTMsYSk7dGhpcy5oYj1FZChcInJldHJ5RGVsYXlTZWVkTXNcIiwxRTQsYSk7dGhpcy5lYj1FZChcImZvcndhcmRDaGFubmVsTWF4UmV0cmllc1wiLDIsYSk7dGhpcy54YT1FZChcImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNc1wiLDJFNCxhKTt0aGlzLnZhPWEmJmEueG1sSHR0cEZhY3Rvcnl8fHZvaWQgMDt0aGlzLkhhPWEmJmEuZGN8fFxuITE7dGhpcy5LPXZvaWQgMDt0aGlzLkk9YSYmYS5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLko9XCJcIjt0aGlzLmg9bmV3IGRkKGEmJmEuY29uY3VycmVudFJlcXVlc3RMaW1pdCk7dGhpcy5KYT1uZXcgaWQ7dGhpcy5QPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5PPWEmJmEuZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzfHwhMTt0aGlzLlAmJnRoaXMuTyYmKHRoaXMuTz0hMSk7dGhpcy5iYj1hJiZhLmJjfHwhMTthJiZhLkVhJiZ0aGlzLmouRWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLmFhPSExKTt0aGlzLmNhPSF0aGlzLlAmJnRoaXMuYWEmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMubmE9dm9pZCAwO3RoaXMuUz0wO3RoaXMuTD0hMTt0aGlzLnBhPXRoaXMuQj1udWxsO31rPUZkLnByb3RvdHlwZTtrLnFhPTg7ay5IPTE7XG5mdW5jdGlvbiBJYyhhKXtHZChhKTtpZigzPT1hLkgpe3ZhciBiPWEuVysrLGM9RyhhLkcpO0soYyxcIlNJRFwiLGEuSik7SyhjLFwiUklEXCIsYik7SyhjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0hkKGEsYyk7Yj1uZXcgZGMoYSxhLmosYix2b2lkIDApO2IuTD0yO2Iudj1qYyhHKGMpKTtjPSExO2wubmF2aWdhdG9yJiZsLm5hdmlnYXRvci5zZW5kQmVhY29uJiYoYz1sLm5hdmlnYXRvci5zZW5kQmVhY29uKGIudi50b1N0cmluZygpLFwiXCIpKTshYyYmbC5JbWFnZSYmKChuZXcgSW1hZ2UpLnNyYz1iLnYsYz0hMCk7Y3x8KGIuZz1uYyhiLmwsbnVsbCksYi5nLmhhKGIudikpO2IuRz1EYXRlLm5vdygpO2xjKGIpO31JZChhKTt9ZnVuY3Rpb24gQWMoYSl7YS5nJiYod2MoYSksYS5nLmNhbmNlbCgpLGEuZz1udWxsKTt9XG5mdW5jdGlvbiBHZChhKXtBYyhhKTthLnUmJihsLmNsZWFyVGltZW91dChhLnUpLGEudT1udWxsKTt6YyhhKTthLmguY2FuY2VsKCk7YS5tJiYoXCJudW1iZXJcIj09PXR5cGVvZiBhLm0mJmwuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO31mdW5jdGlvbiBIYyhhKXtmZChhLmgpfHxhLm18fChhLm09ITAsdGIoYS5OYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIEpkKGEsYil7aWYoQ2MoYS5oKT49YS5oLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEuaT1iLkYuY29uY2F0KGEuaSksITA7aWYoMT09YS5IfHwyPT1hLkh8fGEuQz49KGEuY2I/MDphLmViKSlyZXR1cm4gITE7YS5tPVRiKHEoYS5OYSxhLGIpLEtkKGEsYS5DKSk7YS5DKys7cmV0dXJuICEwfVxuay5OYT1mdW5jdGlvbihhKXtpZih0aGlzLm0paWYodGhpcy5tPW51bGwsMT09dGhpcy5IKXtpZighYSl7dGhpcy5XPU1hdGguZmxvb3IoMUU1Kk1hdGgucmFuZG9tKCkpO2E9dGhpcy5XKys7Y29uc3QgZT1uZXcgZGModGhpcyx0aGlzLmosYSx2b2lkIDApO2xldCBmPXRoaXMuczt0aGlzLlUmJihmPyhmPVNhKGYpLFVhKGYsdGhpcy5VKSk6Zj10aGlzLlUpO251bGwhPT10aGlzLm98fHRoaXMuT3x8KGUuST1mLGY9bnVsbCk7aWYodGhpcy5QKWE6e3ZhciBiPTA7Zm9yKHZhciBjPTA7Yzx0aGlzLmkubGVuZ3RoO2MrKyl7Yjp7dmFyIGQ9dGhpcy5pW2NdO2lmKFwiX19kYXRhX19cImluIGQuZyYmKGQ9ZC5nLl9fZGF0YV9fLFwic3RyaW5nXCI9PT10eXBlb2YgZCkpe2Q9ZC5sZW5ndGg7YnJlYWsgYn1kPXZvaWQgMDt9aWYodm9pZCAwPT09ZClicmVhaztiKz1kO2lmKDQwOTY8Yil7Yj1jO2JyZWFrIGF9aWYoNDA5Nj09PWJ8fGM9PT10aGlzLmkubGVuZ3RoLTEpe2I9YysxO2JyZWFrIGF9fWI9MUUzO31lbHNlIGI9XG4xRTM7Yj1MZCh0aGlzLGUsYik7Yz1HKHRoaXMuRyk7SyhjLFwiUklEXCIsYSk7SyhjLFwiQ1ZFUlwiLDIyKTt0aGlzLkYmJksoYyxcIlgtSFRUUC1TZXNzaW9uLUlkXCIsdGhpcy5GKTtIZCh0aGlzLGMpO2YmJih0aGlzLk8/Yj1cImhlYWRlcnM9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhDZChmKSkpK1wiJlwiK2I6dGhpcy5vJiZEZChjLHRoaXMubyxmKSk7RGModGhpcy5oLGUpO3RoaXMuYmImJksoYyxcIlRZUEVcIixcImluaXRcIik7dGhpcy5QPyhLKGMsXCIkcmVxXCIsYiksSyhjLFwiU0lEXCIsXCJudWxsXCIpLGUuYmE9ITAsaWMoZSxjLG51bGwpKTppYyhlLGMsYik7dGhpcy5IPTI7fX1lbHNlIDM9PXRoaXMuSCYmKGE/TWQodGhpcyxhKTowPT10aGlzLmkubGVuZ3RofHxmZCh0aGlzLmgpfHxNZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIE1kKGEsYil7dmFyIGM7Yj9jPWIubTpjPWEuVysrO2NvbnN0IGQ9RyhhLkcpO0soZCxcIlNJRFwiLGEuSik7SyhkLFwiUklEXCIsYyk7SyhkLFwiQUlEXCIsYS5WKTtIZChhLGQpO2EubyYmYS5zJiZEZChkLGEubyxhLnMpO2M9bmV3IGRjKGEsYS5qLGMsYS5DKzEpO251bGw9PT1hLm8mJihjLkk9YS5zKTtiJiYoYS5pPWIuRi5jb25jYXQoYS5pKSk7Yj1MZChhLGMsMUUzKTtjLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSphLnhhKStNYXRoLnJvdW5kKC41KmEueGEqTWF0aC5yYW5kb20oKSkpO0RjKGEuaCxjKTtpYyhjLGQsYik7fWZ1bmN0aW9uIEhkKGEsYil7YS5tYSYmUmEoYS5tYSxmdW5jdGlvbihjLGQpe0soYixkLGMpO30pO2EubCYmTGMoe30sZnVuY3Rpb24oYyxkKXtLKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBMZChhLGIsYyl7Yz1NYXRoLm1pbihhLmkubGVuZ3RoLGMpO3ZhciBkPWEubD9xKGEubC5WYSxhLmwsYSk6bnVsbDthOnt2YXIgZT1hLmk7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBtPSEwO2ZvcihsZXQgdD0wO3Q8Yzt0Kyspe2xldCBuPWVbdF0uaDtjb25zdCB1PWVbdF0uZztuLT1mO2lmKDA+bilmPU1hdGgubWF4KDAsZVt0XS5oLTEwMCksbT0hMTtlbHNlIHRyeXtqZCh1LGgsXCJyZXFcIituK1wiX1wiKTt9Y2F0Y2goTCl7ZCYmZCh1KTt9fWlmKG0pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmkuc3BsaWNlKDAsYyk7Yi5GPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLmJhPTEsdGIoYS5NYSxhKSxhLkE9MCk7fVxuZnVuY3Rpb24gQmMoYSl7aWYoYS5nfHxhLnV8fDM8PWEuQSlyZXR1cm4gITE7YS5iYSsrO2EudT1UYihxKGEuTWEsYSksS2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5NYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO05kKHRoaXMpO2lmKHRoaXMuY2EmJiEodGhpcy5MfHxudWxsPT10aGlzLmd8fDA+PXRoaXMuUykpe3ZhciBhPTIqdGhpcy5TO3RoaXMuai5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVyIGVuYWJsZWQ6IFwiK2EpO3RoaXMuQj1UYihxKHRoaXMuamIsdGhpcyksYSk7fX07ay5qYj1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMuai5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5qLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuTT0hMSx0aGlzLkw9ITAsRigxMCksQWModGhpcyksTmQodGhpcykpO307XG5mdW5jdGlvbiB3YyhhKXtudWxsIT1hLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ZnVuY3Rpb24gTmQoYSl7YS5nPW5ldyBkYyhhLGEuaixcInJwY1wiLGEuYmEpO251bGw9PT1hLm8mJihhLmcuST1hLnMpO2EuZy5PPTA7dmFyIGI9RyhhLndhKTtLKGIsXCJSSURcIixcInJwY1wiKTtLKGIsXCJTSURcIixhLkopO0soYixcIkNJXCIsYS5NP1wiMFwiOlwiMVwiKTtLKGIsXCJBSURcIixhLlYpO0soYixcIlRZUEVcIixcInhtbGh0dHBcIik7SGQoYSxiKTthLm8mJmEucyYmRGQoYixhLm8sYS5zKTthLksmJmEuZy5zZXRUaW1lb3V0KGEuSyk7dmFyIGM9YS5nO2E9YS5vYTtjLkw9MTtjLnY9amMoRyhiKSk7Yy5zPW51bGw7Yy5TPSEwO2tjKGMsYSk7fWsuaWI9ZnVuY3Rpb24oKXtudWxsIT10aGlzLnYmJih0aGlzLnY9bnVsbCxBYyh0aGlzKSxCYyh0aGlzKSxGKDE5KSk7fTtmdW5jdGlvbiB6YyhhKXtudWxsIT1hLnYmJihsLmNsZWFyVGltZW91dChhLnYpLGEudj1udWxsKTt9XG5mdW5jdGlvbiB1YyhhLGIpe3ZhciBjPW51bGw7aWYoYS5nPT1iKXt6YyhhKTt3YyhhKTthLmc9bnVsbDt2YXIgZD0yO31lbHNlIGlmKHljKGEuaCxiKSljPWIuRixGYyhhLmgsYiksZD0xO2Vsc2UgcmV0dXJuO2lmKDAhPWEuSClpZihhLnRhPWIuYWEsYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5HO3ZhciBlPWEuQztkPU9iKCk7QyhkLG5ldyBTYihkLGMpKTtIYyhhKTt9ZWxzZSBHYyhhKTtlbHNlIGlmKGU9Yi5vLDM9PWV8fDA9PWUmJjA8YS50YXx8ISgxPT1kJiZKZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaCxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOkooYSw1KTticmVhaztjYXNlIDQ6SihhLDEwKTticmVhaztjYXNlIDM6SihhLDYpO2JyZWFrO2RlZmF1bHQ6SihhLDIpO319XG5mdW5jdGlvbiBLZChhLGIpe2xldCBjPWEuYWIrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuaGIpO2EubHx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gSihhLGIpe2Euai5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EubCYmKGM9bnVsbCk7dmFyIGQ9cShhLnBiLGEpO2N8fChjPW5ldyBNKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO2tkKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBGKDIpO2EuSD0wO2EubCYmYS5sLnphKGIpO0lkKGEpO0dkKGEpO31rLnBiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuai5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEYoMikpOih0aGlzLmouaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksRigxKSk7fTtcbmZ1bmN0aW9uIElkKGEpe2EuSD0wO2EucGE9W107aWYoYS5sKXtjb25zdCBiPWdkKGEuaCk7aWYoMCE9Yi5sZW5ndGh8fDAhPWEuaS5sZW5ndGgpb2EoYS5wYSxiKSxvYShhLnBhLGEuaSksYS5oLmkubGVuZ3RoPTAsbmEoYS5pKSxhLmkubGVuZ3RoPTA7YS5sLnlhKCk7fX1mdW5jdGlvbiBFYyhhLGIsYyl7dmFyIGQ9YyBpbnN0YW5jZW9mIE0/RyhjKTpuZXcgTShjLHZvaWQgMCk7aWYoXCJcIiE9ZC5nKWImJihkLmc9YitcIi5cIitkLmcpLFBjKGQsZC5tKTtlbHNlIHt2YXIgZT1sLmxvY2F0aW9uO2Q9ZS5wcm90b2NvbDtiPWI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWU7ZT0rZS5wb3J0O3ZhciBmPW5ldyBNKG51bGwsdm9pZCAwKTtkJiZPYyhmLGQpO2ImJihmLmc9Yik7ZSYmUGMoZixlKTtjJiYoZi5sPWMpO2Q9Zjt9Yz1hLkY7Yj1hLkRhO2MmJmImJksoZCxjLGIpO0soZCxcIlZFUlwiLGEucWEpO0hkKGEsZCk7cmV0dXJuIGR9XG5mdW5jdGlvbiBuYyhhLGIsYyl7aWYoYiYmIWEuSSl0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTtiPWMmJmEuSGEmJiFhLnZhP25ldyBQKG5ldyBtZCh7b2I6ITB9KSk6bmV3IFAoYS52YSk7Yi5PYShhLkkpO3JldHVybiBifWZ1bmN0aW9uIE9kKCl7fWs9T2QucHJvdG90eXBlO2suQmE9ZnVuY3Rpb24oKXt9O2suQWE9ZnVuY3Rpb24oKXt9O2suemE9ZnVuY3Rpb24oKXt9O2sueWE9ZnVuY3Rpb24oKXt9O2suVmE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFBkKCl7aWYoeSYmISgxMDw9TnVtYmVyKEthKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9UGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFEoYSxiKX07XG5mdW5jdGlvbiBRKGEsYil7Qi5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgRmQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIuQ2EmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi5DYTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIuQ2F9KTt0aGlzLmcuVT1cbmE7KGE9YiYmYi5jYykmJiFxYShhKSYmKHRoaXMuZy5vPWEpO3RoaXMuQT1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMudj1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiFxYShiKSYmKHRoaXMuZy5GPWIsYT10aGlzLmgsbnVsbCE9PWEmJmIgaW4gYSYmKGE9dGhpcy5oLGIgaW4gYSYmZGVsZXRlIGFbYl0pKTt0aGlzLmo9bmV3IFIodGhpcyk7fXIoUSxCKTtRLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dGhpcy5nLmw9dGhpcy5qO3RoaXMuQSYmKHRoaXMuZy5JPSEwKTt2YXIgYT10aGlzLmcsYj10aGlzLmwsYz10aGlzLmh8fHZvaWQgMDtGKDApO2EuWT1iO2EubWE9Y3x8e307YS5NPWEuYWE7YS5HPUVjKGEsbnVsbCxhLlkpO0hjKGEpO307US5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtJYyh0aGlzLmcpO307XG5RLnByb3RvdHlwZS51PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZztpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBjPXt9O2MuX19kYXRhX189YTthPWM7fWVsc2UgdGhpcy52JiYoYz17fSxjLl9fZGF0YV9fPW1iKGEpLGE9Yyk7Yi5pLnB1c2gobmV3IGNkKGIuZmIrKyxhKSk7Mz09Yi5IJiZIYyhiKTt9O1EucHJvdG90eXBlLk49ZnVuY3Rpb24oKXt0aGlzLmcubD1udWxsO2RlbGV0ZSB0aGlzLmo7SWModGhpcy5nKTtkZWxldGUgdGhpcy5nO1EuJC5OLmNhbGwodGhpcyk7fTtmdW5jdGlvbiBRZChhKXskYi5jYWxsKHRoaXMpO3ZhciBiPWEuX19zbV9fO2lmKGIpe2E6e2Zvcihjb25zdCBjIGluIGIpe2E9YzticmVhayBhfWE9dm9pZCAwO31pZih0aGlzLmk9YSlhPXRoaXMuaSxiPW51bGwhPT1iJiZhIGluIGI/YlthXTp2b2lkIDA7dGhpcy5kYXRhPWI7fWVsc2UgdGhpcy5kYXRhPWE7fXIoUWQsJGIpO2Z1bmN0aW9uIFJkKCl7YWMuY2FsbCh0aGlzKTt0aGlzLnN0YXR1cz0xO31yKFJkLGFjKTtcbmZ1bmN0aW9uIFIoYSl7dGhpcy5nPWE7fXIoUixPZCk7Ui5wcm90b3R5cGUuQmE9ZnVuY3Rpb24oKXtDKHRoaXMuZyxcImFcIik7fTtSLnByb3RvdHlwZS5BYT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUWQoYSkpO307Ui5wcm90b3R5cGUuemE9ZnVuY3Rpb24oYSl7Qyh0aGlzLmcsbmV3IFJkKCkpO307Ui5wcm90b3R5cGUueWE9ZnVuY3Rpb24oKXtDKHRoaXMuZyxcImJcIik7fTtmdW5jdGlvbiBTZCgpe3RoaXMuYmxvY2tTaXplPS0xO31mdW5jdGlvbiBTKCl7dGhpcy5ibG9ja1NpemU9LTE7dGhpcy5ibG9ja1NpemU9NjQ7dGhpcy5nPUFycmF5KDQpO3RoaXMubT1BcnJheSh0aGlzLmJsb2NrU2l6ZSk7dGhpcy5pPXRoaXMuaD0wO3RoaXMucmVzZXQoKTt9cihTLFNkKTtTLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuZ1swXT0xNzMyNTg0MTkzO3RoaXMuZ1sxXT00MDIzMjMzNDE3O3RoaXMuZ1syXT0yNTYyMzgzMTAyO3RoaXMuZ1szXT0yNzE3MzM4Nzg7dGhpcy5pPXRoaXMuaD0wO307XG5mdW5jdGlvbiBUZChhLGIsYyl7Y3x8KGM9MCk7dmFyIGQ9QXJyYXkoMTYpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYilmb3IodmFyIGU9MDsxNj5lOysrZSlkW2VdPWIuY2hhckNvZGVBdChjKyspfGIuY2hhckNvZGVBdChjKyspPDw4fGIuY2hhckNvZGVBdChjKyspPDwxNnxiLmNoYXJDb2RlQXQoYysrKTw8MjQ7ZWxzZSBmb3IoZT0wOzE2PmU7KytlKWRbZV09YltjKytdfGJbYysrXTw8OHxiW2MrK108PDE2fGJbYysrXTw8MjQ7Yj1hLmdbMF07Yz1hLmdbMV07ZT1hLmdbMl07dmFyIGY9YS5nWzNdO3ZhciBoPWIrKGZeYyYoZV5mKSkrZFswXSszNjE0MDkwMzYwJjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFsxXSszOTA1NDAyNzEwJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMl0rNjA2MTA1ODE5JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7XG5oPWMrKGJeZSYoZl5iKSkrZFszXSszMjUwNDQxOTY2JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbNF0rNDExODU0ODM5OSY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbNV0rMTIwMDA4MDQyNiY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzZdKzI4MjE3MzU5NTUmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFs3XSs0MjQ5MjYxMzEzJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbOF0rMTc3MDAzNTQxNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbOV0rMjMzNjU1Mjg3OSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxcbmg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMTBdKzQyOTQ5MjUyMzMmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFsxMV0rMjMwNDU2MzEzNCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzEyXSsxODA0NjAzNjgyJjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFsxM10rNDI1NDYyNjE5NSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzE0XSsyNzkyOTY1MDA2JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbMTVdKzEyMzY1MzUzMjkmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGVeZiYoY15lKSkrZFsxXSs0MTI5MTcwNzg2JjQyOTQ5NjcyOTU7Yj1jKyhoPDxcbjUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzZdKzMyMjU0NjU2NjQmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzExXSs2NDM3MTc3MTMmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFswXSszOTIxMDY5OTk0JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbNV0rMzU5MzQwODYwNSY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMTBdKzM4MDE2MDgzJjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFsxNV0rMzYzNDQ4ODk2MSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzRdKzM4ODk0Mjk0NDgmNDI5NDk2NzI5NTtjPVxuZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzldKzU2ODQ0NjQzOCY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMTRdKzMyNzUxNjM2MDYmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzNdKzQxMDc2MDMzMzUmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFs4XSsxMTYzNTMxNTAxJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbMTNdKzI4NTAyODU4MjkmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzJdKzQyNDM1NjM1MTImNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzddKzE3MzUzMjg0NzMmNDI5NDk2NzI5NTtcbmU9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzEyXSsyMzY4MzU5NTYyJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhjXmVeZikrZFs1XSs0Mjk0NTg4NzM4JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzhdKzIyNzIzOTI4MzMmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzExXSsxODM5MDMwNTYyJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsxNF0rNDI1OTY1Nzc0MCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFsxXSsyNzYzOTc1MjM2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzRdKzEyNzI4OTMzNTMmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8XG5oPj4+MjEpO2g9ZSsoZl5iXmMpK2RbN10rNDEzOTQ2OTY2NCY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMTBdKzMyMDAyMzY2NTYmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbMTNdKzY4MTI3OTE3NCY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFswXSszOTM2NDMwMDc0JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFszXSszNTcyNDQ1MzE3JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFs2XSs3NjAyOTE4OSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFs5XSszNjU0NjAyODA5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzEyXStcbjM4NzMxNTE0NjEmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzE1XSs1MzA3NDI1MjAmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzJdKzMyOTk2Mjg2NDUmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoZV4oY3x+ZikpK2RbMF0rNDA5NjMzNjQ1MiY0Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFs3XSsxMTI2ODkxNDE1JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsxNF0rMjg3ODYxMjM5MSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbNV0rNDIzNzUzMzI0MSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpO2g9YisoZV4oY3x+ZikpK2RbMTJdKzE3MDA0ODU1NzEmXG40Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFszXSsyMzk5OTgwNjkwJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsxMF0rNDI5MzkxNTc3MyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbMV0rMjI0MDA0NDQ5NyY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpO2g9YisoZV4oY3x+ZikpK2RbOF0rMTg3MzMxMzM1OSY0Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFsxNV0rNDI2NDM1NTU1MiY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbNl0rMjczNDc2ODkxNiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbMTNdKzEzMDkxNTE2NDkmXG40Mjk0OTY3Mjk1O2M9ZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpO2g9YisoZV4oY3x+ZikpK2RbNF0rNDE0OTQ0NDIyNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NiY0Mjk0OTY3Mjk1fGg+Pj4yNik7aD1mKyhjXihifH5lKSkrZFsxMV0rMzE3NDc1NjkxNyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMl0rNzE4Nzg3MjU5JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFs5XSszOTUxNDgxNzQ1JjQyOTQ5NjcyOTU7YS5nWzBdPWEuZ1swXStiJjQyOTQ5NjcyOTU7YS5nWzFdPWEuZ1sxXSsoZSsoaDw8MjEmNDI5NDk2NzI5NXxoPj4+MTEpKSY0Mjk0OTY3Mjk1O2EuZ1syXT1hLmdbMl0rZSY0Mjk0OTY3Mjk1O2EuZ1szXT1hLmdbM10rZiY0Mjk0OTY3Mjk1O31cblMucHJvdG90eXBlLmo9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj1hLmxlbmd0aCk7Zm9yKHZhciBjPWItdGhpcy5ibG9ja1NpemUsZD10aGlzLm0sZT10aGlzLmgsZj0wO2Y8Yjspe2lmKDA9PWUpZm9yKDtmPD1jOylUZCh0aGlzLGEsZiksZis9dGhpcy5ibG9ja1NpemU7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWZvcig7ZjxiOyl7aWYoZFtlKytdPWEuY2hhckNvZGVBdChmKyspLGU9PXRoaXMuYmxvY2tTaXplKXtUZCh0aGlzLGQpO2U9MDticmVha319ZWxzZSBmb3IoO2Y8YjspaWYoZFtlKytdPWFbZisrXSxlPT10aGlzLmJsb2NrU2l6ZSl7VGQodGhpcyxkKTtlPTA7YnJlYWt9fXRoaXMuaD1lO3RoaXMuaSs9Yjt9O1xuUy5wcm90b3R5cGUubD1mdW5jdGlvbigpe3ZhciBhPUFycmF5KCg1Nj50aGlzLmg/dGhpcy5ibG9ja1NpemU6Mip0aGlzLmJsb2NrU2l6ZSktdGhpcy5oKTthWzBdPTEyODtmb3IodmFyIGI9MTtiPGEubGVuZ3RoLTg7KytiKWFbYl09MDt2YXIgYz04KnRoaXMuaTtmb3IoYj1hLmxlbmd0aC04O2I8YS5sZW5ndGg7KytiKWFbYl09YyYyNTUsYy89MjU2O3RoaXMuaihhKTthPUFycmF5KDE2KTtmb3IoYj1jPTA7ND5iOysrYilmb3IodmFyIGQ9MDszMj5kO2QrPTgpYVtjKytdPXRoaXMuZ1tiXT4+PmQmMjU1O3JldHVybiBhfTtmdW5jdGlvbiBUKGEsYil7dGhpcy5oPWI7Zm9yKHZhciBjPVtdLGQ9ITAsZT1hLmxlbmd0aC0xOzA8PWU7ZS0tKXt2YXIgZj1hW2VdfDA7ZCYmZj09Ynx8KGNbZV09ZixkPSExKTt9dGhpcy5nPWM7fXZhciBVZD17fTtmdW5jdGlvbiBWZChhKXtyZXR1cm4gLTEyODw9YSYmMTI4PmE/dmEoVWQsYSxmdW5jdGlvbihiKXtyZXR1cm4gbmV3IFQoW2J8MF0sMD5iPy0xOjApfSk6bmV3IFQoW2F8MF0sMD5hPy0xOjApfWZ1bmN0aW9uIFUoYSl7aWYoaXNOYU4oYSl8fCFpc0Zpbml0ZShhKSlyZXR1cm4gVjtpZigwPmEpcmV0dXJuIFcoVSgtYSkpO2Zvcih2YXIgYj1bXSxjPTEsZD0wO2E+PWM7ZCsrKWJbZF09YS9jfDAsYyo9V2Q7cmV0dXJuIG5ldyBUKGIsMCl9XG5mdW5jdGlvbiBYZChhLGIpe2lmKDA9PWEubGVuZ3RoKXRocm93IEVycm9yKFwibnVtYmVyIGZvcm1hdCBlcnJvcjogZW1wdHkgc3RyaW5nXCIpO2I9Ynx8MTA7aWYoMj5ifHwzNjxiKXRocm93IEVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIitiKTtpZihcIi1cIj09YS5jaGFyQXQoMCkpcmV0dXJuIFcoWGQoYS5zdWJzdHJpbmcoMSksYikpO2lmKDA8PWEuaW5kZXhPZihcIi1cIikpdGhyb3cgRXJyb3IoJ251bWJlciBmb3JtYXQgZXJyb3I6IGludGVyaW9yIFwiLVwiIGNoYXJhY3RlcicpO2Zvcih2YXIgYz1VKE1hdGgucG93KGIsOCkpLGQ9VixlPTA7ZTxhLmxlbmd0aDtlKz04KXt2YXIgZj1NYXRoLm1pbig4LGEubGVuZ3RoLWUpLGg9cGFyc2VJbnQoYS5zdWJzdHJpbmcoZSxlK2YpLGIpOzg+Zj8oZj1VKE1hdGgucG93KGIsZikpLGQ9ZC5SKGYpLmFkZChVKGgpKSk6KGQ9ZC5SKGMpLGQ9ZC5hZGQoVShoKSkpO31yZXR1cm4gZH1cbnZhciBXZD00Mjk0OTY3Mjk2LFY9VmQoMCksWWQ9VmQoMSksWmQ9VmQoMTY3NzcyMTYpO2s9VC5wcm90b3R5cGU7ay5lYT1mdW5jdGlvbigpe2lmKFgodGhpcykpcmV0dXJuIC1XKHRoaXMpLmVhKCk7Zm9yKHZhciBhPTAsYj0xLGM9MDtjPHRoaXMuZy5sZW5ndGg7YysrKXt2YXIgZD10aGlzLkQoYyk7YSs9KDA8PWQ/ZDpXZCtkKSpiO2IqPVdkO31yZXR1cm4gYX07XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKGEpe2E9YXx8MTA7aWYoMj5hfHwzNjxhKXRocm93IEVycm9yKFwicmFkaXggb3V0IG9mIHJhbmdlOiBcIithKTtpZihZKHRoaXMpKXJldHVybiBcIjBcIjtpZihYKHRoaXMpKXJldHVybiBcIi1cIitXKHRoaXMpLnRvU3RyaW5nKGEpO2Zvcih2YXIgYj1VKE1hdGgucG93KGEsNikpLGM9dGhpcyxkPVwiXCI7Oyl7dmFyIGU9JGQoYyxiKS5nO2M9YWUoYyxlLlIoYikpO3ZhciBmPSgoMDxjLmcubGVuZ3RoP2MuZ1swXTpjLmgpPj4+MCkudG9TdHJpbmcoYSk7Yz1lO2lmKFkoYykpcmV0dXJuIGYrZDtmb3IoOzY+Zi5sZW5ndGg7KWY9XCIwXCIrZjtkPWYrZDt9fTtrLkQ9ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YT8wOmE8dGhpcy5nLmxlbmd0aD90aGlzLmdbYV06dGhpcy5ofTtmdW5jdGlvbiBZKGEpe2lmKDAhPWEuaClyZXR1cm4gITE7Zm9yKHZhciBiPTA7YjxhLmcubGVuZ3RoO2IrKylpZigwIT1hLmdbYl0pcmV0dXJuICExO3JldHVybiAhMH1cbmZ1bmN0aW9uIFgoYSl7cmV0dXJuIC0xPT1hLmh9ay5YPWZ1bmN0aW9uKGEpe2E9YWUodGhpcyxhKTtyZXR1cm4gWChhKT8tMTpZKGEpPzA6MX07ZnVuY3Rpb24gVyhhKXtmb3IodmFyIGI9YS5nLmxlbmd0aCxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09fmEuZ1tkXTtyZXR1cm4gKG5ldyBUKGMsfmEuaCkpLmFkZChZZCl9ay5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gWCh0aGlzKT9XKHRoaXMpOnRoaXN9O2suYWRkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wLGU9MDtlPD1iO2UrKyl7dmFyIGY9ZCsodGhpcy5EKGUpJjY1NTM1KSsoYS5EKGUpJjY1NTM1KSxoPShmPj4+MTYpKyh0aGlzLkQoZSk+Pj4xNikrKGEuRChlKT4+PjE2KTtkPWg+Pj4xNjtmJj02NTUzNTtoJj02NTUzNTtjW2VdPWg8PDE2fGY7fXJldHVybiBuZXcgVChjLGNbYy5sZW5ndGgtMV0mLTIxNDc0ODM2NDg/LTE6MCl9O1xuZnVuY3Rpb24gYWUoYSxiKXtyZXR1cm4gYS5hZGQoVyhiKSl9XG5rLlI9ZnVuY3Rpb24oYSl7aWYoWSh0aGlzKXx8WShhKSlyZXR1cm4gVjtpZihYKHRoaXMpKXJldHVybiBYKGEpP1codGhpcykuUihXKGEpKTpXKFcodGhpcykuUihhKSk7aWYoWChhKSlyZXR1cm4gVyh0aGlzLlIoVyhhKSkpO2lmKDA+dGhpcy5YKFpkKSYmMD5hLlgoWmQpKXJldHVybiBVKHRoaXMuZWEoKSphLmVhKCkpO2Zvcih2YXIgYj10aGlzLmcubGVuZ3RoK2EuZy5sZW5ndGgsYz1bXSxkPTA7ZDwyKmI7ZCsrKWNbZF09MDtmb3IoZD0wO2Q8dGhpcy5nLmxlbmd0aDtkKyspZm9yKHZhciBlPTA7ZTxhLmcubGVuZ3RoO2UrKyl7dmFyIGY9dGhpcy5EKGQpPj4+MTYsaD10aGlzLkQoZCkmNjU1MzUsbT1hLkQoZSk+Pj4xNix0PWEuRChlKSY2NTUzNTtjWzIqZCsyKmVdKz1oKnQ7YmUoYywyKmQrMiplKTtjWzIqZCsyKmUrMV0rPWYqdDtiZShjLDIqZCsyKmUrMSk7Y1syKmQrMiplKzFdKz1oKm07YmUoYywyKmQrMiplKzEpO2NbMipkKzIqZSsyXSs9ZiptO2JlKGMsMipkKzIqZSsyKTt9Zm9yKGQ9XG4wO2Q8YjtkKyspY1tkXT1jWzIqZCsxXTw8MTZ8Y1syKmRdO2ZvcihkPWI7ZDwyKmI7ZCsrKWNbZF09MDtyZXR1cm4gbmV3IFQoYywwKX07ZnVuY3Rpb24gYmUoYSxiKXtmb3IoOyhhW2JdJjY1NTM1KSE9YVtiXTspYVtiKzFdKz1hW2JdPj4+MTYsYVtiXSY9NjU1MzUsYisrO31mdW5jdGlvbiBjZShhLGIpe3RoaXMuZz1hO3RoaXMuaD1iO31cbmZ1bmN0aW9uICRkKGEsYil7aWYoWShiKSl0aHJvdyBFcnJvcihcImRpdmlzaW9uIGJ5IHplcm9cIik7aWYoWShhKSlyZXR1cm4gbmV3IGNlKFYsVik7aWYoWChhKSlyZXR1cm4gYj0kZChXKGEpLGIpLG5ldyBjZShXKGIuZyksVyhiLmgpKTtpZihYKGIpKXJldHVybiBiPSRkKGEsVyhiKSksbmV3IGNlKFcoYi5nKSxiLmgpO2lmKDMwPGEuZy5sZW5ndGgpe2lmKFgoYSl8fFgoYikpdGhyb3cgRXJyb3IoXCJzbG93RGl2aWRlXyBvbmx5IHdvcmtzIHdpdGggcG9zaXRpdmUgaW50ZWdlcnMuXCIpO2Zvcih2YXIgYz1ZZCxkPWI7MD49ZC5YKGEpOyljPWRlKGMpLGQ9ZGUoZCk7dmFyIGU9WihjLDEpLGY9WihkLDEpO2Q9WihkLDIpO2ZvcihjPVooYywyKTshWShkKTspe3ZhciBoPWYuYWRkKGQpOzA+PWguWChhKSYmKGU9ZS5hZGQoYyksZj1oKTtkPVooZCwxKTtjPVooYywxKTt9Yj1hZShhLGUuUihiKSk7cmV0dXJuIG5ldyBjZShlLGIpfWZvcihlPVY7MDw9YS5YKGIpOyl7Yz1NYXRoLm1heCgxLE1hdGguZmxvb3IoYS5lYSgpL1xuYi5lYSgpKSk7ZD1NYXRoLmNlaWwoTWF0aC5sb2coYykvTWF0aC5MTjIpO2Q9NDg+PWQ/MTpNYXRoLnBvdygyLGQtNDgpO2Y9VShjKTtmb3IoaD1mLlIoYik7WChoKXx8MDxoLlgoYSk7KWMtPWQsZj1VKGMpLGg9Zi5SKGIpO1koZikmJihmPVlkKTtlPWUuYWRkKGYpO2E9YWUoYSxoKTt9cmV0dXJuIG5ldyBjZShlLGEpfWsuZ2I9ZnVuY3Rpb24oYSl7cmV0dXJuICRkKHRoaXMsYSkuaH07ay5hbmQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTA7ZDxiO2QrKyljW2RdPXRoaXMuRChkKSZhLkQoZCk7cmV0dXJuIG5ldyBUKGMsdGhpcy5oJmEuaCl9O2sub3I9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTA7ZDxiO2QrKyljW2RdPXRoaXMuRChkKXxhLkQoZCk7cmV0dXJuIG5ldyBUKGMsdGhpcy5ofGEuaCl9O1xuay54b3I9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTA7ZDxiO2QrKyljW2RdPXRoaXMuRChkKV5hLkQoZCk7cmV0dXJuIG5ldyBUKGMsdGhpcy5oXmEuaCl9O2Z1bmN0aW9uIGRlKGEpe2Zvcih2YXIgYj1hLmcubGVuZ3RoKzEsYz1bXSxkPTA7ZDxiO2QrKyljW2RdPWEuRChkKTw8MXxhLkQoZC0xKT4+PjMxO3JldHVybiBuZXcgVChjLGEuaCl9ZnVuY3Rpb24gWihhLGIpe3ZhciBjPWI+PjU7YiU9MzI7Zm9yKHZhciBkPWEuZy5sZW5ndGgtYyxlPVtdLGY9MDtmPGQ7ZisrKWVbZl09MDxiP2EuRChmK2MpPj4+YnxhLkQoZitjKzEpPDwzMi1iOmEuRChmK2MpO3JldHVybiBuZXcgVChlLGEuaCl9UGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9UGQucHJvdG90eXBlLmc7US5wcm90b3R5cGUuc2VuZD1RLnByb3RvdHlwZS51O1EucHJvdG90eXBlLm9wZW49US5wcm90b3R5cGUubTtRLnByb3RvdHlwZS5jbG9zZT1RLnByb3RvdHlwZS5jbG9zZTtVYi5OT19FUlJPUj0wO1ViLlRJTUVPVVQ9ODtVYi5IVFRQX0VSUk9SPTY7VmIuQ09NUExFVEU9XCJjb21wbGV0ZVwiO1liLkV2ZW50VHlwZT1aYjtaYi5PUEVOPVwiYVwiO1piLkNMT1NFPVwiYlwiO1piLkVSUk9SPVwiY1wiO1piLk1FU1NBR0U9XCJkXCI7Qi5wcm90b3R5cGUubGlzdGVuPUIucHJvdG90eXBlLk87UC5wcm90b3R5cGUubGlzdGVuT25jZT1QLnByb3RvdHlwZS5QO1AucHJvdG90eXBlLmdldExhc3RFcnJvcj1QLnByb3RvdHlwZS5TYTtQLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlPVAucHJvdG90eXBlLklhO1AucHJvdG90eXBlLmdldFN0YXR1cz1QLnByb3RvdHlwZS5kYTtQLnByb3RvdHlwZS5nZXRSZXNwb25zZUpzb249UC5wcm90b3R5cGUuV2E7XG5QLnByb3RvdHlwZS5nZXRSZXNwb25zZVRleHQ9UC5wcm90b3R5cGUuamE7UC5wcm90b3R5cGUuc2VuZD1QLnByb3RvdHlwZS5oYTtQLnByb3RvdHlwZS5zZXRXaXRoQ3JlZGVudGlhbHM9UC5wcm90b3R5cGUuT2E7Uy5wcm90b3R5cGUuZGlnZXN0PVMucHJvdG90eXBlLmw7Uy5wcm90b3R5cGUucmVzZXQ9Uy5wcm90b3R5cGUucmVzZXQ7Uy5wcm90b3R5cGUudXBkYXRlPVMucHJvdG90eXBlLmo7VC5wcm90b3R5cGUuYWRkPVQucHJvdG90eXBlLmFkZDtULnByb3RvdHlwZS5tdWx0aXBseT1ULnByb3RvdHlwZS5SO1QucHJvdG90eXBlLm1vZHVsbz1ULnByb3RvdHlwZS5nYjtULnByb3RvdHlwZS5jb21wYXJlPVQucHJvdG90eXBlLlg7VC5wcm90b3R5cGUudG9OdW1iZXI9VC5wcm90b3R5cGUuZWE7VC5wcm90b3R5cGUudG9TdHJpbmc9VC5wcm90b3R5cGUudG9TdHJpbmc7VC5wcm90b3R5cGUuZ2V0Qml0cz1ULnByb3RvdHlwZS5EO1QuZnJvbU51bWJlcj1VO1QuZnJvbVN0cmluZz1YZDtcbnZhciBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0ID0gZXNtLmNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFBkfTt2YXIgZ2V0U3RhdEV2ZW50VGFyZ2V0ID0gZXNtLmdldFN0YXRFdmVudFRhcmdldD1mdW5jdGlvbigpe3JldHVybiBPYigpfTt2YXIgRXJyb3JDb2RlID0gZXNtLkVycm9yQ29kZT1VYjt2YXIgRXZlbnRUeXBlID0gZXNtLkV2ZW50VHlwZT1WYjt2YXIgRXZlbnQgPSBlc20uRXZlbnQ9RTt2YXIgU3RhdCA9IGVzbS5TdGF0PXt4YjowLEFiOjEsQmI6MixVYjozLFpiOjQsV2I6NSxYYjo2LFZiOjcsVGI6OCxZYjo5LFBST1hZOjEwLE5PUFJPWFk6MTEsUmI6MTIsTmI6MTMsT2I6MTQsTWI6MTUsUGI6MTYsUWI6MTcsdGI6MTgsc2I6MTksdWI6MjB9O3ZhciBGZXRjaFhtbEh0dHBGYWN0b3J5ID0gZXNtLkZldGNoWG1sSHR0cEZhY3Rvcnk9bWQ7dmFyIFdlYkNoYW5uZWwgPSBlc20uV2ViQ2hhbm5lbD1ZYjt2YXIgWGhySW8gPSBlc20uWGhySW89UDt2YXIgTWQ1ID0gZXNtLk1kNT1TO3ZhciBJbnRlZ2VyID0gZXNtLkludGVnZXI9VDtcblxuZXhwb3J0IHsgRXJyb3JDb2RlLCBFdmVudCwgRXZlbnRUeXBlLCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBJbnRlZ2VyLCBNZDUsIFN0YXQsIFdlYkNoYW5uZWwsIFhocklvLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBlc20gYXMgZGVmYXVsdCwgZ2V0U3RhdEV2ZW50VGFyZ2V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24sIF9nZXRQcm92aWRlciwgZ2V0QXBwLCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yLCBjcmVhdGVNb2NrVXNlclRva2VuLCBnZXRNb2R1bGFySW5zdGFuY2UsIGRlZXBFcXVhbCwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgSW50ZWdlciwgWGhySW8sIEV2ZW50VHlwZSwgRXJyb3JDb2RlLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBnZXRTdGF0RXZlbnRUYXJnZXQsIEZldGNoWG1sSHR0cEZhY3RvcnksIFdlYkNoYW5uZWwsIEV2ZW50LCBTdGF0LCBNZDUgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgYiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBWIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBWLlVOQVVUSEVOVElDQVRFRCA9IG5ldyBWKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cblYuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IFYoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBWLkZJUlNUX1BBUlRZID0gbmV3IFYoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuVi5NT0NLX1VTRVIgPSBuZXcgVihcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBTID0gXCI5LjIxLjBcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IEQgPSBuZXcgTG9nZ2VyKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXG5mdW5jdGlvbiBDKCkge1xuICAgIHJldHVybiBELmxvZ0xldmVsO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHZlcmJvc2l0eSBvZiBDbG91ZCBGaXJlc3RvcmUgbG9ncyAoZGVidWcsIGVycm9yLCBvciBzaWxlbnQpLlxuICpcbiAqIEBwYXJhbSBsb2dMZXZlbCAtIFRoZSB2ZXJib3NpdHkgeW91IHNldCBmb3IgYWN0aXZpdHkgYW5kIGVycm9yIGxvZ2dpbmcuIENhblxuICogICBiZSBhbnkgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gKlxuICogICA8dWw+XG4gKiAgICAgPGxpPmBkZWJ1Z2AgZm9yIHRoZSBtb3N0IHZlcmJvc2UgbG9nZ2luZyBsZXZlbCwgcHJpbWFyaWx5IGZvclxuICogICAgIGRlYnVnZ2luZy48L2xpPlxuICogICAgIDxsaT5gZXJyb3JgIHRvIGxvZyBlcnJvcnMgb25seS48L2xpPlxuICogICAgIDxsaT48Y29kZT5gc2lsZW50YCB0byB0dXJuIG9mZiBsb2dnaW5nLjwvbGk+XG4gKiAgIDwvdWw+XG4gKi8gZnVuY3Rpb24geCh0KSB7XG4gICAgRC5zZXRMb2dMZXZlbCh0KTtcbn1cblxuZnVuY3Rpb24gTih0LCAuLi5lKSB7XG4gICAgaWYgKEQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKE8pO1xuICAgICAgICBELmRlYnVnKGBGaXJlc3RvcmUgKCR7U30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBrKHQsIC4uLmUpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTyk7XG4gICAgICAgIEQuZXJyb3IoYEZpcmVzdG9yZSAoJHtTfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gTSh0LCAuLi5lKSB7XG4gICAgaWYgKEQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTyk7XG4gICAgICAgIEQud2FybihgRmlyZXN0b3JlICgke1N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhZGRpdGlvbmFsIGxvZyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gTyh0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0O1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBlID0gdCwgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICB2YXIgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICpcbiAqIFJldHVybnMgYG5ldmVyYCBhbmQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XG4gKiBAZXhhbXBsZVxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAqLyBmdW5jdGlvbiAkKHQgPSBcIlVuZXhwZWN0ZWQgc3RhdGVcIikge1xuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxuICAgIGNvbnN0IGUgPSBgRklSRVNUT1JFICgke1N9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgdDtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcbiAgICB0aHJvdyBrKGUpLCBuZXcgRXJyb3IoZSk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKi8gZnVuY3Rpb24gRih0LCBlKSB7XG4gICAgdCB8fCAkKCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBUaGUgY29kZSBvZiBjYWxsc2l0ZXMgaW52b2tpbmcgdGhpcyBmdW5jdGlvbiBhcmUgc3RyaXBwZWQgb3V0IGluIHByb2R1Y3Rpb25cbiAqIGJ1aWxkcy4gQW55IHNpZGUtZWZmZWN0cyBvZiBjb2RlIHdpdGhpbiB0aGUgZGVidWdBc3NlcnQoKSBpbnZvY2F0aW9uIHdpbGwgbm90XG4gKiBoYXBwZW4gaW4gdGhpcyBjYXNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIEIodCwgZSkge1xuICAgIHQgfHwgJCgpO1xufVxuXG4vKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYC4gSW4gbm9uLXByb2R1Y3Rpb24gYnVpbGRzLCB2ZXJpZmllcyB0aGF0IGBvYmpgIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBgVGAgYmVmb3JlIGNhc3RpbmcuXG4gKi8gZnVuY3Rpb24gTCh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHEgPSB7XG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXG4gICAgT0s6IFwib2tcIixcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXG4gICAgQ0FOQ0VMTEVEOiBcImNhbmNlbGxlZFwiLFxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xuICAgIFVOS05PV046IFwidW5rbm93blwiLFxuICAgIC8qKlxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxuICAgICAqIG5hbWUpLlxuICAgICAqL1xuICAgIElOVkFMSURfQVJHVU1FTlQ6IFwiaW52YWxpZC1hcmd1bWVudFwiLFxuICAgIC8qKlxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cbiAgICAgKiBleHBpcmUuXG4gICAgICovXG4gICAgREVBRExJTkVfRVhDRUVERUQ6IFwiZGVhZGxpbmUtZXhjZWVkZWRcIixcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cbiAgICBOT1RfRk9VTkQ6IFwibm90LWZvdW5kXCIsXG4gICAgLyoqXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBBTFJFQURZX0VYSVNUUzogXCJhbHJlYWR5LWV4aXN0c1wiLFxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2FuIG5vdCBiZSBpZGVudGlmaWVkXG4gICAgICogKHVzZSBVTkFVVEhFTlRJQ0FURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKi9cbiAgICBQRVJNSVNTSU9OX0RFTklFRDogXCJwZXJtaXNzaW9uLWRlbmllZFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0IGRvZXMgbm90IGhhdmUgdmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZVxuICAgICAqIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBVTkFVVEhFTlRJQ0FURUQ6IFwidW5hdXRoZW50aWNhdGVkXCIsXG4gICAgLyoqXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcbiAgICAgKiBlbnRpcmUgZmlsZSBzeXN0ZW0gaXMgb3V0IG9mIHNwYWNlLlxuICAgICAqL1xuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogXCJyZXNvdXJjZS1leGhhdXN0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIHJlamVjdGVkIGJlY2F1c2UgdGhlIHN5c3RlbSBpcyBub3QgaW4gYSBzdGF0ZSByZXF1aXJlZCBmb3JcbiAgICAgKiB0aGUgb3BlcmF0aW9uJ3MgZXhlY3V0aW9uLiBGb3IgZXhhbXBsZSwgZGlyZWN0b3J5IHRvIGJlIGRlbGV0ZWQgbWF5IGJlXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cbiAgICAgKlxuICAgICAqIEEgbGl0bXVzIHRlc3QgdGhhdCBtYXkgaGVscCBhIHNlcnZpY2UgaW1wbGVtZW50b3IgaW4gZGVjaWRpbmdcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcbiAgICAgKiAgKGEpIFVzZSBVTkFWQUlMQUJMRSBpZiB0aGUgY2xpZW50IGNhbiByZXRyeSBqdXN0IHRoZSBmYWlsaW5nIGNhbGwuXG4gICAgICogIChiKSBVc2UgQUJPUlRFRCBpZiB0aGUgY2xpZW50IHNob3VsZCByZXRyeSBhdCBhIGhpZ2hlci1sZXZlbFxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXG4gICAgICogIChjKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW50aWxcbiAgICAgKiAgICAgIHRoZSBzeXN0ZW0gc3RhdGUgaGFzIGJlZW4gZXhwbGljaXRseSBmaXhlZC4gRS5nLiwgaWYgYW4gXCJybWRpclwiXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXG4gICAgICogICAgICBzaG91bGQgYmUgcmV0dXJuZWQgc2luY2UgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVubGVzc1xuICAgICAqICAgICAgdGhleSBoYXZlIGZpcnN0IGZpeGVkIHVwIHRoZSBkaXJlY3RvcnkgYnkgZGVsZXRpbmcgZmlsZXMgZnJvbSBpdC5cbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcbiAgICAgKiAgICAgIFJFU1QgR2V0L1VwZGF0ZS9EZWxldGUgb24gYSByZXNvdXJjZSBhbmQgdGhlIHJlc291cmNlIG9uIHRoZVxuICAgICAqICAgICAgc2VydmVyIGRvZXMgbm90IG1hdGNoIHRoZSBjb25kaXRpb24uIEUuZy4sIGNvbmZsaWN0aW5nXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiBcImZhaWxlZC1wcmVjb25kaXRpb25cIixcbiAgICAvKipcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxuICAgICAqIHNlcXVlbmNlciBjaGVjayBmYWlsdXJlcywgdHJhbnNhY3Rpb24gYWJvcnRzLCBldGMuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgQUJPUlRFRDogXCJhYm9ydGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQgcGFzdCB0aGUgdmFsaWQgcmFuZ2UuIEUuZy4sIHNlZWtpbmcgb3IgcmVhZGluZ1xuICAgICAqIHBhc3QgZW5kIG9mIGZpbGUuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgSU5WQUxJRF9BUkdVTUVOVCwgdGhpcyBlcnJvciBpbmRpY2F0ZXMgYSBwcm9ibGVtIHRoYXQgbWF5IGJlIGZpeGVkXG4gICAgICogaWYgdGhlIHN5c3RlbSBzdGF0ZSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSAzMi1iaXQgZmlsZSBzeXN0ZW0gd2lsbFxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXG4gICAgICogcmFuZ2UgWzAsMl4zMi0xXSwgYnV0IGl0IHdpbGwgZ2VuZXJhdGUgT1VUX09GX1JBTkdFIGlmIGFza2VkIHRvIHJlYWQgZnJvbVxuICAgICAqIGFuIG9mZnNldCBwYXN0IHRoZSBjdXJyZW50IGZpbGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIFRoZXJlIGlzIGEgZmFpciBiaXQgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICogT1VUX09GX1JBTkdFLiBXZSByZWNvbW1lbmQgdXNpbmcgT1VUX09GX1JBTkdFICh0aGUgbW9yZSBzcGVjaWZpYyBlcnJvcilcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cbiAgICAgKiBlYXNpbHkgbG9vayBmb3IgYW4gT1VUX09GX1JBTkdFIGVycm9yIHRvIGRldGVjdCB3aGVuIHRoZXkgYXJlIGRvbmUuXG4gICAgICovXG4gICAgT1VUX09GX1JBTkdFOiBcIm91dC1vZi1yYW5nZVwiLFxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXG4gICAgVU5JTVBMRU1FTlRFRDogXCJ1bmltcGxlbWVudGVkXCIsXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZXJyb3JzLiBNZWFucyBzb21lIGludmFyaWFudHMgZXhwZWN0ZWQgYnkgdW5kZXJseWluZyBTeXN0ZW0gaGFzXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxuICAgICAqL1xuICAgIElOVEVSTkFMOiBcImludGVybmFsXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcbiAgICAgKiBjb25kaXRpb24gYW5kIG1heSBiZSBjb3JyZWN0ZWQgYnkgcmV0cnlpbmcgd2l0aCBhIGJhY2tvZmYuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgVU5BVkFJTEFCTEU6IFwidW5hdmFpbGFibGVcIixcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cbiAgICBEQVRBX0xPU1M6IFwiZGF0YS1sb3NzXCJcbn07XG5cbi8qKiBBbiBlcnJvciByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBvcGVyYXRpb24uICovIGNsYXNzIFUgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5jb2RlID0gdCwgdGhpcy5tZXNzYWdlID0gZSwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEsge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHQsIHRoaXMucmVqZWN0ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0fWApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgUSB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoVi5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyBqIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBlLCBcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKHRoaXMudG9rZW4udXNlcikpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgeiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnQgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gVi5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIGUodCkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgaSA9IG5ldyBLO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBLLCB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IHModGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpO1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZS5wcm9taXNlLCBhd2FpdCBzKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBvID0gdCA9PiB7XG4gICAgICAgICAgICBOKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggZGV0ZWN0ZWRcIiksIHRoaXMuYXV0aCA9IHQsIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCBcbiAgICAgICAgICAgIHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50Lm9uSW5pdCgodCA9PiBvKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXV0aCByaWdodCBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsgYmVmb3JlIHdlXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRvIHN0YXJ0IHVwIGluIHVuYXV0aGVudGljYXRlZCBtb2RlLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnQuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IG8odCkgOiAoXG4gICAgICAgICAgICAgICAgLy8gSWYgYXV0aCBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGggYG51bGxgIHVzZXJcbiAgICAgICAgICAgICAgICBOKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggbm90IHlldCBkZXRlY3RlZFwiKSwgaS5yZXNvbHZlKCksIGkgPSBuZXcgSyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKSwgcigpO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgLy8gVGFrZSBub3RlIG9mIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2tlbkNvdW50ZXIgc28gdGhhdCB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBpcyBvdXRzdGFuZGluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuaSwgZSA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID8gdGhpcy5hdXRoLmdldFRva2VuKGUpLnRoZW4oKGUgPT4gXG4gICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdCBzaW5jZSB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSB0aGUgcmVxdWVzdCB3YXNcbiAgICAgICAgLy8gb3V0c3RhbmRpbmcgc28gdGhlIHJlc3BvbnNlIGlzIHBvdGVudGlhbGx5IGZvciBhIHByZXZpb3VzIHVzZXIgKHdoaWNoXG4gICAgICAgIC8vIHVzZXIsIHdlIGNhbid0IGJlIHN1cmUpLlxuICAgICAgICB0aGlzLmkgIT09IHQgPyAoTihcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IGUgPyAoRihcInN0cmluZ1wiID09IHR5cGVvZiBlLmFjY2Vzc1Rva2VuKSwgbmV3IEcoZS5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBGKG51bGwgPT09IHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCksIG5ldyBWKHQpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIFcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbiwgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IFYuRklSU1RfUEFSVFksIFxuICAgICAgICB0aGlzLmcgPSBuZXcgTWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIGF1dGhvcml6YXRpb24gdG9rZW4sIHVzaW5nIGEgcHJvdmlkZWQgZmFjdG9yeSBmdW5jdGlvbiwgb3IgcmV0dXJuXG4gICAgICogbnVsbC5cbiAgICAgKi8gICAgcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubSA/IHRoaXMubSgpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgICAgIHRoaXMuZy5zZXQoXCJYLUdvb2ctQXV0aFVzZXJcIiwgdGhpcy5oKTtcbiAgICAgICAgLy8gVXNlIGFycmF5IG5vdGF0aW9uIHRvIHByZXZlbnQgbWluaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnAoKTtcbiAgICAgICAgcmV0dXJuIHQgJiYgdGhpcy5nLnNldChcIkF1dGhvcml6YXRpb25cIiwgdCksIHRoaXMubCAmJiB0aGlzLmcuc2V0KFwiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCIsIHRoaXMubCksIFxuICAgICAgICB0aGlzLmc7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgSCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgVyh0aGlzLmgsIHRoaXMubCwgdGhpcy5tKSk7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoVi5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbmNsYXNzIEoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQsIHRoaXMudHlwZSA9IFwiQXBwQ2hlY2tcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdCAmJiB0Lmxlbmd0aCA+IDAgJiYgdGhpcy5oZWFkZXJzLnNldChcIngtZmlyZWJhc2UtYXBwY2hlY2tcIiwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG5jbGFzcyBZIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuSSA9IHQsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPSBudWxsLCB0aGlzLlQgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgIG51bGwgIT0gdC5lcnJvciAmJiBOKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHt0LmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50b2tlbiAhPT0gdGhpcy5UO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuVCA9IHQudG9rZW4sIE4oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgUmVjZWl2ZWQgJHtuID8gXCJuZXdcIiA6IFwiZXhpc3RpbmdcIn0gdG9rZW4uYCksIFxuICAgICAgICAgICAgbiA/IGUodC50b2tlbikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vID0gZSA9PiB7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IG4oZSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcyA9IHQgPT4ge1xuICAgICAgICAgICAgTihcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgZGV0ZWN0ZWRcIiksIHRoaXMuYXBwQ2hlY2sgPSB0LCB0aGlzLmFwcENoZWNrLmFkZFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5JLm9uSW5pdCgodCA9PiBzKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXBwQ2hlY2sgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5JLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQgPyBzKHQpIDogXG4gICAgICAgICAgICAgICAgLy8gSWYgQXBwQ2hlY2sgaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRob3V0IGl0LlxuICAgICAgICAgICAgICAgIE4oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIG5vdCB5ZXQgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPyB0aGlzLmFwcENoZWNrLmdldFRva2VuKHQpLnRoZW4oKHQgPT4gdCA/IChGKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudG9rZW4pLCBcbiAgICAgICAgdGhpcy5UID0gdC50b2tlbiwgbmV3IEoodC50b2tlbikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrICYmIHRoaXMuYXBwQ2hlY2sucmVtb3ZlVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBBcHBDaGVjayB0b2tlbiBwcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBYIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgSihcIlwiKSk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge31cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBgbkJ5dGVzYCBvZiByYW5kb20gYnl0ZXMuXG4gKlxuICogSWYgYG5CeXRlcyA8IDBgICwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmZ1bmN0aW9uIFoodCkge1xuICAgIC8vIFBvbHlmaWxscyBmb3IgSUUgYW5kIFdlYldvcmtlciBieSB1c2luZyBgc2VsZmAgYW5kIGBtc0NyeXB0b2Agd2hlbiBgY3J5cHRvYCBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGUgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYgJiYgKHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG8pLCBuID0gbmV3IFVpbnQ4QXJyYXkodCk7XG4gICAgaWYgKGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLmdldFJhbmRvbVZhbHVlcykgZS5nZXRSYW5kb21WYWx1ZXMobik7IGVsc2UgXG4gICAgLy8gRmFsbHMgYmFjayB0byBNYXRoLnJhbmRvbVxuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdDsgZSsrKSBuW2VdID0gTWF0aC5mbG9vcigyNTYgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgdHQge1xuICAgIHN0YXRpYyBBKCkge1xuICAgICAgICAvLyBBbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xuICAgICAgICBjb25zdCB0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLCBlID0gTWF0aC5mbG9vcigyNTYgLyB0Lmxlbmd0aCkgKiB0Lmxlbmd0aDtcbiAgICAgICAgLy8gVGhlIGxhcmdlc3QgYnl0ZSB2YWx1ZSB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgYGNoYXIubGVuZ3RoYC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGZvciAoO24ubGVuZ3RoIDwgMjA7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IFooNDApO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgKytpKSBcbiAgICAgICAgICAgIC8vIE9ubHkgYWNjZXB0IHZhbHVlcyB0aGF0IGFyZSBbMCwgbWF4TXVsdGlwbGUpLCB0aGlzIGVuc3VyZXMgdGhleSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGV2ZW5seSBtYXBwZWQgdG8gaW5kaWNlcyBvZiBgY2hhcnNgIHZpYSBhIG1vZHVsbyBvcGVyYXRpb24uXG4gICAgICAgICAgICBuLmxlbmd0aCA8IDIwICYmIHNbaV0gPCBlICYmIChuICs9IHQuY2hhckF0KHNbaV0gJSB0Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZXQodCwgZSkge1xuICAgIHJldHVybiB0IDwgZSA/IC0xIDogdCA+IGUgPyAxIDogMDtcbn1cblxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovIGZ1bmN0aW9uIG50KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdC5sZW5ndGggPT09IGUubGVuZ3RoICYmIHQuZXZlcnkoKCh0LCBzKSA9PiBuKHQsIGVbc10pKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxuICovIGZ1bmN0aW9uIHN0KHQpIHtcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxuICAgIHJldHVybiB0ICsgXCJcXDBcIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBlYXJsaWVzdCBkYXRlIHN1cHBvcnRlZCBieSBGaXJlc3RvcmUgdGltZXN0YW1wcyAoMDAwMS0wMS0wMVQwMDowMDowMFopLlxuLyoqXG4gKiBBIGBUaW1lc3RhbXBgIHJlcHJlc2VudHMgYSBwb2ludCBpbiB0aW1lIGluZGVwZW5kZW50IG9mIGFueSB0aW1lIHpvbmUgb3JcbiAqIGNhbGVuZGFyLCByZXByZXNlbnRlZCBhcyBzZWNvbmRzIGFuZCBmcmFjdGlvbnMgb2Ygc2Vjb25kcyBhdCBuYW5vc2Vjb25kXG4gKiByZXNvbHV0aW9uIGluIFVUQyBFcG9jaCB0aW1lLlxuICpcbiAqIEl0IGlzIGVuY29kZWQgdXNpbmcgdGhlIFByb2xlcHRpYyBHcmVnb3JpYW4gQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuIEl0IGlzIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXNcbiAqIGFyZSA2MCBzZWNvbmRzIGxvbmcsIGkuZS4gbGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kXG4gKiB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLiBSYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gKiA5OTk5LTEyLTMxVDIzOjU5OjU5Ljk5OTk5OTk5OVouXG4gKlxuICogRm9yIGV4YW1wbGVzIGFuZCBmdXJ0aGVyIHNwZWNpZmljYXRpb25zLCByZWZlciB0byB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3Byb3RvYnVmL2Jsb2IvbWFzdGVyL3NyYy9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvIHwgVGltZXN0YW1wIGRlZmluaXRpb259LlxuICovXG5jbGFzcyBpdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vjb25kcyAtIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICAgKiAgICAgOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgICAqIEBwYXJhbSBuYW5vc2Vjb25kcyAtIFRoZSBub24tbmVnYXRpdmUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmRcbiAgICAgKiAgICAgcmVzb2x1dGlvbi4gTmVnYXRpdmUgc2Vjb25kIHZhbHVlcyB3aXRoIGZyYWN0aW9ucyBtdXN0IHN0aWxsIGhhdmVcbiAgICAgKiAgICAgbm9uLW5lZ2F0aXZlIG5hbm9zZWNvbmRzIHZhbHVlcyB0aGF0IGNvdW50IGZvcndhcmQgaW4gdGltZS4gTXVzdCBiZVxuICAgICAqICAgICBmcm9tIDAgdG8gOTk5LDk5OSw5OTkgaW5jbHVzaXZlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZCByZXNvbHV0aW9uLipcbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZSwgZSA8IDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAoZSA+PSAxZTkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAodCA8IC02MjEzNTU5NjgwMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cbiAgICAgICAgICAgICAgICBpZiAodCA+PSAyNTM0MDIzMDA4MDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIHdpdGggdGhlIGN1cnJlbnQgZGF0ZSwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB0aW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBpdC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbURhdGUodCkge1xuICAgICAgICByZXR1cm4gaXQuZnJvbU1pbGxpcyh0LmdldFRpbWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWlsbGlzZWNvbmRzIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbU1pbGxpcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHQgLyAxZTMpLCBuID0gTWF0aC5mbG9vcigxZTYgKiAodCAtIDFlMyAqIGUpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdC4gVGhpcyBjb252ZXJzaW9uXG4gICAgICogY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24gc2luY2UgYERhdGVgIG9iamVjdHMgb25seSBzdXBwb3J0IG1pbGxpc2Vjb25kXG4gICAgICogcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzXG4gICAgICogICAgIHRoaXMgYFRpbWVzdGFtcGAsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqLyAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgbnVtZXJpYyB0aW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgICAqIGVwb2NoKS4gVGhpcyBvcGVyYXRpb24gY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcG9pbnQgaW4gdGltZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgdGltZXN0YW1wLCByZXByZXNlbnRlZCBhc1xuICAgICAqICAgICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqLyAgICB0b01pbGxpcygpIHtcbiAgICAgICAgcmV0dXJuIDFlMyAqIHRoaXMuc2Vjb25kcyArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XG4gICAgfVxuICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSB0LnNlY29uZHMgPyBldCh0aGlzLm5hbm9zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKSA6IGV0KHRoaXMuc2Vjb25kcywgdC5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgdC5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBzdHJpbmcsIHdoaWNoIGFsbG93cyBgVGltZXN0YW1wYCBvYmplY3RzXG4gICAgICogdG8gYmUgY29tcGFyZWQgdXNpbmcgdGhlIGA+YCwgYDw9YCwgYD49YCBhbmQgYD5gIG9wZXJhdG9ycy5cbiAgICAgKi8gICAgdmFsdWVPZigpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHN0cmluZyBvZiB0aGUgZm9ybSA8c2Vjb25kcz4uPG5hbm9zZWNvbmRzPiB3aGVyZVxuICAgICAgICAvLyA8c2Vjb25kcz4gaXMgdHJhbnNsYXRlZCB0byBoYXZlIGEgbm9uLW5lZ2F0aXZlIHZhbHVlIGFuZCBib3RoIDxzZWNvbmRzPlxuICAgICAgICAvLyBhbmQgPG5hbm9zZWNvbmRzPiBhcmUgbGVmdC1wYWRkZWQgd2l0aCB6ZXJvZXMgdG8gYmUgYSBjb25zaXN0ZW50IGxlbmd0aC5cbiAgICAgICAgLy8gU3RyaW5ncyB3aXRoIHRoaXMgZm9ybWF0IHRoZW4gaGF2ZSBhIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlY29uZHMgLSAtNjIxMzU1OTY4MDA7XG4gICAgICAgIC8vIE5vdGU6IFVwIHRvIDEyIGRlY2ltYWwgZGlnaXRzIGFyZSByZXF1aXJlZCB0byByZXByZXNlbnQgYWxsIHZhbGlkXG4gICAgICAgIC8vICdzZWNvbmRzJyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0KS5wYWRTdGFydCgxMiwgXCIwXCIpICsgXCIuXCIgKyBTdHJpbmcodGhpcy5uYW5vc2Vjb25kcykucGFkU3RhcnQoOSwgXCIwXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxuICovIGNsYXNzIHJ0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAodCkge1xuICAgICAgICByZXR1cm4gbmV3IHJ0KHQpO1xuICAgIH1cbiAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IHJ0KG5ldyBpdCgwLCAwKSk7XG4gICAgfVxuICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQobmV3IGl0KDI1MzQwMjMwMDc5OSwgOTk5OTk5OTk5KSk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXG4gKi9cbmNsYXNzIG90IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSA/IGUgPSAwIDogZSA+IHQubGVuZ3RoICYmICQoKSwgdm9pZCAwID09PSBuID8gbiA9IHQubGVuZ3RoIC0gZSA6IG4gPiB0Lmxlbmd0aCAtIGUgJiYgJCgpLCBcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IHQsIHRoaXMub2Zmc2V0ID0gZSwgdGhpcy5sZW4gPSBuO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW47XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gb3QuY29tcGFyYXRvcih0aGlzLCB0KTtcbiAgICB9XG4gICAgY2hpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBvdCA/IHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSA6IGUucHVzaCh0KSwgdGhpcy5jb25zdHJ1Y3QoZSk7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi8gICAgbGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3BGaXJzdCh0KSB7XG4gICAgICAgIHJldHVybiB0ID0gdm9pZCAwID09PSB0ID8gMSA6IHQsIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgdCwgdGhpcy5sZW5ndGggLSB0KTtcbiAgICB9XG4gICAgcG9wTGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmaXJzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcbiAgICB9XG4gICAgbGFzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIHRdO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlzUHJlZml4T2YodCkge1xuICAgICAgICBpZiAodC5sZW5ndGggPCB0aGlzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpc0ltbWVkaWF0ZVBhcmVudE9mKHQpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gdC5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSB0aGlzLm9mZnNldCwgbiA9IHRoaXMubGltaXQoKTsgZSA8IG47IGUrKykgdCh0aGlzLnNlZ21lbnRzW2VdKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IE1hdGgubWluKHQubGVuZ3RoLCBlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbjsgcysrKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZXQocyksIGkgPSBlLmdldChzKTtcbiAgICAgICAgICAgIGlmIChuIDwgaSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG4gPiBpKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5sZW5ndGggPCBlLmxlbmd0aCA/IC0xIDogdC5sZW5ndGggPiBlLmxlbmd0aCA/IDEgOiAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgdXQgZXh0ZW5kcyBvdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dCh0LCBlLCBuKTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbihcIi9cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi50KSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHNlZ21lbnQgKCR7bn0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vIGluIHRoZW0uYCk7XG4gICAgICAgICAgICAvLyBTdHJpcCBsZWFkaW5nIGFuZCB0cmFsaW5nIHNsYXNoZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goLi4ubi5zcGxpdChcIi9cIikuZmlsdGVyKCh0ID0+IHQubGVuZ3RoID4gMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHV0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IHV0KFtdKTtcbiAgICB9XG59XG5cbmNvbnN0IGN0ID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBhdCBleHRlbmRzIG90IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IGF0KHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIodCkge1xuICAgICAgICByZXR1cm4gY3QudGVzdCh0KTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKCh0ID0+ICh0ID0gdC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIikucmVwbGFjZSgvYC9nLCBcIlxcXFxgXCIpLCBcbiAgICAgICAgYXQuaXNWYWxpZElkZW50aWZpZXIodCkgfHwgKHQgPSBcImBcIiArIHQgKyBcImBcIiksIHQpKSkuam9pbihcIi5cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmllbGQgcmVmZXJlbmNlcyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIGlzS2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiAxID09PSB0aGlzLmxlbmd0aCAmJiBcIl9fbmFtZV9fXCIgPT09IHRoaXMuZ2V0KDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBzdGF0aWMga2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgYXQoWyBcIl9fbmFtZV9fXCIgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGZpZWxkIHN0cmluZyBmcm9tIHRoZSBnaXZlbiBzZXJ2ZXItZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIC0gU3BsaXR0aW5nIHRoZSBlbXB0eSBzdHJpbmcgaXMgbm90IGFsbG93ZWQgKGZvciBub3cgYXQgbGVhc3QpLlxuICAgICAqIC0gRW1wdHkgc2VnbWVudHMgd2l0aGluIHRoZSBzdHJpbmcgKGUuZy4gaWYgdGhlcmUgYXJlIHR3byBjb25zZWN1dGl2ZVxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM3MjQ0MTU3KTogd2Ugc2hvdWxkIG1ha2UgdGhpcyBtb3JlIHN0cmljdC4gUmlnaHQgbm93LCBpdCBhbGxvd3NcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TZXJ2ZXJGb3JtYXQodCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBuID0gXCJcIiwgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgKTtcbiAgICAgICAgICAgIGUucHVzaChuKSwgbiA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoO3MgPCB0Lmxlbmd0aDsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdFtzXTtcbiAgICAgICAgICAgIGlmIChcIlxcXFxcIiA9PT0gZSkge1xuICAgICAgICAgICAgICAgIGlmIChzICsgMSA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0W3MgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcXFxcXCIgIT09IGUgJiYgXCIuXCIgIT09IGUgJiYgXCJgXCIgIT09IGUpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBuICs9IGUsIHMgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gZSA/IChyID0gIXIsIHMrKykgOiBcIi5cIiAhPT0gZSB8fCByID8gKG4gKz0gZSwgcysrKSA6IChpKCksIHMrKyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkoKSwgcikgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlVudGVybWluYXRlZCBgIGluIHBhdGg6IFwiICsgdCk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgYXQoW10pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgaHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXRoKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodCh1dC5mcm9tU3RyaW5nKHQpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodCh1dC5mcm9tU3RyaW5nKHQpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KHV0LmVtcHR5UGF0aCgpKTtcbiAgICB9XG4gICAgZ2V0IGNvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCkubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovICAgIGhhc0NvbGxlY3Rpb25JZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoID49IDIgJiYgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIChpLmUuIHRoZSBuYW1lIG9mIHRoZSBwYXJlbnQgY29sbGVjdGlvbikgZm9yIHRoaXMga2V5LiAqLyAgICBnZXRDb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGZ1bGx5IHF1YWxpZmllZCBwYXRoIHRvIHRoZSBwYXJlbnQgY29sbGVjdGlvbi4gKi8gICAgZ2V0Q29sbGVjdGlvblBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgMCA9PT0gdXQuY29tcGFyYXRvcih0aGlzLnBhdGgsIHQucGF0aCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHV0LmNvbXBhcmF0b3IodC5wYXRoLCBlLnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleSh0KSB7XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQobmV3IHV0KHQuc2xpY2UoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGluaXRpYWwgbXV0YXRpb24gYmF0Y2ggaWQgZm9yIGVhY2ggaW5kZXguIEdldHMgdXBkYXRlZCBkdXJpbmcgaW5kZXhcbiAqIGJhY2tmaWxsLlxuICovXG4vKipcbiAqIEFuIGluZGV4IGRlZmluaXRpb24gZm9yIGZpZWxkIGluZGV4ZXMgaW4gRmlyZXN0b3JlLlxuICpcbiAqIEV2ZXJ5IGluZGV4IGlzIGFzc29jaWF0ZWQgd2l0aCBhIGNvbGxlY3Rpb24uIFRoZSBkZWZpbml0aW9uIGNvbnRhaW5zIGEgbGlzdFxuICogb2YgZmllbGRzIGFuZCB0aGVpciBpbmRleCBraW5kICh3aGljaCBjYW4gYmUgYEFTQ0VORElOR2AsIGBERVNDRU5ESU5HYCBvclxuICogYENPTlRBSU5TYCBmb3IgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHF1ZXJpZXMpLlxuICpcbiAqIFVubGlrZSB0aGUgYmFja2VuZCwgdGhlIFNESyBkb2VzIG5vdCBkaWZmZXJlbnRpYXRlIGJldHdlZW4gY29sbGVjdGlvbiBvclxuICogY29sbGVjdGlvbiBncm91cC1zY29wZWQgaW5kaWNlcy4gRXZlcnkgaW5kZXggY2FuIGJlIHVzZWQgZm9yIGJvdGggc2luZ2xlXG4gKiBjb2xsZWN0aW9uIGFuZCBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMuXG4gKi9cbmNsYXNzIGx0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggSUQuIFJldHVybnMgLTEgaWYgdGhlIGluZGV4IElEIGlzIG5vdCBhdmFpbGFibGUgKGUuZy4gdGhlIGluZGV4XG4gICAgICogaGFzIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQpLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY29sbGVjdGlvbiBJRCB0aGlzIGluZGV4IGFwcGxpZXMgdG8uICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBmaWVsZCBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi9cbiAgICBuLCBcbiAgICAvKiogU2hvd3MgaG93IHVwLXRvLWRhdGUgdGhlIGluZGV4IGlzIGZvciB0aGUgY3VycmVudCB1c2VyLiAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLmZpZWxkcyA9IG4sIHRoaXMuaW5kZXhTdGF0ZSA9IHM7XG4gICAgfVxufVxuXG4vKiogQW4gSUQgZm9yIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBhZGRlZCB0byBwZXJzaXN0ZW5jZS4gICovXG4vKiogUmV0dXJucyB0aGUgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHNlZ21lbnQgZm9yIHRoaXMgaW5kZXguICovXG5mdW5jdGlvbiBmdCh0KSB7XG4gICAgcmV0dXJuIHQuZmllbGRzLmZpbmQoKHQgPT4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gPT09IHQua2luZCkpO1xufVxuXG4vKiogUmV0dXJucyBhbGwgZGlyZWN0aW9uYWwgKGFzY2VuZGluZy9kZXNjZW5kaW5nKSBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi8gZnVuY3Rpb24gZHQodCkge1xuICAgIHJldHVybiB0LmZpZWxkcy5maWx0ZXIoKHQgPT4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gIT09IHQua2luZCkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIG9yZGVyIG9mIHRoZSBkb2N1bWVudCBrZXkgY29tcG9uZW50IGZvciB0aGUgZ2l2ZW4gaW5kZXguXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgV2ViIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBDb21wYXJlcyBpbmRleGVzIGJ5IGNvbGxlY3Rpb24gZ3JvdXAgYW5kIHNlZ21lbnRzLiBJZ25vcmVzIHVwZGF0ZSB0aW1lIGFuZFxuICogaW5kZXggSUQuXG4gKi9cbmZ1bmN0aW9uIF90KHQsIGUpIHtcbiAgICBsZXQgbiA9IGV0KHQuY29sbGVjdGlvbkdyb3VwLCBlLmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgIGZvciAobGV0IHMgPSAwOyBzIDwgTWF0aC5taW4odC5maWVsZHMubGVuZ3RoLCBlLmZpZWxkcy5sZW5ndGgpOyArK3MpIGlmIChuID0gbXQodC5maWVsZHNbc10sIGUuZmllbGRzW3NdKSwgXG4gICAgMCAhPT0gbikgcmV0dXJuIG47XG4gICAgcmV0dXJuIGV0KHQuZmllbGRzLmxlbmd0aCwgZS5maWVsZHMubGVuZ3RoKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZmllbGQgaW5kZXggKi8gbHQuVU5LTk9XTl9JRCA9IC0xO1xuXG4vKiogQW4gaW5kZXggY29tcG9uZW50IGNvbnNpc3Rpbmcgb2YgZmllbGQgcGF0aCBhbmQgaW5kZXggdHlwZS4gICovXG5jbGFzcyB3dCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBmaWVsZCBwYXRoIG9mIHRoZSBjb21wb25lbnQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBmaWVsZHMgc29ydGluZyBvcmRlci4gKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuZmllbGRQYXRoID0gdCwgdGhpcy5raW5kID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG10KHQsIGUpIHtcbiAgICBjb25zdCBuID0gYXQuY29tcGFyYXRvcih0LmZpZWxkUGF0aCwgZS5maWVsZFBhdGgpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IGV0KHQua2luZCwgZS5raW5kKTtcbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIFwiaGlnaCB3YXRlciBtYXJrXCIgdGhhdCBpbmRpY2F0ZXMgaG93IHVwZGF0ZWQgdGhlIEluZGV4IGlzIGZvciB0aGVcbiAqIGN1cnJlbnQgdXNlci5cbiAqLyBjbGFzcyBndCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGluZGV4IHdhcyBsYXN0IHVwZGF0ZWQgKHJlbGF0aXZlIHRvIG90aGVyIGluZGV4ZXMpLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGhlIGxhdGVzdCBpbmRleGVkIHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIGlkLiAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHQsIHRoaXMub2Zmc2V0ID0gZTtcbiAgICB9XG4gICAgLyoqIFRoZSBzdGF0ZSBvZiBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYmFja2ZpbGxlZC4gKi8gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IGd0KDAsIEl0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZSBoaWdoZXIgdGhhblxuICogYHJlYWRUaW1lYC5cbiAqLyBmdW5jdGlvbiB5dCh0LCBlKSB7XG4gICAgLy8gV2Ugd2FudCB0byBjcmVhdGUgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWVcbiAgICAvLyBncmVhdGVyIHRoYW4gdGhlIHByb3ZpZGVkIHJlYWQgdGltZS4gVG8gZG8gc28sIHdlIHRlY2huaWNhbGx5IG5lZWQgdG9cbiAgICAvLyBjcmVhdGUgYW4gb2Zmc2V0IGZvciBgKHJlYWRUaW1lLCBNQVhfRE9DVU1FTlRfS0VZKWAuIFdoaWxlIHdlIGNvdWxkIHVzZVxuICAgIC8vIFVuaWNvZGUgY29kZXBvaW50cyB0byBnZW5lcmF0ZSBNQVhfRE9DVU1FTlRfS0VZLCBpdCBpcyBtdWNoIGVhc2llciB0byB1c2VcbiAgICAvLyBgKHJlYWRUaW1lICsgMSwgRG9jdW1lbnRLZXkuZW1wdHkoKSlgIHNpbmNlIGA+IERvY3VtZW50S2V5LmVtcHR5KClgIG1hdGNoZXNcbiAgICAvLyBhbGwgdmFsaWQgZG9jdW1lbnQgSURzLlxuICAgIGNvbnN0IG4gPSB0LnRvVGltZXN0YW1wKCkuc2Vjb25kcywgcyA9IHQudG9UaW1lc3RhbXAoKS5uYW5vc2Vjb25kcyArIDEsIGkgPSBydC5mcm9tVGltZXN0YW1wKDFlOSA9PT0gcyA/IG5ldyBpdChuICsgMSwgMCkgOiBuZXcgaXQobiwgcykpO1xuICAgIHJldHVybiBuZXcgSXQoaSwgaHQuZW1wdHkoKSwgZSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuICovIGZ1bmN0aW9uIHB0KHQpIHtcbiAgICByZXR1cm4gbmV3IEl0KHQucmVhZFRpbWUsIHQua2V5LCAtMSk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBsYXRlc3QgcmVhZCB0aW1lLCBkb2N1bWVudCBhbmQgYmF0Y2ggSUQgdGhhdCB3ZXJlIHByb2Nlc3NlZCBmb3IgYW5cbiAqIGluZGV4LlxuICovIGNsYXNzIEl0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbGF0ZXN0IHJlYWQgdGltZSB2ZXJzaW9uIHRoYXQgaGFzIGJlZW4gaW5kZXhlZCBieSBGaXJlc3RvcmUgZm9yIHRoaXNcbiAgICAgKiBmaWVsZCBpbmRleC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUga2V5IG9mIHRoZSBsYXN0IGRvY3VtZW50IHRoYXQgd2FzIGluZGV4ZWQgZm9yIHRoaXMgcXVlcnkuIFVzZVxuICAgICAqIGBEb2N1bWVudEtleS5lbXB0eSgpYCBpZiBubyBkb2N1bWVudCBoYXMgYmVlbiBpbmRleGVkLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qXG4gICAgICogVGhlIGxhcmdlc3QgbXV0YXRpb24gYmF0Y2ggaWQgdGhhdCdzIGJlZW4gcHJvY2Vzc2VkIGJ5IEZpcmVzdG9yZS5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSB0LCB0aGlzLmRvY3VtZW50S2V5ID0gZSwgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IG47XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IEl0KHJ0Lm1pbigpLCBodC5lbXB0eSgpLCAtMSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGFmdGVyIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXQocnQubWF4KCksIGh0LmVtcHR5KCksIC0xKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFR0KHQsIGUpIHtcbiAgICBsZXQgbiA9IHQucmVhZFRpbWUuY29tcGFyZVRvKGUucmVhZFRpbWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gaHQuY29tcGFyYXRvcih0LmRvY3VtZW50S2V5LCBlLmRvY3VtZW50S2V5KSwgMCAhPT0gbiA/IG4gOiBldCh0Lmxhcmdlc3RCYXRjaElkLCBlLmxhcmdlc3RCYXRjaElkKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEV0ID0gXCJUaGUgY3VycmVudCB0YWIgaXMgbm90IGluIHRoZSByZXF1aXJlZCBzdGF0ZSB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLiBJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gcmVmcmVzaCB0aGUgYnJvd3NlciB0YWIuXCI7XG5cbi8qKlxuICogQSBiYXNlIGNsYXNzIHJlcHJlc2VudGluZyBhIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLCBlbmNhcHN1bGF0aW5nIGJvdGggdGhlXG4gKiB0cmFuc2FjdGlvbidzIHNlcXVlbmNlIG51bWJlcnMgYXMgd2VsbCBhcyBhIGxpc3Qgb2Ygb25Db21taXR0ZWQgbGlzdGVuZXJzLlxuICpcbiAqIFdoZW4geW91IGNhbGwgUGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oKSwgaXQgd2lsbCBjcmVhdGUgYSB0cmFuc2FjdGlvbiBhbmRcbiAqIHBhc3MgaXQgdG8geW91ciBjYWxsYmFjay4gWW91IHRoZW4gcGFzcyBpdCB0byBhbnkgbWV0aG9kIHRoYXQgb3BlcmF0ZXNcbiAqIG9uIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIEF0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBhZGRPbkNvbW1pdHRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKHQpO1xuICAgIH1cbiAgICByYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaCgodCA9PiB0KCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFZlcmlmaWVzIHRoZSBlcnJvciB0aHJvd24gYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi4gSWYgYSBMb2NhbFN0b3JlXG4gKiBvcGVyYXRpb24gZmFpbHMgYmVjYXVzZSB0aGUgcHJpbWFyeSBsZWFzZSBoYXMgYmVlbiB0YWtlbiBieSBhbm90aGVyIGNsaWVudCxcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcbiAqIGBhcHBseVByaW1hcnlMZWFzZWAgdG8gcHJvcGFnYXRlIHRoZSBwcmltYXJ5IHN0YXRlIGNoYW5nZSkuIEFsbCBvdGhlciBlcnJvcnNcbiAqIGFyZSByZS10aHJvd24uXG4gKlxuICogQHBhcmFtIGVyciAtIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB3ZSByZWNvdmVyZWQsIG9yIHRoZSBvcmlnaW5hbCBlcnJvci5cbiAqLyBhc3luYyBmdW5jdGlvbiBSdCh0KSB7XG4gICAgaWYgKHQuY29kZSAhPT0gcS5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQubWVzc2FnZSAhPT0gRXQpIHRocm93IHQ7XG4gICAgTihcIkxvY2FsU3RvcmVcIiwgXCJVbmV4cGVjdGVkbHkgbG9zdCBwcmltYXJ5IGxlYXNlXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQZXJzaXN0ZW5jZVByb21pc2UgaXMgZXNzZW50aWFsbHkgYSByZS1pbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlIGV4Y2VwdFxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcbiAqIGFyZSBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gYSBQZXJzaXN0ZW5jZVByb21pc2UgcmVzb2x2ZXMgcmF0aGVyIHRoYW5cbiAqIGFzeW5jaHJvbm91c2x5IChQcm9taXNlIGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW50ZXJvcGVyYXRlIHdpdGggSW5kZXhlZERCIHdoaWNoIHdpbGwgYXV0b21hdGljYWxseVxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcbiAqIHN5bmNocm9ub3VzbHkgaW5pdGlhdGluZyBhbm90aGVyIG9wZXJhdGlvbiBvbiB0aGUgdHJhbnNhY3Rpb24uXG4gKlxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxuICogUHJvbWlzZXMuXG4gKi8gY2xhc3MgdnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gTk9URTogbmV4dC9jYXRjaENhbGxiYWNrIHdpbGwgYWx3YXlzIHBvaW50IHRvIG91ciBvd24gd3JhcHBlciBmdW5jdGlvbnMsXG4gICAgICAgIC8vIG5vdCB0aGUgdXNlcidzIHJhdyBuZXh0KCkgb3IgY2F0Y2goKSBjYWxsYmFja3MuXG4gICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbCwgdGhpcy5jYXRjaENhbGxiYWNrID0gbnVsbCwgXG4gICAgICAgIC8vIFdoZW4gdGhlIG9wZXJhdGlvbiByZXNvbHZlcywgd2UnbGwgc2V0IHJlc3VsdCBvciBlcnJvciBhbmQgbWFyayBpc0RvbmUuXG4gICAgICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwLCB0aGlzLmVycm9yID0gdm9pZCAwLCB0aGlzLmlzRG9uZSA9ICExLCBcbiAgICAgICAgLy8gU2V0IHRvIHRydWUgd2hlbiAudGhlbigpIG9yIC5jYXRjaCgpIGFyZSBjYWxsZWQgYW5kIHByZXZlbnRzIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gY2hhaW5pbmcuXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICExLCB0KCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMucmVzdWx0ID0gdCwgdGhpcy5uZXh0Q2FsbGJhY2sgJiYgXG4gICAgICAgICAgICAvLyB2YWx1ZSBzaG91bGQgYmUgZGVmaW5lZCB1bmxlc3MgVCBpcyBWb2lkLCBidXQgd2UgY2FuJ3QgZXhwcmVzc1xuICAgICAgICAgICAgLy8gdGhhdCBpbiB0aGUgdHlwZSBzeXN0ZW0uXG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayh0KTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMuZXJyb3IgPSB0LCB0aGlzLmNhdGNoQ2FsbGJhY2sgJiYgdGhpcy5jYXRjaENhbGxiYWNrKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNhdGNoKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICBuZXh0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCAmJiAkKCksIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICEwLCB0aGlzLmlzRG9uZSA/IHRoaXMuZXJyb3IgPyB0aGlzLndyYXBGYWlsdXJlKGUsIHRoaXMuZXJyb3IpIDogdGhpcy53cmFwU3VjY2Vzcyh0LCB0aGlzLnJlc3VsdCkgOiBuZXcgdnQoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcFN1Y2Nlc3ModCwgZSkubmV4dChuLCBzKTtcbiAgICAgICAgICAgIH0sIHRoaXMuY2F0Y2hDYWxsYmFjayA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcEZhaWx1cmUoZSwgdCkubmV4dChuLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgd3JhcFVzZXJGdW5jdGlvbih0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiB2dCA/IGUgOiB2dC5yZXNvbHZlKGUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdnQucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyYXBTdWNjZXNzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IHQoZSkpKSA6IHZ0LnJlc29sdmUoZSk7XG4gICAgfVxuICAgIHdyYXBGYWlsdXJlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IHQoZSkpKSA6IHZ0LnJlamVjdChlKTtcbiAgICB9XG4gICAgc3RhdGljIHJlc29sdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHZ0KCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZSh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVqZWN0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2dCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIG4odCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHdhaXRGb3IoXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2dCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gMCwgaSA9IDAsIHIgPSAhMTtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgKytzLCB0Lm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKytpLCByICYmIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICAgICAgICAgIH0pLCAodCA9PiBuKHQpKSk7XG4gICAgICAgICAgICB9KSksIHIgPSAhMCwgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcHJlZGljYXRlIGZ1bmN0aW9ucyB0aGF0IGFzeW5jaHJvbm91c2x5IGV2YWx1YXRlIHRvIGFcbiAgICAgKiBib29sZWFuLCBpbXBsZW1lbnRzIGEgc2hvcnQtY2lyY3VpdGluZyBgb3JgIGJldHdlZW4gdGhlIHJlc3VsdHMuIFByZWRpY2F0ZXNcbiAgICAgKiB3aWxsIGJlIGV2YWx1YXRlZCB1bnRpbCBvbmUgb2YgdGhlbSByZXR1cm5zIGB0cnVlYCwgdGhlbiBzdG9wLiBUaGUgZmluYWxcbiAgICAgKiByZXN1bHQgd2lsbCBiZSB3aGV0aGVyIGFueSBvZiB0aGVtIHJldHVybmVkIGB0cnVlYC5cbiAgICAgKi8gICAgc3RhdGljIG9yKHQpIHtcbiAgICAgICAgbGV0IGUgPSB2dC5yZXNvbHZlKCExKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLm5leHQoKHQgPT4gdCA/IHZ0LnJlc29sdmUodCkgOiBuKCkpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JFYWNoKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgcykgPT4ge1xuICAgICAgICAgICAgbi5wdXNoKGUuY2FsbCh0aGlzLCB0LCBzKSk7XG4gICAgICAgIH0pKSwgdGhpcy53YWl0Rm9yKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25jdXJyZW50bHkgbWFwIGFsbCBhcnJheSBlbGVtZW50cyB0aHJvdWdoIGFzeW5jaHJvbm91cyBmdW5jdGlvbi5cbiAgICAgKi8gICAgc3RhdGljIG1hcEFycmF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2dCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0Lmxlbmd0aCwgciA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IHUgPSAwOyB1IDwgaTsgdSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHU7XG4gICAgICAgICAgICAgICAgZSh0W2NdKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcltjXSA9IHQsICsrbywgbyA9PT0gaSAmJiBuKHIpO1xuICAgICAgICAgICAgICAgIH0pLCAodCA9PiBzKHQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgdG8gcmVjdXJzaXZlIFBlcnNpc3RlbmNlUHJvbWlzZSBjYWxscywgdGhhdCBhdm9pZHNcbiAgICAgKiBwb3RlbnRpYWwgbWVtb3J5IHByb2JsZW1zIGZyb20gdW5ib3VuZGVkIGNoYWlucyBvZiBwcm9taXNlcy5cbiAgICAgKlxuICAgICAqIFRoZSBgYWN0aW9uYCB3aWxsIGJlIGNhbGxlZCByZXBlYXRlZGx5IHdoaWxlIGBjb25kaXRpb25gIGlzIHRydWUuXG4gICAgICovICAgIHN0YXRpYyBkb1doaWxlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2dCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgITAgPT09IHQoKSA/IGUoKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGkoKTtcbiAgICAgICAgICAgICAgICB9KSwgcykgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxuICovXG5jbGFzcyBQdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IHQsIHRoaXMudHJhbnNhY3Rpb24gPSBlLCB0aGlzLmFib3J0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5SID0gbmV3IEssIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuUi5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgIGUuZXJyb3IgPyB0aGlzLlIucmVqZWN0KG5ldyBTdCh0LCBlLmVycm9yKSkgOiB0aGlzLlIucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBrdChlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLlIucmVqZWN0KG5ldyBTdCh0LCBuKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBvcGVuKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHQoZSwgdC50cmFuc2FjdGlvbihzLCBuKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdChlLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUi5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydCh0KSB7XG4gICAgICAgIHQgJiYgdGhpcy5SLnJlamVjdCh0KSwgdGhpcy5hYm9ydGVkIHx8IChOKFwiU2ltcGxlRGJcIiwgXCJBYm9ydGluZyB0cmFuc2FjdGlvbjpcIiwgdCA/IHQubWVzc2FnZSA6IFwiQ2xpZW50LWluaXRpYXRlZCBhYm9ydFwiKSwgXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpO1xuICAgIH1cbiAgICBQKCkge1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBWMyBJbmRleGVkREIsIHdlIGludm9rZSBjb21taXQoKSBleHBsaWNpdGx5IHRvXG4gICAgICAgIC8vIHNwZWVkIHVwIGluZGV4IERCIHByb2Nlc3NpbmcgaWYgdGhlIGV2ZW50IGxvb3AgcmVtYWlucyBibG9ja3MuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnRyYW5zYWN0aW9uO1xuICAgICAgICB0aGlzLmFib3J0ZWQgfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0LmNvbW1pdCB8fCB0LmNvbW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xuICAgICAqIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cbiAgICAgKi8gICAgc3RvcmUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBDdChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqLyBjbGFzcyBidCB7XG4gICAgLypcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbXBsZURiIHdyYXBwZXIgZm9yIEluZGV4ZWREYiBkYXRhYmFzZSBgbmFtZWAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHZlcnNpb25gIG11c3Qgbm90IGJlIGEgZG93bmdyYWRlLiBJbmRleGVkREIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAqIGRvd25ncmFkaW5nIHRoZSBzY2hlbWEgdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG9cbiAgICAgKiB2ZXJzaW9uaW5nIG91dHNpZGUgb2YgSW5kZXhlZERCJ3MgdmVyc2lvbmluZyBtZWNoYW5pc20sIGFzIG9ubHlcbiAgICAgKiB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxuICAgICAqIG9iamVjdHN0b3Jlcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuViA9IG47XG4gICAgICAgIC8vIE5PVEU6IEFjY29yZGluZyB0byBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3MDUwLCB0aGVcbiAgICAgICAgLy8gYnVnIHdlJ3JlIGNoZWNraW5nIGZvciBzaG91bGQgZXhpc3QgaW4gaU9TID49IDEyLjIgYW5kIDwgMTMsIGJ1dCBmb3JcbiAgICAgICAgLy8gd2hhdGV2ZXIgcmVhc29uIGl0J3MgbXVjaCBoYXJkZXIgdG8gaGl0IGFmdGVyIDEyLjIgc28gd2Ugb25seSBwcm9hY3RpdmVseVxuICAgICAgICAvLyBsb2cgb24gMTIuMi5cbiAgICAgICAgMTIuMiA9PT0gYnQuUyhnZXRVQSgpKSAmJiBrKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gTihcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIHQpLCB4dCh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSByZXR1cm4gITE7XG4gICAgICAgIGlmIChidC5DKCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGdldFVBKCksIGUgPSBidC5TKHQpLCBuID0gMCA8IGUgJiYgZSA8IDEwLCBzID0gYnQuTih0KSwgaSA9IDAgPCBzICYmIHMgPCA0LjU7XG4gICAgICAgIC8vIElFIDEwXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xuICAgICAgICAvLyBJRSAxMVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcbiAgICAgICAgLy8gRWRnZVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cbiAgICAgICAgICAgICAgICByZXR1cm4gISh0LmluZGV4T2YoXCJNU0lFIFwiKSA+IDAgfHwgdC5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAwIHx8IHQuaW5kZXhPZihcIkVkZ2UvXCIpID4gMCB8fCBuIHx8IGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXG4gICAgICovICAgIHN0YXRpYyBDKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgXCJZRVNcIiA9PT0gKG51bGwgPT09ICh0ID0gcHJvY2Vzcy5lbnYpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuayk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBNKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoZSk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBTKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSksIG4gPSBlID8gZVsxXS5zcGxpdChcIl9cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgQW5kcm9pZCB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgTih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgTyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiIHx8IChOKFwiU2ltcGxlRGJcIiwgXCJPcGVuaW5nIGRhdGFiYXNlOlwiLCB0aGlzLm5hbWUpLCB0aGlzLmRiID0gYXdhaXQgbmV3IFByb21pc2UoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEludmVzdGlnYXRlIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxuICAgICAgICAgICAgLy8gc3VnZ2VzdHMgSUU5IGFuZCBvbGRlciBXZWJLaXQgYnJvd3NlcnMgaGFuZGxlIHVwZ3JhZGVcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudGx5LiBUaGV5IGV4cGVjdCBzZXRWZXJzaW9uLCBhcyBkZXNjcmliZWQgaGVyZTpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXG4gICAgICAgICAgICBjb25zdCBzID0gaW5kZXhlZERCLm9wZW4odGhpcy5uYW1lLCB0aGlzLnZlcnNpb24pO1xuICAgICAgICAgICAgcy5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGUobik7XG4gICAgICAgICAgICB9LCBzLm9uYmxvY2tlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuKG5ldyBTdCh0LCBcIkNhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuXCIpKTtcbiAgICAgICAgICAgIH0sIHMub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5lcnJvcjtcbiAgICAgICAgICAgICAgICBcIlZlcnNpb25FcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IFwiSW52YWxpZFN0YXRlRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVW5hYmxlIHRvIG9wZW4gYW4gSW5kZXhlZERCIGNvbm5lY3Rpb24uIFRoaXMgY291bGQgYmUgZHVlIHRvIHJ1bm5pbmcgaW4gYSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb24gb24gYSBicm93c2VyIHdob3NlIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbnMgZG8gbm90IHN1cHBvcnQgSW5kZXhlZERCOiBcIiArIHMpKSA6IG4obmV3IFN0KHQsIHMpKTtcbiAgICAgICAgICAgIH0sIHMub251cGdyYWRlbmVlZGVkID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgTihcIlNpbXBsZURiXCIsICdEYXRhYmFzZSBcIicgKyB0aGlzLm5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgdC5vbGRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuVi4kKGUsIHMudHJhbnNhY3Rpb24sIHQub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIE4oXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMuRiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IHRoaXMuRih0KSksIHRoaXMuZGI7XG4gICAgfVxuICAgIEIodCkge1xuICAgICAgICB0aGlzLkYgPSB0LCB0aGlzLmRiICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGUgPT4gdChlKSk7XG4gICAgfVxuICAgIGFzeW5jIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFwicmVhZG9ubHlcIiA9PT0gZTtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICArK3I7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGIgPSBhd2FpdCB0aGlzLk8odCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFB0Lm9wZW4odGhpcy5kYiwgdCwgaSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIsIG4pLCByID0gcyhlKS5uZXh0KCh0ID0+IChlLlAoKSwgXG4gICAgICAgICAgICAgICAgdCkpKS5jYXRjaCgodCA9PiAoXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICBlLmFib3J0KHQpLCB2dC5yZWplY3QodCkpKSkudG9Qcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXG4gICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gci5jYXRjaCgoKCkgPT4ge30pKSwgXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xuICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IGUudiwgcjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdCwgbiA9IFwiRmlyZWJhc2VFcnJvclwiICE9PSBlLm5hbWUgJiYgciA8IDM7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFdlIGNvdWxkIHByb2JhYmx5IGJlIHNtYXJ0ZXIgYWJvdXQgdGhpcyBhbmRcbiAgICAgICAgICAgICAgICAvLyBub3QgcmV0cnkgZXhjZXB0aW9ucyB0aGF0IGFyZSBsaWtlbHkgdW5yZWNvdmVyYWJsZSAoc3VjaCBhcyBxdW90YVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkIGVycm9ycykuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2Fubm90IHVzZSBhbiBpbnN0YW5jZW9mIGNoZWNrIGZvciBGaXJlc3RvcmVFeGNlcHRpb24sIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBpcyB3cmFwcGVkIGluIGEgZ2VuZXJpYyBlcnJvciBieSBvdXIgYXN5bmMvYXdhaXQgaGFuZGxpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOKFwiU2ltcGxlRGJcIiwgXCJUcmFuc2FjdGlvbiBmYWlsZWQgd2l0aCBlcnJvcjpcIiwgZS5tZXNzYWdlLCBcIlJldHJ5aW5nOlwiLCBuKSwgXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpLCAhbikgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmRiICYmIHRoaXMuZGIuY2xvc2UoKSwgdGhpcy5kYiA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcbiAqIGNhbGxiYWNrIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5LXJlZmVyZW5jZWQgb2JqZWN0LCBvciBqdW1wIHRvIGEgbmV3IGtleVxuICogd2l0aGluIHRoZSBrZXkgcmFuZ2Ugb3IgaW5kZXguXG4gKi8gY2xhc3MgVnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5MID0gdCwgdGhpcy5xID0gITEsIHRoaXMuVSA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0RvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnE7XG4gICAgfVxuICAgIGdldCBLKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VO1xuICAgIH1cbiAgICBzZXQgY3Vyc29yKHQpIHtcbiAgICAgICAgdGhpcy5MID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cbiAgICAgKi8gICAgZG9uZSgpIHtcbiAgICAgICAgdGhpcy5xID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgRyh0KSB7XG4gICAgICAgIHRoaXMuVSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxuICAgICAqXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cbiAgICAgKi8gICAgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4geHQodGhpcy5MLmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIFN0IGV4dGVuZHMgVSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcihxLlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke3R9JyBmYWlsZWQ6ICR7ZX1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gRHQodCkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSB0Lm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIEN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0O1xuICAgIH1cbiAgICBwdXQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/IChOKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgbiA9IHRoaXMuc3RvcmUucHV0KGUsIHQpKSA6IChOKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCkpLCB4dChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZCh0KSB7XG4gICAgICAgIE4oXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIHQpO1xuICAgICAgICByZXR1cm4geHQodGhpcy5zdG9yZS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4geHQodGhpcy5zdG9yZS5nZXQodCkpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCBOKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgZSkpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgdCk7XG4gICAgICAgIHJldHVybiB4dCh0aGlzLnN0b3JlLmRlbGV0ZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIHh0KHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIGoodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICAvLyBVc2UgYGdldEFsbCgpYCBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBJbmRleGVkREIgdjMsIGFzIGl0IGlzIHJvdWdobHlcbiAgICAgICAgLy8gMjAlIGZhc3Rlci4gVW5mb3J0dW5hdGVseSwgZ2V0QWxsKCkgZG9lcyBub3Qgc3VwcG9ydCBjdXN0b20gaW5kaWNlcy5cbiAgICAgICAgICAgICAgICBpZiAobi5pbmRleCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHRoaXMuc3RvcmUuZ2V0QWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5jdXJzb3IobiksIGUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlcodCwgKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKG4pO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5zdG9yZS5nZXRBbGwobi5yYW5nZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHZ0KCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cyBmcm9tIHRoZSBwcm92aWRlZCBpbmRleCByYW5nZS4gTG9hZHMgYWxsXG4gICAgICogZWxlbWVudHMgaWYgbm8gbGltaXQgaXMgcHJvdmlkZWQuXG4gICAgICovICAgIEgodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5nZXRBbGwodCwgbnVsbCA9PT0gZSA/IHZvaWQgMCA6IGUpO1xuICAgICAgICByZXR1cm4gbmV3IHZ0KCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbi5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgZSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCBuLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHQoZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSih0LCBlKSB7XG4gICAgICAgIE4oXCJTaW1wbGVEYlwiLCBcIkRFTEVURSBBTExcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyh0LCBlKTtcbiAgICAgICAgbi5ZID0gITE7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVyhzLCAoKHQsIGUsIG4pID0+IG4uZGVsZXRlKCkpKTtcbiAgICB9XG4gICAgWCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBlID8gbiA9IHQgOiAobiA9IHt9LCBlID0gdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVyhzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAgWih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgdnQoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBlLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0ga3QodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHMoZSk7XG4gICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcyA/IHQocy5wcmltYXJ5S2V5LCBzLnZhbHVlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdCA/IHMuY29udGludWUoKSA6IG4oKTtcbiAgICAgICAgICAgICAgICB9KSkgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFcodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiBuZXcgdnQoKChzLCBpKSA9PiB7XG4gICAgICAgICAgICB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiB2b2lkIHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFZ0KGkpLCBvID0gZShpLnByaW1hcnlLZXksIGkudmFsdWUsIHIpO1xuICAgICAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgdnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uY2F0Y2goKHQgPT4gKHIuZG9uZSgpLCB2dC5yZWplY3QodCkpKSk7XG4gICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgci5pc0RvbmUgPyBzKCkgOiBudWxsID09PSByLksgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHIuSyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdnQud2FpdEZvcihuKSkpO1xuICAgIH1cbiAgICBvcHRpb25zKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBuID0gdCA6IGUgPSB0KSwge1xuICAgICAgICAgICAgaW5kZXg6IG4sXG4gICAgICAgICAgICByYW5nZTogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjdXJzb3IodCkge1xuICAgICAgICBsZXQgZSA9IFwibmV4dFwiO1xuICAgICAgICBpZiAodC5yZXZlcnNlICYmIChlID0gXCJwcmV2XCIpLCB0LmluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5pbmRleCh0LmluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0LlkgPyBuLm9wZW5LZXlDdXJzb3IodC5yYW5nZSwgZSkgOiBuLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHMgYW4gSURCUmVxdWVzdCBpbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSwgdXNpbmcgdGhlIG9uc3VjY2VzcyAvIG9uZXJyb3JcbiAqIGhhbmRsZXJzIHRvIHJlc29sdmUgLyByZWplY3QgdGhlIFBlcnNpc3RlbmNlUHJvbWlzZSBhcyBhcHByb3ByaWF0ZS5cbiAqLyBmdW5jdGlvbiB4dCh0KSB7XG4gICAgcmV0dXJuIG5ldyB2dCgoKGUsIG4pID0+IHtcbiAgICAgICAgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICBlKG4pO1xuICAgICAgICB9LCB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBrdCh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICBuKGUpO1xuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXG5sZXQgTnQgPSAhMTtcblxuZnVuY3Rpb24ga3QodCkge1xuICAgIGNvbnN0IGUgPSBidC5TKGdldFVBKCkpO1xuICAgIGlmIChlID49IDEyLjIgJiYgZSA8IDEzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKHQubWVzc2FnZS5pbmRleE9mKGUpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgVShcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke2V9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIE50IHx8IChOdCA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSksIDApKSwgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuLyoqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIEluZGV4IEJhY2tmaWxsZXIuICovXG5jbGFzcyBNdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLnR0ID0gZSwgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuZXQoMTVlMyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudGFzayAmJiAodGhpcy50YXNrLmNhbmNlbCgpLCB0aGlzLnRhc2sgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnRhc2s7XG4gICAgfVxuICAgIGV0KHQpIHtcbiAgICAgICAgTihcIkluZGV4QmFja2lsbGVyXCIsIGBTY2hlZHVsZWQgaW4gJHt0fW1zYCksIHRoaXMudGFzayA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImluZGV4X2JhY2tmaWxsXCIgLyogVGltZXJJZC5JbmRleEJhY2tmaWxsICovICwgdCwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIE4oXCJJbmRleEJhY2tpbGxlclwiLCBgRG9jdW1lbnRzIHdyaXR0ZW46ICR7YXdhaXQgdGhpcy50dC5udCgpfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIER0KHQpID8gTihcIkluZGV4QmFja2lsbGVyXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBpbmRleCBiYWNrZmlsbDogXCIsIHQpIDogYXdhaXQgUnQodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV0KDZlNCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgYmFja2ZpbGxpbmcgaW5kZXhlcy4gKi8gY2xhc3MgT3Qge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIExvY2FsU3RvcmUgcHJvdmlkZXMgYWNjZXNzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyB3aWxsIHVwZGF0ZSB3aGVuIHRoZSB1c2VyIGNoYW5nZXMuIENvbnNlcXVlbnRseSxcbiAgICAgKiBtYWtpbmcgYSBsb2NhbCBjb3B5IG9mIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcgd2lsbCByZXF1aXJlXG4gICAgICogdXBkYXRlcyBvdmVyIHRpbWUuIFRoZSBzaW1wbGVyIHNvbHV0aW9uIGlzIHRvIHJlbHkgb24gTG9jYWxTdG9yZSB0byBoYXZlXG4gICAgICogYW4gdXAtdG8tZGF0ZSByZWZlcmVuY2VzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFN0b3JlLlxuICAgICAqL1xuICAgIHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5wZXJzaXN0ZW5jZSA9IGU7XG4gICAgfVxuICAgIGFzeW5jIG50KHQgPSA1MCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkJhY2tmaWxsIEluZGV4ZXNcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB0aGlzLnN0KGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgaW5kZXggZW50cmllcyB1bnRpbCB0aGUgY2FwIGlzIHJlYWNoZWQuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLiAqLyAgICBzdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU2V0O1xuICAgICAgICBsZXQgcyA9IGUsIGkgPSAhMDtcbiAgICAgICAgcmV0dXJuIHZ0LmRvV2hpbGUoKCgpID0+ICEwID09PSBpICYmIHMgPiAwKSwgKCgpID0+IHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgIW4uaGFzKGUpKSByZXR1cm4gTihcIkluZGV4QmFja2lsbGVyXCIsIGBQcm9jZXNzaW5nIGNvbGxlY3Rpb246ICR7ZX1gKSwgXG4gICAgICAgICAgICB0aGlzLml0KHQsIGUsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHMgLT0gdCwgbi5hZGQoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpID0gITE7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGUgLSBzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyBlbnRyaWVzIGZvciB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwcm9jZXNzZWQuXG4gICAgICovICAgIGl0KHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVXNlIHRoZSBlYXJsaWVzdCBvZmZzZXQgb2YgYWxsIGZpZWxkIGluZGV4ZXMgdG8gcXVlcnkgdGhlIGxvY2FsIGNhY2hlLlxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci5nZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUpLm5leHQoKHMgPT4gdGhpcy5sb2NhbFN0b3JlLmxvY2FsRG9jdW1lbnRzLmdldE5leHREb2N1bWVudHModCwgZSwgcywgbikubmV4dCgobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5jaGFuZ2VzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIudXBkYXRlSW5kZXhFbnRyaWVzKHQsIGkpLm5leHQoKCgpID0+IHRoaXMucnQocywgbikpKS5uZXh0KChuID0+IChOKFwiSW5kZXhCYWNraWxsZXJcIiwgYFVwZGF0aW5nIG9mZnNldDogJHtufWApLCBcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIudXBkYXRlQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4pKSkpLm5leHQoKCgpID0+IGkuc2l6ZSkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIG5leHQgb2Zmc2V0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICovICAgIHJ0KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB0O1xuICAgICAgICByZXR1cm4gZS5jaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gcHQoZSk7XG4gICAgICAgICAgICBUdChzLCBuKSA+IDAgJiYgKG4gPSBzKTtcbiAgICAgICAgfSkpLCBuZXcgSXQobi5yZWFkVGltZSwgbi5kb2N1bWVudEtleSwgTWF0aC5tYXgoZS5iYXRjaElkLCB0Lmxhcmdlc3RCYXRjaElkKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBgTGlzdGVuU2VxdWVuY2VgIGlzIGEgbW9ub3RvbmljIHNlcXVlbmNlLiBJdCBpcyBpbml0aWFsaXplZCB3aXRoIGEgbWluaW11bSB2YWx1ZSB0b1xuICogZXhjZWVkLiBBbGwgc3Vic2VxdWVudCBjYWxscyB0byBuZXh0IHdpbGwgcmV0dXJuIGluY3JlYXNpbmcgdmFsdWVzLiBJZiBwcm92aWRlZCB3aXRoIGFcbiAqIGBTZXF1ZW5jZU51bWJlclN5bmNlcmAsIGl0IHdpbGwgYWRkaXRpb25hbGx5IGJ1bXAgaXRzIG5leHQgdmFsdWUgd2hlbiB0b2xkIG9mIGEgbmV3IHZhbHVlLCBhc1xuICogd2VsbCBhcyB3cml0ZSBvdXQgc2VxdWVuY2UgbnVtYmVycyB0aGF0IGl0IHByb2R1Y2VzIHZpYSBgbmV4dCgpYC5cbiAqLyBjbGFzcyAkdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSB0LCBlICYmIChlLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IHQgPT4gdGhpcy5vdCh0KSwgdGhpcy51dCA9IHQgPT4gZS53cml0ZVNlcXVlbmNlTnVtYmVyKHQpKTtcbiAgICB9XG4gICAgb3QodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgodCwgdGhpcy5wcmV2aW91c1ZhbHVlKSwgdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCB0ID0gKyt0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzLnV0ICYmIHRoaXMudXQodCksIHQ7XG4gICAgfVxufVxuXG4kdC5jdCA9IC0xO1xuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gRnQodCkge1xuICAgIHJldHVybiBudWxsID09IHQ7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgLTAuICovIGZ1bmN0aW9uIEJ0KHQpIHtcbiAgICAvLyBEZXRlY3QgaWYgdGhlIHZhbHVlIGlzIC0wLjAuIEJhc2VkIG9uIHBvbHlmaWxsIGZyb21cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICByZXR1cm4gMCA9PT0gdCAmJiAxIC8gdCA9PSAtMSAvIDA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXG4gKi8gZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIE51bWJlci5pc0ludGVnZXIodCkgJiYgIUJ0KHQpICYmIHQgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgJiYgdCA+PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIHJlc291cmNlIHBhdGggaW50byBhIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtLlxuICovXG5mdW5jdGlvbiBxdCh0KSB7XG4gICAgbGV0IGUgPSBcIlwiO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZS5sZW5ndGggPiAwICYmIChlID0gS3QoZSkpLCBlID0gVXQodC5nZXQobiksIGUpO1xuICAgIHJldHVybiBLdChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBzaW5nbGUgc2VnbWVudCBvZiBhIHJlc291cmNlIHBhdGggaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIFV0KHQsIGUpIHtcbiAgICBsZXQgbiA9IGU7XG4gICAgY29uc3QgcyA9IHQubGVuZ3RoO1xuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgczsgZSsrKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNoYXJBdChlKTtcbiAgICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgICAgY2FzZSBcIlxcMFwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDExXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuICs9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgcGF0aCBzZXBhcmF0b3IgaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIEt0KHQpIHtcbiAgICByZXR1cm4gdCArIFwiXHUwMDAxXHUwMDAxXCI7XG59XG5cbi8qKlxuICogRGVjb2RlcyB0aGUgZ2l2ZW4gSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0gb2YgYSByZXNvdXJjZSBwYXRoIGludG9cbiAqIGEgUmVzb3VyY2VQYXRoIGluc3RhbmNlLiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHN1aXRhYmxlIGZvciB1c2Ugd2l0aFxuICogZGVjb2RpbmcgcmVzb3VyY2UgbmFtZXMgZnJvbSB0aGUgc2VydmVyOyB0aG9zZSBhcmUgT25lIFBsYXRmb3JtIGZvcm1hdFxuICogc3RyaW5ncy5cbiAqLyBmdW5jdGlvbiBHdCh0KSB7XG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxuICAgIGNvbnN0IGUgPSB0Lmxlbmd0aDtcbiAgICBpZiAoRihlID49IDIpLCAyID09PSBlKSByZXR1cm4gRihcIlx1MDAwMVwiID09PSB0LmNoYXJBdCgwKSAmJiBcIlx1MDAwMVwiID09PSB0LmNoYXJBdCgxKSksIHV0LmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4ID0gZSAtIDIsIG4gPSBbXTtcbiAgICBsZXQgcyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlOyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCBlID0gdC5pbmRleE9mKFwiXHUwMDAxXCIsIGkpO1xuICAgICAgICAoZSA8IDAgfHwgZSA+IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSAmJiAkKCk7XG4gICAgICAgIHN3aXRjaCAodC5jaGFyQXQoZSArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgciA9IHQuc3Vic3RyaW5nKGksIGUpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSBzLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gciA6IChzICs9IHIsIG8gPSBzLCBzID0gXCJcIiksIG4ucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgcyArPSB0LnN1YnN0cmluZyhpLCBlKSwgcyArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICBzICs9IHQuc3Vic3RyaW5nKGksIGUgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICQoKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gZSArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgdXQobik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFF0ID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAqL1xuZnVuY3Rpb24ganQodCwgZSkge1xuICAgIHJldHVybiBbIHQsIHF0KGUpIF07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGwgaW5kZXgga2V5IG9mIFt1c2VySWQsIGVuY29kZWRQYXRoLCBiYXRjaElkXSBmb3IgaW5zZXJ0aW5nXG4gKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAqLyBmdW5jdGlvbiB6dCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIFsgdCwgcXQoZSksIG4gXTtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovIGNvbnN0IFd0ID0ge30sIEh0ID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcImRvY3VtZW50SWRcIiBdLCBKdCA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiZG9jdW1lbnRJZFwiIF0sIFl0ID0gWyBcImNvbGxlY3Rpb25Hcm91cFwiLCBcInJlYWRUaW1lXCIsIFwicHJlZml4UGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCBYdCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXSwgWnQgPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgdGUgPSBbIFwicGF0aFwiLCBcInRhcmdldElkXCIgXSwgZWUgPSBbIFwiY29sbGVjdGlvbklkXCIsIFwicGFyZW50XCIgXSwgbmUgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiIF0sIHNlID0gWyBcInVpZFwiLCBcInNlcXVlbmNlTnVtYmVyXCIgXSwgaWUgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcImFycmF5VmFsdWVcIiwgXCJkaXJlY3Rpb25hbFZhbHVlXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIsIFwiZG9jdW1lbnRLZXlcIiBdLCByZSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIgXSwgb2UgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgdWUgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJsYXJnZXN0QmF0Y2hJZFwiIF0sIGNlID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgYWUgPSBbIC4uLlsgLi4uWyAuLi5bIC4uLlsgXCJtdXRhdGlvblF1ZXVlc1wiLCBcIm11dGF0aW9uc1wiLCBcImRvY3VtZW50TXV0YXRpb25zXCIsIFwicmVtb3RlRG9jdW1lbnRzXCIsIFwidGFyZ2V0c1wiLCBcIm93bmVyXCIsIFwidGFyZ2V0R2xvYmFsXCIsIFwidGFyZ2V0RG9jdW1lbnRzXCIgXSwgXCJjbGllbnRNZXRhZGF0YVwiIF0sIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiBdLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIgXSwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIgXSwgaGUgPSBbIC4uLmFlLCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBsZSA9IFsgXCJtdXRhdGlvblF1ZXVlc1wiLCBcIm11dGF0aW9uc1wiLCBcImRvY3VtZW50TXV0YXRpb25zXCIsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIFwidGFyZ2V0c1wiLCBcIm93bmVyXCIsIFwidGFyZ2V0R2xvYmFsXCIsIFwidGFyZ2V0RG9jdW1lbnRzXCIsIFwiY2xpZW50TWV0YWRhdGFcIiwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIsIFwiYnVuZGxlc1wiLCBcIm5hbWVkUXVlcmllc1wiLCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBmZSA9IGxlLCBkZSA9IFsgLi4uZmUsIFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIFwiaW5kZXhTdGF0ZVwiLCBcImluZGV4RW50cmllc1wiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfZSBleHRlbmRzIEF0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXQgPSB0LCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3ZSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIGJ0Lk0obi5hdCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIG1lKHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKys7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGdlKHQsIGUpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUobiwgdFtuXSk7XG59XG5cbmZ1bmN0aW9uIHllKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBlKSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyBwZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLnJvb3QgPSBlIHx8IFRlLkVNUFRZO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgIGluc2VydCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgcGUodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KHQsIGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBUZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUodCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIFRlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IodCwgZS5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiBlLnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyBlID0gZS5sZWZ0IDogbiA+IDAgJiYgKGUgPSBlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgZSA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jb21wYXJhdG9yKHQsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZSArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgcyA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIGUgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlLCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodC5wdXNoKGAke2V9OiR7bn1gKSwgITEpKSksIGB7JHt0LmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IEllKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IEllKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IEllKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIEllIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gcywgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshdC5pc0VtcHR5KCk7ICkgaWYgKGkgPSBlID8gbih0LmtleSwgZSkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIGUgJiYgcyAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5sZWZ0IDogdC5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQucmlnaHQgOiB0LmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAodCA9IHQubGVmdDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0LnJpZ2h0OyBlbHNlIGZvciAodCA9IHQucmlnaHQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCBcbiAgICAgICAgdCA9IHQubGVmdDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIFRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogVGUuUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHMgPyBzIDogVGUuRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IFRlLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZShudWxsICE9IHQgPyB0IDogdGhpcy5rZXksIG51bGwgIT0gZSA/IGUgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSBzID8gcyA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4odCwgcy5rZXkpO1xuICAgICAgICByZXR1cm4gcyA9IGkgPCAwID8gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5pbnNlcnQodCwgZSwgbiksIG51bGwpIDogMCA9PT0gaSA/IHMuY29weShudWxsLCBlLCBudWxsLCBudWxsLCBudWxsKSA6IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0Lmluc2VydCh0LCBlLCBuKSksIFxuICAgICAgICBzLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBUZS5FTVBUWTtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmlzUmVkKCkgfHwgdC5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAodCA9IHQubW92ZVJlZExlZnQoKSksIHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgdC5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIHQuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICBsZXQgbiwgcyA9IHRoaXM7XG4gICAgICAgIGlmIChlKHQsIHMua2V5KSA8IDApIHMubGVmdC5pc0VtcHR5KCkgfHwgcy5sZWZ0LmlzUmVkKCkgfHwgcy5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZExlZnQoKSksIFxuICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5yZW1vdmUodCwgZSksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzLmxlZnQuaXNSZWQoKSAmJiAocyA9IHMucm90YXRlUmlnaHQoKSksIHMucmlnaHQuaXNFbXB0eSgpIHx8IHMucmlnaHQuaXNSZWQoKSB8fCBzLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IGUodCwgcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gVGUuRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHMucmlnaHQubWluKCksIHMgPSBzLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZSh0LCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHMuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQucmlnaHQuaXNSZWQoKSAmJiAhdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZUxlZnQoKSksIHQubGVmdC5pc1JlZCgpICYmIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdC5sZWZ0LmlzUmVkKCkgJiYgdC5yaWdodC5pc1JlZCgpICYmICh0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCB0LnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdCA9IHQucm90YXRlTGVmdCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIFRlLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCB0LCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgVGUuUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgdCk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCBlID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgdCwgZSk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCB0KSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyAkKCk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93ICQoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAodCAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyAkKCk7XG4gICAgICAgIHJldHVybiB0ICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgTExSQk5vZGVcbi8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuVGUuRU1QVFkgPSBudWxsLCBUZS5SRUQgPSAhMCwgVGUuQkxBQ0sgPSAhMTtcblxuLy8gZW5kIExMUkJFbXB0eU5vZGVcblRlLkVNUFRZID0gbmV3IFxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICB0aHJvdyAkKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgJCgpO1xuICAgIH1cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIHRocm93ICQoKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHRocm93ICQoKTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyAkKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFRlKHQsIGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxuICpcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cbiAqIGJlIGVxdWFsIVxuICovXG5jbGFzcyBFZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLmRhdGEgPSBuZXcgcGUodGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZGF0YS5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zaXplO1xuICAgIH1cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKHQpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiByYW5nZVswXSAmbHQ7PSBlbGVtICZsdDsgcmFuZ2VbMV0uICovICAgIGZvckVhY2hJblJhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odFswXSk7XG4gICAgICAgIGZvciAoO24uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3Iocy5rZXksIHRbMV0pID49IDApIHJldHVybjtcbiAgICAgICAgICAgIGUocy5rZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHN0YXJ0ICZsdDs9IGVsZW0gdW50aWwgZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGZvckVhY2hXaGlsZSh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gPSB2b2lkIDAgIT09IGUgPyB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpIDogdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7IG4uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICghdChuLmdldE5leHQoKS5rZXkpKSByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEZpbmRzIHRoZSBsZWFzdCBlbGVtZW50IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgZWxlbWAuICovICAgIGZpcnN0QWZ0ZXJPckVxdWFsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCk7XG4gICAgICAgIHJldHVybiBlLmhhc05leHQoKSA/IGUuZ2V0TmV4dCgpLmtleSA6IG51bGw7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IEFlKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZSh0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovICAgIGFkZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KS5pbnNlcnQodCwgITApKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqLyAgICBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXModCkgPyB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdW5pb25XaXRoKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICAvLyBNYWtlIHN1cmUgYHJlc3VsdGAgYWx3YXlzIHJlZmVycyB0byB0aGUgbGFyZ2VyIG9uZSBvZiB0aGUgdHdvIHNldHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZSA8IHQuc2l6ZSAmJiAoZSA9IHQsIHQgPSB0aGlzKSwgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUgPSBlLmFkZCh0KTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIEVlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLCBuID0gdC5kYXRhLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5jb21wYXJhdG9yKHQsIHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIFwiU29ydGVkU2V0KFwiICsgdC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIGNvcHkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEVlKHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiBlLmRhdGEgPSB0LCBlO1xuICAgIH1cbn1cblxuY2xhc3MgQWUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gdDtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNvcnRlZCBzZXRzIGZvciBlcXVhbGl0eSB1c2luZyB0aGVpciBuYXR1cmFsIG9yZGVyaW5nLiBUaGVcbiAqIG1ldGhvZCBjb21wdXRlcyB0aGUgaW50ZXJzZWN0aW9uIGFuZCBpbnZva2VzIGBvbkFkZGAgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdFxuICogaXMgaW4gYGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLiBgb25SZW1vdmVgIGlzIGludm9rZWQgZm9yIGV2ZXJ5IGVsZW1lbnQgaW5cbiAqIGBiZWZvcmVgIGJ1dCBtaXNzaW5nIGZyb20gYGFmdGVyYC5cbiAqXG4gKiBUaGUgbWV0aG9kIGNyZWF0ZXMgYSBjb3B5IG9mIGJvdGggYGJlZm9yZWAgYW5kIGBhZnRlcmAgYW5kIHJ1bnMgaW4gTyhuIGxvZ1xuICogbiksIHdoZXJlIG4gaXMgdGhlIHNpemUgb2YgdGhlIHR3byBsaXN0cy5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIC0gVGhlIGVsZW1lbnRzIHRoYXQgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBlbGVtZW50IGZyb20gdGhlIGl0ZXJhdG9yIG9yIGB1bmRlZmluZWRgIGlmIG5vbmUgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBSZSh0KSB7XG4gICAgcmV0dXJuIHQuaGFzTmV4dCgpID8gdC5nZXROZXh0KCkgOiB2b2lkIDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIHZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gdCwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICB0LnNvcnQoYXQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2ZShbXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgRmllbGRNYXNrIG9iamVjdCB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYWRkaW5nIGFsbCB0aGUgZ2l2ZW5cbiAgICAgKiBmaWVsZHMgcGF0aHMgdG8gdGhpcyBmaWVsZCBtYXNrLlxuICAgICAqLyAgICB1bmlvbldpdGgodCkge1xuICAgICAgICBsZXQgZSA9IG5ldyBFZShhdC5jb21wYXJhdG9yKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuZmllbGRzKSBlID0gZS5hZGQodCk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5hZGQobik7XG4gICAgICAgIHJldHVybiBuZXcgdmUoZS50b0FycmF5KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZmllbGRzKSBpZiAoZS5pc1ByZWZpeE9mKHQpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudCh0aGlzLmZpZWxkcywgdC5maWVsZHMsICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxuICovIGNsYXNzIFBlIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLm5hbWUgPSBcIkJhc2U2NERlY29kZUVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIENvbnZlcnRzIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYmluYXJ5IHN0cmluZy4gKi9cbi8qKiBUcnVlIGlmIGFuZCBvbmx5IGlmIHRoZSBCYXNlNjQgY29udmVyc2lvbiBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIGJlKCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgVmUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5iaW5hcnlTdHJpbmcgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdG9iKHQpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgYERPTUV4Y2VwdGlvbmAgaXMgZGVmaW5lZCBiZWZvcmUgdXNpbmcgaXQgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyBcIlJlZmVyZW5jZUVycm9yOiBQcm9wZXJ0eSAnRE9NRXhjZXB0aW9uJyBkb2Vzbid0IGV4aXN0XCIgaW4gcmVhY3QtbmF0aXZlLlxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy83MTE1KVxuICAgICAgICAgICAgICAgIHRocm93IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiB0IGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uID8gbmV3IFBlKFwiSW52YWxpZCBiYXNlNjQgc3RyaW5nOiBcIiArIHQpIDogdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiogQ29udmVydHMgYSBiaW5hcnkgc3RyaW5nIHRvIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nLiAqLyAodCk7XG4gICAgICAgIHJldHVybiBuZXcgVmUoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOyBSZW1vdmUgdGhlIGNvcHkgb2YgdGhlIGJ5dGUgc3RyaW5nIGhlcmUgYXMgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gaXMgZnJlcXVlbnRseSBjYWxsZWQgZHVyaW5nIGluZGV4aW5nLlxuICAgICAgICBjb25zdCBlID0gXG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYW4gVWludDhhcnJheSB0byBhIGJpbmFyeSBzdHJpbmcuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgbGV0IGUgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSBlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodFtuXSk7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGEgYmluYXJ5IHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICovICh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBWZShlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5leHQ6ICgpID0+IHQgPCB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGggPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQodCsrKSxcbiAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdCA9IHRoaXMuYmluYXJ5U3RyaW5nLCBidG9hKHQpO1xuICAgICAgICB2YXIgdDtcbiAgICB9XG4gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZVtuXSA9IHQuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gZXQodGhpcy5iaW5hcnlTdHJpbmcsIHQuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gdC5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG5WZS5FTVBUWV9CWVRFX1NUUklORyA9IG5ldyBWZShcIlwiKTtcblxuY29uc3QgU2UgPSBuZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHZhbHVlcyBmb3IgYSB0aW1lc3RhbXAgdmFsdWUgaW50byBhIFwic2Vjb25kcyBhbmRcbiAqIG5hbm9zXCIgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gRGUodCkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChGKCEhdCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgLy8gVGhlIGRhdGUgc3RyaW5nIGNhbiBoYXZlIGhpZ2hlciBwcmVjaXNpb24gKG5hbm9zKSB0aGFuIHRoZSBEYXRlIGNsYXNzXG4gICAgICAgIC8vIChtaWxsaXMpLCBzbyB3ZSBkbyBzb21lIGN1c3RvbSBwYXJzaW5nIGhlcmUuXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBjb25zdCBuID0gU2UuZXhlYyh0KTtcbiAgICAgICAgaWYgKEYoISFuKSwgblsxXSkge1xuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cbiAgICAgICAgICAgIGxldCB0ID0gblsxXTtcbiAgICAgICAgICAgIHQgPSAodCArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigwLCA5KSwgZSA9IE51bWJlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBEYXRlKHQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogTWF0aC5mbG9vcihzLmdldFRpbWUoKSAvIDFlMyksXG4gICAgICAgICAgICBuYW5vczogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBDZSh0LnNlY29uZHMpLFxuICAgICAgICBuYW5vczogQ2UodC5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIENlKHQpIHtcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ID8gdCA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBOdW1iZXIodCkgOiAwO1xufVxuXG4vKiogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBCbG9icyBpbnRvIGEgQnl0ZVN0cmluZy4gKi8gZnVuY3Rpb24geGUodCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gVmUuZnJvbUJhc2U2NFN0cmluZyh0KSA6IFZlLmZyb21VaW50OEFycmF5KHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIE5lKHQpIHtcbiAgICB2YXIgZSwgbjtcbiAgICByZXR1cm4gXCJzZXJ2ZXJfdGltZXN0YW1wXCIgPT09IChudWxsID09PSAobiA9ICgobnVsbCA9PT0gKGUgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0Lm1hcFZhbHVlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmZpZWxkcykgfHwge30pLl9fdHlwZV9fKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnN0cmluZ1ZhbHVlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFNlcnZlclRpbWVzdGFtcCBwcm90byB2YWx1ZSAodXNpbmcgdGhlIGludGVybmFsIGZvcm1hdCkuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIGJlZm9yZSB0aGlzIFNlcnZlclRpbWVzdGFtcCB3YXMgc2V0LlxuICpcbiAqIFByZXNlcnZpbmcgdGhlIHByZXZpb3VzIHZhbHVlcyBhbGxvd3MgdGhlIHVzZXIgdG8gZGlzcGxheSB0aGUgbGFzdCByZXNvbGVkXG4gKiB2YWx1ZSB1bnRpbCB0aGUgYmFja2VuZCByZXNwb25kcyB3aXRoIHRoZSB0aW1lc3RhbXAuXG4gKi9cbmZ1bmN0aW9uIGtlKHQpIHtcbiAgICBjb25zdCBlID0gdC5tYXBWYWx1ZS5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fO1xuICAgIHJldHVybiBOZShlKSA/IGtlKGUpIDogZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2NhbCB0aW1lIGF0IHdoaWNoIHRoaXMgdGltZXN0YW1wIHdhcyBmaXJzdCBzZXQuXG4gKi8gZnVuY3Rpb24gTWUodCkge1xuICAgIGNvbnN0IGUgPSBEZSh0Lm1hcFZhbHVlLmZpZWxkcy5fX2xvY2FsX3dyaXRlX3RpbWVfXy50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBPZSB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCB1KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IHU7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzICRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3ICRlKFwiXCIsIFwiXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEZWZhdWx0RGF0YWJhc2UoKSB7XG4gICAgICAgIHJldHVybiBcIihkZWZhdWx0KVwiID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiAkZSAmJiB0LnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiYgdC5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBGZSA9IHtcbiAgICBtYXBWYWx1ZToge1xuICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwiX19tYXhfX1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCBCZSA9IHtcbiAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG59O1xuXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovXG5mdW5jdGlvbiBMZSh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IE5lKHQpID8gNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiBlbih0KSA/IDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDogMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDogJCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIHFlKHQsIGUpIHtcbiAgICBpZiAodCA9PT0gZSkgcmV0dXJuICEwO1xuICAgIGNvbnN0IG4gPSBMZSh0KTtcbiAgICBpZiAobiAhPT0gTGUoZSkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgOTAwNzE5OTI1NDc0MDk5MSAvKiBUeXBlT3JkZXIuTWF4VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBNZSh0KS5pc0VxdWFsKE1lKGUpKTtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlICYmIHQudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gdC50aW1lc3RhbXBWYWx1ZSA9PT0gZS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBEZSh0LnRpbWVzdGFtcFZhbHVlKSwgcyA9IERlKGUudGltZXN0YW1wVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uc2Vjb25kcyA9PT0gcy5zZWNvbmRzICYmIG4ubmFub3MgPT09IHMubmFub3M7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHhlKHQuYnl0ZXNWYWx1ZSkuaXNFcXVhbCh4ZShlLmJ5dGVzVmFsdWUpKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlID09PSBlLnJlZmVyZW5jZVZhbHVlO1xuXG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIENlKHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IENlKGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgQ2UodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IENlKGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIHQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiBlKSByZXR1cm4gQ2UodC5pbnRlZ2VyVmFsdWUpID09PSBDZShlLmludGVnZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ2UodC5kb3VibGVWYWx1ZSksIHMgPSBDZShlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gcyA/IEJ0KG4pID09PSBCdChzKSA6IGlzTmFOKG4pICYmIGlzTmFOKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gbnQodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgcWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChtZShuKSAhPT0gbWUocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFxZShuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVWUodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBxZSh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiBLZSh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBMZSh0KSwgcyA9IExlKGUpO1xuICAgIGlmIChuICE9PSBzKSByZXR1cm4gZXQobiwgcyk7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGV0KHQuYm9vbGVhblZhbHVlLCBlLmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IENlKHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpLCBzID0gQ2UoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHMgPyAtMSA6IG4gPiBzID8gMSA6IG4gPT09IHMgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihzKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gR2UodC50aW1lc3RhbXBWYWx1ZSwgZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gR2UoTWUodCksIE1lKGUpKTtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LnN0cmluZ1ZhbHVlLCBlLnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHhlKHQpLCBzID0geGUoZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocyk7XG4gICAgICAgIH0odC5ieXRlc1ZhbHVlLCBlLmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNwbGl0KFwiL1wiKSwgcyA9IGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBldChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LnJlZmVyZW5jZVZhbHVlLCBlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBldChDZSh0LmxhdGl0dWRlKSwgQ2UoZS5sYXRpdHVkZSkpO1xuICAgICAgICAgICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIGV0KENlKHQubG9uZ2l0dWRlKSwgQ2UoZS5sb25naXR1ZGUpKTtcbiAgICAgICAgfSh0Lmdlb1BvaW50VmFsdWUsIGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW10sIHMgPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gS2Uoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCA9PT0gRmUubWFwVmFsdWUgJiYgZSA9PT0gRmUubWFwVmFsdWUpIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKHQgPT09IEZlLm1hcFZhbHVlKSByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChlID09PSBGZS5tYXBWYWx1ZSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMobiksIGkgPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHMuc29ydCgpLCByLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGggJiYgdCA8IHIubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoc1t0XSwgclt0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBLZShuW3NbdF1dLCBpW3JbdF1dKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbykgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQocy5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEdlbmVyYXRlcyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGUgcHJvdmlkZWQgZmllbGQgdmFsdWUgKGFzIHVzZWQgaW4gVGFyZ2V0XG4gKiBzZXJpYWxpemF0aW9uKS5cbiAqLyAodC5tYXBWYWx1ZSwgZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93ICQoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEdlKHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHQubGVuZ3RoID09PSBlLmxlbmd0aCkgcmV0dXJuIGV0KHQsIGUpO1xuICAgIGNvbnN0IG4gPSBEZSh0KSwgcyA9IERlKGUpLCBpID0gZXQobi5zZWNvbmRzLCBzLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IGV0KG4ubmFub3MsIHMubmFub3MpO1xufVxuXG5mdW5jdGlvbiBRZSh0KSB7XG4gICAgcmV0dXJuIGplKHQpO1xufVxuXG5mdW5jdGlvbiBqZSh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gRGUodCk7XG4gICAgICAgIHJldHVybiBgdGltZSgke2Uuc2Vjb25kc30sJHtlLm5hbm9zfSlgO1xuICAgIH0odC50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHQuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8geGUodC5ieXRlc1ZhbHVlKS50b0Jhc2U2NCgpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyAobiA9IHQucmVmZXJlbmNlVmFsdWUsIFxuICAgIGh0LmZyb21OYW1lKG4pLnRvU3RyaW5nKCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IGBnZW8oJHsoZSA9IHQuZ2VvUG9pbnRWYWx1ZSkubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWAgOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0LnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IGUgKz0gXCIsXCIsIGUgKz0gamUocyk7XG4gICAgICAgIHJldHVybiBlICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSAoYW5kIHdpbGRseSBpbmFjY3VyYXRlKSBpbi1tZW1vcnkgc2l6ZSBmb3IgdGhlIGZpZWxkXG4gKiB2YWx1ZS5cbiAqXG4gKiBUaGUgbWVtb3J5IHNpemUgdGFrZXMgaW50byBhY2NvdW50IG9ubHkgdGhlIGFjdHVhbCB1c2VyIGRhdGEgYXMgaXQgcmVzaWRlc1xuICogaW4gbWVtb3J5IGFuZCBpZ25vcmVzIG9iamVjdCBvdmVyaGVhZC5cbiAqLyAodC5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHMgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHMgPyBzID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7amUodC5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfSh0Lm1hcFZhbHVlKSA6ICQoKTtcbiAgICB2YXIgZSwgbjtcbn1cblxuZnVuY3Rpb24gemUodCkge1xuICAgIHN3aXRjaCAoTGUodCkpIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDQ7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gODtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAvLyBHZW9Qb2ludHMgYXJlIG1hZGUgdXAgb2YgdHdvIGRpc3RpbmN0IG51bWJlcnMgKGxhdGl0dWRlICsgbG9uZ2l0dWRlKVxuICAgICAgICByZXR1cm4gMTY7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICBjb25zdCBlID0ga2UodCk7XG4gICAgICAgIHJldHVybiBlID8gMTYgKyB6ZShlKSA6IDE2O1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvRGF0YV9zdHJ1Y3R1cmVzOlxuICAgICAgICAvLyBcIkphdmFTY3JpcHQncyBTdHJpbmcgdHlwZSBpcyBbLi4uXSBhIHNldCBvZiBlbGVtZW50cyBvZiAxNi1iaXQgdW5zaWduZWRcbiAgICAgICAgLy8gaW50ZWdlciB2YWx1ZXNcIlxuICAgICAgICByZXR1cm4gMiAqIHQuc3RyaW5nVmFsdWUubGVuZ3RoO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB4ZSh0LmJ5dGVzVmFsdWUpLmFwcHJveGltYXRlQnl0ZVNpemUoKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5yZWR1Y2UoKCh0LCBlKSA9PiB0ICsgemUoZSkpLCAwKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgcmV0dXJuIGdlKHQuZmllbGRzLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlICs9IHQubGVuZ3RoICsgemUobik7XG4gICAgICAgICAgICB9KSksIGU7XG4gICAgICAgIH0odC5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93ICQoKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi9cbmZ1bmN0aW9uIFdlKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7dC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3QuZGF0YWJhc2V9L2RvY3VtZW50cy8ke2UucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uIEhlKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRG91YmxlVmFsdWUuICovXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gQXJyYXlWYWx1ZS4gKi9cbmZ1bmN0aW9uIEplKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiYXJyYXlWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gWWUodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJudWxsVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgTmFOLiAqLyBmdW5jdGlvbiBYZSh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBpc05hTihOdW1iZXIodC5kb3VibGVWYWx1ZSkpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBNYXBWYWx1ZS4gKi8gZnVuY3Rpb24gWmUodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJtYXBWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLiAqLyBmdW5jdGlvbiB0bih0KSB7XG4gICAgaWYgKHQuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBnZSh0Lm1hcFZhbHVlLmZpZWxkcywgKCh0LCBuKSA9PiBlLm1hcFZhbHVlLmZpZWxkc1t0XSA9IHRuKG4pKSksIGU7XG4gICAgfVxuICAgIGlmICh0LmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSBlLmFycmF5VmFsdWUudmFsdWVzW25dID0gdG4odC5hcnJheVZhbHVlLnZhbHVlc1tuXSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIFZhbHVlIHJlcHJlc2VudHMgdGhlIGNhbm9uaWNhbCB7QGxpbmsgI01BWF9WQUxVRX0gLiAqLyBmdW5jdGlvbiBlbih0KSB7XG4gICAgcmV0dXJuIFwiX19tYXhfX1wiID09PSAoKCh0Lm1hcFZhbHVlIHx8IHt9KS5maWVsZHMgfHwge30pLl9fdHlwZV9fIHx8IHt9KS5zdHJpbmdWYWx1ZTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxvd2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGluY2x1c2l2ZSkuICovIGZ1bmN0aW9uIG5uKHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gQmUgOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IFdlKCRlLmVtcHR5KCksIGh0LmVtcHR5KCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwibWFwVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogJCgpO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbGFyZ2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGV4Y2x1c2l2ZSkuICovIGZ1bmN0aW9uIHNuKHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gV2UoJGUuZW1wdHkoKSwgaHQuZW1wdHkoKSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIG1hcFZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IEZlIDogJCgpO1xufVxuXG5mdW5jdGlvbiBybih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEtlKHQudmFsdWUsIGUudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IHQuaW5jbHVzaXZlICYmICFlLmluY2x1c2l2ZSA/IC0xIDogIXQuaW5jbHVzaXZlICYmIGUuaW5jbHVzaXZlID8gMSA6IDA7XG59XG5cbmZ1bmN0aW9uIG9uKHQsIGUpIHtcbiAgICBjb25zdCBuID0gS2UodC52YWx1ZSwgZS52YWx1ZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogdC5pbmNsdXNpdmUgJiYgIWUuaW5jbHVzaXZlID8gMSA6ICF0LmluY2x1c2l2ZSAmJiBlLmluY2x1c2l2ZSA/IC0xIDogMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MgdW4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1bih7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKHQpIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAtIDE7ICsrbikgaWYgKGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhWmUoZSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QubGFzdFNlZ21lbnQoKV0sIGUgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcCh0LnBvcExhc3QoKSlbdC5sYXN0U2VnbWVudCgpXSA9IHRuKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbCh0KSB7XG4gICAgICAgIGxldCBlID0gYXQuZW1wdHlQYXRoKCksIG4gPSB7fSwgcyA9IFtdO1xuICAgICAgICB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyh0LCBuLCBzKSwgbiA9IHt9LCBzID0gW10sIGUgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSB0bih0KSA6IHMucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5maWVsZCh0LnBvcExhc3QoKSk7XG4gICAgICAgIFplKGUpICYmIGUubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSBlLm1hcFZhbHVlLmZpZWxkc1t0Lmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHFlKHRoaXMudmFsdWUsIHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGUubWFwVmFsdWUuZmllbGRzIHx8IChlLm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXTtcbiAgICAgICAgICAgIFplKHMpICYmIHMubWFwVmFsdWUuZmllbGRzIHx8IChzID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV0gPSBzKSwgZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgZ2UoZSwgKChlLCBuKSA9PiB0W2VdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZGVsZXRlIHRbZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IHVuKHRuKHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBjbih0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiBnZSh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgYXQoWyB0IF0pO1xuICAgICAgICBpZiAoWmUobikpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBjbihuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIGUucHVzaChzKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlLnB1c2gocy5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIGUucHVzaChzKTtcbiAgICB9KSksIG5ldyB2ZShlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIGFuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSBlLCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLnJlYWRUaW1lID0gcywgdGhpcy5jcmVhdGVUaW1lID0gaSwgXG4gICAgICAgIHRoaXMuZGF0YSA9IHIsIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gcnQubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIHJ0Lm1pbigpLCB1bi5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQodCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IGFuKHQsIDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gZSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBuLCBzLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbih0LCAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIGUsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gcnQubWluKCksIHVuLmVtcHR5KCksIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbih0LCAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gZSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBydC5taW4oKSwgdW4uZW1wdHkoKSwgMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgaXMgc3dpdGNoaW5nIHN0YXRlIGZyb20gYmVpbmcgYW4gaW52YWxpZCBvciBkZWxldGVkXG4gICAgICAgIC8vIGRvY3VtZW50IHRvIGEgdmFsaWQgKEZPVU5EX0RPQ1VNRU5UKSBkb2N1bWVudCwgZWl0aGVyIGR1ZSB0byByZWNlaXZpbmcgYW5cbiAgICAgICAgLy8gdXBkYXRlIGZyb20gV2F0Y2ggb3IgZHVlIHRvIGFwcGx5aW5nIGEgbG9jYWwgc2V0IG11dGF0aW9uIG9uIHRvcFxuICAgICAgICAvLyBvZiBhIGRlbGV0ZWQgZG9jdW1lbnQsIG91ciBiZXN0IGd1ZXNzIGFib3V0IGl0cyBjcmVhdGVUaW1lIHdvdWxkIGJlIHRoZVxuICAgICAgICAvLyB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBkb2N1bWVudCB0cmFuc2l0aW9uZWQgdG8gYSBGT1VORF9ET0NVTUVOVC5cbiAgICAgICAgcmV0dXJuICF0aGlzLmNyZWF0ZVRpbWUuaXNFcXVhbChydC5taW4oKSkgfHwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlICYmIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlIHx8ICh0aGlzLmNyZWF0ZVRpbWUgPSB0KSwgXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBlLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSB1bi5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIHRoaXMuZGF0YSA9IHVuLmVtcHR5KCksIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogRG9jdW1lbnRTdGF0ZS5IQVNfTE9DQUxfTVVUQVRJT05TICovICwgdGhpcy52ZXJzaW9uID0gcnQubWluKCksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRUaW1lID0gdCwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFN0YXRlLkhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgYW4gJiYgdGhpcy5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gdC5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSB0LmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwodC5kYXRhKTtcbiAgICB9XG4gICAgbXV0YWJsZUNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMucmVhZFRpbWUsIHRoaXMuY3JlYXRlVGltZSwgdGhpcy5kYXRhLmNsb25lKCksIHRoaXMuZG9jdW1lbnRTdGF0ZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYERvY3VtZW50KCR7dGhpcy5rZXl9LCAke3RoaXMudmVyc2lvbn0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnZhbHVlKX0sIHtjcmVhdGVUaW1lOiAke3RoaXMuY3JlYXRlVGltZX19KSwge2RvY3VtZW50VHlwZTogJHt0aGlzLmRvY3VtZW50VHlwZX19KSwge2RvY3VtZW50U3RhdGU6ICR7dGhpcy5kb2N1bWVudFN0YXRlfX0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdGhlIHZhbHVlIGZvciBmaWVsZCBgZmllbGRgIGluIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuIFRocm93cyBpZlxuICogdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIGJvdGggZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi9cbmNsYXNzIGhuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0LCB0aGlzLmluY2x1c2l2ZSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsbih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gZVtpXSwgbyA9IHQucG9zaXRpb25baV07XG4gICAgICAgIGlmIChyLmZpZWxkLmlzS2V5RmllbGQoKSkgcyA9IGh0LmNvbXBhcmF0b3IoaHQuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICBzID0gS2Uobywgbi5kYXRhLmZpZWxkKHIuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IHIuZGlyICYmIChzICo9IC0xKSwgMCAhPT0gcykgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGFmdGVyIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIGZuKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGwgPT09IGU7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICBpZiAodC5pbmNsdXNpdmUgIT09IGUuaW5jbHVzaXZlIHx8IHQucG9zaXRpb24ubGVuZ3RoICE9PSBlLnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIXFlKHQucG9zaXRpb25bbl0sIGUucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgZG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMuZGlyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9uKHQsIGUpIHtcbiAgICByZXR1cm4gdC5kaXIgPT09IGUuZGlyICYmIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3Mgd24ge31cblxuY2xhc3MgbW4gZXh0ZW5kcyB3biB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gdCwgdGhpcy5vcCA9IGUsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdC5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUgPyB0aGlzLmNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIodCwgZSwgbikgOiBuZXcgUG4odCwgZSwgbikgOiBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUgPyBuZXcgRG4odCwgbikgOiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUgPyBuZXcgQ24odCwgbikgOiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gZSA/IG5ldyB4bih0LCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlID8gbmV3IE5uKHQsIG4pIDogbmV3IG1uKHQsIGUsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlS2V5RmllbGRJbkZpbHRlcih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUgPyBuZXcgYm4odCwgbikgOiBuZXcgVm4odCwgbik7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IGUgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihLZShlLCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSBlICYmIExlKHRoaXMudmFsdWUpID09PSBMZShlKSAmJiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKEtlKGUsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICBtYXRjaGVzQ29tcGFyaXNvbih0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDwgMDtcblxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8PSAwO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgIT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPj0gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzSW5lcXVhbGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovICwgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbiAgICBnZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLmZpZWxkIDogbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIGduIGV4dGVuZHMgd24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWx0ZXJzID0gdCwgdGhpcy5vcCA9IGUsIHRoaXMuaHQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGduKHQsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHluKHRoaXMpID8gdm9pZCAwID09PSB0aGlzLmZpbHRlcnMuZmluZCgoZSA9PiAhZS5tYXRjaGVzKHQpKSkgOiB2b2lkIDAgIT09IHRoaXMuZmlsdGVycy5maW5kKChlID0+IGUubWF0Y2hlcyh0KSkpO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5odCB8fCAodGhpcy5odCA9IHRoaXMuZmlsdGVycy5yZWR1Y2UoKCh0LCBlKSA9PiB0LmNvbmNhdChlLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkpLCBbXSkpLCBcbiAgICAgICAgdGhpcy5odDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIG11dGFibGUgY29weSBvZiBgdGhpcy5maWx0ZXJzYFxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFtdLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbiAgICBnZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubHQoKHQgPT4gdC5pc0luZXF1YWxpdHkoKSkpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCA/IHQuZmllbGQgOiBudWxsO1xuICAgIH1cbiAgICAvLyBQZXJmb3JtcyBhIGRlcHRoLWZpcnN0IHNlYXJjaCB0byBmaW5kIGFuZCByZXR1cm4gdGhlIGZpcnN0IEZpZWxkRmlsdGVyIGluIHRoZSBjb21wb3NpdGUgZmlsdGVyXG4gICAgLy8gdGhhdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS4gUmV0dXJucyBgbnVsbGAgaWYgbm9uZSBvZiB0aGUgRmllbGRGaWx0ZXJzIHNhdGlzZnkgdGhlXG4gICAgLy8gcHJlZGljYXRlLlxuICAgIGx0KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBpZiAodChlKSkgcmV0dXJuIGU7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geW4odCkge1xuICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA9PT0gdC5vcDtcbn1cblxuZnVuY3Rpb24gcG4odCkge1xuICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gPT09IHQub3A7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGlzIGEgY29uanVuY3Rpb24gb2YgZmllbGQgZmlsdGVycyBvbmx5LiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBJbih0KSB7XG4gICAgcmV0dXJuIFRuKHQpICYmIHluKHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBkb2VzIG5vdCBjb250YWluIGFueSBjb21wb3NpdGUgZmlsdGVycy4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gVG4odCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIGlmIChlIGluc3RhbmNlb2YgZ24pIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbmZ1bmN0aW9uIEVuKHQpIHtcbiAgICBpZiAodCBpbnN0YW5jZW9mIG1uKSBcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5vcC50b1N0cmluZygpICsgUWUodC52YWx1ZSk7XG4gICAgaWYgKEluKHQpKSBcbiAgICAvLyBPbGRlciBTREsgdmVyc2lvbnMgdXNlIGFuIGltcGxpY2l0IEFORCBvcGVyYXRpb24gYmV0d2VlbiB0aGVpciBmaWx0ZXJzLlxuICAgIC8vIEluIHRoZSBuZXcgU0RLIHZlcnNpb25zLCB0aGUgZGV2ZWxvcGVyIG1heSB1c2UgYW4gZXhwbGljaXQgQU5EIGZpbHRlci5cbiAgICAvLyBUbyBzdGF5IGNvbnNpc3RlbnQgd2l0aCB0aGUgb2xkIHVzYWdlcywgd2UgYWRkIGEgc3BlY2lhbCBjYXNlIHRvIGVuc3VyZVxuICAgIC8vIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZXNlIHR3byBhcmUgdGhlIHNhbWUuIEZvciBleGFtcGxlOlxuICAgIC8vIGBjb2wud2hlcmVFcXVhbHMoXCJhXCIsIDEpLndoZXJlRXF1YWxzKFwiYlwiLCAyKWAgc2hvdWxkIGhhdmUgdGhlIHNhbWVcbiAgICAvLyBjYW5vbmljYWwgSUQgYXMgYGNvbC53aGVyZShhbmQoZXF1YWxzKFwiYVwiLDEpLCBlcXVhbHMoXCJiXCIsMikpKWAuXG4gICAgcmV0dXJuIHQuZmlsdGVycy5tYXAoKHQgPT4gRW4odCkpKS5qb2luKFwiLFwiKTtcbiAgICB7XG4gICAgICAgIC8vIGZpbHRlciBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlclxuICAgICAgICBjb25zdCBlID0gdC5maWx0ZXJzLm1hcCgodCA9PiBFbih0KSkpLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gYCR7dC5vcH0oJHtlfSlgO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQW4odCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgbW4gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgbW4gJiYgdC5vcCA9PT0gZS5vcCAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgcWUodC52YWx1ZSwgZS52YWx1ZSk7XG4gICAgfSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBnbiA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBnbiAmJiB0Lm9wID09PSBlLm9wICYmIHQuZmlsdGVycy5sZW5ndGggPT09IGUuZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0LmZpbHRlcnMucmVkdWNlKCgodCwgbiwgcykgPT4gdCAmJiBBbihuLCBlLmZpbHRlcnNbc10pKSwgITApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBjb250YWlucyBhbGwgZmlsdGVyIGZyb21cbiAqIGBjb21wb3NpdGVGaWx0ZXJgIHBsdXMgYWxsIHRoZSBnaXZlbiBmaWx0ZXJzIGluIGBvdGhlckZpbHRlcnNgLlxuICovICh0LCBlKSA6IHZvaWQgJCgpO1xufVxuXG5mdW5jdGlvbiBSbih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoZSk7XG4gICAgcmV0dXJuIGduLmNyZWF0ZShuLCB0Lm9wKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovIGZ1bmN0aW9uIHZuKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gYCR7dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHt0Lm9wfSAke1FlKHQudmFsdWUpfWA7XG4gICAgfVxuICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovICh0KSA6IHQgaW5zdGFuY2VvZiBnbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQub3AudG9TdHJpbmcoKSArIFwiIHtcIiArIHQuZ2V0RmlsdGVycygpLm1hcCh2bikuam9pbihcIiAsXCIpICsgXCJ9XCI7XG4gICAgfSh0KSA6IFwiRmlsdGVyXCI7XG59XG5cbmNsYXNzIFBuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIHRoaXMua2V5ID0gaHQuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gaHQuY29tcGFyYXRvcih0LmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihlKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBibiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBTbihcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIG5vdCBwcmVzZW50IHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgVm4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBTbihcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTbih0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSBlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKCh0ID0+IGh0LmZyb21OYW1lKHQucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBEbiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEplKGUpICYmIFVlKGUuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3MgQ24gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIFVlKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIHhuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGlmIChVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgIVVlKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIE5uIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFKZShlKSB8fCAhZS5hcnJheVZhbHVlLnZhbHVlcykgJiYgZS5hcnJheVZhbHVlLnZhbHVlcy5zb21lKCh0ID0+IFVlKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSByLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5mdCA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIE1uKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcga24odCwgZSwgbiwgcywgaSwgciwgbyk7XG59XG5cbmZ1bmN0aW9uIE9uKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5mdCkge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKHQgKz0gXCJ8Y2c6XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIHQgKz0gXCJ8ZjpcIiwgdCArPSBlLmZpbHRlcnMubWFwKCh0ID0+IEVuKHQpKSkuam9pbihcIixcIiksIFxuICAgICAgICB0ICs9IFwifG9iOlwiLCB0ICs9IGUub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQuZGlyO1xuICAgICAgICB9KHQpKSkuam9pbihcIixcIiksIEZ0KGUubGltaXQpIHx8ICh0ICs9IFwifGw6XCIsIHQgKz0gZS5saW1pdCksIGUuc3RhcnRBdCAmJiAodCArPSBcInxsYjpcIiwgXG4gICAgICAgIHQgKz0gZS5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgdCArPSBlLnN0YXJ0QXQucG9zaXRpb24ubWFwKCh0ID0+IFFlKHQpKSkuam9pbihcIixcIikpLCBcbiAgICAgICAgZS5lbmRBdCAmJiAodCArPSBcInx1YjpcIiwgdCArPSBlLmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgdCArPSBlLmVuZEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGUuZnQgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gZS5mdDtcbn1cblxuZnVuY3Rpb24gJG4odCwgZSkge1xuICAgIGlmICh0LmxpbWl0ICE9PSBlLmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKHQub3JkZXJCeS5sZW5ndGggIT09IGUub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFfbih0Lm9yZGVyQnlbbl0sIGUub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAodC5maWx0ZXJzLmxlbmd0aCAhPT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5maWx0ZXJzLmxlbmd0aDsgbisrKSBpZiAoIUFuKHQuZmlsdGVyc1tuXSwgZS5maWx0ZXJzW25dKSkgcmV0dXJuICExO1xuICAgIHJldHVybiB0LmNvbGxlY3Rpb25Hcm91cCA9PT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhdC5wYXRoLmlzRXF1YWwoZS5wYXRoKSAmJiAoISFmbih0LnN0YXJ0QXQsIGUuc3RhcnRBdCkgJiYgZm4odC5lbmRBdCwgZS5lbmRBdCkpKTtcbn1cblxuZnVuY3Rpb24gRm4odCkge1xuICAgIHJldHVybiBodC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbn1cblxuLyoqIFJldHVybnMgdGhlIGZpZWxkIGZpbHRlcnMgdGhhdCB0YXJnZXQgdGhlIGdpdmVuIGZpZWxkIHBhdGguICovIGZ1bmN0aW9uIEJuKHQsIGUpIHtcbiAgICByZXR1cm4gdC5maWx0ZXJzLmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgbW4gJiYgdC5maWVsZC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWVzIHRoYXQgYXJlIHVzZWQgaW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZXG4gKiBmaWx0ZXJzLiBSZXR1cm5zIGBudWxsYCBpZiB0aGVyZSBhcmUgbm8gc3VjaCBmaWx0ZXJzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIHRvIHVzZSBhcyB0aGUgbG93ZXIgYm91bmQgZm9yIGFzY2VuZGluZyBpbmRleCBzZWdtZW50IGF0XG4gKiB0aGUgcHJvdmlkZWQgYGZpZWxkUGF0aGAgKG9yIHRoZSB1cHBlciBib3VuZCBmb3IgYW4gZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqL1xuZnVuY3Rpb24gTG4odCwgZSwgbikge1xuICAgIGxldCBzID0gQmUsIGkgPSAhMDtcbiAgICAvLyBQcm9jZXNzIGFsbCBmaWx0ZXJzIHRvIGZpbmQgYSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgZmllbGQgc2VnbWVudFxuICAgIGZvciAoY29uc3QgbiBvZiBCbih0LCBlKSkge1xuICAgICAgICBsZXQgdCA9IEJlLCBlID0gITA7XG4gICAgICAgIHN3aXRjaCAobi5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgdCA9IG5uKG4udmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICB0ID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWUsIGUgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHQgPSBCZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBsb3dlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBybih7XG4gICAgICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogdCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZVxuICAgICAgICB9KSA8IDAgJiYgKHMgPSB0LCBpID0gZSk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHIgPSAwOyByIDwgdC5vcmRlckJ5Lmxlbmd0aDsgKytyKSB7XG4gICAgICAgIGlmICh0Lm9yZGVyQnlbcl0uZmllbGQuaXNFcXVhbChlKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucG9zaXRpb25bcl07XG4gICAgICAgICAgICBybih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBuLmluY2x1c2l2ZVxuICAgICAgICAgICAgfSkgPCAwICYmIChzID0gdCwgaSA9IG4uaW5jbHVzaXZlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBzLFxuICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIHRvIHVzZSBhcyB0aGUgdXBwZXIgYm91bmQgZm9yIGFzY2VuZGluZyBpbmRleCBzZWdtZW50IGF0XG4gKiB0aGUgcHJvdmlkZWQgYGZpZWxkUGF0aGAgKG9yIHRoZSBsb3dlciBib3VuZCBmb3IgYSBkZXNjZW5kaW5nIHNlZ21lbnQpLlxuICovIGZ1bmN0aW9uIHFuKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IEZlLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgQm4odCwgZSkpIHtcbiAgICAgICAgbGV0IHQgPSBGZSwgZSA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHQgPSBzbihuLnZhbHVlKSwgZSA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICB0ID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWUsIGUgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHQgPSBGZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyB1cHBlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBvbih7XG4gICAgICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogdCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZVxuICAgICAgICB9KSA+IDAgJiYgKHMgPSB0LCBpID0gZSk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHIgPSAwOyByIDwgdC5vcmRlckJ5Lmxlbmd0aDsgKytyKSB7XG4gICAgICAgIGlmICh0Lm9yZGVyQnlbcl0uZmllbGQuaXNFcXVhbChlKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucG9zaXRpb25bcl07XG4gICAgICAgICAgICBvbih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBuLmluY2x1c2l2ZVxuICAgICAgICAgICAgfSkgPiAwICYmIChzID0gdCwgaSA9IG4uaW5jbHVzaXZlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBzLFxuICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlZ21lbnRzIG9mIGEgcGVyZmVjdCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuY2xhc3MgVW4ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgbyA9IG51bGwsIHUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5leHBsaWNpdE9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCBcbiAgICAgICAgdGhpcy5saW1pdCA9IGksIHRoaXMubGltaXRUeXBlID0gciwgdGhpcy5zdGFydEF0ID0gbywgdGhpcy5lbmRBdCA9IHUsIHRoaXMuZHQgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxuICAgICAgICB0aGlzLl90ID0gbnVsbCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0O1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgaW5zdGFuY2Ugd2l0aCB0aGUgb3B0aW9ucyBwcm92aWRlZC4gKi8gZnVuY3Rpb24gS24odCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgIHJldHVybiBuZXcgVW4odCwgZSwgbiwgcywgaSwgciwgbywgdSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIGF0IGBwYXRoYCAqLyBmdW5jdGlvbiBHbih0KSB7XG4gICAgcmV0dXJuIG5ldyBVbih0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gUW4odCkge1xuICAgIHJldHVybiAwID09PSB0LmZpbHRlcnMubGVuZ3RoICYmIG51bGwgPT09IHQubGltaXQgJiYgbnVsbCA9PSB0LnN0YXJ0QXQgJiYgbnVsbCA9PSB0LmVuZEF0ICYmICgwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggfHwgMSA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoICYmIHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkLmlzS2V5RmllbGQoKSk7XG59XG5cbmZ1bmN0aW9uIGpuKHQpIHtcbiAgICByZXR1cm4gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gem4odCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiB0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHNcbiAqIHdpdGhpbiB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIFduKHQpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1wbGljaXQgb3JkZXIgYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyIGJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuXG4gKi8gZnVuY3Rpb24gSG4odCkge1xuICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgIGlmIChudWxsID09PSBlLmR0KSB7XG4gICAgICAgIGUuZHQgPSBbXTtcbiAgICAgICAgY29uc3QgdCA9IHpuKGUpLCBuID0gam4oZSk7XG4gICAgICAgIGlmIChudWxsICE9PSB0ICYmIG51bGwgPT09IG4pIFxuICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXG4gICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cbiAgICAgICAgdC5pc0tleUZpZWxkKCkgfHwgZS5kdC5wdXNoKG5ldyBkbih0KSksIGUuZHQucHVzaChuZXcgZG4oYXQua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmV4cGxpY2l0T3JkZXJCeSkgZS5kdC5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAodCA9ICEwKTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5W2UuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICBlLmR0LnB1c2gobmV3IGRuKGF0LmtleUZpZWxkKCksIHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZS5kdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIEpuKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICBpZiAoIWUuX3QpIGlmIChcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IGUubGltaXRUeXBlKSBlLl90ID0gTW4oZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgSG4oZSksIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTsgZWxzZSB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgSG4oZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHQucHVzaChuZXcgZG4obi5maWVsZCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgaG4oZS5lbmRBdC5wb3NpdGlvbiwgZS5lbmRBdC5pbmNsdXNpdmUpIDogbnVsbCwgcyA9IGUuc3RhcnRBdCA/IG5ldyBobihlLnN0YXJ0QXQucG9zaXRpb24sIGUuc3RhcnRBdC5pbmNsdXNpdmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgZS5fdCA9IE1uKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgbiwgcyk7XG4gICAgfVxuICAgIHJldHVybiBlLl90O1xufVxuXG5mdW5jdGlvbiBZbih0LCBlKSB7XG4gICAgZS5nZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpLCB6bih0KTtcbiAgICBjb25zdCBuID0gdC5maWx0ZXJzLmNvbmNhdChbIGUgXSk7XG4gICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gWG4odCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIGUsIG4sIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIFpuKHQsIGUpIHtcbiAgICByZXR1cm4gJG4oSm4odCksIEpuKGUpKSAmJiB0LmxpbWl0VHlwZSA9PT0gZS5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gdHModCkge1xuICAgIHJldHVybiBgJHtPbihKbih0KSl9fGx0OiR7dC5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gZXModCkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7ZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIHQuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgICAgIHQuZmlsdGVycy5sZW5ndGggPiAwICYmIChlICs9IGAsIGZpbHRlcnM6IFske3QuZmlsdGVycy5tYXAoKHQgPT4gdm4odCkpKS5qb2luKFwiLCBcIil9XWApLCBcbiAgICAgICAgRnQodC5saW1pdCkgfHwgKGUgKz0gXCIsIGxpbWl0OiBcIiArIHQubGltaXQpLCB0Lm9yZGVyQnkubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBvcmRlckJ5OiBbJHt0Lm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHt0LmRpcn0pYDtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsIFwiKX1dYCksIHQuc3RhcnRBdCAmJiAoZSArPSBcIiwgc3RhcnRBdDogXCIsIGUgKz0gdC5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgXG4gICAgICAgIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgdC5lbmRBdCAmJiAoZSArPSBcIiwgZW5kQXQ6IFwiLCBcbiAgICAgICAgZSArPSB0LmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgZSArPSB0LmVuZEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGBUYXJnZXQoJHtlfSlgO1xuICAgIH0oSm4odCkpfTsgbGltaXRUeXBlPSR7dC5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gbnModCwgZSkge1xuICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IGUua2V5Lmhhc0NvbGxlY3Rpb25JZCh0LmNvbGxlY3Rpb25Hcm91cCkgJiYgdC5wYXRoLmlzUHJlZml4T2YobikgOiBodC5pc0RvY3VtZW50S2V5KHQucGF0aCkgPyB0LnBhdGguaXNFcXVhbChuKSA6IHQucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBXZSBtdXN0IHVzZSBgcXVlcnlPcmRlckJ5KClgIHRvIGdldCB0aGUgbGlzdCBvZiBhbGwgb3JkZXJCeXMgKGJvdGggaW1wbGljaXQgYW5kIGV4cGxpY2l0KS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciBPUiBxdWVyaWVzLCBvcmRlckJ5IGFwcGxpZXMgdG8gYWxsIGRpc2p1bmN0aW9uIHRlcm1zIGFuZCBpbXBsaWNpdCBvcmRlckJ5cyBtdXN0XG4gICAgICAgIC8vIGJlIHRha2VuIGludG8gYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBxdWVyeSBcImEgPiAxIHx8IGI9PTFcIiBoYXMgYW4gaW1wbGljaXQgXCJvcmRlckJ5IGFcIiBkdWVcbiAgICAgICAgLy8gdG8gdGhlIGluZXF1YWxpdHksIGFuZCBpcyBldmFsdWF0ZWQgYXMgXCJhID4gMSBvcmRlckJ5IGEgfHwgYj09MSBvcmRlckJ5IGFcIi5cbiAgICAgICAgLy8gQSBkb2N1bWVudCB3aXRoIGNvbnRlbnQgb2Yge2I6MX0gbWF0Y2hlcyB0aGUgZmlsdGVycywgYnV0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmRlckJ5IGJlY2F1c2VcbiAgICAgICAgLy8gaXQncyBtaXNzaW5nIHRoZSBmaWVsZCAnYScuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBIbih0KSkgXG4gICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IGUuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfSh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmICh0LnN0YXJ0QXQgJiYgIVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbG4odCwgZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gdC5pbmNsdXNpdmUgPyBzIDw9IDAgOiBzIDwgMDtcbiAgICAgICAgfSh0LnN0YXJ0QXQsIEhuKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodC5lbmRBdCAmJiAhZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IGxuKHQsIGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVzaXZlID8gcyA+PSAwIDogcyA+IDA7XG4gICAgICAgIH0odC5lbmRBdCwgSG4odCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIHRoYXQgdGhpcyBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBTREsgdG8gZmFjaWxpdGF0ZSBtdWx0aS10YWJcbiAqIHN5bmNocm9uaXphdGlvbiBmb3IgcXVlcnkgcmVzdWx0cy5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHNzKHQpIHtcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgfHwgKHQucGF0aC5sZW5ndGggJSAyID09IDEgPyB0LnBhdGgubGFzdFNlZ21lbnQoKSA6IHQucGF0aC5nZXQodC5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gaXModCkge1xuICAgIHJldHVybiAoZSwgbikgPT4ge1xuICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgSG4odCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBycyhpLCBlLCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIHMgPSBzIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5maWVsZC5pc0tleUZpZWxkKCkgPyBodC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQodCksIGkgPSBuLmRhdGEuZmllbGQodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBzICYmIG51bGwgIT09IGkgPyBLZShzLCBpKSA6ICQoKTtcbiAgICB9KHQuZmllbGQsIGUsIG4pO1xuICAgIHN3aXRjaCAodC5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiBzO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGhhdmUgYW5cbiAqIGFzc29jaWF0ZWQgZXF1YWxzIGZ1bmN0aW9uIGFuZCBtdXN0IGJlIGltbXV0YWJsZS4gRW50cmllcyBpbiB0aGUgbWFwIGFyZVxuICogc3RvcmVkIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcbiAqIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBjb2xsaXNpb25zIG9mIGtleXMuXG4gKi8gY2xhc3Mgb3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tYXBLZXlGbiA9IHQsIHRoaXMuZXF1YWxzRm4gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbm5lciBtYXAgZm9yIGEga2V5L3ZhbHVlIHBhaXIuIER1ZSB0byB0aGUgcG9zc2liaWxpdHkgb2YgY29sbGlzaW9ucyB3ZVxuICAgICAgICAgKiBrZWVwIGEgbGlzdCBvZiBlbnRyaWVzIHRoYXQgd2UgZG8gYSBsaW5lYXIgc2VhcmNoIHRocm91Z2ggdG8gZmluZCBhbiBhY3R1YWxcbiAgICAgICAgICogbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbCBleHBlY3QgbmVhclxuICAgICAgICAgKiBjb25zdGFudCB0aW1lIGxvb2t1cHMgaW4gcHJhY3RpY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlubmVyID0ge30sIFxuICAgICAgICAvKiogVGhlIG51bWJlciBvZiBlbnRyaWVzIHN0b3JlZCBpbiB0aGUgbWFwICovXG4gICAgICAgIHRoaXMuaW5uZXJTaXplID0gMDtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcmV0dXJuIHRoaXMuaW5uZXJbbl0gPSBbIFsgdCwgZSBdIF0sIHZvaWQgdGhpcy5pbm5lclNpemUrKztcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgXG4gICAgICAgIC8vIFRoaXMgaXMgdXBkYXRpbmcgYW4gZXhpc3RpbmcgZW50cnkgYW5kIGRvZXMgbm90IGluY3JlYXNlIGBpbm5lclNpemVgLlxuICAgICAgICByZXR1cm4gdm9pZCAoc1tuXSA9IFsgdCwgZSBdKTtcbiAgICAgICAgcy5wdXNoKFsgdCwgZSBdKSwgdGhpcy5pbm5lclNpemUrKztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgdGhpcy5pbm5lclNpemUtLSwgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGdlKHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4geWUodGhpcy5pbm5lcik7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHVzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBjcygpIHtcbiAgICByZXR1cm4gdXM7XG59XG5cbmNvbnN0IGFzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBocyguLi50KSB7XG4gICAgbGV0IGUgPSBhcztcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuaW5zZXJ0KG4ua2V5LCBuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gbHModCkge1xuICAgIGxldCBlID0gYXM7XG4gICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IGUgPSBlLmluc2VydCh0LCBuLm92ZXJsYXllZERvY3VtZW50KSkpLCBlO1xufVxuXG5mdW5jdGlvbiBmcygpIHtcbiAgICByZXR1cm4gX3MoKTtcbn1cblxuZnVuY3Rpb24gZHMoKSB7XG4gICAgcmV0dXJuIF9zKCk7XG59XG5cbmZ1bmN0aW9uIF9zKCkge1xuICAgIHJldHVybiBuZXcgb3MoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbn1cblxuY29uc3Qgd3MgPSBuZXcgcGUoaHQuY29tcGFyYXRvcik7XG5cbmNvbnN0IG1zID0gbmV3IEVlKGh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBncyguLi50KSB7XG4gICAgbGV0IGUgPSBtcztcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuYWRkKG4pO1xuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCB5cyA9IG5ldyBFZShldCk7XG5cbmZ1bmN0aW9uIHBzKCkge1xuICAgIHJldHVybiB5cztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhbiBEb3VibGVWYWx1ZSBmb3IgYHZhbHVlYCB0aGF0IGlzIGVuY29kZWQgYmFzZWQgdGhlIHNlcmlhbGl6ZXInc1xuICogYHVzZVByb3RvM0pzb25gIHNldHRpbmcuXG4gKi8gZnVuY3Rpb24gSXModCwgZSkge1xuICAgIGlmICh0LnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgaWYgKGlzTmFOKGUpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IEJ0KGUpID8gXCItMFwiIDogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24gVHModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBFcyh0LCBlKSB7XG4gICAgcmV0dXJuIEx0KGUpID8gVHMoZSkgOiBJcyh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBVc2VkIHRvIHJlcHJlc2VudCBhIGZpZWxkIHRyYW5zZm9ybSBvbiBhIG11dGF0aW9uLiAqLyBjbGFzcyBBcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gUnModCwgZSwgbikge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgYnMgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJzZXJ2ZXJfdGltZXN0YW1wXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9fbG9jYWxfd3JpdGVfdGltZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBXZSBzaG91bGQgYXZvaWQgc3RvcmluZyBkZWVwbHkgbmVzdGVkIHNlcnZlciB0aW1lc3RhbXAgbWFwIHZhbHVlc1xuICAgICAgICAvLyBiZWNhdXNlIHdlIG5ldmVyIHVzZSB0aGUgaW50ZXJtZWRpYXRlIFwicHJldmlvdXMgdmFsdWVzXCIuXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyBwcmV2aW91czogNDJMLCBhZGQ6IHQxLCByZXN1bHQ6IHQxIC0+IDQyTFxuICAgICAgICAvLyBwcmV2aW91czogdDEsICBhZGQ6IHQyLCByZXN1bHQ6IHQyIC0+IDQyTCAoTk9UIHQyIC0+IHQxIC0+IDQyTClcbiAgICAgICAgLy8gcHJldmlvdXM6IHQyLCAgYWRkOiB0MywgcmVzdWx0OiB0MyAtPiA0MkwgKE5PVCB0MyAtPiB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIGBnZXRQcmV2aW91c1ZhbHVlYCByZWN1cnNpdmVseSB0cmF2ZXJzZXMgc2VydmVyIHRpbWVzdGFtcHMgdG8gZmluZCB0aGVcbiAgICAgICAgLy8gbGVhc3QgcmVjZW50IFZhbHVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBlICYmIE5lKGUpICYmIChlID0ga2UoZSkpLCBlICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSBlKSwgXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCBlKSA6IHQgaW5zdGFuY2VvZiBWcyA/IFNzKHQsIGUpIDogdCBpbnN0YW5jZW9mIERzID8gQ3ModCwgZSkgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBQcyh0LCBlKSwgcyA9IE5zKG4pICsgTnModC53dCk7XG4gICAgICAgIHJldHVybiBIZShuKSAmJiBIZSh0Lnd0KSA/IFRzKHMpIDogSXModC5zZXJpYWxpemVyLCBzKTtcbiAgICB9KHQsIGUpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24gdnModCwgZSwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFZzID8gU3ModCwgZSkgOiB0IGluc3RhbmNlb2YgRHMgPyBDcyh0LCBlKSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gUHModCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgeHMgPyBIZShuID0gZSkgfHwgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqLyAobikgPyBlIDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbiAgICB2YXIgbjtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBicyBleHRlbmRzIEFzIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgVnMgZXh0ZW5kcyBBcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFNzKHQsIGUpIHtcbiAgICBjb25zdCBuID0ga3MoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4uc29tZSgodCA9PiBxZSh0LCBlKSkpIHx8IG4ucHVzaChlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIERzIGV4dGVuZHMgQXMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBDcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBrcyhlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbiA9IG4uZmlsdGVyKCh0ID0+ICFxZSh0LCBlKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgeHMgZXh0ZW5kcyBBcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLnd0ID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE5zKHQpIHtcbiAgICByZXR1cm4gQ2UodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGtzKHQpIHtcbiAgICByZXR1cm4gSmUodCkgJiYgdC5hcnJheVZhbHVlLnZhbHVlcyA/IHQuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIE1zIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLnRyYW5zZm9ybSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPcyh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgVnMgJiYgZSBpbnN0YW5jZW9mIFZzIHx8IHQgaW5zdGFuY2VvZiBEcyAmJiBlIGluc3RhbmNlb2YgRHMgPyBudCh0LmVsZW1lbnRzLCBlLmVsZW1lbnRzLCBxZSkgOiB0IGluc3RhbmNlb2YgeHMgJiYgZSBpbnN0YW5jZW9mIHhzID8gcWUodC53dCwgZS53dCkgOiB0IGluc3RhbmNlb2YgYnMgJiYgZSBpbnN0YW5jZW9mIGJzO1xuICAgIH0odC50cmFuc2Zvcm0sIGUudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyAkcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBGcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSB0LCB0aGlzLmV4aXN0cyA9IGU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnM7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcyh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRnModCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSB0LmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISF0LnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6ICF0LnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBCcyh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSB0LmV4aXN0cyB8fCB0LmV4aXN0cyA9PT0gZS5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIExzIHt9XG5cbi8qKlxuICogQSB1dGlsaXR5IG1ldGhvZCB0byBjYWxjdWxhdGUgYSBgTXV0YXRpb25gIHJlcHJlc2VudGluZyB0aGUgb3ZlcmxheSBmcm9tIHRoZVxuICogZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50LCBhbmQgYSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgdGhlIGZpZWxkcyB0aGF0XG4gKiBhcmUgbXV0YXRlZCBieSB0aGUgbG9jYWwgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIHFzKHQsIGUpIHtcbiAgICBpZiAoIXQuaGFzTG9jYWxNdXRhdGlvbnMgfHwgZSAmJiAwID09PSBlLmZpZWxkcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIC8vIG1hc2sgaXMgbnVsbCB3aGVuIHNldHMgb3IgZGVsZXRlcyBhcmUgYXBwbGllZCB0byB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiB0LmlzTm9Eb2N1bWVudCgpID8gbmV3IFlzKHQua2V5LCBGcy5ub25lKCkpIDogbmV3IGpzKHQua2V5LCB0LmRhdGEsIEZzLm5vbmUoKSk7XG4gICAge1xuICAgICAgICBjb25zdCBuID0gdC5kYXRhLCBzID0gdW4uZW1wdHkoKTtcbiAgICAgICAgbGV0IGkgPSBuZXcgRWUoYXQuY29tcGFyYXRvcik7XG4gICAgICAgIGZvciAobGV0IHQgb2YgZS5maWVsZHMpIGlmICghaS5oYXModCkpIHtcbiAgICAgICAgICAgIGxldCBlID0gbi5maWVsZCh0KTtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBkZWxldGluZyBhIG5lc3RlZCBmaWVsZCwgd2UgdGFrZSB0aGUgaW1tZWRpYXRlIHBhcmVudCBhc1xuICAgICAgICAgICAgLy8gdGhlIG1hc2sgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHJlc3VsdGluZyBtdXRhdGlvbi5cbiAgICAgICAgICAgIC8vIEp1c3RpZmljYXRpb246IE5lc3RlZCBmaWVsZHMgY2FuIGNyZWF0ZSBwYXJlbnQgZmllbGRzIGltcGxpY2l0bHkuIElmXG4gICAgICAgICAgICAvLyBvbmx5IGEgbGVhZiBlbnRyeSBpcyBkZWxldGVkIGluIGxhdGVyIG11dGF0aW9ucywgdGhlIHBhcmVudCBmaWVsZFxuICAgICAgICAgICAgLy8gc2hvdWxkIHN0aWxsIHJlbWFpbiwgYnV0IHdlIG1heSBoYXZlIGxvc3QgdGhpcyBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIC8vIENvbnNpZGVyIG11dGF0aW9uIChmb28uYmFyIDEpLCB0aGVuIG11dGF0aW9uIChmb28uYmFyIGRlbGV0ZSgpKS5cbiAgICAgICAgICAgIC8vIFRoaXMgbGVhdmVzIHRoZSBmaW5hbCByZXN1bHQgKGZvbywge30pLiBEZXNwaXRlIHRoZSBmYWN0IHRoYXQgYGRvY2BcbiAgICAgICAgICAgIC8vIGhhcyB0aGUgY29ycmVjdCByZXN1bHQsIGBmb29gIGlzIG5vdCBpbiBgbWFza2AsIGFuZCB0aGUgcmVzdWx0aW5nXG4gICAgICAgICAgICAvLyBtdXRhdGlvbiB3b3VsZCBtaXNzIGBmb29gLlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gZSAmJiB0Lmxlbmd0aCA+IDEgJiYgKHQgPSB0LnBvcExhc3QoKSwgZSA9IG4uZmllbGQodCkpLCBudWxsID09PSBlID8gcy5kZWxldGUodCkgOiBzLnNldCh0LCBlKSwgXG4gICAgICAgICAgICBpID0gaS5hZGQodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB6cyh0LmtleSwgcywgbmV3IHZlKGkudG9BcnJheSgpKSwgRnMubm9uZSgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gVXModCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBqcyA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IEhzKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcykuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiB6cyA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFCcyh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIGUuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHMgPSBIcyh0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoV3ModCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgZSwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gcHJldmlvdXNNYXNrIC0gVGhlIGZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdCBhcmUgY2hhbmdlZCBieSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICovIGZ1bmN0aW9uIEtzKHQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGpzID8gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBpZiAoIUJzKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IHQudmFsdWUuY2xvbmUoKSwgciA9IEpzKHQuZmllbGRUcmFuc2Zvcm1zLCBzLCBlKTtcbiAgICAgICAgcmV0dXJuIGkuc2V0QWxsKHIpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoZS52ZXJzaW9uLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAvLyBTZXRNdXRhdGlvbiBvdmVyd3JpdGVzIGFsbCBmaWVsZHMuXG4gICAgICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovICh0LCBlLCBuLCBzKSA6IHQgaW5zdGFuY2VvZiB6cyA/IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgaWYgKCFCcyh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gSnModC5maWVsZFRyYW5zZm9ybXMsIHMsIGUpLCByID0gZS5kYXRhO1xuICAgICAgICBpZiAoci5zZXRBbGwoV3ModCkpLCByLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUudmVyc2lvbiwgcikuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGwgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbi51bmlvbldpdGgodC5maWVsZE1hc2suZmllbGRzKS51bmlvbldpdGgodC5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IHQuZmllbGQpKSk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAodCwgZSwgbiwgcykgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmIChCcyh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybiBlLmNvbnZlcnRUb05vRG9jdW1lbnQoZS52ZXJzaW9uKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAodCwgZSwgbik7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIEdzKHQsIGUpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZCksIGkgPSBQcyhzLnRyYW5zZm9ybSwgdCB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09PSBuICYmIChuID0gdW4uZW1wdHkoKSksIG4uc2V0KHMuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gUXModCwgZSkge1xuICAgIHJldHVybiB0LnR5cGUgPT09IGUudHlwZSAmJiAoISF0LmtleS5pc0VxdWFsKGUua2V5KSAmJiAoISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgdm9pZCAwID09PSBlIHx8ICEoIXQgfHwgIWUpICYmIG50KHQsIGUsICgodCwgZSkgPT4gT3ModCwgZSkpKTtcbiAgICB9KHQuZmllbGRUcmFuc2Zvcm1zLCBlLmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogTXV0YXRpb25UeXBlLlNldCAqLyA9PT0gdC50eXBlID8gdC52YWx1ZS5pc0VxdWFsKGUudmFsdWUpIDogMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi8gIT09IHQudHlwZSB8fCB0LmRhdGEuaXNFcXVhbChlLmRhdGEpICYmIHQuZmllbGRNYXNrLmlzRXF1YWwoZS5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIGpzIGV4dGVuZHMgTHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gcywgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogTXV0YXRpb25UeXBlLlNldCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIHpzIGV4dGVuZHMgTHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSBzLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIE11dGF0aW9uVHlwZS5QYXRjaCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZE1hc2s7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXcyh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIHQuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICB9XG4gICAgfSkpLCBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gSHModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIEYodC5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IHRbaV0sIG8gPSByLnRyYW5zZm9ybSwgdSA9IGUuZGF0YS5maWVsZChyLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoci5maWVsZCwgdnMobywgdSwgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgdHJhbnNmb3JtcyBvbi5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIEpzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gaS50cmFuc2Zvcm0sIHIgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHMuc2V0KGkuZmllbGQsIFJzKHQsIHIsIGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgWXMgZXh0ZW5kcyBMcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMiAvKiBNdXRhdGlvblR5cGUuRGVsZXRlICovICwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBYcyBleHRlbmRzIExzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAzIC8qIE11dGF0aW9uVHlwZS5WZXJpZnkgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIFpzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIC0gTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIC0gVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5sb2NhbFdyaXRlVGltZSA9IGUsIHRoaXMuYmFzZU11dGF0aW9ucyA9IG4sIHRoaXMubXV0YXRpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxuICAgICAqIHRvIGNvbXB1dGUgdGhlIHN0YXRlIG9mIHRoZSByZW1vdGUgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqLyAgICBhcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvblJlc3VsdHM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLm11dGF0aW9uc1tlXTtcbiAgICAgICAgICAgIGlmIChzLmtleS5pc0VxdWFsKHQua2V5KSkge1xuICAgICAgICAgICAgICAgIFVzKHMsIHQsIG5bZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gbXV0YXRlZEZpZWxkcyAtIEZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIGFsbCB0aGUgZmllbGRzIHRoYXQgYXJlIG11dGF0ZWQuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcodCwgZSkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKHQua2V5KSAmJiAoZSA9IEtzKG4sIHQsIGUsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMubXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKHQua2V5KSAmJiAoZSA9IEtzKG4sIHQsIGUsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLiBSZXR1cm5zIGEgYERvY3VtZW50S2V5YCB0byBgTXV0YXRpb25gIG1hcCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlcGxhY2UgYWxsIHRoZSBtdXRhdGlvbiBhcHBsaWNhdGlvbnMuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHQsIGUpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcbiAgICAgICAgLy8gdG8gTyhuKS5cbiAgICAgICAgY29uc3QgbiA9IGRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0LmdldChzLmtleSksIHIgPSBpLm92ZXJsYXllZERvY3VtZW50O1xuICAgICAgICAgICAgLy8gVE9ETyhtdXRhYmxlZG9jdW1lbnRzKTogVGhpcyBtZXRob2Qgc2hvdWxkIHRha2UgYSBNdXRhYmxlRG9jdW1lbnRNYXBcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgY2FzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gdGhpcy5hcHBseVRvTG9jYWxWaWV3KHIsIGkubXV0YXRlZEZpZWxkcyk7XG4gICAgICAgICAgICAvLyBTZXQgbXV0YXRlZEZpZWxkcyB0byBudWxsIGlmIHRoZSBkb2N1bWVudCBpcyBvbmx5IGZyb20gbG9jYWwgbXV0YXRpb25zLlxuICAgICAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgU2V0IG9yIERlbGV0ZSBtdXRhdGlvbiwgaW5zdGVhZCBvZiB0cnlpbmcgdG8gY3JlYXRlIGFcbiAgICAgICAgICAgIC8vIHBhdGNoIG11dGF0aW9uIGFzIHRoZSBvdmVybGF5LlxuICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuaGFzKHMua2V5KSA/IG51bGwgOiBvO1xuICAgICAgICAgICAgY29uc3QgdSA9IHFzKHIsIG8pO1xuICAgICAgICAgICAgbnVsbCAhPT0gdSAmJiBuLnNldChzLmtleSwgdSksIHIuaXNWYWxpZERvY3VtZW50KCkgfHwgci5jb252ZXJ0VG9Ob0RvY3VtZW50KHJ0Lm1pbigpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgZ3MoKSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSB0LmJhdGNoSWQgJiYgbnQodGhpcy5tdXRhdGlvbnMsIHQubXV0YXRpb25zLCAoKHQsIGUpID0+IFFzKHQsIGUpKSkgJiYgbnQodGhpcy5iYXNlTXV0YXRpb25zLCB0LmJhc2VNdXRhdGlvbnMsICgodCwgZSkgPT4gUXModCwgZSkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovIGNsYXNzIHRpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IHQsIHRoaXMuY29tbWl0VmVyc2lvbiA9IGUsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKHQsIGUsIG4pIHtcbiAgICAgICAgRih0Lm11dGF0aW9ucy5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IHMgPSB3cztcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyB0aSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGFuIG92ZXJsYXkgY29tcHV0ZWQgYnkgRmlyZXN0b3JlLlxuICpcbiAqIEhvbGRzIGluZm9ybWF0aW9uIGFib3V0IGEgbXV0YXRpb24gYW5kIHRoZSBsYXJnZXN0IGJhdGNoIGlkIGluIEZpcmVzdG9yZSB3aGVuXG4gKiB0aGUgbXV0YXRpb24gd2FzIGNyZWF0ZWQuXG4gKi8gY2xhc3MgZWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IHQsIHRoaXMubXV0YXRpb24gPSBlO1xuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uLmtleTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIHRoaXMubXV0YXRpb24gPT09IHQubXV0YXRpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE92ZXJsYXl7XFxuICAgICAgbGFyZ2VzdEJhdGNoSWQ6ICR7dGhpcy5sYXJnZXN0QmF0Y2hJZH0sXFxuICAgICAgbXV0YXRpb246ICR7dGhpcy5tdXRhdGlvbi50b1N0cmluZygpfVxcbiAgICB9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbmNyZXRlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBZ2dyZWdhdGUgdHlwZS5cbiAqLyBjbGFzcyBuaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmFsaWFzID0gdCwgdGhpcy5ndCA9IGUsIHRoaXMuZmllbGRQYXRoID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHNpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY291bnQgPSB0LCB0aGlzLnVuY2hhbmdlZE5hbWVzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgaWksIHJpO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gb2kodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICQoKTtcblxuICAgICAgY2FzZSBxLkNBTkNFTExFRDpcbiAgICAgIGNhc2UgcS5VTktOT1dOOlxuICAgICAgY2FzZSBxLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBxLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgcS5JTlRFUk5BTDpcbiAgICAgIGNhc2UgcS5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBxLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIHEuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgcS5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIHEuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIHEuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIHEuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIHEuQUJPUlRFRDpcbiAgICAgIGNhc2UgcS5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIHEuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgcS5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIHVpKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gayhcIkdSUEMgZXJyb3IgaGFzIG5vIC5jb2RlXCIpLCBxLlVOS05PV047XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIGlpLk9LOlxuICAgICAgICByZXR1cm4gcS5PSztcblxuICAgICAgY2FzZSBpaS5DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBxLkNBTkNFTExFRDtcblxuICAgICAgY2FzZSBpaS5VTktOT1dOOlxuICAgICAgICByZXR1cm4gcS5VTktOT1dOO1xuXG4gICAgICBjYXNlIGlpLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgICByZXR1cm4gcS5ERUFETElORV9FWENFRURFRDtcblxuICAgICAgY2FzZSBpaS5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgIHJldHVybiBxLlJFU09VUkNFX0VYSEFVU1RFRDtcblxuICAgICAgY2FzZSBpaS5JTlRFUk5BTDpcbiAgICAgICAgcmV0dXJuIHEuSU5URVJOQUw7XG5cbiAgICAgIGNhc2UgaWkuVU5BVkFJTEFCTEU6XG4gICAgICAgIHJldHVybiBxLlVOQVZBSUxBQkxFO1xuXG4gICAgICBjYXNlIGlpLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuIHEuVU5BVVRIRU5USUNBVEVEO1xuXG4gICAgICBjYXNlIGlpLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICAgIHJldHVybiBxLklOVkFMSURfQVJHVU1FTlQ7XG5cbiAgICAgIGNhc2UgaWkuTk9UX0ZPVU5EOlxuICAgICAgICByZXR1cm4gcS5OT1RfRk9VTkQ7XG5cbiAgICAgIGNhc2UgaWkuQUxSRUFEWV9FWElTVFM6XG4gICAgICAgIHJldHVybiBxLkFMUkVBRFlfRVhJU1RTO1xuXG4gICAgICBjYXNlIGlpLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICByZXR1cm4gcS5QRVJNSVNTSU9OX0RFTklFRDtcblxuICAgICAgY2FzZSBpaS5GQUlMRURfUFJFQ09ORElUSU9OOlxuICAgICAgICByZXR1cm4gcS5GQUlMRURfUFJFQ09ORElUSU9OO1xuXG4gICAgICBjYXNlIGlpLkFCT1JURUQ6XG4gICAgICAgIHJldHVybiBxLkFCT1JURUQ7XG5cbiAgICAgIGNhc2UgaWkuT1VUX09GX1JBTkdFOlxuICAgICAgICByZXR1cm4gcS5PVVRfT0ZfUkFOR0U7XG5cbiAgICAgIGNhc2UgaWkuVU5JTVBMRU1FTlRFRDpcbiAgICAgICAgcmV0dXJuIHEuVU5JTVBMRU1FTlRFRDtcblxuICAgICAgY2FzZSBpaS5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiBxLkRBVEFfTE9TUztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gSFRUUCByZXNwb25zZSdzIGVycm9yIHN0YXR1cyB0byB0aGUgZXF1aXZhbGVudCBlcnJvciBjb2RlLlxuICpcbiAqIEBwYXJhbSBzdGF0dXMgLSBBbiBIVFRQIGVycm9yIHJlc3BvbnNlIHN0YXR1cyAoXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gKiBcIlVOS05PV05cIiwgZXRjLilcbiAqIEByZXR1cm5zIFRoZSBlcXVpdmFsZW50IENvZGUuIE5vbi1tYXRjaGluZyByZXNwb25zZXMgYXJlIG1hcHBlZCB0b1xuICogICAgIENvZGUuVU5LTk9XTi5cbiAqLyAocmkgPSBpaSB8fCAoaWkgPSB7fSkpW3JpLk9LID0gMF0gPSBcIk9LXCIsIHJpW3JpLkNBTkNFTExFRCA9IDFdID0gXCJDQU5DRUxMRURcIiwgXG5yaVtyaS5VTktOT1dOID0gMl0gPSBcIlVOS05PV05cIiwgcmlbcmkuSU5WQUxJRF9BUkdVTUVOVCA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCIsIFxucmlbcmkuREVBRExJTkVfRVhDRUVERUQgPSA0XSA9IFwiREVBRExJTkVfRVhDRUVERURcIiwgcmlbcmkuTk9UX0ZPVU5EID0gNV0gPSBcIk5PVF9GT1VORFwiLCBcbnJpW3JpLkFMUkVBRFlfRVhJU1RTID0gNl0gPSBcIkFMUkVBRFlfRVhJU1RTXCIsIHJpW3JpLlBFUk1JU1NJT05fREVOSUVEID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCIsIFxucmlbcmkuVU5BVVRIRU5USUNBVEVEID0gMTZdID0gXCJVTkFVVEhFTlRJQ0FURURcIiwgcmlbcmkuUkVTT1VSQ0VfRVhIQVVTVEVEID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiLCBcbnJpW3JpLkZBSUxFRF9QUkVDT05ESVRJT04gPSA5XSA9IFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLCByaVtyaS5BQk9SVEVEID0gMTBdID0gXCJBQk9SVEVEXCIsIFxucmlbcmkuT1VUX09GX1JBTkdFID0gMTFdID0gXCJPVVRfT0ZfUkFOR0VcIiwgcmlbcmkuVU5JTVBMRU1FTlRFRCA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiLCBcbnJpW3JpLklOVEVSTkFMID0gMTNdID0gXCJJTlRFUk5BTFwiLCByaVtyaS5VTkFWQUlMQUJMRSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIiwgcmlbcmkuREFUQV9MT1NTID0gMTVdID0gXCJEQVRBX0xPU1NcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWFuYWdlcyBcInRlc3RpbmcgaG9va3NcIiwgaG9va3MgaW50byB0aGUgaW50ZXJuYWxzIG9mIHRoZSBTREsgdG8gdmVyaWZ5XG4gKiBpbnRlcm5hbCBzdGF0ZSBhbmQgZXZlbnRzIGR1cmluZyBpbnRlZ3JhdGlvbiB0ZXN0cy4gRG8gbm90IHVzZSB0aGlzIGNsYXNzXG4gKiBleGNlcHQgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKlxuICogVGhlcmUgYXJlIHR3byB3YXlzIHRvIHJldHJpZXZlIHRoZSBnbG9iYWwgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3M6XG4gKiAxLiBUaGUgYGluc3RhbmNlYCBwcm9wZXJ0eSwgd2hpY2ggcmV0dXJucyBudWxsIGlmIHRoZSBnbG9iYWwgc2luZ2xldG9uXG4gKiAgICAgIGluc3RhbmNlIGhhcyBub3QgYmVlbiBjcmVhdGVkLiBVc2UgdGhpcyBwcm9wZXJ0eSBpZiB0aGUgY2FsbGVyIHNob3VsZFxuICogICAgICBcImRvIG5vdGhpbmdcIiBpZiB0aGVyZSBhcmUgbm8gdGVzdGluZyBob29rcyByZWdpc3RlcmVkLCBzdWNoIGFzIHdoZW5cbiAqICAgICAgZGVsaXZlcmluZyBhbiBldmVudCB0byBub3RpZnkgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gKiAyLiBUaGUgYGdldE9yQ3JlYXRlSW5zdGFuY2UoKWAgbWV0aG9kLCB3aGljaCBjcmVhdGVzIHRoZSBnbG9iYWwgc2luZ2xldG9uXG4gKiAgICAgIGluc3RhbmNlIGlmIGl0IGhhcyBub3QgYmVlbiBjcmVhdGVkLiBVc2UgdGhpcyBtZXRob2QgaWYgdGhlIGluc3RhbmNlIGlzXG4gKiAgICAgIG5lZWRlZCB0bywgZm9yIGV4YW1wbGUsIHJlZ2lzdGVyIGEgY2FsbGJhY2suXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIGNpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzID0gbmV3IE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MsIG9yIG51bGwgaWYgaXQgaGFzIG5vdCBiZWVuXG4gICAgICogaW5pdGlhbGl6ZWQuXG4gICAgICovICAgIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBhaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MsIGNyZWF0aW5nIGl0IGlmIGlzIGhhcyBuZXZlclxuICAgICAqIGJlZW4gY3JlYXRlZCBiZWZvcmUuXG4gICAgICovICAgIHN0YXRpYyBnZXRPckNyZWF0ZUluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gYWkgJiYgKGFpID0gbmV3IGNpKSwgYWk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIG5vdGlmaWVkIHdoZW4gYW4gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaFxuICAgICAqIG9jY3VycyBpbiB0aGUgV2F0Y2ggbGlzdGVuIHN0cmVhbS5cbiAgICAgKlxuICAgICAqIFRoZSByZWxhdGl2ZSBvcmRlciBpbiB3aGljaCBjYWxsYmFja3MgYXJlIG5vdGlmaWVkIGlzIHVuc3BlY2lmaWVkOyBkbyBub3RcbiAgICAgKiByZWx5IG9uIGFueSBwYXJ0aWN1bGFyIG9yZGVyaW5nLiBJZiBhIGdpdmVuIGNhbGxiYWNrIGlzIHJlZ2lzdGVyZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aGVuIGl0IHdpbGwgYmUgbm90aWZpZWQgbXVsdGlwbGUgdGltZXMsIG9uY2UgcGVyIHJlZ2lzdHJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gaW52b2tlIHVwb24gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgdW5yZWdpc3RlcnMgdGhlIGdpdmVuIGNhbGxiYWNrOyBvbmx5XG4gICAgICogdGhlIGZpcnN0IGludm9jYXRpb24gb2YgdGhlIHJldHVybmVkIGZ1bmN0aW9uIGRvZXMgYW55dGhpbmc7IGFsbCBzdWJzZXF1ZW50XG4gICAgICogaW52b2NhdGlvbnMgZG8gbm90aGluZy5cbiAgICAgKi8gICAgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBTeW1ib2woKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcy5zZXQoZSwgdCksICgpID0+IHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcy5kZWxldGUoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZXMgYWxsIGN1cnJlbnRseS1yZWdpc3RlcmVkIGBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoYCBjYWxsYmFja3MuXG4gICAgICogQHBhcmFtIGluZm8gSW5mb3JtYXRpb24gYWJvdXQgdGhlIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXG4gICAgICovICAgIG5vdGlmeU9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2godCkge1xuICAgICAgICB0aGlzLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MuZm9yRWFjaCgoZSA9PiBlKHQpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIGdsb2JhbCBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgYFRlc3RpbmdIb29rc2AuICovIGxldCBhaSA9IG51bGw7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIHRoZSBQbGF0Zm9ybSdzICdUZXh0RW5jb2RlcicgaW1wbGVtZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gaGkoKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2Rlcjtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dERlY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbGkgPSBuZXcgSW50ZWdlcihbIDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUgXSwgMCk7XG5cbi8vIEhhc2ggYSBzdHJpbmcgdXNpbmcgbWQ1IGhhc2hpbmcgYWxnb3JpdGhtLlxuZnVuY3Rpb24gZmkodCkge1xuICAgIGNvbnN0IGUgPSBoaSgpLmVuY29kZSh0KSwgbiA9IG5ldyBNZDU7XG4gICAgcmV0dXJuIG4udXBkYXRlKGUpLCBuZXcgVWludDhBcnJheShuLmRpZ2VzdCgpKTtcbn1cblxuLy8gSW50ZXJwcmV0IHRoZSAxNiBieXRlcyBhcnJheSBhcyB0d28gNjQtYml0IHVuc2lnbmVkIGludGVnZXJzLCBlbmNvZGVkIHVzaW5nXG4vLyAy4oCZcyBjb21wbGVtZW50IHVzaW5nIGxpdHRsZSBlbmRpYW4uXG5mdW5jdGlvbiBkaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBEYXRhVmlldyh0LmJ1ZmZlciksIG4gPSBlLmdldFVpbnQzMigwLCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgcyA9IGUuZ2V0VWludDMyKDQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBpID0gZS5nZXRVaW50MzIoOCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHIgPSBlLmdldFVpbnQzMigxMiwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCk7XG4gICAgcmV0dXJuIFsgbmV3IEludGVnZXIoWyBuLCBzIF0sIDApLCBuZXcgSW50ZWdlcihbIGksIHIgXSwgMCkgXTtcbn1cblxuY2xhc3MgX2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwID0gdCwgdGhpcy5wYWRkaW5nID0gZSwgdGhpcy5oYXNoQ291bnQgPSBuLCBlIDwgMCB8fCBlID49IDgpIHRocm93IG5ldyB3aShgSW52YWxpZCBwYWRkaW5nOiAke2V9YCk7XG4gICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IHdpKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKHQubGVuZ3RoID4gMCAmJiAwID09PSB0aGlzLmhhc2hDb3VudCkgXG4gICAgICAgIC8vIE9ubHkgZW1wdHkgYmxvb20gZmlsdGVyIGNhbiBoYXZlIDAgaGFzaCBjb3VudC5cbiAgICAgICAgdGhyb3cgbmV3IHdpKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoICYmIDAgIT09IGUpIFxuICAgICAgICAvLyBFbXB0eSBibG9vbSBmaWx0ZXIgc2hvdWxkIGhhdmUgMCBwYWRkaW5nLlxuICAgICAgICB0aHJvdyBuZXcgd2koYEludmFsaWQgcGFkZGluZyB3aGVuIGJpdG1hcCBsZW5ndGggaXMgMDogJHtlfWApO1xuICAgICAgICB0aGlzLnl0ID0gOCAqIHQubGVuZ3RoIC0gZSwgXG4gICAgICAgIC8vIFNldCB0aGUgYml0IGNvdW50IGluIEludGVnZXIgdG8gYXZvaWQgcmVwZXRpdGlvbiBpbiBtaWdodENvbnRhaW4oKS5cbiAgICAgICAgdGhpcy5JdCA9IEludGVnZXIuZnJvbU51bWJlcih0aGlzLnl0KTtcbiAgICB9XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBpdGggaGFzaCB2YWx1ZSBiYXNlZCBvbiB0aGUgaGFzaGVkIDY0Yml0IGludGVnZXJzLFxuICAgIC8vIGFuZCBjYWxjdWxhdGUgaXRzIGNvcnJlc3BvbmRpbmcgYml0IGluZGV4IGluIHRoZSBiaXRtYXAgdG8gYmUgY2hlY2tlZC5cbiAgICBUdCh0LCBlLCBuKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYXNoZWQgdmFsdWUgaChpKSA9IGgxICsgKGkgKiBoMikuXG4gICAgICAgIGxldCBzID0gdC5hZGQoZS5tdWx0aXBseShJbnRlZ2VyLmZyb21OdW1iZXIobikpKTtcbiAgICAgICAgLy8gV3JhcCBpZiBoYXNoIHZhbHVlIG92ZXJmbG93IDY0Yml0LlxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSBzLmNvbXBhcmUobGkpICYmIChzID0gbmV3IEludGVnZXIoWyBzLmdldEJpdHMoMCksIHMuZ2V0Qml0cygxKSBdLCAwKSksIFxuICAgICAgICBzLm1vZHVsbyh0aGlzLkl0KS50b051bWJlcigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gd2hldGhlciB0aGUgYml0IG9uIHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgYml0bWFwIGlzIHNldCB0byAxLlxuICAgIEV0KHQpIHtcbiAgICAgICAgcmV0dXJuIDAgIT0gKHRoaXMuYml0bWFwW01hdGguZmxvb3IodCAvIDgpXSAmIDEgPDwgdCAlIDgpO1xuICAgIH1cbiAgICBBdCh0KSB7XG4gICAgICAgIC8vIEVtcHR5IGJpdG1hcCBzaG91bGQgYWx3YXlzIHJldHVybiBmYWxzZSBvbiBtZW1iZXJzaGlwIGNoZWNrLlxuICAgICAgICBpZiAoMCA9PT0gdGhpcy55dCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gZmkodCksIFtuLCBzXSA9IGRpKGUpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMuaGFzaENvdW50OyB0KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlR0KG4sIHMsIHQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLkV0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGJsb29tIGZpbHRlciBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LiAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHQgJSA4ID09IDAgPyAwIDogOCAtIHQgJSA4LCBpID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKHQgLyA4KSksIHIgPSBuZXcgX2koaSwgcywgZSk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4gci5pbnNlcnQodCkpKSwgcjtcbiAgICB9XG4gICAgaW5zZXJ0KHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMueXQpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IGZpKHQpLCBbbiwgc10gPSBkaShlKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmhhc2hDb3VudDsgdCsrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5UdChuLCBzLCB0KTtcbiAgICAgICAgICAgIHRoaXMuUnQoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUnQodCkge1xuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0IC8gOCksIG4gPSB0ICUgODtcbiAgICAgICAgdGhpcy5iaXRtYXBbZV0gfD0gMSA8PCBuO1xuICAgIH1cbn1cblxuY2xhc3Mgd2kgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmxvb21GaWx0ZXJFcnJvclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBtaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LCBhbmQgdGhlIHB1cnBvc2UgZm9yXG4gICAgICogcmUtbGlzdGVuaW5nLiBMaXN0ZW5zIGZvciB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0XG4gICAgICogcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSB0LCB0aGlzLnRhcmdldENoYW5nZXMgPSBlLCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHMsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gcy5zZXQodCwgZ2kuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUsIG4pKSwgbmV3IG1pKHJ0Lm1pbigpLCBzLCBuZXcgcGUoZXQpLCBjcygpLCBncygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBnaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZSByZXN1bWVkXG4gICAgICogYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxuICAgICAqIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIFwiY3VycmVudFwiIChzeW5jZWQpIHN0YXR1cyBvZiB0aGlzIHRhcmdldC4gTm90ZSB0aGF0IFwiY3VycmVudFwiXG4gICAgICogaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sIHRoYXQgaW1wbGllcyB0aGF0IGEgdGFyZ2V0IGlzXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgbmV3bHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYXMgcGFydCBvZlxuICAgICAqIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGJ1dCByZWNlaXZlZFxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcbiAgICAgKiByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdCwgdGhpcy5jdXJyZW50ID0gZSwgdGhpcy5hZGRlZERvY3VtZW50cyA9IG4sIHRoaXMubW9kaWZpZWREb2N1bWVudHMgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiBhcHBseSBhIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcgKGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50XG4gICAgICogdGFiKSBvciBmb3IgbmV3IHF1ZXJpZXMgKHRvIHJhaXNlIHNuYXBzaG90cyB3aXRoIGNvcnJlY3QgQ1VSUkVOVCBzdGF0dXMpLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBnaShuLCBlLCBncygpLCBncygpLCBncygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyB5aSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMudnQgPSB0LCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSBlLCB0aGlzLmtleSA9IG4sIHRoaXMuUHQgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgcGkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuYnQgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgSWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSBWZS5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi8gLCBzID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdCwgdGhpcy50YXJnZXRJZHMgPSBlLCB0aGlzLnJlc3VtZVRva2VuID0gbiwgdGhpcy5jYXVzZSA9IHM7XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi8gY2xhc3MgVGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVnQgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuU3QgPSBSaSgpLCBcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cbiAgICAgICAgdGhpcy5EdCA9IFZlLkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLkN0ID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy54dCA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5DdDtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5EdDtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBOdCgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuVnQ7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IGt0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy54dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBNdCh0KSB7XG4gICAgICAgIHQuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy54dCA9ICEwLCB0aGlzLkR0ID0gdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgT3QoKSB7XG4gICAgICAgIGxldCB0ID0gZ3MoKSwgZSA9IGdzKCksIG4gPSBncygpO1xuICAgICAgICByZXR1cm4gdGhpcy5TdC5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IGdpKHRoaXMuRHQsIHRoaXMuQ3QsIHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cbiAgICAgKi8gICAgJHQoKSB7XG4gICAgICAgIHRoaXMueHQgPSAhMSwgdGhpcy5TdCA9IFJpKCk7XG4gICAgfVxuICAgIEZ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy54dCA9ICEwLCB0aGlzLlN0ID0gdGhpcy5TdC5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIEJ0KHQpIHtcbiAgICAgICAgdGhpcy54dCA9ICEwLCB0aGlzLlN0ID0gdGhpcy5TdC5yZW1vdmUodCk7XG4gICAgfVxuICAgIEx0KCkge1xuICAgICAgICB0aGlzLlZ0ICs9IDE7XG4gICAgfVxuICAgIHF0KCkge1xuICAgICAgICB0aGlzLlZ0IC09IDE7XG4gICAgfVxuICAgIFV0KCkge1xuICAgICAgICB0aGlzLnh0ID0gITAsIHRoaXMuQ3QgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3MgRWkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5LdCA9IHQsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMuR3QgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy5RdCA9IGNzKCksIFxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXG4gICAgICAgIHRoaXMuanQgPSBBaSgpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwIG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuenQgPSBuZXcgcGUoZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIFd0KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQudnQpIHQuUHQgJiYgdC5QdC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuSHQoZSwgdC5QdCkgOiB0aGlzLkp0KGUsIHQua2V5LCB0LlB0KTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQucmVtb3ZlZFRhcmdldElkcykgdGhpcy5KdChlLCB0LmtleSwgdC5QdCk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBZdCh0KSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0LCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5YdChlKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5adChlKSAmJiBuLk10KHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4ucXQoKSwgbi5OdCB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLiR0KCksIG4uTXQodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4ucXQoKSwgbi5OdCB8fCB0aGlzLnJlbW92ZVRhcmdldChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLlp0KGUpICYmIChuLlV0KCksIG4uTXQodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLlp0KGUpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLnRlKGUpLCBuLk10KHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHQudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyB0LnRhcmdldElkcy5mb3JFYWNoKGUpIDogdGhpcy5HdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5adChuKSAmJiBlKG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBlZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gdC50YXJnZXRJZCwgcyA9IHQuYnQuY291bnQsIGkgPSB0aGlzLm5lKG4pO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgY29uc3QgciA9IGkudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKEZuKHIpKSBpZiAoMCA9PT0gcykge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBodChyLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuSnQobiwgdCwgYW4ubmV3Tm9Eb2N1bWVudCh0LCBydC5taW4oKSkpO1xuICAgICAgICAgICAgfSBlbHNlIEYoMSA9PT0gcyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnNlKG4pO1xuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guIE1hcmsgdGhlIGRvY3VtZW50cyBhcyBiZWluZyBpbiBsaW1ibywgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmFpc2UgYSBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgYmxvb20gZmlsdGVyIHRvIGlkZW50aWZ5IGFuZCBtYXJrIHJlbW92ZWQgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5pZSh0LCBpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBibG9vbSBmaWx0ZXIgYXBwbGljYXRpb24gZmFpbHMsIHdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciByZS1ydW4gb2YgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZShuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA9PT0gcyA/IFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb21cIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb20gKi8gOiBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi87XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnp0ID0gdGhpcy56dC5pbnNlcnQobiwgdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gKGUgPSBjaS5pbnN0YW5jZSkgfHwgdm9pZCAwID09PSBlIHx8IGUubm90aWZ5T25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcywgaSwgciwgbywgdSwgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYWNoZUNvdW50OiBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0ZW5jZUZpbHRlckNvdW50OiBuLmNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBoID0gbi51bmNoYW5nZWROYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGggJiYgKGEuYmxvb21GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGllZDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gPT09IHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENvdW50OiBudWxsICE9PSAocyA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguaGFzaENvdW50KSAmJiB2b2lkIDAgIT09IHMgPyBzIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBMZW5ndGg6IG51bGwgIT09IChvID0gbnVsbCA9PT0gKHIgPSBudWxsID09PSAoaSA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaXRtYXApIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIubGVuZ3RoKSAmJiB2b2lkIDAgIT09IG8gPyBvIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBudWxsICE9PSAoYyA9IG51bGwgPT09ICh1ID0gbnVsbCA9PSBoID8gdm9pZCAwIDogaC5iaXRzKSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LnBhZGRpbmcpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChzLCBpLCB0LmJ0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IGJsb29tIGZpbHRlciB0byByZW1vdmUgdGhlIGRlbGV0ZWQgZG9jdW1lbnRzLCBhbmQgcmV0dXJuIHRoZVxuICAgICAqIGFwcGxpY2F0aW9uIHN0YXR1cy5cbiAgICAgKi8gICAgaWUodCwgZSkge1xuICAgICAgICBjb25zdCB7dW5jaGFuZ2VkTmFtZXM6IG4sIGNvdW50OiBzfSA9IHQuYnQ7XG4gICAgICAgIGlmICghbiB8fCAhbi5iaXRzKSByZXR1cm4gMSAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlNraXBwZWQgKi87XG4gICAgICAgIGNvbnN0IHtiaXRzOiB7Yml0bWFwOiBpID0gXCJcIiwgcGFkZGluZzogciA9IDB9LCBoYXNoQ291bnQ6IG8gPSAwfSA9IG47XG4gICAgICAgIGxldCB1LCBjO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdSA9IHhlKGkpLnRvVWludDhBcnJheSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFBlKSByZXR1cm4gTShcIkRlY29kaW5nIHRoZSBiYXNlNjQgYmxvb20gZmlsdGVyIGluIGV4aXN0ZW5jZSBmaWx0ZXIgZmFpbGVkIChcIiArIHQubWVzc2FnZSArIFwiKTsgaWdub3JpbmcgdGhlIGJsb29tIGZpbHRlciBhbmQgZmFsbGluZyBiYWNrIHRvIGZ1bGwgcmUtcXVlcnkuXCIpLCBcbiAgICAgICAgICAgIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQmxvb21GaWx0ZXIgdGhyb3dzIGVycm9yIGlmIHRoZSBpbnB1dHMgYXJlIGludmFsaWQuXG4gICAgICAgICAgICBjID0gbmV3IF9pKHUsIHIsIG8pO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gTSh0IGluc3RhbmNlb2Ygd2kgPyBcIkJsb29tRmlsdGVyIGVycm9yOiBcIiA6IFwiQXBwbHlpbmcgYmxvb20gZmlsdGVyIGZhaWxlZDogXCIsIHQpLCBcbiAgICAgICAgICAgIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICgwID09PSBjLnl0KSByZXR1cm4gMSAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlNraXBwZWQgKi87XG4gICAgICAgIHJldHVybiBzICE9PSBlIC0gdGhpcy5yZSh0LnRhcmdldElkLCBjKSA/IDIgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5GYWxzZVBvc2l0aXZlICovIDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbHRlciBvdXQgcmVtb3ZlZCBkb2N1bWVudHMgYmFzZWQgb24gYmxvb20gZmlsdGVyIG1lbWJlcnNoaXAgcmVzdWx0IGFuZFxuICAgICAqIHJldHVybiBudW1iZXIgb2YgZG9jdW1lbnRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuS3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KTtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLkt0Lm9lKCksIHIgPSBgcHJvamVjdHMvJHtpLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7aS5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7bi5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWA7XG4gICAgICAgICAgICBlLkF0KHIpIHx8ICh0aGlzLkp0KHQsIG4sIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpLCBzKyspO1xuICAgICAgICB9KSksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgdWUodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5HdC5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMubmUocyk7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgRm4oaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IGh0KGkudGFyZ2V0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLlF0LmdldChlKSB8fCB0aGlzLmNlKHMsIGUpIHx8IHRoaXMuSnQocywgZSwgYW4ubmV3Tm9Eb2N1bWVudChlLCB0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4ua3QgJiYgKGUuc2V0KHMsIG4uT3QoKSksIG4uJHQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSBncygpO1xuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xuICAgICAgICAvLyBzcGVjaWFsLWNhc2VzIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIHRhcmdldCBjYWNoZS5cbiAgICAgICAgXG4gICAgICAgIC8vIFRPRE8oZ3NvbHRpcyk6IEV4cGFuZCBvbiB0aGlzIGNvbW1lbnQgb25jZSBHQyBpcyBhdmFpbGFibGUgaW4gdGhlIEpTXG4gICAgICAgIC8vIGNsaWVudC5cbiAgICAgICAgICAgICAgICB0aGlzLmp0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgZS5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLm5lKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZSB8fCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyA9PT0gZS5wdXJwb3NlIHx8IChzID0gITEsIFxuICAgICAgICAgICAgICAgICExKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiAobiA9IG4uYWRkKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLlF0LmZvckVhY2goKChlLCBuKSA9PiBuLnNldFJlYWRUaW1lKHQpKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgbWkodCwgZSwgdGhpcy56dCwgdGhpcy5RdCwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLlF0ID0gY3MoKSwgdGhpcy5qdCA9IEFpKCksIHRoaXMuenQgPSBuZXcgcGUoZXQpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBIdCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5adCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jZSh0LCBlLmtleSkgPyAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi87XG4gICAgICAgIHRoaXMuWHQodCkuRnQoZS5rZXksIG4pLCB0aGlzLlF0ID0gdGhpcy5RdC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLmp0ID0gdGhpcy5qdC5pbnNlcnQoZS5rZXksIHRoaXMuYWUoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIEp0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLlp0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlh0KHQpO1xuICAgICAgICB0aGlzLmNlKHQsIGUpID8gcy5GdChlLCAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLkJ0KGUpLCB0aGlzLmp0ID0gdGhpcy5qdC5pbnNlcnQoZSwgdGhpcy5hZShlKS5kZWxldGUodCkpLCBuICYmICh0aGlzLlF0ID0gdGhpcy5RdC5pbnNlcnQoZSwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCkge1xuICAgICAgICB0aGlzLkd0LmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgc2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5YdCh0KS5PdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5LdC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLnNpemUgKyBlLmFkZGVkRG9jdW1lbnRzLnNpemUgLSBlLnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIEx0KHQpIHtcbiAgICAgICAgdGhpcy5YdCh0KS5MdCgpO1xuICAgIH1cbiAgICBYdCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5HdC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IFRpLCB0aGlzLkd0LnNldCh0LCBlKSksIGU7XG4gICAgfVxuICAgIGFlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmp0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgRWUoZXQpLCB0aGlzLmp0ID0gdGhpcy5qdC5pbnNlcnQodCwgZSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBadCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsICE9PSB0aGlzLm5lKHQpO1xuICAgICAgICByZXR1cm4gZSB8fCBOKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBuZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkd0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgJiYgZS5OdCA/IG51bGwgOiB0aGlzLkt0LmhlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIHRlKHQpIHtcbiAgICAgICAgdGhpcy5HdC5zZXQodCwgbmV3IFRpKTtcbiAgICAgICAgdGhpcy5LdC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5KdCh0LCBlLCAvKnVwZGF0ZWREb2N1bWVudD0qLyBudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRoZSBkb2N1bWVudCB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHNwZWNpZmllZCB0YXJnZXQuXG4gICAgICovICAgIGNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5oYXMoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBaSgpIHtcbiAgICByZXR1cm4gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiBSaSgpIHtcbiAgICByZXR1cm4gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xufVxuXG5jb25zdCB2aSA9ICgoKSA9PiB7XG4gICAgY29uc3QgdCA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpLCBQaSA9ICgoKSA9PiB7XG4gICAgY29uc3QgdCA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgYmkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFuZDogXCJBTkRcIixcbiAgICAgICAgb3I6IFwiT1JcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgVmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy51c2VQcm90bzNKc29uID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovXG5mdW5jdGlvbiBTaSh0LCBlKSB7XG4gICAgcmV0dXJuIHQudXNlUHJvdG8zSnNvbiB8fCBGdChlKSA/IGUgOiB7XG4gICAgICAgIHZhbHVlOiBlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIERpKHQsIGUpIHtcbiAgICBpZiAodC51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiBlLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgZS5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgZS5zZWNvbmRzLFxuICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gQ2kodCwgZSkge1xuICAgIHJldHVybiB0LnVzZVByb3RvM0pzb24gPyBlLnRvQmFzZTY0KCkgOiBlLnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24geGkodCwgZSkge1xuICAgIHJldHVybiBEaSh0LCBlLnRvVGltZXN0YW1wKCkpO1xufVxuXG5mdW5jdGlvbiBOaSh0KSB7XG4gICAgcmV0dXJuIEYoISF0KSwgcnQuZnJvbVRpbWVzdGFtcChmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBraSh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dChbIFwicHJvamVjdHNcIiwgdC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2UgXSk7XG4gICAgfSh0KS5jaGlsZChcImRvY3VtZW50c1wiKS5jaGlsZChlKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gTWkodCkge1xuICAgIGNvbnN0IGUgPSB1dC5mcm9tU3RyaW5nKHQpO1xuICAgIHJldHVybiBGKHVyKGUpKSwgZTtcbn1cblxuZnVuY3Rpb24gT2kodCwgZSkge1xuICAgIHJldHVybiBraSh0LmRhdGFiYXNlSWQsIGUucGF0aCk7XG59XG5cbmZ1bmN0aW9uICRpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTWkoZSk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSB0LmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6IFwiICsgbi5nZXQoMSkgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xuICAgIGlmIChuLmdldCgzKSAhPT0gdC5kYXRhYmFzZUlkLmRhdGFiYXNlKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgaHQocWkobikpO1xufVxuXG5mdW5jdGlvbiBGaSh0LCBlKSB7XG4gICAgcmV0dXJuIGtpKHQuZGF0YWJhc2VJZCwgZSk7XG59XG5cbmZ1bmN0aW9uIEJpKHQpIHtcbiAgICBjb25zdCBlID0gTWkodCk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSBlLmxlbmd0aCA/IHV0LmVtcHR5UGF0aCgpIDogcWkoZSk7XG59XG5cbmZ1bmN0aW9uIExpKHQpIHtcbiAgICByZXR1cm4gbmV3IHV0KFsgXCJwcm9qZWN0c1wiLCB0LmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIHFpKHQpIHtcbiAgICByZXR1cm4gRih0Lmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gdC5nZXQoNCkpLCB0LnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIFVpKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPaSh0LCBlKSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEtpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gJGkodCwgZS5uYW1lKSwgaSA9IE5pKGUudXBkYXRlVGltZSksIHIgPSBlLmNyZWF0ZVRpbWUgPyBOaShlLmNyZWF0ZVRpbWUpIDogcnQubWluKCksIG8gPSBuZXcgdW4oe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIHUgPSBhbi5uZXdGb3VuZERvY3VtZW50KHMsIGksIHIsIG8pO1xuICAgIHJldHVybiBuICYmIHUuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyB1LnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogdTtcbn1cblxuZnVuY3Rpb24gR2kodCwgZSkge1xuICAgIHJldHVybiBcImZvdW5kXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgRighIWUuZm91bmQpLCBlLmZvdW5kLm5hbWUsIGUuZm91bmQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgbiA9ICRpKHQsIGUuZm91bmQubmFtZSksIHMgPSBOaShlLmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gZS5mb3VuZC5jcmVhdGVUaW1lID8gTmkoZS5mb3VuZC5jcmVhdGVUaW1lKSA6IHJ0Lm1pbigpLCByID0gbmV3IHVuKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZvdW5kLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFuLm5ld0ZvdW5kRG9jdW1lbnQobiwgcywgaSwgcik7XG4gICAgfSh0LCBlKSA6IFwibWlzc2luZ1wiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEYoISFlLm1pc3NpbmcpLCBGKCEhZS5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSAkaSh0LCBlLm1pc3NpbmcpLCBzID0gTmkoZS5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBhbi5uZXdOb0RvY3VtZW50KG4sIHMpO1xuICAgIH0odCwgZSkgOiAkKCk7XG59XG5cbmZ1bmN0aW9uIFFpKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSB0ID8gMCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6IFwiUkVNT1ZFXCIgPT09IHQgPyAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSB0ID8gMyAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQgKi8gOiAkKCk7XG4gICAgICAgIH0oZS50YXJnZXRDaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSB8fCBcIk5PX0NIQU5HRVwiKSwgaSA9IGUudGFyZ2V0Q2hhbmdlLnRhcmdldElkcyB8fCBbXSwgciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0LnVzZVByb3RvM0pzb24gPyAoRih2b2lkIDAgPT09IGUgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSksIFZlLmZyb21CYXNlNjRTdHJpbmcoZSB8fCBcIlwiKSkgOiAoRih2b2lkIDAgPT09IGUgfHwgZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpLCBcbiAgICAgICAgICAgIFZlLmZyb21VaW50OEFycmF5KGUgfHwgbmV3IFVpbnQ4QXJyYXkpKTtcbiAgICAgICAgfSh0LCBlLnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiksIG8gPSBlLnRhcmdldENoYW5nZS5jYXVzZSwgdSA9IG8gJiYgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHZvaWQgMCA9PT0gdC5jb2RlID8gcS5VTktOT1dOIDogdWkodC5jb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVShlLCB0Lm1lc3NhZ2UgfHwgXCJcIik7XG4gICAgICAgIH0obyk7XG4gICAgICAgIG4gPSBuZXcgSWkocywgaSwgciwgdSB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBzLmRvY3VtZW50LCBzLmRvY3VtZW50Lm5hbWUsIHMuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9ICRpKHQsIHMuZG9jdW1lbnQubmFtZSksIHIgPSBOaShzLmRvY3VtZW50LnVwZGF0ZVRpbWUpLCBvID0gcy5kb2N1bWVudC5jcmVhdGVUaW1lID8gTmkocy5kb2N1bWVudC5jcmVhdGVUaW1lKSA6IHJ0Lm1pbigpLCB1ID0gbmV3IHVuKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYyA9IGFuLm5ld0ZvdW5kRG9jdW1lbnQoaSwgciwgbywgdSksIGEgPSBzLnRhcmdldElkcyB8fCBbXSwgaCA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB5aShhLCBoLCBjLmtleSwgYyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50RGVsZXRlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9ICRpKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZWFkVGltZSA/IE5pKHMucmVhZFRpbWUpIDogcnQubWluKCksIG8gPSBhbi5uZXdOb0RvY3VtZW50KGksIHIpLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHlpKFtdLCB1LCBvLmtleSwgbyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50UmVtb3ZlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9ICRpKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHlpKFtdLCByLCBpLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShcImZpbHRlclwiIGluIGUpKSByZXR1cm4gJCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBlLmZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcjtcbiAgICAgICAgICAgIHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBjb25zdCB7Y291bnQ6IHMgPSAwLCB1bmNoYW5nZWROYW1lczogaX0gPSB0LCByID0gbmV3IHNpKHMsIGkpLCBvID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgcGkobywgcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGppKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIGpzKSBuID0ge1xuICAgICAgICB1cGRhdGU6IFVpKHQsIGUua2V5LCBlLnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBZcykgbiA9IHtcbiAgICAgICAgZGVsZXRlOiBPaSh0LCBlLmtleSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgenMpIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogVWkodCwgZS5rZXksIGUuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IG9yKGUuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgWHMpKSByZXR1cm4gJCgpO1xuICAgICAgICBuID0ge1xuICAgICAgICAgICAgdmVyaWZ5OiBPaSh0LCBlLmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBicykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBWcykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIERzKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgeHMpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4ud3RcbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgJCgpO1xuICAgIH0oMCwgdCkpKSksIGUucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IHtcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHhpKHQsIGUudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IGUuZXhpc3RzXG4gICAgICAgIH0gOiAkKCk7XG4gICAgfSh0LCBlLnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiB6aSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUuY3VycmVudERvY3VtZW50ID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBGcy51cGRhdGVUaW1lKE5pKHQudXBkYXRlVGltZSkpIDogdm9pZCAwICE9PSB0LmV4aXN0cyA/IEZzLmV4aXN0cyh0LmV4aXN0cykgOiBGcy5ub25lKCk7XG4gICAgfShlLmN1cnJlbnREb2N1bWVudCkgOiBGcy5ub25lKCksIHMgPSBlLnVwZGF0ZVRyYW5zZm9ybXMgPyBlLnVwZGF0ZVRyYW5zZm9ybXMubWFwKChlID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gZSkgRihcIlJFUVVFU1RfVElNRVwiID09PSBlLnNldFRvU2VydmVyVmFsdWUpLCBuID0gbmV3IGJzOyBlbHNlIGlmIChcImFwcGVuZE1pc3NpbmdFbGVtZW50c1wiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmFwcGVuZE1pc3NpbmdFbGVtZW50cy52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IFZzKHQpO1xuICAgICAgICB9IGVsc2UgaWYgKFwicmVtb3ZlQWxsRnJvbUFycmF5XCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUucmVtb3ZlQWxsRnJvbUFycmF5LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgRHModCk7XG4gICAgICAgIH0gZWxzZSBcImluY3JlbWVudFwiIGluIGUgPyBuID0gbmV3IHhzKHQsIGUuaW5jcmVtZW50KSA6ICQoKTtcbiAgICAgICAgY29uc3QgcyA9IGF0LmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xuICAgICAgICByZXR1cm4gbmV3IE1zKHMsIG4pO1xuICAgIH0odCwgZSkpKSA6IFtdO1xuICAgIGlmIChlLnVwZGF0ZSkge1xuICAgICAgICBlLnVwZGF0ZS5uYW1lO1xuICAgICAgICBjb25zdCBpID0gJGkodCwgZS51cGRhdGUubmFtZSksIHIgPSBuZXcgdW4oe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUudXBkYXRlLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGUudXBkYXRlTWFzaykge1xuICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5maWVsZFBhdGhzIHx8IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdmUoZS5tYXAoKHQgPT4gYXQuZnJvbVNlcnZlckZvcm1hdCh0KSkpKTtcbiAgICAgICAgICAgIH0oZS51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgenMoaSwgciwgdCwgbiwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBqcyhpLCByLCBuLCBzKTtcbiAgICB9XG4gICAgaWYgKGUuZGVsZXRlKSB7XG4gICAgICAgIGNvbnN0IHMgPSAkaSh0LCBlLmRlbGV0ZSk7XG4gICAgICAgIHJldHVybiBuZXcgWXMocywgbik7XG4gICAgfVxuICAgIGlmIChlLnZlcmlmeSkge1xuICAgICAgICBjb25zdCBzID0gJGkodCwgZS52ZXJpZnkpO1xuICAgICAgICByZXR1cm4gbmV3IFhzKHMsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gJCgpO1xufVxuXG5mdW5jdGlvbiBXaSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgJiYgdC5sZW5ndGggPiAwID8gKEYodm9pZCAwICE9PSBlKSwgdC5tYXAoKHQgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSB0LnVwZGF0ZVRpbWUgPyBOaSh0LnVwZGF0ZVRpbWUpIDogTmkoZSk7XG4gICAgICAgIHJldHVybiBuLmlzRXF1YWwocnQubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBOaShlKSksIG5ldyAkcyhuLCB0LnRyYW5zZm9ybVJlc3VsdHMgfHwgW10pO1xuICAgIH0odCwgZSkpKSkgOiBbXTtcbn1cblxuZnVuY3Rpb24gSGkodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvY3VtZW50czogWyBGaSh0LCBlLnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBKaSh0LCBlKSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgcyA9IGUucGF0aDtcbiAgICBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCA/IChuLnBhcmVudCA9IEZpKHQsIHMpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogZS5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgIGFsbERlc2NlbmRhbnRzOiAhMFxuICAgIH0gXSkgOiAobi5wYXJlbnQgPSBGaSh0LCBzLnBvcExhc3QoKSksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBzLmxhc3RTZWdtZW50KClcbiAgICB9IF0pO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gcnIoZ24uY3JlYXRlKHQsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSk7XG4gICAgfShlLmZpbHRlcnMpO1xuICAgIGkgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gaSk7XG4gICAgY29uc3QgciA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHRyKHQuZGlyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgIH0oZS5vcmRlckJ5KTtcbiAgICByICYmIChuLnN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5ID0gcik7XG4gICAgY29uc3QgbyA9IFNpKHQsIGUubGltaXQpO1xuICAgIHZhciB1O1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSB7XG4gICAgICAgIGJlZm9yZTogKHUgPSBlLnN0YXJ0QXQpLmluY2x1c2l2ZSxcbiAgICAgICAgdmFsdWVzOiB1LnBvc2l0aW9uXG4gICAgfSksIGUuZW5kQXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiAhdC5pbmNsdXNpdmUsXG4gICAgICAgICAgICB2YWx1ZXM6IHQucG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9KGUuZW5kQXQpKSwgbjtcbn1cblxuZnVuY3Rpb24gWWkodCkge1xuICAgIGxldCBlID0gQmkodC5wYXJlbnQpO1xuICAgIGNvbnN0IG4gPSB0LnN0cnVjdHVyZWRRdWVyeSwgcyA9IG4uZnJvbSA/IG4uZnJvbS5sZW5ndGggOiAwO1xuICAgIGxldCBpID0gbnVsbDtcbiAgICBpZiAocyA+IDApIHtcbiAgICAgICAgRigxID09PSBzKTtcbiAgICAgICAgY29uc3QgdCA9IG4uZnJvbVswXTtcbiAgICAgICAgdC5hbGxEZXNjZW5kYW50cyA/IGkgPSB0LmNvbGxlY3Rpb25JZCA6IGUgPSBlLmNoaWxkKHQuY29sbGVjdGlvbklkKTtcbiAgICB9XG4gICAgbGV0IHIgPSBbXTtcbiAgICBuLndoZXJlICYmIChyID0gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gWmkodCk7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgZ24gJiYgSW4oZSkpIHJldHVybiBlLmdldEZpbHRlcnMoKTtcbiAgICAgICAgcmV0dXJuIFsgZSBdO1xuICAgIH0obi53aGVyZSkpO1xuICAgIGxldCBvID0gW107XG4gICAgbi5vcmRlckJ5ICYmIChvID0gbi5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZG4oaXIodC5maWVsZCksIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiQVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICh0LmRpcmVjdGlvbikpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgKHQpKSkpO1xuICAgIGxldCB1ID0gbnVsbDtcbiAgICBuLmxpbWl0ICYmICh1ID0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgcmV0dXJuIGUgPSBcIm9iamVjdFwiID09IHR5cGVvZiB0ID8gdC52YWx1ZSA6IHQsIEZ0KGUpID8gbnVsbCA6IGU7XG4gICAgfShuLmxpbWl0KSk7XG4gICAgbGV0IGMgPSBudWxsO1xuICAgIG4uc3RhcnRBdCAmJiAoYyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBobihuLCBlKTtcbiAgICB9KG4uc3RhcnRBdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICByZXR1cm4gbi5lbmRBdCAmJiAoYSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9ICF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IGhuKG4sIGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgKG4uZW5kQXQpKSwgS24oZSwgaSwgbywgciwgdSwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgYywgYSk7XG59XG5cbmZ1bmN0aW9uIFhpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaFwiO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2gtYmxvb21cIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgICB9XG4gICAgfShlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIFppKHQpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVuYXJ5RmlsdGVyID8gZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCBlID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKGUsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKG4sIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCBzID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKHMsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IGkgPSBpcih0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBtbi5jcmVhdGUoaSwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgICB9XG4gICAgfSh0KSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShpcih0LmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJFUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odC5maWVsZEZpbHRlci5vcCksIHQuZmllbGRGaWx0ZXIudmFsdWUpO1xuICAgIH0odCkgOiB2b2lkIDAgIT09IHQuY29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gZ24uY3JlYXRlKHQuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKCh0ID0+IFppKHQpKSksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiQU5EXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJPUlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY29tcG9zaXRlRmlsdGVyLm9wKSk7XG4gICAgfSh0KSA6ICQoKTtcbn1cblxuZnVuY3Rpb24gdHIodCkge1xuICAgIHJldHVybiB2aVt0XTtcbn1cblxuZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiBQaVt0XTtcbn1cblxuZnVuY3Rpb24gbnIodCkge1xuICAgIHJldHVybiBiaVt0XTtcbn1cblxuZnVuY3Rpb24gc3IodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZpZWxkUGF0aDogdC5jYW5vbmljYWxTdHJpbmcoKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGlyKHQpIHtcbiAgICByZXR1cm4gYXQuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG59XG5cbmZ1bmN0aW9uIHJyKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICBpZiAoWGUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoWWUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgIGlmIChYZSh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OQU5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoWWUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZCksXG4gICAgICAgICAgICAgICAgb3A6IGVyKHQub3ApLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSh0KSA6IHQgaW5zdGFuY2VvZiBnbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZ2V0RmlsdGVycygpLm1hcCgodCA9PiBycih0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IG5yKHQub3ApLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KHQpIDogJCgpO1xufVxuXG5mdW5jdGlvbiBvcih0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB1cih0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBjciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gcnQubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSBydC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IFZlLkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCBsYXN0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSByZXN1bWUgdG9rZW4gb3JcbiAgICAgKiByZWFkIHRpbWUuIERvY3VtZW50cyBhcmUgY291bnRlZCBvbmx5IHdoZW4gbWFraW5nIGEgbGlzdGVuIHJlcXVlc3Qgd2l0aFxuICAgICAqIHJlc3VtZSB0b2tlbiBvciByZWFkIHRpbWUsIG90aGVyd2lzZSwga2VlcCBpdCBudWxsLlxuICAgICAqLyAsIHUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbywgdGhpcy5leHBlY3RlZENvdW50ID0gdTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0aGlzLmV4cGVjdGVkQ291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cbiAgICAgKi8gICAgd2l0aFJlc3VtZVRva2VuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCBlLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHQsIFxuICAgICAgICAvKiBleHBlY3RlZENvdW50PSAqLyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgZXhwZWN0ZWQgY291bnQuXG4gICAgICovICAgIHdpdGhFeHBlY3RlZENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi8gY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5sZSA9IHQ7XG4gICAgfVxufVxuXG4vKiogRGVjb2RlcyBhIHJlbW90ZSBkb2N1bWVudCBmcm9tIHN0b3JhZ2UgbG9jYWxseSB0byBhIERvY3VtZW50LiAqLyBmdW5jdGlvbiBocih0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKGUuZG9jdW1lbnQpIG4gPSBLaSh0LmxlLCBlLmRvY3VtZW50LCAhIWUuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTsgZWxzZSBpZiAoZS5ub0RvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBodC5mcm9tU2VnbWVudHMoZS5ub0RvY3VtZW50LnBhdGgpLCBzID0gX3IoZS5ub0RvY3VtZW50LnJlYWRUaW1lKTtcbiAgICAgICAgbiA9IGFuLm5ld05vRG9jdW1lbnQodCwgcyksIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmIG4uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFlLnVua25vd25Eb2N1bWVudCkgcmV0dXJuICQoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGh0LmZyb21TZWdtZW50cyhlLnVua25vd25Eb2N1bWVudC5wYXRoKSwgcyA9IF9yKGUudW5rbm93bkRvY3VtZW50LnZlcnNpb24pO1xuICAgICAgICAgICAgbiA9IGFuLm5ld1Vua25vd25Eb2N1bWVudCh0LCBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZS5yZWFkVGltZSAmJiBuLnNldFJlYWRUaW1lKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBpdCh0WzBdLCB0WzFdKTtcbiAgICAgICAgcmV0dXJuIHJ0LmZyb21UaW1lc3RhbXAoZSk7XG4gICAgfShlLnJlYWRUaW1lKSksIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gbHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IHtcbiAgICAgICAgcHJlZml4UGF0aDogbi5nZXRDb2xsZWN0aW9uUGF0aCgpLnBvcExhc3QoKS50b0FycmF5KCksXG4gICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgIGRvY3VtZW50SWQ6IG4ucGF0aC5sYXN0U2VnbWVudCgpLFxuICAgICAgICByZWFkVGltZTogZnIoZS5yZWFkVGltZSksXG4gICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogZS5oYXNDb21taXR0ZWRNdXRhdGlvbnNcbiAgICB9O1xuICAgIGlmIChlLmlzRm91bmREb2N1bWVudCgpKSBzLmRvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogT2kodCwgZS5rZXkpLFxuICAgICAgICAgICAgZmllbGRzOiBlLmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLFxuICAgICAgICAgICAgdXBkYXRlVGltZTogRGkodCwgZS52ZXJzaW9uLnRvVGltZXN0YW1wKCkpLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogRGkodCwgZS5jcmVhdGVUaW1lLnRvVGltZXN0YW1wKCkpXG4gICAgICAgIH07XG4gICAgfSh0LmxlLCBlKTsgZWxzZSBpZiAoZS5pc05vRG9jdW1lbnQoKSkgcy5ub0RvY3VtZW50ID0ge1xuICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICByZWFkVGltZTogZHIoZS52ZXJzaW9uKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIWUuaXNVbmtub3duRG9jdW1lbnQoKSkgcmV0dXJuICQoKTtcbiAgICAgICAgcy51bmtub3duRG9jdW1lbnQgPSB7XG4gICAgICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICAgICAgdmVyc2lvbjogZHIoZS52ZXJzaW9uKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gZnIodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIFsgZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzIF07XG59XG5cbmZ1bmN0aW9uIGRyKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IGUuc2Vjb25kcyxcbiAgICAgICAgbmFub3NlY29uZHM6IGUubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfcih0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBpdCh0LnNlY29uZHMsIHQubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBydC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIHdyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gKGUuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKChlID0+IHppKHQubGUsIGUpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLm11dGF0aW9ucy5sZW5ndGggLSAxOyArK3QpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25zW3RdO1xuICAgICAgICBpZiAodCArIDEgPCBlLm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSBlLm11dGF0aW9uc1t0ICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5tdXRhdGlvbnNbdCArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gcy50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCBlLm11dGF0aW9ucy5zcGxpY2UodCArIDEsIDEpLCBcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzID0gZS5tdXRhdGlvbnMubWFwKChlID0+IHppKHQubGUsIGUpKSksIGkgPSBpdC5mcm9tTWlsbGlzKGUubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBacyhlLmJhdGNoSWQsIGksIG4sIHMpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBtcih0KSB7XG4gICAgY29uc3QgZSA9IF9yKHQucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyBfcih0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogcnQubWluKCk7XG4gICAgbGV0IHM7XG4gICAgdmFyIGk7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5xdWVyeS5kb2N1bWVudHMgPyAoRigxID09PSAoaSA9IHQucXVlcnkpLmRvY3VtZW50cy5sZW5ndGgpLCBcbiAgICBzID0gSm4oR24oQmkoaS5kb2N1bWVudHNbMF0pKSkpIDogcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIEpuKFlpKHQpKTtcbiAgICB9KHQucXVlcnkpLCBuZXcgY3IocywgdC50YXJnZXRJZCwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCB0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgZSwgbiwgVmUuZnJvbUJhc2U2NFN0cmluZyh0LnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIGdyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZHIoZS5zbmFwc2hvdFZlcnNpb24pLCBzID0gZHIoZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gRm4oZS50YXJnZXQpID8gSGkodC5sZSwgZS50YXJnZXQpIDogSmkodC5sZSwgZS50YXJnZXQpO1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCByID0gZS5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICB0YXJnZXRJZDogZS50YXJnZXRJZCxcbiAgICAgICAgY2Fub25pY2FsSWQ6IE9uKGUudGFyZ2V0KSxcbiAgICAgICAgcmVhZFRpbWU6IG4sXG4gICAgICAgIHJlc3VtZVRva2VuOiByLFxuICAgICAgICBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IGUuc2VxdWVuY2VOdW1iZXIsXG4gICAgICAgIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb246IHMsXG4gICAgICAgIHF1ZXJ5OiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIGBCdW5kbGVkUXVlcnlgIGZyb20gYnVuZGxlIHByb3RvIHRvIGEgUXVlcnkgb2JqZWN0LlxuICpcbiAqIFRoaXMgcmVjb25zdHJ1Y3RzIHRoZSBvcmlnaW5hbCBxdWVyeSB1c2VkIHRvIGJ1aWxkIHRoZSBidW5kbGUgYmVpbmcgbG9hZGVkLFxuICogaW5jbHVkaW5nIGZlYXR1cmVzIGV4aXN0cyBvbmx5IGluIFNES3MgKGZvciBleGFtcGxlOiBsaW1pdC10by1sYXN0KS5cbiAqL1xuZnVuY3Rpb24geXIodCkge1xuICAgIGNvbnN0IGUgPSBZaSh7XG4gICAgICAgIHBhcmVudDogdC5wYXJlbnQsXG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeTogdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICB9KTtcbiAgICByZXR1cm4gXCJMQVNUXCIgPT09IHQubGltaXRUeXBlID8gWG4oZSwgZS5saW1pdCwgXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqIEVuY29kZXMgYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QgdG8gYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QuICovXG5mdW5jdGlvbiBwcih0LCBlKSB7XG4gICAgcmV0dXJuIG5ldyBlaShlLmxhcmdlc3RCYXRjaElkLCB6aSh0LmxlLCBlLm92ZXJsYXlNdXRhdGlvbikpO1xufVxuXG4vKiogRGVjb2RlcyBhbiBPdmVybGF5IG1vZGVsIG9iamVjdCBpbnRvIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBEYkRvY3VtZW50T3ZlcmxheUtleSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiB1c2VyIGFuZFxuICogZG9jdW1lbnQga2V5LlxuICovXG5mdW5jdGlvbiBJcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIHJldHVybiBbIHQsIHF0KGUucGF0aC5wb3BMYXN0KCkpLCBuIF07XG59XG5cbmZ1bmN0aW9uIFRyKHQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbmRleElkOiB0LFxuICAgICAgICB1aWQ6IGUudWlkIHx8IFwiXCIsXG4gICAgICAgIHNlcXVlbmNlTnVtYmVyOiBuLFxuICAgICAgICByZWFkVGltZTogZHIocy5yZWFkVGltZSksXG4gICAgICAgIGRvY3VtZW50S2V5OiBxdChzLmRvY3VtZW50S2V5LnBhdGgpLFxuICAgICAgICBsYXJnZXN0QmF0Y2hJZDogcy5sYXJnZXN0QmF0Y2hJZFxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEVyIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBcih0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogKGUgPSB0KS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBfcihlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEFyKHQpLnB1dCh7XG4gICAgICAgICAgICBidW5kbGVJZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGRyKE5pKG4uY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBScih0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoZSA9IHQpLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHlyKGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX3IoZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBScih0KS5wdXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGRyKE5pKHQucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IHQuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBBcih0KSB7XG4gICAgcmV0dXJuIHdlKHQsIFwiYnVuZGxlc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUnIodCkge1xuICAgIHJldHVybiB3ZSh0LCBcIm5hbWVkUXVlcmllc1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUgdXNpbmcgSW5kZXhlZERiLlxuICovIGNsYXNzIHZyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcklkIGZvciB3aGljaCB3ZSBhcmUgYWNjZXNzaW5nIG92ZXJsYXlzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy51c2VySWQgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZmUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS51aWQgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyB2cih0LCBuKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBQcih0KS5nZXQoSXIodGhpcy51c2VySWQsIGUpKS5uZXh0KCh0ID0+IHQgPyBwcih0aGlzLnNlcmlhbGl6ZXIsIHQpIDogbnVsbCkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmcygpO1xuICAgICAgICByZXR1cm4gdnQuZm9yRWFjaChlLCAoZSA9PiB0aGlzLmdldE92ZXJsYXkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSB0ICYmIG4uc2V0KGUsIHQpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgZWkoZSwgaSk7XG4gICAgICAgICAgICBzLnB1c2godGhpcy5kZSh0LCByKSk7XG4gICAgICAgIH0pKSwgdnQud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEdldCB0aGUgc2V0IG9mIHVuaXF1ZSBjb2xsZWN0aW9uIHBhdGhzLlxuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgodCA9PiBzLmFkZChxdCh0LmdldENvbGxlY3Rpb25QYXRoKCkpKSkpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGUsIG4gXSwgWyB0aGlzLnVzZXJJZCwgZSwgbiArIDEgXSwgXG4gICAgICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgICAgICBpLnB1c2goUHIodCkuSihcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHMpKTtcbiAgICAgICAgfSkpLCB2dC53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZnMoKSwgaSA9IHF0KGUpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgaSwgbiBdLCBbIHRoaXMudXNlcklkLCBpLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFByKHQpLmooXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCByKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHByKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICAgICAgcy5zZXQodC5nZXRLZXkoKSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBmcygpO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgLy8gV2Ugd2FudCBiYXRjaCBJRHMgbGFyZ2VyIHRoYW4gYHNpbmNlQmF0Y2hJZGAsIGFuZCBzbyB0aGUgbG93ZXIgYm91bmRcbiAgICAgICAgLy8gaXMgbm90IGluY2x1c2l2ZS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgZSwgbiBdLCBbIHRoaXMudXNlcklkLCBlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFByKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogb1xuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJldHVybiBwYXJ0aWFsIGJhdGNoIG92ZXJsYXlzLCBldmVuIGlmIHRoZSBzaXplXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzdWx0IHNldCBleGNlZWRzIHRoZSBnaXZlbiBgY291bnRgIGFyZ3VtZW50LiBUaGVyZWZvcmUsIHdlXG4gICAgICAgICAgICAvLyBjb250aW51ZSB0byBhZ2dyZWdhdGUgcmVzdWx0cyBldmVuIGFmdGVyIHRoZSByZXN1bHQgc2l6ZSBleGNlZWRzXG4gICAgICAgICAgICAvLyBgY291bnRgIGlmIHRoZXJlIGFyZSBtb3JlIG92ZXJsYXlzIGZyb20gdGhlIGBjdXJyZW50QmF0Y2hJZGAuXG4gICAgICAgICAgICBjb25zdCBvID0gcHIodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgICAgIGkuc2l6ZSgpIDwgcyB8fCBvLmxhcmdlc3RCYXRjaElkID09PSByID8gKGkuc2V0KG8uZ2V0S2V5KCksIG8pLCByID0gby5sYXJnZXN0QmF0Y2hJZCkgOiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZGUodCwgZSkge1xuICAgICAgICByZXR1cm4gUHIodCkucHV0KGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IFtzLCBpLCByXSA9IElyKGUsIG4ubXV0YXRpb24ua2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiBlLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHIsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLm11dGF0aW9uLmtleS5nZXRDb2xsZWN0aW9uR3JvdXAoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogbi5sYXJnZXN0QmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBvdmVybGF5TXV0YXRpb246IGppKHQubGUsIG4ubXV0YXRpb24pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCBvdmVybGF5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBQcih0KSB7XG4gICAgcmV0dXJuIHdlKHQsIFwiZG9jdW1lbnRPdmVybGF5c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIE5vdGU6IFRoaXMgY29kZSBpcyBjb3BpZWQgZnJvbSB0aGUgYmFja2VuZC4gQ29kZSB0aGF0IGlzIG5vdCB1c2VkIGJ5XG4vLyBGaXJlc3RvcmUgd2FzIHJlbW92ZWQuXG4vKiogRmlyZXN0b3JlIGluZGV4IHZhbHVlIHdyaXRlci4gICovXG5jbGFzcyBiciB7XG4gICAgY29uc3RydWN0b3IoKSB7fVxuICAgIC8vIFRoZSB3cml0ZSBtZXRob2RzIGJlbG93IHNob3J0LWNpcmN1aXQgd3JpdGluZyB0ZXJtaW5hdG9ycyBmb3IgdmFsdWVzXG4gICAgLy8gY29udGFpbmluZyBhICh0ZXJtaW5hdGluZykgdHJ1bmNhdGVkIHZhbHVlLlxuICAgIC8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSByZXN1bHRpbmcgZW5jb2RpbmcgZm9yOlxuICAgIC8vIFtcImJhclwiLCBbMiwgXCJmb29cIl1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVEVSTSwgVEVSTSwgVEVSTSlcbiAgICAvLyBbXCJiYXJcIiwgWzIsIHRydW5jYXRlZChcImZvb1wiKV1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVFJVTkMpXG4gICAgLy8gW1wiYmFyXCIsIHRydW5jYXRlZChbXCJmb29cIl0pXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWS4gU1RSSU5HLCBcImZvb1wiLCBURVJNLCBUUlVOQylcbiAgICAvKiogV3JpdGVzIGFuIGluZGV4IHZhbHVlLiAgKi9cbiAgICBfZSh0LCBlKSB7XG4gICAgICAgIHRoaXMud2UodCwgZSksIFxuICAgICAgICAvLyBXcml0ZSBzZXBhcmF0b3IgdG8gc3BsaXQgaW5kZXggdmFsdWVzXG4gICAgICAgIC8vIChzZWUgZ28vZmlyZXN0b3JlLXN0b3JhZ2UtZm9ybWF0I2VuY29kaW5ncykuXG4gICAgICAgIGUubWUoKTtcbiAgICB9XG4gICAgd2UodCwgZSkge1xuICAgICAgICBpZiAoXCJudWxsVmFsdWVcIiBpbiB0KSB0aGlzLmdlKGUsIDUpOyBlbHNlIGlmIChcImJvb2xlYW5WYWx1ZVwiIGluIHQpIHRoaXMuZ2UoZSwgMTApLCBcbiAgICAgICAgZS55ZSh0LmJvb2xlYW5WYWx1ZSA/IDEgOiAwKTsgZWxzZSBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0KSB0aGlzLmdlKGUsIDE1KSwgZS55ZShDZSh0LmludGVnZXJWYWx1ZSkpOyBlbHNlIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IENlKHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgaXNOYU4obikgPyB0aGlzLmdlKGUsIDEzKSA6ICh0aGlzLmdlKGUsIDE1KSwgQnQobikgPyBcbiAgICAgICAgICAgIC8vIC0wLjAsIDAgYW5kIDAuMCBhcmUgYWxsIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICAgICAgICAgIGUueWUoMCkgOiBlLnllKG4pKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLmdlKGUsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IGUucGUobikgOiAoZS5wZShgJHtuLnNlY29uZHMgfHwgXCJcIn1gKSwgZS55ZShuLm5hbm9zIHx8IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gdCkgdGhpcy5JZSh0LnN0cmluZ1ZhbHVlLCBlKSwgdGhpcy5UZShlKTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gdCkgdGhpcy5nZShlLCAzMCksIFxuICAgICAgICBlLkVlKHhlKHQuYnl0ZXNWYWx1ZSkpLCB0aGlzLlRlKGUpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCkgdGhpcy5BZSh0LnJlZmVyZW5jZVZhbHVlLCBlKTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZ2UoZSwgNDUpLCBlLnllKG4ubGF0aXR1ZGUgfHwgMCksIGUueWUobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gdCA/IGVuKHQpID8gdGhpcy5nZShlLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy5SZSh0Lm1hcFZhbHVlLCBlKSwgXG4gICAgICAgIHRoaXMuVGUoZSkpIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/ICh0aGlzLnZlKHQuYXJyYXlWYWx1ZSwgZSksIHRoaXMuVGUoZSkpIDogJCgpO1xuICAgIH1cbiAgICBJZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2UoZSwgMjUpLCB0aGlzLlBlKHQsIGUpO1xuICAgIH1cbiAgICBQZSh0LCBlKSB7XG4gICAgICAgIGUucGUodCk7XG4gICAgfVxuICAgIFJlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLmdlKGUsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLkllKHQsIGUpLCB0aGlzLndlKG5bdF0sIGUpO1xuICAgIH1cbiAgICB2ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5nZShlLCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB0aGlzLndlKHQsIGUpO1xuICAgIH1cbiAgICBBZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2UoZSwgMzcpO1xuICAgICAgICBodC5mcm9tTmFtZSh0KS5wYXRoLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZShlLCA2MCksIHRoaXMuUGUodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2UodCwgZSkge1xuICAgICAgICB0LnllKGUpO1xuICAgIH1cbiAgICBUZSh0KSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICB0LnllKDIpO1xuICAgIH1cbn1cblxuYnIuYmUgPSBuZXcgYnI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIFZyKHQpIHtcbiAgICBpZiAoMCA9PT0gdCkgcmV0dXJuIDg7XG4gICAgbGV0IGUgPSAwO1xuICAgIHJldHVybiB0ID4+IDQgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgZm91ciBiaXRzIGFyZSB6ZXJvLlxuICAgIGUgKz0gNCwgdCA8PD0gNCksIHQgPj4gNiA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCB0d28gKG9yIG5leHQgdHdvKSBiaXRzIGFyZSB6ZXJvLlxuICAgIGUgKz0gMiwgdCA8PD0gMiksIHQgPj4gNyA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSByZW1haW5pbmcgYml0IGlzIHplcm8uXG4gICAgZSArPSAxKSwgZTtcbn1cblxuLyoqIENvdW50cyB0aGUgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgaW4gdGhlIGdpdmVuIGJ5dGUgYXJyYXkuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyByZXF1aXJlZCB0byBzdG9yZSBcInZhbHVlXCIuIExlYWRpbmcgemVybyBieXRlc1xuICogYXJlIHNraXBwZWQuXG4gKi9cbmZ1bmN0aW9uIFNyKHQpIHtcbiAgICAvLyBUaGlzIGlzIGp1c3QgdGhlIG51bWJlciBvZiBieXRlcyBmb3IgdGhlIHVuc2lnbmVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIuXG4gICAgY29uc3QgZSA9IDY0IC0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gVnIoMjU1ICYgdFtuXSk7XG4gICAgICAgICAgICBpZiAoZSArPSBzLCA4ICE9PSBzKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9KHQpO1xuICAgIHJldHVybiBNYXRoLmNlaWwoZSAvIDgpO1xufVxuXG4vKipcbiAqIE9yZGVyZWRDb2RlV3JpdGVyIGlzIGEgbWluaW1hbC1hbGxvY2F0aW9uIGltcGxlbWVudGF0aW9uIG9mIHRoZSB3cml0aW5nXG4gKiBiZWhhdmlvciBkZWZpbmVkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSBjb2RlIGlzIHBvcnRlZCBmcm9tIGl0cyBKYXZhIGNvdW50ZXJwYXJ0LlxuICovIGNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSgxMDI0KSwgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIFZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IGUubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuU2Uobi52YWx1ZSksIG4gPSBlLm5leHQoKTtcbiAgICAgICAgdGhpcy5EZSgpO1xuICAgIH1cbiAgICBDZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgbGV0IG4gPSBlLm5leHQoKTtcbiAgICAgICAgZm9yICg7IW4uZG9uZTsgKSB0aGlzLnhlKG4udmFsdWUpLCBuID0gZS5uZXh0KCk7XG4gICAgICAgIHRoaXMuTmUoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBhc2NlbmRpbmcuICovICAgIGtlKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAodCA8IDEyOCkgdGhpcy5TZSh0KTsgZWxzZSBpZiAodCA8IDIwNDgpIHRoaXMuU2UoOTYwIHwgdCA+Pj4gNiksIHRoaXMuU2UoMTI4IHwgNjMgJiB0KTsgZWxzZSBpZiAoZSA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgZSkgdGhpcy5TZSg0ODAgfCB0ID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5TZSgxMjggfCA2MyAmIHQgPj4+IDYpLCB0aGlzLlNlKDEyOCB8IDYzICYgdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuU2UoMjQwIHwgdCA+Pj4gMTgpLCB0aGlzLlNlKDEyOCB8IDYzICYgdCA+Pj4gMTIpLCB0aGlzLlNlKDEyOCB8IDYzICYgdCA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuU2UoMTI4IHwgNjMgJiB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLkRlKCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgdXRmOCBieXRlcyBpbnRvIHRoaXMgYnl0ZSBzZXF1ZW5jZSwgZGVzY2VuZGluZyAqLyAgICBNZSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKHQgPCAxMjgpIHRoaXMueGUodCk7IGVsc2UgaWYgKHQgPCAyMDQ4KSB0aGlzLnhlKDk2MCB8IHQgPj4+IDYpLCB0aGlzLnhlKDEyOCB8IDYzICYgdCk7IGVsc2UgaWYgKGUgPCBcIlxcdWQ4MDBcIiB8fCBcIlxcdWRiZmZcIiA8IGUpIHRoaXMueGUoNDgwIHwgdCA+Pj4gMTIpLCBcbiAgICAgICAgICAgIHRoaXMueGUoMTI4IHwgNjMgJiB0ID4+PiA2KSwgdGhpcy54ZSgxMjggfCA2MyAmIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnhlKDI0MCB8IHQgPj4+IDE4KSwgdGhpcy54ZSgxMjggfCA2MyAmIHQgPj4+IDEyKSwgdGhpcy54ZSgxMjggfCA2MyAmIHQgPj4+IDYpLCBcbiAgICAgICAgICAgICAgICB0aGlzLnhlKDEyOCB8IDYzICYgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5OZSgpO1xuICAgIH1cbiAgICBPZSh0KSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGFjdHVhbCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCBlID0gdGhpcy4kZSh0KSwgbiA9IFNyKGUpO1xuICAgICAgICB0aGlzLkZlKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgdCA9IGUubGVuZ3RoIC0gbjsgdCA8IGUubGVuZ3RoOyArK3QpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiBlW3RdO1xuICAgIH1cbiAgICBCZSh0KSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLiRlKHQpLCBuID0gU3IoZSk7XG4gICAgICAgIHRoaXMuRmUoMSArIG4pLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfigyNTUgJiBuKTtcbiAgICAgICAgLy8gV3JpdGUgdGhlIGxlbmd0aFxuICAgICAgICBmb3IgKGxldCB0ID0gZS5sZW5ndGggLSBuOyB0IDwgZS5sZW5ndGg7ICsrdCkgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgZVt0XSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgXCJpbmZpbml0eVwiIGJ5dGUgc2VxdWVuY2UgdGhhdCBzb3J0cyBhZnRlciBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGFzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgTGUoKSB7XG4gICAgICAgIHRoaXMucWUoMjU1KSwgdGhpcy5xZSgyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYmVmb3JlIGFsbCBvdGhlciBieXRlXG4gICAgICogc2VxdWVuY2VzIHdyaXR0ZW4gaW4gZGVzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgVWUoKSB7XG4gICAgICAgIHRoaXMuS2UoMjU1KSwgdGhpcy5LZSgyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJ1ZmZlciBzdWNoIHRoYXQgaXQgaXMgdGhlIHNhbWUgYXMgd2hlbiBpdCB3YXMgbmV3bHlcbiAgICAgKiBjb25zdHJ1Y3RlZC5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSAwO1xuICAgIH1cbiAgICBzZWVkKHQpIHtcbiAgICAgICAgdGhpcy5GZSh0Lmxlbmd0aCksIHRoaXMuYnVmZmVyLnNldCh0LCB0aGlzLnBvc2l0aW9uKSwgdGhpcy5wb3NpdGlvbiArPSB0Lmxlbmd0aDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIGEgY29weSBvZiB0aGUgZW5jb2RlZCBieXRlcyBpbiB0aGlzIGJ1ZmZlci4gICovICAgIEdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgYHZhbGAgaW50byBhbiBlbmNvZGluZyBzbyB0aGF0IHRoZSBvcmRlciBtYXRjaGVzIHRoZSBJRUVFIDc1NFxuICAgICAqIGZsb2F0aW5nLXBvaW50IGNvbXBhcmlzb24gcmVzdWx0cyB3aXRoIHRoZSBmb2xsb3dpbmcgZXhjZXB0aW9uczpcbiAgICAgKiAgIC0wLjAgPCAwLjBcbiAgICAgKiAgIGFsbCBub24tTmFOIDwgTmFOXG4gICAgICogICBOYU4gPSBOYU5cbiAgICAgKi8gICAgJGUodCkge1xuICAgICAgICBjb25zdCBlID0gXG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIEphdmFTY3JpcHQgbnVtYmVyIHRvIGEgYnl0ZSBhcnJheSAodXNpbmcgYmlnIGVuZGlhbiBlbmNvZGluZykuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDgpKTtcbiAgICAgICAgICAgIHJldHVybiBlLnNldEZsb2F0NjQoMCwgdCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMSksIG5ldyBVaW50OEFycmF5KGUuYnVmZmVyKTtcbiAgICAgICAgfSh0KSwgbiA9IDAgIT0gKDEyOCAmIGVbMF0pO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgYml0IGlzIHNldC4gV2UgdXNlIGEgYml0IG1hc2sgc2luY2UgdmFsdWVbMF0gaXNcbiAgICAgICAgLy8gZW5jb2RlZCBhcyBhIG51bWJlciBmcm9tIDAgdG8gMjU1LlxuICAgICAgICAgICAgICAgIC8vIFJldmVydCB0aGUgdHdvIGNvbXBsZW1lbnQgdG8gZ2V0IG5hdHVyYWwgb3JkZXJpbmdcbiAgICAgICAgZVswXSBePSBuID8gMjU1IDogMTI4O1xuICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IGUubGVuZ3RoOyArK3QpIGVbdF0gXj0gbiA/IDI1NSA6IDA7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGEgc2luZ2xlIGJ5dGUgYXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICovICAgIFNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IDI1NSAmIHQ7XG4gICAgICAgIDAgPT09IGUgPyAodGhpcy5xZSgwKSwgdGhpcy5xZSgyNTUpKSA6IDI1NSA9PT0gZSA/ICh0aGlzLnFlKDI1NSksIHRoaXMucWUoMCkpIDogdGhpcy5xZShlKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGRlc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gICovICAgIHhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IDI1NSAmIHQ7XG4gICAgICAgIDAgPT09IGUgPyAodGhpcy5LZSgwKSwgdGhpcy5LZSgyNTUpKSA6IDI1NSA9PT0gZSA/ICh0aGlzLktlKDI1NSksIHRoaXMuS2UoMCkpIDogdGhpcy5LZSh0KTtcbiAgICB9XG4gICAgRGUoKSB7XG4gICAgICAgIHRoaXMucWUoMCksIHRoaXMucWUoMSk7XG4gICAgfVxuICAgIE5lKCkge1xuICAgICAgICB0aGlzLktlKDApLCB0aGlzLktlKDEpO1xuICAgIH1cbiAgICBxZSh0KSB7XG4gICAgICAgIHRoaXMuRmUoMSksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB0O1xuICAgIH1cbiAgICBLZSh0KSB7XG4gICAgICAgIHRoaXMuRmUoMSksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+dDtcbiAgICB9XG4gICAgRmUodCkge1xuICAgICAgICBjb25zdCBlID0gdCArIHRoaXMucG9zaXRpb247XG4gICAgICAgIGlmIChlIDw9IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAvLyBUcnkgZG91YmxpbmcuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSAyICogdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICAvLyBTdGlsbCBub3QgYmlnIGVub3VnaD8gSnVzdCBhbGxvY2F0ZSB0aGUgcmlnaHQgc2l6ZS5cbiAgICAgICAgICAgICAgICBuIDwgZSAmJiAobiA9IGUpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIG5ldyBidWZmZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBVaW50OEFycmF5KG4pO1xuICAgICAgICBzLnNldCh0aGlzLmJ1ZmZlciksIC8vIGNvcHkgb2xkIGRhdGFcbiAgICAgICAgdGhpcy5idWZmZXIgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgQ3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5RZSA9IHQ7XG4gICAgfVxuICAgIEVlKHQpIHtcbiAgICAgICAgdGhpcy5RZS5WZSh0KTtcbiAgICB9XG4gICAgcGUodCkge1xuICAgICAgICB0aGlzLlFlLmtlKHQpO1xuICAgIH1cbiAgICB5ZSh0KSB7XG4gICAgICAgIHRoaXMuUWUuT2UodCk7XG4gICAgfVxuICAgIG1lKCkge1xuICAgICAgICB0aGlzLlFlLkxlKCk7XG4gICAgfVxufVxuXG5jbGFzcyB4ciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlFlID0gdDtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICB0aGlzLlFlLkNlKHQpO1xuICAgIH1cbiAgICBwZSh0KSB7XG4gICAgICAgIHRoaXMuUWUuTWUodCk7XG4gICAgfVxuICAgIHllKHQpIHtcbiAgICAgICAgdGhpcy5RZS5CZSh0KTtcbiAgICB9XG4gICAgbWUoKSB7XG4gICAgICAgIHRoaXMuUWUuVWUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBgRGlyZWN0aW9uYWxJbmRleEJ5dGVFbmNvZGVyYCB1c2luZyBgT3JkZXJlZENvZGVXcml0ZXJgIGZvciB0aGVcbiAqIGFjdHVhbCBlbmNvZGluZy5cbiAqLyBjbGFzcyBOciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuUWUgPSBuZXcgRHIsIHRoaXMuamUgPSBuZXcgQ3IodGhpcy5RZSksIHRoaXMuemUgPSBuZXcgeHIodGhpcy5RZSk7XG4gICAgfVxuICAgIHNlZWQodCkge1xuICAgICAgICB0aGlzLlFlLnNlZWQodCk7XG4gICAgfVxuICAgIFdlKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gdCA/IHRoaXMuamUgOiB0aGlzLnplO1xuICAgIH1cbiAgICBHZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWUuR2UoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuUWUucmVzZXQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUmVwcmVzZW50cyBhbiBpbmRleCBlbnRyeSBzYXZlZCBieSB0aGUgU0RLIGluIHBlcnNpc3RlZCBzdG9yYWdlLiAqLyBjbGFzcyBrciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSB0LCB0aGlzLmRvY3VtZW50S2V5ID0gZSwgdGhpcy5hcnJheVZhbHVlID0gbiwgdGhpcy5kaXJlY3Rpb25hbFZhbHVlID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBJbmRleEVudHJ5IGVudHJ5IHRoYXQgc29ydHMgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGN1cnJlbnRcbiAgICAgKiBkaXJlY3Rpb25hbCB2YWx1ZS5cbiAgICAgKi8gICAgSGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoLCBlID0gMCA9PT0gdCB8fCAyNTUgPT09IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZVt0IC0gMV0gPyB0ICsgMSA6IHQsIG4gPSBuZXcgVWludDhBcnJheShlKTtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHRoaXMuZGlyZWN0aW9uYWxWYWx1ZSwgMCksIGUgIT09IHQgPyBuLnNldChbIDAgXSwgdGhpcy5kaXJlY3Rpb25hbFZhbHVlLmxlbmd0aCkgOiArK25bbi5sZW5ndGggLSAxXSwgXG4gICAgICAgIG5ldyBrcih0aGlzLmluZGV4SWQsIHRoaXMuZG9jdW1lbnRLZXksIHRoaXMuYXJyYXlWYWx1ZSwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNcih0LCBlKSB7XG4gICAgbGV0IG4gPSB0LmluZGV4SWQgLSBlLmluZGV4SWQ7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBPcih0LmFycmF5VmFsdWUsIGUuYXJyYXlWYWx1ZSksIDAgIT09IG4gPyBuIDogKG4gPSBPcih0LmRpcmVjdGlvbmFsVmFsdWUsIGUuZGlyZWN0aW9uYWxWYWx1ZSksIFxuICAgIDAgIT09IG4gPyBuIDogaHQuY29tcGFyYXRvcih0LmRvY3VtZW50S2V5LCBlLmRvY3VtZW50S2V5KSkpO1xufVxuXG5mdW5jdGlvbiBPcih0LCBlKSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAmJiBuIDwgZS5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCBzID0gdFtuXSAtIGVbbl07XG4gICAgICAgIGlmICgwICE9PSBzKSByZXR1cm4gcztcbiAgICB9XG4gICAgcmV0dXJuIHQubGVuZ3RoIC0gZS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbGlnaHQgcXVlcnkgcGxhbm5lciBmb3IgRmlyZXN0b3JlLlxuICpcbiAqIFRoaXMgY2xhc3MgbWF0Y2hlcyBhIGBGaWVsZEluZGV4YCBhZ2FpbnN0IGEgRmlyZXN0b3JlIFF1ZXJ5IGBUYXJnZXRgLiBJdFxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzaG93Y2FzZXMgc29tZSBwb3NzaWJsZSBpbmRleCBjb25maWd1cmF0aW9uczpcbiAqXG4gKiBRdWVyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbmRleFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDLCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykgICAgICAgICAgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScsICdkZXNjJykgICAgICAgICAgfCBhIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDLCBiIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlMsIGIgQVNDRU5ESU5HXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TXG4gKi8gY2xhc3MgJHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPSBudWxsICE9IHQuY29sbGVjdGlvbkdyb3VwID8gdC5jb2xsZWN0aW9uR3JvdXAgOiB0LnBhdGgubGFzdFNlZ21lbnQoKSwgXG4gICAgICAgIHRoaXMuSmUgPSB0Lm9yZGVyQnksIHRoaXMuWWUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuZmlsdGVycykge1xuICAgICAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgICAgICB0LmlzSW5lcXVhbGl0eSgpID8gdGhpcy5YZSA9IHQgOiB0aGlzLlllLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgVGFyZ2V0SW5kZXhNYXRjaGVyJ3NcbiAgICAgKiB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBBbiBpbmRleCBpcyBjb25zaWRlcmVkIGNhcGFibGUgb2Ygc2VydmluZyB0aGUgdGFyZ2V0IHdoZW46XG4gICAgICogLSBUaGUgdGFyZ2V0IHVzZXMgYWxsIGluZGV4IHNlZ21lbnRzIGZvciBpdHMgZmlsdGVycyBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAqICAgVGhlIHRhcmdldCBjYW4gaGF2ZSBhZGRpdGlvbmFsIGZpbHRlciBhbmQgb3JkZXJCeSBjbGF1c2VzLCBidXQgbm90XG4gICAgICogICBmZXdlci5cbiAgICAgKiAtIElmIGFuIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueWZpbHRlciBpcyB1c2VkLCB0aGUgaW5kZXggbXVzdCBhbHNvXG4gICAgICogICBoYXZlIGEgY29ycmVzcG9uZGluZyBgQ09OVEFJTlNgIHNlZ21lbnQuXG4gICAgICogLSBBbGwgZGlyZWN0aW9uYWwgaW5kZXggc2VnbWVudHMgY2FuIGJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0IGFzIGEgc2VyaWVzIG9mXG4gICAgICogICBlcXVhbGl0eSBmaWx0ZXJzLCBhIHNpbmdsZSBpbmVxdWFsaXR5IGZpbHRlciBhbmQgYSBzZXJpZXMgb2Ygb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgZXF1YWxpdHkgZmlsdGVycyBtYXkgYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgKiAtIFRoZSBvcHRpb25hbCBzZWdtZW50IGZvciB0aGUgaW5lcXVhbGl0eSBmaWx0ZXIgbXVzdCBhcHBlYXIgYWZ0ZXIgYWxsXG4gICAgICogICBlcXVhbGl0eSBzZWdtZW50cy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGF0IG9yZGVyQnkgY2xhdXNlIG9mIHRoZSB0YXJnZXQgbXVzdCBhcHBlYXJcbiAgICAgKiAgIGluIG9yZGVyIGFmdGVyIGFsbCBlcXVhbGl0eSBhbmQgaW5lcXVhbGl0eSBzZWdtZW50cy4gU2luZ2xlIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMgY2Fubm90IGJlIHNraXBwZWQsIGJ1dCBhIGNvbnRpbnVvdXMgb3JkZXJCeSBzdWZmaXggbWF5IGJlXG4gICAgICogICBvbWl0dGVkLlxuICAgICAqLyAgICBaZSh0KSB7XG4gICAgICAgIEYodC5jb2xsZWN0aW9uR3JvdXAgPT09IHRoaXMuY29sbGVjdGlvbklkKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgY29uc3QgZSA9IGZ0KHQpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBlICYmICF0aGlzLnRuKGUpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBkdCh0KTtcbiAgICAgICAgbGV0IHMgPSAwLCBpID0gMDtcbiAgICAgICAgLy8gUHJvY2VzcyBhbGwgZXF1YWxpdGllcyBmaXJzdC4gRXF1YWxpdGllcyBjYW4gYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgICAgZm9yICg7cyA8IG4ubGVuZ3RoICYmIHRoaXMudG4obltzXSk7ICsrcykgO1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgcHJvY2Vzc2VkIGFsbCBzZWdtZW50cywgYWxsIHNlZ21lbnRzIGFyZSB1c2VkIHRvIHNlcnZlXG4gICAgICAgIC8vIHRoZSBlcXVhbGl0eSBmaWx0ZXJzIGFuZCB3ZSBkbyBub3QgbmVlZCB0byBtYXAgYW55IHNlZ21lbnRzIHRvIHRoZVxuICAgICAgICAvLyB0YXJnZXQncyBpbmVxdWFsaXR5IGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICAgICAgICAgICAgaWYgKHMgPT09IG4ubGVuZ3RoKSByZXR1cm4gITA7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGluZXF1YWxpdHkgZmlsdGVyLCB0aGUgbmV4dCBzZWdtZW50IG11c3QgbWF0Y2ggYm90aCB0aGVcbiAgICAgICAgLy8gZmlsdGVyIGFuZCB0aGUgZmlyc3Qgb3JkZXJCeSBjbGF1c2UuXG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5YZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5bc107XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW4odGhpcy5YZSwgdCkgfHwgIXRoaXMubm4odGhpcy5KZVtpKytdLCB0KSkgcmV0dXJuICExO1xuICAgICAgICAgICAgKytzO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsbCByZW1haW5pbmcgc2VnbWVudHMgbmVlZCB0byByZXByZXNlbnQgdGhlIHByZWZpeCBvZiB0aGUgdGFyZ2V0J3NcbiAgICAgICAgLy8gb3JkZXJCeS5cbiAgICAgICAgICAgICAgICBmb3IgKDtzIDwgbi5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5bc107XG4gICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkplLmxlbmd0aCB8fCAhdGhpcy5ubih0aGlzLkplW2krK10sIHQpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0bih0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLlllKSBpZiAodGhpcy5lbihlLCB0KSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGVuKHQsIGUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCB8fCAhdC5maWVsZC5pc0VxdWFsKGUuZmllbGRQYXRoKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSB0Lm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSB0Lm9wO1xuICAgICAgICByZXR1cm4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gPT09IGUua2luZCA9PT0gbjtcbiAgICB9XG4gICAgbm4odCwgZSkge1xuICAgICAgICByZXR1cm4gISF0LmZpZWxkLmlzRXF1YWwoZS5maWVsZFBhdGgpICYmICgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGUua2luZCAmJiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gPT09IHQuZGlyIHx8IDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8gPT09IGUua2luZCAmJiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gdC5kaXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBoZWxwIHdpdGggYm9vbGVhbiBsb2dpYyB0cmFuc2Zvcm1hdGlvbnMgbmVlZGVkIGZvciBoYW5kbGluZ1xuICogY29tcGxleCBmaWx0ZXJzIHVzZWQgaW4gcXVlcmllcy5cbiAqL1xuLyoqXG4gKiBUaGUgYGluYCBmaWx0ZXIgaXMgb25seSBhIHN5bnRhY3RpYyBzdWdhciBvdmVyIGEgZGlzanVuY3Rpb24gb2YgZXF1YWxpdGllcy4gRm9yIGluc3RhbmNlOiBgYSBpblxuICogWzEsMiwzXWAgaXMgaW4gZmFjdCBgYT09MSB8fCBhPT0yIHx8IGE9PTNgLiBUaGlzIG1ldGhvZCBleHBhbmRzIGFueSBgaW5gIGZpbHRlciBpbiB0aGUgZ2l2ZW5cbiAqIGlucHV0IGludG8gYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0eSBmaWx0ZXJzIGFuZCByZXR1cm5zIHRoZSBleHBhbmRlZCBmaWx0ZXIuXG4gKi8gZnVuY3Rpb24gRnIodCkge1xuICAgIHZhciBlLCBuO1xuICAgIGlmIChGKHQgaW5zdGFuY2VvZiBtbiB8fCB0IGluc3RhbmNlb2YgZ24pLCB0IGluc3RhbmNlb2YgbW4pIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBDbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IChudWxsID09PSAobiA9IG51bGwgPT09IChlID0gdC52YWx1ZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnZhbHVlcykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5tYXAoKGUgPT4gbW4uY3JlYXRlKHQuZmllbGQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIGUpKSkpIHx8IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGduLmNyZWF0ZShzLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGhhdmUgcmVhY2hlZCBvdGhlciBraW5kcyBvZiBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLy8gV2UgaGF2ZSBhIGNvbXBvc2l0ZSBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IHMgPSB0LmZpbHRlcnMubWFwKCh0ID0+IEZyKHQpKSk7XG4gICAgcmV0dXJuIGduLmNyZWF0ZShzLCB0Lm9wKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhIGNvbXBvc2l0ZSBmaWx0ZXIsIHJldHVybnMgdGhlIGxpc3Qgb2YgdGVybXMgaW4gaXRzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtLlxuICpcbiAqIDxwPkVhY2ggZWxlbWVudCBpbiB0aGUgcmV0dXJuIHZhbHVlIGlzIG9uZSB0ZXJtIG9mIHRoZSByZXN1bHRpbmcgRE5GLiBGb3IgaW5zdGFuY2U6IEZvciB0aGVcbiAqIGlucHV0OiAoQSB8fCBCKSAmJiBDLCB0aGUgRE5GIGZvcm0gaXM6IChBICYmIEMpIHx8IChCICYmIEMpLCBhbmQgdGhlIHJldHVybiB2YWx1ZSBpcyBhIGxpc3RcbiAqIHdpdGggdHdvIGVsZW1lbnRzOiBhIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBwZXJmb3JtcyAoQSAmJiBDKSwgYW5kIGEgY29tcG9zaXRlIGZpbHRlciB0aGF0XG4gKiBwZXJmb3JtcyAoQiAmJiBDKS5cbiAqXG4gKiBAcGFyYW0gZmlsdGVyIHRoZSBjb21wb3NpdGUgZmlsdGVyIHRvIGNhbGN1bGF0ZSBETkYgdHJhbnNmb3JtIGZvci5cbiAqIEByZXR1cm4gdGhlIHRlcm1zIGluIHRoZSBETkYgdHJhbnNmb3JtLlxuICovIGZ1bmN0aW9uIEJyKHQpIHtcbiAgICBpZiAoMCA9PT0gdC5nZXRGaWx0ZXJzKCkubGVuZ3RoKSByZXR1cm4gW107XG4gICAgY29uc3QgZSA9IEtyKEZyKHQpKTtcbiAgICByZXR1cm4gRihVcihlKSksIExyKGUpIHx8IHFyKGUpID8gWyBlIF0gOiBlLmdldEZpbHRlcnMoKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGEgc2luZ2xlIGZpZWxkIGZpbHRlci4gZS5nLiAoYSA9PSAxMCkuICovIGZ1bmN0aW9uIExyKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIHRoZSBjb25qdW5jdGlvbiBvZiBvbmUgb3IgbW9yZSBmaWVsZCBmaWx0ZXJzLiBlLmcuIChhID09IDEwXG4gKiAmJiBiID09IDIwKVxuICovIGZ1bmN0aW9uIHFyKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGduICYmIEluKHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGdpdmVuIGZpbHRlciBpcyBpbiBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAqXG4gKiA8cD5JbiBib29sZWFuIGxvZ2ljLCBhIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpIGlzIGEgY2Fub25pY2FsIG5vcm1hbCBmb3JtIG9mIGEgbG9naWNhbFxuICogZm9ybXVsYSBjb25zaXN0aW5nIG9mIGEgZGlzanVuY3Rpb24gb2YgY29uanVuY3Rpb25zOyBpdCBjYW4gYWxzbyBiZSBkZXNjcmliZWQgYXMgYW4gT1Igb2YgQU5Ecy5cbiAqXG4gKiA8cD5Gb3IgbW9yZSBpbmZvLCB2aXNpdDogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGlzanVuY3RpdmVfbm9ybWFsX2Zvcm1cbiAqLyBmdW5jdGlvbiBVcih0KSB7XG4gICAgcmV0dXJuIExyKHQpIHx8IHFyKHQpIHx8IFxuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGRpc2p1bmN0aW9uIG9mIG9uZSBvciBtb3JlIFwiZmxhdCBjb25qdW5jdGlvbnNcIiBhbmRcbiAqIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTApIHx8IChiPT0yMCAmJiBjPT0zMClcbiAqL1xuICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBnbiAmJiBwbih0KSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuZ2V0RmlsdGVycygpKSBpZiAoIUxyKGUpICYmICFxcihlKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9KHQpO1xufVxuXG5mdW5jdGlvbiBLcih0KSB7XG4gICAgaWYgKEYodCBpbnN0YW5jZW9mIG1uIHx8IHQgaW5zdGFuY2VvZiBnbiksIHQgaW5zdGFuY2VvZiBtbikgcmV0dXJuIHQ7XG4gICAgaWYgKDEgPT09IHQuZmlsdGVycy5sZW5ndGgpIHJldHVybiBLcih0LmZpbHRlcnNbMF0pO1xuICAgIC8vIENvbXB1dGUgRE5GIGZvciBlYWNoIG9mIHRoZSBzdWJmaWx0ZXJzIGZpcnN0XG4gICAgICAgIGNvbnN0IGUgPSB0LmZpbHRlcnMubWFwKCh0ID0+IEtyKHQpKSk7XG4gICAgbGV0IG4gPSBnbi5jcmVhdGUoZSwgdC5vcCk7XG4gICAgcmV0dXJuIG4gPSBqcihuKSwgVXIobikgPyBuIDogKEYobiBpbnN0YW5jZW9mIGduKSwgRih5bihuKSksIEYobi5maWx0ZXJzLmxlbmd0aCA+IDEpLCBcbiAgICBuLmZpbHRlcnMucmVkdWNlKCgodCwgZSkgPT4gR3IodCwgZSkpKSk7XG59XG5cbmZ1bmN0aW9uIEdyKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICByZXR1cm4gRih0IGluc3RhbmNlb2YgbW4gfHwgdCBpbnN0YW5jZW9mIGduKSwgRihlIGluc3RhbmNlb2YgbW4gfHwgZSBpbnN0YW5jZW9mIGduKSwgXG4gICAgLy8gRmllbGRGaWx0ZXIgRmllbGRGaWx0ZXJcbiAgICBuID0gdCBpbnN0YW5jZW9mIG1uID8gZSBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBDb25qdW5jdGlvbiBkaXN0cmlidXRpb24gZm9yIHR3byBmaWVsZCBmaWx0ZXJzIGlzIHRoZSBjb25qdW5jdGlvbiBvZiB0aGVtLlxuICAgICAgICByZXR1cm4gZ24uY3JlYXRlKFsgdCwgZSBdLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyk7XG4gICAgfSh0LCBlKSA6IFFyKHQsIGUpIDogZSBpbnN0YW5jZW9mIG1uID8gUXIoZSwgdCkgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBmb3VyIGNhc2VzOlxuICAgICAgICAvLyAoQSAmIEIpICYgKEMgJiBEKSAtLT4gKEEgJiBCICYgQyAmIEQpXG4gICAgICAgIC8vIChBICYgQikgJiAoQyB8IEQpIC0tPiAoQSAmIEIgJiBDKSB8IChBICYgQiAmIEQpXG4gICAgICAgIC8vIChBIHwgQikgJiAoQyAmIEQpIC0tPiAoQyAmIEQgJiBBKSB8IChDICYgRCAmIEIpXG4gICAgICAgIC8vIChBIHwgQikgJiAoQyB8IEQpIC0tPiAoQSAmIEMpIHwgKEEgJiBEKSB8IChCICYgQykgfCAoQiAmIEQpXG4gICAgICAgIC8vIENhc2UgMSBpcyBhIG1lcmdlLlxuICAgICAgICBpZiAoRih0LmZpbHRlcnMubGVuZ3RoID4gMCAmJiBlLmZpbHRlcnMubGVuZ3RoID4gMCksIHluKHQpICYmIHluKGUpKSByZXR1cm4gUm4odCwgZS5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAvLyBDYXNlIDIsMyw0IGFsbCBoYXZlIGF0IGxlYXN0IG9uZSBzaWRlIChsaHMgb3IgcmhzKSB0aGF0IGlzIGEgZGlzanVuY3Rpb24uIEluIGFsbCB0aHJlZSBjYXNlc1xuICAgICAgICAvLyB3ZSBzaG91bGQgdGFrZSBlYWNoIGVsZW1lbnQgb2YgdGhlIGRpc2p1bmN0aW9uIGFuZCBkaXN0cmlidXRlIGl0IG92ZXIgdGhlIG90aGVyIHNpZGUsIGFuZFxuICAgICAgICAvLyByZXR1cm4gdGhlIGRpc2p1bmN0aW9uIG9mIHRoZSBkaXN0cmlidXRpb24gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcG4odCkgPyB0IDogZSwgcyA9IHBuKHQpID8gZSA6IHQsIGkgPSBuLmZpbHRlcnMubWFwKCh0ID0+IEdyKHQsIHMpKSk7XG4gICAgICAgIHJldHVybiBnbi5jcmVhdGUoaSwgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICB9KHQsIGUpLCBqcihuKTtcbn1cblxuZnVuY3Rpb24gUXIodCwgZSkge1xuICAgIC8vIFRoZXJlIGFyZSB0d28gY2FzZXM6XG4gICAgLy8gQSAmIChCICYgQykgLS0+IChBICYgQiAmIEMpXG4gICAgLy8gQSAmIChCIHwgQykgLS0+IChBICYgQikgfCAoQSAmIEMpXG4gICAgaWYgKHluKGUpKSBcbiAgICAvLyBDYXNlIDFcbiAgICByZXR1cm4gUm4oZSwgdC5nZXRGaWx0ZXJzKCkpO1xuICAgIHtcbiAgICAgICAgLy8gQ2FzZSAyXG4gICAgICAgIGNvbnN0IG4gPSBlLmZpbHRlcnMubWFwKChlID0+IEdyKHQsIGUpKSk7XG4gICAgICAgIHJldHVybiBnbi5jcmVhdGUobiwgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGUgYXNzb2NpYXRpdml0eSBwcm9wZXJ0eSB0byB0aGUgZ2l2ZW4gZmlsdGVyIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgZmlsdGVyLlxuICpcbiAqIDx1bD5cbiAqICAgPGxpPkEgfCAoQiB8IEMpID09IChBIHwgQikgfCBDID09IChBIHwgQiB8IEMpXG4gKiAgIDxsaT5BICYgKEIgJiBDKSA9PSAoQSAmIEIpICYgQyA9PSAoQSAmIEIgJiBDKVxuICogPC91bD5cbiAqXG4gKiA8cD5Gb3IgbW9yZSBpbmZvLCB2aXNpdDogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXNzb2NpYXRpdmVfcHJvcGVydHkjUHJvcG9zaXRpb25hbF9sb2dpY1xuICovIGZ1bmN0aW9uIGpyKHQpIHtcbiAgICBpZiAoRih0IGluc3RhbmNlb2YgbW4gfHwgdCBpbnN0YW5jZW9mIGduKSwgdCBpbnN0YW5jZW9mIG1uKSByZXR1cm4gdDtcbiAgICBjb25zdCBlID0gdC5nZXRGaWx0ZXJzKCk7XG4gICAgLy8gSWYgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgb25seSBjb250YWlucyAxIGZpbHRlciwgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBpdC5cbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4ganIoZVswXSk7XG4gICAgLy8gQXNzb2NpYXRpdml0eSBhcHBsaWVkIHRvIGEgZmxhdCBjb21wb3NpdGUgZmlsdGVyIHJlc3VsdHMgaXMgaXRzZWxmLlxuICAgICAgICBpZiAoVG4odCkpIHJldHVybiB0O1xuICAgIC8vIEZpcnN0IGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gYWxsIHN1YmZpbHRlcnMuIFRoaXMgd2lsbCBpbiB0dXJuIHJlY3Vyc2l2ZWx5IGFwcGx5XG4gICAgLy8gYXNzb2NpYXRpdml0eSB0byBhbGwgbmVzdGVkIGNvbXBvc2l0ZSBmaWx0ZXJzIGFuZCBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICBjb25zdCBuID0gZS5tYXAoKHQgPT4ganIodCkpKSwgcyA9IFtdO1xuICAgIC8vIEZvciBjb21wb3NpdGUgc3ViZmlsdGVycyB0aGF0IHBlcmZvcm0gdGhlIHNhbWUga2luZCBvZiBsb2dpY2FsIG9wZXJhdGlvbiBhcyBgY29tcG9zaXRlRmlsdGVyYFxuICAgIC8vIHRha2Ugb3V0IHRoZWlyIGZpbHRlcnMgYW5kIGFkZCB0aGVtIHRvIGBjb21wb3NpdGVGaWx0ZXJgLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBjb21wb3NpdGVGaWx0ZXIgPSAoQSB8IChCIHwgQyB8IEQpKVxuICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlciA9IChCIHwgQyB8IEQpXG4gICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDIHwgRClcbiAgICAvLyBOb3RlIHRoYXQgdGhlIGBjb21wb3NpdGVTdWJmaWx0ZXJgIGhhcyBiZWVuIGVsaW1pbmF0ZWQsIGFuZCBpdHMgZmlsdGVycyAoQiwgQywgRCkgaGF2ZSBiZWVuXG4gICAgLy8gYWRkZWQgdG8gdGhlIHRvcC1sZXZlbCBcImNvbXBvc2l0ZUZpbHRlclwiLlxuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgZSBpbnN0YW5jZW9mIG1uID8gcy5wdXNoKGUpIDogZSBpbnN0YW5jZW9mIGduICYmIChlLm9wID09PSB0Lm9wID8gXG4gICAgICAgIC8vIGNvbXBvc2l0ZUZpbHRlcjogKEEgfCAoQiB8IEMpKVxuICAgICAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXI6IChCIHwgQylcbiAgICAgICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDKVxuICAgICAgICBzLnB1c2goLi4uZS5maWx0ZXJzKSA6IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiAmIEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCAoQiAmIEMpKVxuICAgICAgICBzLnB1c2goZSkpO1xuICAgIH0pKSwgMSA9PT0gcy5sZW5ndGggPyBzWzBdIDogZ24uY3JlYXRlKHMsIHQub3ApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIHpyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zbiA9IG5ldyBXcjtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zbi5hZGQoZSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSh0aGlzLnNuLmdldEVudHJpZXMoZSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldEluZGV4VHlwZSh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8pO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXModCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSh0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShJdC5taW4oKSk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSkge1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShJdC5taW4oKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZUluZGV4RW50cmllcyh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBXciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxuICAgIGFkZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV0gfHwgbmV3IEVlKHV0LmNvbXBhcmF0b3IpLCBpID0gIXMuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFtlXSA9IHMuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdO1xuICAgICAgICByZXR1cm4gcyAmJiBzLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFt0XSB8fCBuZXcgRWUodXQuY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEhyID0gbmV3IFVpbnQ4QXJyYXkoMCk7XG5cbi8qKlxuICogQSBwZXJzaXN0ZWQgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVW5saWtlIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdlYiBTREsgZG9lcyBub3QgbWVtb2l6ZSBpbmRleFxuICogZGF0YSBhcyBpdCBzdXBwb3J0cyBtdWx0aS10YWIgYWNjZXNzLlxuICovXG5jbGFzcyBKciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGluLW1lbW9yeSBjb3B5IG9mIHRoZSBpbmRleCBlbnRyaWVzIHdlJ3ZlIGFscmVhZHkgd3JpdHRlbiBzaW5jZSB0aGUgU0RLXG4gICAgICAgICAqIGxhdW5jaGVkLiBVc2VkIHRvIGF2b2lkIHJlLXdyaXRpbmcgdGhlIHNhbWUgZW50cnkgcmVwZWF0ZWRseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyAqTk9UKiBhIGNvbXBsZXRlIGNhY2hlIG9mIHdoYXQncyBpbiBwZXJzaXN0ZW5jZSBhbmQgc28gY2FuIG5ldmVyIGJlXG4gICAgICAgICAqIHVzZWQgdG8gc2F0aXNmeSByZWFkcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucm4gPSBuZXcgV3IsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBmcm9tIGEgdGFyZ2V0IHRvIGl0cyBlcXVpdmFsZW50IGxpc3Qgb2Ygc3ViLXRhcmdldHMuIEVhY2ggc3ViLXRhcmdldFxuICAgICAgICAgKiBjb250YWlucyBvbmx5IG9uZSB0ZXJtIGZyb20gdGhlIHRhcmdldCdzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbiA9IG5ldyBvcygodCA9PiBPbih0KSksICgodCwgZSkgPT4gJG4odCwgZSkpKSwgdGhpcy51aWQgPSB0LnVpZCB8fCBcIlwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5ybi5oYXMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmxhc3RTZWdtZW50KCksIHMgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5ybi5hZGQoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHF0KHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFlyKHQpLnB1dChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSwgXCJcIiBdLCBbIHN0KGUpLCBcIlwiIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFlyKHQpLmoocykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29sbGVjdGlvbklkIGd1YXJkIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkgKGFuZCBpc24ndCBhcyBsb25nXG4gICAgICAgICAgICAgICAgLy8gYXMgd2UncmUgcnVubmluZyBpbiBhIHJlYWwgYnJvd3NlciksIGJ1dCB0aGVyZSdzIGEgYnVnIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kZXhlZGRic2hpbSB0aGF0IGJyZWFrcyBvdXIgcmFuZ2UgaW4gb3VyIHRlc3RzIHJ1bm5pbmcgaW4gbm9kZTpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0vaXNzdWVzLzMzNFxuICAgICAgICAgICAgICAgIGlmIChzLmNvbGxlY3Rpb25JZCAhPT0gZSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgbi5wdXNoKEd0KHMucGFyZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IFZlcmlmeSB0aGF0IHRoZSBhdXRvLWluY3JlbWVudGluZyBpbmRleCBJRCB3b3JrcyBpblxuICAgICAgICAvLyBTYWZhcmkgJiBGaXJlZm94LlxuICAgICAgICBjb25zdCBuID0gWnIodCksIHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluZGV4SWQ6IHQuaW5kZXhJZCxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICAgICAgICAgIGZpZWxkczogdC5maWVsZHMubWFwKCh0ID0+IFsgdC5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIHQua2luZCBdKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSk7XG4gICAgICAgIGRlbGV0ZSBzLmluZGV4SWQ7XG4gICAgICAgIC8vIGBpbmRleElkYCBpcyBhdXRvLXBvcHVsYXRlZCBieSBJbmRleGVkRGJcbiAgICAgICAgY29uc3QgaSA9IG4uYWRkKHMpO1xuICAgICAgICBpZiAoZS5pbmRleFN0YXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdG8odCk7XG4gICAgICAgICAgICByZXR1cm4gaS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBuLnB1dChUcih0LCB0aGlzLnVzZXIsIGUuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciwgZS5pbmRleFN0YXRlLm9mZnNldCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpLm5leHQoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBacih0KSwgcyA9IHRvKHQpLCBpID0gWHIodCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShlLmluZGV4SWQpLm5leHQoKCgpID0+IHMuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgZS5pbmRleElkIF0sIFsgZS5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSkubmV4dCgoKCkgPT4gaS5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyBlLmluZGV4SWQgXSwgWyBlLmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWHIodCk7XG4gICAgICAgIGxldCBzID0gITA7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gdnQuZm9yRWFjaCh0aGlzLnVuKGUpLCAoZSA9PiB0aGlzLmNuKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgcyAmJiAocyA9ICEhdCksIGkuc2V0KGUsIHQpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gZ3MoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZ0LmZvckVhY2goaSwgKChpLCByKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgICAgICAgICBOKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIGBVc2luZyBpbmRleCAke28gPSBpLCBgaWQ9JHtvLmluZGV4SWR9fGNnPSR7by5jb2xsZWN0aW9uR3JvdXB9fGY9JHtvLmZpZWxkcy5tYXAoKHQgPT4gYCR7dC5maWVsZFBhdGh9OiR7dC5raW5kfWApKS5qb2luKFwiLFwiKX1gfSB0byBleGVjdXRlICR7T24oZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZnQoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBCbih0LCBuLmZpZWxkUGF0aCkpIHN3aXRjaCAoZS5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS52YWx1ZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgZS52YWx1ZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGFyZSBub3QgYXJyYXkgZmlsdGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiAhPSBvciBOT1RfSU4gZmlsdGVycy4gUmV0dXJuc1xuICogYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi8gKHIsIGkpLCBjID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgZHQoZSkpIGZvciAoY29uc3QgZSBvZiBCbih0LCBzLmZpZWxkUGF0aCkpIHN3aXRjaCAoZS5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgZXF1YWxpdHkgcHJlZml4LCB3aGljaCBpcyBlbmNvZGVkIGluIHRoZSBpbmRleCB2YWx1ZSBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW5lcXVhbGl0eSAoZS5nLiBgYSA9PSAnYScgJiYgYiAhPSAnYidgIGlzIGVuY29kZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBgdmFsdWUgIT0gJ2FiJ2ApLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2V0KHMuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RJbi9Ob3RFcXVhbCBpcyBhbHdheXMgYSBzdWZmaXguIFRoZXJlIGNhbm5vdCBiZSBhbnkgcmVtYWluaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VnbWVudHMgYW5kIGhlbmNlIHdlIGNhbiByZXR1cm4gZWFybHkgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zZXQocy5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIGUudmFsdWUpLCBBcnJheS5mcm9tKG4udmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIG5vdEluIGJvdW5kcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIGxvd2VyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgc3RhcnRpbmcgcG9pbnQgdG9cbiAqIHNjYW4gdGhlIGluZGV4IGRlZmluZWQgYnkgYGZpZWxkSW5kZXhgLiBSZXR1cm5zIGBNSU5fVkFMVUVgIGlmIG5vIGxvd2VyIGJvdW5kXG4gKiBleGlzdHMuXG4gKi8gKHIsIGkpLCBhID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIHNlZ21lbnQsIHJldHJpZXZlIGEgbG93ZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0QXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZHQoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBMbih0LCBpLmZpZWxkUGF0aCwgdC5zdGFydEF0KSA6IHFuKHQsIGkuZmllbGRQYXRoLCB0LnN0YXJ0QXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaChlLnZhbHVlKSwgcyAmJiAocyA9IGUuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaG4obiwgcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGFuIHVwcGVyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIGVuZGluZyBwb2ludFxuICogd2hlbiBzY2FubmluZyB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1BWF9WQUxVRWAgaWYgbm9cbiAqIHVwcGVyIGJvdW5kIGV4aXN0cy5cbiAqLyAociwgaSksIGggPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYW4gdXBwZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGR0KGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gaS5raW5kID8gcW4odCwgaS5maWVsZFBhdGgsIHQuZW5kQXQpIDogTG4odCwgaS5maWVsZFBhdGgsIHQuZW5kQXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaChlLnZhbHVlKSwgcyAmJiAocyA9IGUuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaG4obiwgcyk7XG4gICAgICAgICAgICAgICAgICAgIH0ociwgaSksIGwgPSB0aGlzLmFuKGksIHIsIGEpLCBmID0gdGhpcy5hbihpLCByLCBoKSwgZCA9IHRoaXMuaG4oaSwgciwgYyksIF8gPSB0aGlzLmxuKGkuaW5kZXhJZCwgdSwgbCwgYS5pbmNsdXNpdmUsIGYsIGguaW5jbHVzaXZlLCBkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZ0LmZvckVhY2goXywgKGkgPT4gbi5IKGksIGUubGltaXQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gaHQuZnJvbVNlZ21lbnRzKGUuZG9jdW1lbnRLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaGFzKG4pIHx8ICh0ID0gdC5hZGQobiksIHMucHVzaChuKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB1bih0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5vbi5nZXQodCk7XG4gICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgaWYgKDAgPT09IHQuZmlsdGVycy5sZW5ndGgpIGUgPSBbIHQgXTsgZWxzZSB7XG4gICAgICAgICAgICBlID0gQnIoZ24uY3JlYXRlKHQuZmlsdGVycywgXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8pKS5tYXAoKGUgPT4gTW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCBlLmdldEZpbHRlcnMoKSwgdC5saW1pdCwgdC5zdGFydEF0LCB0LmVuZEF0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9uLnNldCh0LCBlKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIGtleSByYW5nZSBxdWVyeSBvbiBgRGJJbmRleEVudHJ5U3RvcmVgIHRoYXQgdW5pb25zIGFsbFxuICAgICAqIGJvdW5kcy5cbiAgICAgKi8gICAgbG4odCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHRvdGFsIGluZGV4IHNjYW5zIHdlIHVuaW9uIHRvZ2V0aGVyLiBUaGlzIGlzIHNpbWlsYXIgdG8gYVxuICAgICAgICAvLyBkaXN0cmlidXRlZCBub3JtYWwgZm9ybSwgYnV0IGFkYXB0ZWQgZm9yIGFycmF5IHZhbHVlcy4gV2UgY3JlYXRlIGEgc2luZ2xlXG4gICAgICAgIC8vIGluZGV4IHJhbmdlIHBlciB2YWx1ZSBpbiBhbiBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVyXG4gICAgICAgIC8vIGNvbWJpbmVkIHdpdGggdGhlIHZhbHVlcyBmcm9tIHRoZSBxdWVyeSBib3VuZHMuXG4gICAgICAgIGNvbnN0IHUgPSAobnVsbCAhPSBlID8gZS5sZW5ndGggOiAxKSAqIE1hdGgubWF4KG4ubGVuZ3RoLCBpLmxlbmd0aCksIGMgPSB1IC8gKG51bGwgIT0gZSA/IGUubGVuZ3RoIDogMSksIGEgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCB1OyArK2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBlID8gdGhpcy5mbihlW2ggLyBjXSkgOiBIciwgbCA9IHRoaXMuZG4odCwgdSwgbltoICUgY10sIHMpLCBmID0gdGhpcy5fbih0LCB1LCBpW2ggJSBjXSwgciksIGQgPSBvLm1hcCgoZSA9PiB0aGlzLmRuKHQsIHUsIGUsIFxuICAgICAgICAgICAgLyogaW5jbHVzaXZlPSAqLyAhMCkpKTtcbiAgICAgICAgICAgIGEucHVzaCguLi50aGlzLmNyZWF0ZVJhbmdlKGwsIGYsIGQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgbG93ZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBkbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcga3IodCwgaHQuZW1wdHkoKSwgZSwgbik7XG4gICAgICAgIHJldHVybiBzID8gaSA6IGkuSGUoKTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgdXBwZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBfbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcga3IodCwgaHQuZW1wdHkoKSwgZSwgbik7XG4gICAgICAgIHJldHVybiBzID8gaS5IZSgpIDogaTtcbiAgICB9XG4gICAgY24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3ICRyKGUpLCBzID0gbnVsbCAhPSBlLmNvbGxlY3Rpb25Hcm91cCA/IGUuY29sbGVjdGlvbkdyb3VwIDogZS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgaW5kZXggd2l0aCB0aGUgbW9zdCBudW1iZXIgb2Ygc2VnbWVudHMuXG4gICAgICAgICAgICBsZXQgZSA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkge1xuICAgICAgICAgICAgICAgIG4uWmUocykgJiYgKCFlIHx8IHMuZmllbGRzLmxlbmd0aCA+IGUuZmllbGRzLmxlbmd0aCkgJiYgKGUgPSBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEluZGV4VHlwZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gMiAvKiBJbmRleFR5cGUuRlVMTCAqLztcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudW4oZSk7XG4gICAgICAgIHJldHVybiB2dC5mb3JFYWNoKHMsIChlID0+IHRoaXMuY24odCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0ID8gMCAvKiBJbmRleFR5cGUuTk9ORSAqLyAhPT0gbiAmJiB0LmZpZWxkcy5sZW5ndGggPCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRWUoYXQuY29tcGFyYXRvciksIG4gPSAhMTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdC5maWx0ZXJzKSBmb3IgKGNvbnN0IHQgb2Ygcy5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIFxuICAgICAgICAgICAgICAgIC8vIF9fbmFtZV9fIGlzIG5vdCBhbiBleHBsaWNpdCBzZWdtZW50IG9mIGFueSBpbmRleCwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvdW50IGl0LlxuICAgICAgICAgICAgICAgIHQuZmllbGQuaXNLZXlGaWVsZCgpIHx8IChcbiAgICAgICAgICAgICAgICAvLyBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVycyBtdXN0IGJlIGNvdW50ZWQgc2VwYXJhdGVseS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgaW5zdGFuY2UsIGl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgYW4gaW5kZXggZm9yIFwiYSBBUlJBWSBhIEFTQ1wiLiBFdmVuXG4gICAgICAgICAgICAgICAgLy8gdGhvdWdoIHRoZXNlIGFyZSBvbiB0aGUgc2FtZSBmaWVsZCwgdGhleSBzaG91bGQgYmUgY291bnRlZCBhcyB0d29cbiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0ZSBzZWdtZW50cyBpbiBhbiBpbmRleC5cbiAgICAgICAgICAgICAgICBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHQub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHQub3AgPyBuID0gITAgOiBlID0gZS5hZGQodC5maWVsZCkpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0Lm9yZGVyQnkpIFxuICAgICAgICAgICAgICAgIC8vIF9fbmFtZV9fIGlzIG5vdCBhbiBleHBsaWNpdCBzZWdtZW50IG9mIGFueSBpbmRleCwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNvdW50IGl0LlxuICAgICAgICAgICAgICAgIG4uZmllbGQuaXNLZXlGaWVsZCgpIHx8IChlID0gZS5hZGQobi5maWVsZCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnNpemUgKyAobiA/IDEgOiAwKTtcbiAgICAgICAgICAgIH0oZSkgJiYgKG4gPSAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovKSA6IG4gPSAwIC8qIEluZGV4VHlwZS5OT05FICovO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBcbiAgICAgICAgLy8gT1IgcXVlcmllcyBoYXZlIG1vcmUgdGhhbiBvbmUgc3ViLXRhcmdldCAob25lIHN1Yi10YXJnZXQgcGVyIERORiB0ZXJtKS4gV2UgY3VycmVudGx5IGNvbnNpZGVyXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgdGhhdCBoYXZlIGEgYGxpbWl0YCB0byBoYXZlIGEgcGFydGlhbCBpbmRleC4gRm9yIHN1Y2ggcXVlcmllcyB3ZSBwZXJmb3JtIHNvcnRpbmdcbiAgICAgICAgLy8gYW5kIGFwcGx5IHRoZSBsaW1pdCBpbiBtZW1vcnkgYXMgYSBwb3N0LXByb2Nlc3Npbmcgc3RlcC5cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IHQubGltaXQ7XG4gICAgICAgIH0oZSkgJiYgcy5sZW5ndGggPiAxICYmIDIgLyogSW5kZXhUeXBlLkZVTEwgKi8gPT09IG4gPyAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovIDogbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGVuY29kZWQgZm9ybSBvZiB0aGUgZGlyZWN0aW9uYWwgdmFsdWVzIGluIHRoZSBmaWVsZCBpbmRleC5cbiAgICAgKiBSZXR1cm5zIGBudWxsYCBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgaGF2ZSBhbGwgZmllbGRzIHNwZWNpZmllZCBpbiB0aGVcbiAgICAgKiBpbmRleC5cbiAgICAgKi8gICAgd24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE5yO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgZHQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5XZShzLmtpbmQpO1xuICAgICAgICAgICAgYnIuYmUuX2UodCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4uR2UoKTtcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBzaW5nbGUgdmFsdWUgdG8gdGhlIGFzY2VuZGluZyBpbmRleCBmb3JtYXQuICovICAgIGZuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBOcjtcbiAgICAgICAgcmV0dXJuIGJyLmJlLl9lKHQsIGUuV2UoMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSksIGUuR2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbmNvZGVkIGZvcm0gb2YgdGhlIGRvY3VtZW50IGtleSB0aGF0IHNvcnRzIGJhc2VkIG9uIHRoZSBrZXlcbiAgICAgKiBvcmRlcmluZyBvZiB0aGUgZmllbGQgaW5kZXguXG4gICAgICovICAgIG1uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBOcjtcbiAgICAgICAgcmV0dXJuIGJyLmJlLl9lKFdlKHRoaXMuZGF0YWJhc2VJZCwgZSksIG4uV2UoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IGR0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIDAgPT09IGUubGVuZ3RoID8gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovIDogZVtlLmxlbmd0aCAtIDFdLmtpbmQ7XG4gICAgICAgIH0odCkpKSwgbi5HZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBnaXZlbiBmaWVsZCB2YWx1ZXMgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGluIGB0YXJnZXRgLlxuICAgICAqIEZvciBJTiBxdWVyaWVzLCBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBobih0LCBlLCBuKSB7XG4gICAgICAgIGlmIChudWxsID09PSBuKSByZXR1cm4gW107XG4gICAgICAgIGxldCBzID0gW107XG4gICAgICAgIHMucHVzaChuZXcgTnIpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBkdCh0KSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5baSsrXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzKSBpZiAodGhpcy5nbihlLCByLmZpZWxkUGF0aCkgJiYgSmUodCkpIHMgPSB0aGlzLnluKHMsIHIsIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbi5XZShyLmtpbmQpO1xuICAgICAgICAgICAgICAgIGJyLmJlLl9lKHQsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBuKHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBnaXZlbiBib3VuZHMgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGluIGB0YXJnZXRgLiBGb3IgSU5cbiAgICAgKiBxdWVyaWVzLCBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBhbih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhuKHQsIGUsIG4ucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgYnl0ZSByZXByZXNlbnRhdGlvbiBmb3IgdGhlIHByb3ZpZGVkIGVuY29kZXJzLiAqLyAgICBwbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSBlW25dID0gdFtuXS5HZSgpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNlcGFyYXRlIGVuY29kZXIgZm9yIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIFRoZSBtZXRob2QgYXBwZW5kcyBlYWNoIHZhbHVlIHRvIGFsbCBleGlzdGluZyBlbmNvZGVycyAoZS5nLiBmaWx0ZXIoXCJhXCIsXG4gICAgICogXCI9PVwiLCBcImExXCIpLmZpbHRlcihcImJcIiwgXCJpblwiLCBbXCJiMVwiLCBcImIyXCJdKSBiZWNvbWVzIFtcImExLGIxXCIsIFwiYTEsYjJcIl0pLiBBXG4gICAgICogbGlzdCBvZiBuZXcgZW5jb2RlcnMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIHluKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFsgLi4udCBdLCBpID0gW107XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBmb3IgKGNvbnN0IG4gb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBOcjtcbiAgICAgICAgICAgIHMuc2VlZChuLkdlKCkpLCBici5iZS5fZSh0LCBzLldlKGUua2luZCkpLCBpLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGduKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICEhdC5maWx0ZXJzLmZpbmQoKHQgPT4gdCBpbnN0YW5jZW9mIG1uICYmIHQuZmllbGQuaXNFcXVhbChlKSAmJiAoXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0Lm9wIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSB0Lm9wKSkpO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWnIodCksIHMgPSB0byh0KTtcbiAgICAgICAgcmV0dXJuIChlID8gbi5qKFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQoZSwgZSkpIDogbi5qKCkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHZ0LmZvckVhY2godCwgKHQgPT4gcy5nZXQoWyB0LmluZGV4SWQsIHRoaXMudWlkIF0pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIGUucHVzaChmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlID8gbmV3IGd0KGUuc2VxdWVuY2VOdW1iZXIsIG5ldyBJdChfcihlLnJlYWRUaW1lKSwgbmV3IGh0KEd0KGUuZG9jdW1lbnRLZXkpKSwgZS5sYXJnZXN0QmF0Y2hJZCkpIDogZ3QuZW1wdHkoKSwgcyA9IHQuZmllbGRzLm1hcCgoKFt0LCBlXSkgPT4gbmV3IHd0KGF0LmZyb21TZXJ2ZXJGb3JtYXQodCksIGUpKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbHQodC5pbmRleElkLCB0LmNvbGxlY3Rpb25Hcm91cCwgcywgbik7XG4gICAgICAgICAgICAgICAgfSh0LCBuKSk7XG4gICAgICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKHQpLm5leHQoKHQgPT4gMCA9PT0gdC5sZW5ndGggPyBudWxsIDogKHQuc29ydCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIgLSBlLmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXI7XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBldCh0LmNvbGxlY3Rpb25Hcm91cCwgZS5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICB9KSksIHRbMF0uY29sbGVjdGlvbkdyb3VwKSkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWnIodCksIGkgPSB0byh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4odCkubmV4dCgodCA9PiBzLmooXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZChlLCBlKSkubmV4dCgoZSA9PiB2dC5mb3JFYWNoKGUsIChlID0+IGkucHV0KFRyKGUuaW5kZXhJZCwgdGhpcy51c2VyLCB0LCBuKSkpKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUluZGV4RW50cmllcyh0LCBlKSB7XG4gICAgICAgIC8vIFBvcnRpbmcgTm90ZTogYGdldEZpZWxkSW5kZXhlcygpYCBvbiBXZWIgZG9lcyBub3QgY2FjaGUgaW5kZXggbG9va3VwcyBhc1xuICAgICAgICAvLyBpdCBjb3VsZCBiZSB1c2VkIGFjcm9zcyBkaWZmZXJlbnQgSW5kZXhlZERCIHRyYW5zYWN0aW9ucy4gQXMgYW55IGNhY2hlZFxuICAgICAgICAvLyBkYXRhIG1pZ2h0IGJlIGludmFsaWRhdGVkIGJ5IG90aGVyIG11bHRpLXRhYiBjbGllbnRzLCB3ZSBjYW4gb25seSB0cnVzdFxuICAgICAgICAvLyBkYXRhIHdpdGhpbiBhIHNpbmdsZSBJbmRleGVkREIgdHJhbnNhY3Rpb24uIFdlIHRoZXJlZm9yZSBhZGQgYSBjYWNoZVxuICAgICAgICAvLyBoZXJlLlxuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIHZ0LmZvckVhY2goZSwgKChlLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5nZXQoZS5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICAgICAgcmV0dXJuIChpID8gdnQucmVzb2x2ZShpKSA6IHRoaXMuZ2V0RmllbGRJbmRleGVzKHQsIGUuY29sbGVjdGlvbkdyb3VwKSkubmV4dCgoaSA9PiAobi5zZXQoZS5jb2xsZWN0aW9uR3JvdXAsIGkpLCBcbiAgICAgICAgICAgIHZ0LmZvckVhY2goaSwgKG4gPT4gdGhpcy5Ubih0LCBlLCBuKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5FbihzLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5pc0VxdWFsKGkpID8gdnQucmVzb2x2ZSgpIDogdGhpcy5Bbih0LCBzLCBuLCBlLCBpKTtcbiAgICAgICAgICAgIH0pKSkpKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFJuKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIFhyKHQpLnB1dCh7XG4gICAgICAgICAgICBpbmRleElkOiBzLmluZGV4SWQsXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxuICAgICAgICAgICAgYXJyYXlWYWx1ZTogcy5hcnJheVZhbHVlLFxuICAgICAgICAgICAgZGlyZWN0aW9uYWxWYWx1ZTogcy5kaXJlY3Rpb25hbFZhbHVlLFxuICAgICAgICAgICAgb3JkZXJlZERvY3VtZW50S2V5OiB0aGlzLm1uKG4sIGUua2V5KSxcbiAgICAgICAgICAgIGRvY3VtZW50S2V5OiBlLmtleS5wYXRoLnRvQXJyYXkoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdm4odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gWHIodCkuZGVsZXRlKFsgcy5pbmRleElkLCB0aGlzLnVpZCwgcy5hcnJheVZhbHVlLCBzLmRpcmVjdGlvbmFsVmFsdWUsIHRoaXMubW4obiwgZS5rZXkpLCBlLmtleS5wYXRoLnRvQXJyYXkoKSBdKTtcbiAgICB9XG4gICAgVG4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWHIodCk7XG4gICAgICAgIGxldCBpID0gbmV3IEVlKE1yKTtcbiAgICAgICAgcmV0dXJuIHMuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShbIG4uaW5kZXhJZCwgdGhpcy51aWQsIHRoaXMubW4obiwgZSkgXSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQobmV3IGtyKG4uaW5kZXhJZCwgZSwgcy5hcnJheVZhbHVlLCBzLmRpcmVjdGlvbmFsVmFsdWUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gICAgRW4odCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBFZShNcik7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnduKGUsIHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBzKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IGZ0KGUpO1xuICAgICAgICBpZiAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kYXRhLmZpZWxkKGkuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChKZShyKSkgZm9yIChjb25zdCBpIG9mIHIuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIG4gPSBuLmFkZChuZXcga3IoZS5pbmRleElkLCB0LmtleSwgdGhpcy5mbihpKSwgcykpO1xuICAgICAgICB9IGVsc2UgbiA9IG4uYWRkKG5ldyBrcihlLmluZGV4SWQsIHQua2V5LCBIciwgcykpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgaW5kZXggZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGJ5IGRlbGV0aW5nIGVudHJpZXNcbiAgICAgKiB0aGF0IGFyZSBubyBsb25nZXIgcmVmZXJlbmNlZCBpbiBgbmV3RW50cmllc2AgYW5kIGFkZGluZyBhbGwgbmV3bHkgYWRkZWRcbiAgICAgKiBlbnRyaWVzLlxuICAgICAqLyAgICBBbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIE4oXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgXCJVcGRhdGluZyBpbmRleCBlbnRyaWVzIGZvciBkb2N1bWVudCAnJXMnXCIsIGUua2V5KTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZ2V0SXRlcmF0b3IoKSwgbyA9IGUuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgICAgIGxldCB1ID0gUmUociksIGMgPSBSZShvKTtcbiAgICAgICAgICAgIC8vIFdhbGsgdGhyb3VnaCB0aGUgdHdvIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgdXNpbmcgdGhlIG9yZGVyaW5nIGRlZmluZWQgYnlcbiAgICAgICAgICAgIC8vIGBjb21wYXJhdG9yYC5cbiAgICAgICAgICAgIGZvciAoO3UgfHwgYzsgKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSAhMSwgZSA9ICExO1xuICAgICAgICAgICAgICAgIGlmICh1ICYmIGMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG4odSwgYyk7XG4gICAgICAgICAgICAgICAgICAgIHMgPCAwID8gXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyByZW1vdmVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICAgICAgZSA9ICEwIDogcyA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBvbmx5IGluIGBhZnRlcmAuXG4gICAgICAgICAgICAgICAgICAgIHQgPSAhMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG51bGwgIT0gdSA/IGUgPSAhMCA6IHQgPSAhMDtcbiAgICAgICAgICAgICAgICB0ID8gKHMoYyksIGMgPSBSZShvKSkgOiBlID8gKGkodSksIHUgPSBSZShyKSkgOiAodSA9IFJlKHIpLCBjID0gUmUobykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHMsIGksIE1yLCAoXG4gICAgICAgIC8qIG9uQWRkPSAqLyBzID0+IHtcbiAgICAgICAgICAgIHIucHVzaCh0aGlzLlJuKHQsIGUsIG4sIHMpKTtcbiAgICAgICAgfSksIChcbiAgICAgICAgLyogb25SZW1vdmU9ICovIHMgPT4ge1xuICAgICAgICAgICAgci5wdXNoKHRoaXMudm4odCwgZSwgbiwgcykpO1xuICAgICAgICB9KSksIHZ0LndhaXRGb3Iocik7XG4gICAgfVxuICAgIEluKHQpIHtcbiAgICAgICAgbGV0IGUgPSAxO1xuICAgICAgICByZXR1cm4gdG8odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJzZXF1ZW5jZU51bWJlckluZGV4XCIsXG4gICAgICAgICAgICByZXZlcnNlOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51aWQsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0pXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgcy5kb25lKCksIGUgPSBuLnNlcXVlbmNlTnVtYmVyICsgMTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBzZXQgb2YgSURCIHJhbmdlcyB0aGF0IHNwbGl0cyB0aGUgZXhpc3RpbmcgcmFuZ2UgYW5kIGV4Y2x1ZGVzXG4gICAgICogYW55IHZhbHVlcyB0aGF0IG1hdGNoIHRoZSBgbm90SW5WYWx1ZWAgZnJvbSB0aGVzZSByYW5nZXMuIEFzIGFuIGV4YW1wbGUsXG4gICAgICogJ1tmb28gPiAyICYmIGZvbyAhPSAzXWAgYmVjb21lcyAgYFtmb28gPiAyICYmIDwgMywgZm9vID4gM11gLlxuICAgICAqLyAgICBjcmVhdGVSYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFRoZSBub3RJbiB2YWx1ZXMgbmVlZCB0byBiZSBzb3J0ZWQgYW5kIHVuaXF1ZSBzbyB0aGF0IHdlIGNhbiByZXR1cm4gYVxuICAgICAgICAvLyBzb3J0ZWQgc2V0IG9mIG5vbi1vdmVybGFwcGluZyByYW5nZXMuXG4gICAgICAgIG4gPSBuLnNvcnQoKCh0LCBlKSA9PiBNcih0LCBlKSkpLmZpbHRlcigoKHQsIGUsIG4pID0+ICFlIHx8IDAgIT09IE1yKHQsIG5bZSAtIDFdKSkpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHMucHVzaCh0KTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBNcihpLCB0KSwgciA9IE1yKGksIGUpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIHRoZSBsb3dlciBib3VuZC4gV2UgdGhlcmVmb3JlIG5lZWQgdG8gcmFpc2UgdGhlIGJvdW5kXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCB2YWx1ZS5cbiAgICAgICAgICAgIHNbMF0gPSB0LkhlKCk7IGVsc2UgaWYgKG4gPiAwICYmIHIgPCAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgcy5wdXNoKGkpLCBzLnB1c2goaS5IZSgpKTsgZWxzZSBpZiAociA+IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIChhbmQgYWxsIGZvbGxvd2luZyB2YWx1ZXMpIGFyZSBvdXQgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBzLmxlbmd0aDsgdCArPSAyKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgdHdvIGJvdW5kcyB0aGF0IHdpbGwgY3JlYXRlIGFuIHVubWF0Y2hhYmxlIGtleSByYW5nZSxcbiAgICAgICAgICAgIC8vIHRoZW4gd2UgcmV0dXJuIGFuIGVtcHR5IHNldCBvZiBrZXkgcmFuZ2VzLlxuICAgICAgICAgICAgaWYgKHRoaXMuUG4oc1t0XSwgc1t0ICsgMV0pKSByZXR1cm4gW107XG4gICAgICAgICAgICBjb25zdCBlID0gWyBzW3RdLmluZGV4SWQsIHRoaXMudWlkLCBzW3RdLmFycmF5VmFsdWUsIHNbdF0uZGlyZWN0aW9uYWxWYWx1ZSwgSHIsIFtdIF0sIG4gPSBbIHNbdCArIDFdLmluZGV4SWQsIHRoaXMudWlkLCBzW3QgKyAxXS5hcnJheVZhbHVlLCBzW3QgKyAxXS5kaXJlY3Rpb25hbFZhbHVlLCBIciwgW10gXTtcbiAgICAgICAgICAgIGkucHVzaChJREJLZXlSYW5nZS5ib3VuZChlLCBuKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIFBuKHQsIGUpIHtcbiAgICAgICAgLy8gSWYgbG93ZXIgYm91bmQgaXMgZ3JlYXRlciB0aGFuIHRoZSB1cHBlciBib3VuZCwgdGhlbiB0aGUga2V5XG4gICAgICAgIC8vIHJhbmdlIGNhbiBuZXZlciBiZSBtYXRjaGVkLlxuICAgICAgICByZXR1cm4gTXIodCwgZSkgPiAwO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKHQsIGUpLm5leHQoZW8pO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdnQubWFwQXJyYXkodGhpcy51bihlKSwgKGUgPT4gdGhpcy5jbih0LCBlKS5uZXh0KCh0ID0+IHQgfHwgJCgpKSkpKS5uZXh0KGVvKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWXIodCkge1xuICAgIHJldHVybiB3ZSh0LCBcImNvbGxlY3Rpb25QYXJlbnRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggZW50cnkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFhyKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJpbmRleEVudHJpZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBjb25maWd1cmF0aW9uIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBacih0KSB7XG4gICAgcmV0dXJuIHdlKHQsIFwiaW5kZXhDb25maWd1cmF0aW9uXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggc3RhdGUgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHRvKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJpbmRleFN0YXRlXCIpO1xufVxuXG5mdW5jdGlvbiBlbyh0KSB7XG4gICAgRigwICE9PSB0Lmxlbmd0aCk7XG4gICAgbGV0IGUgPSB0WzBdLmluZGV4U3RhdGUub2Zmc2V0LCBuID0gZS5sYXJnZXN0QmF0Y2hJZDtcbiAgICBmb3IgKGxldCBzID0gMTsgcyA8IHQubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgY29uc3QgaSA9IHRbc10uaW5kZXhTdGF0ZS5vZmZzZXQ7XG4gICAgICAgIFR0KGksIGUpIDwgMCAmJiAoZSA9IGkpLCBuIDwgaS5sYXJnZXN0QmF0Y2hJZCAmJiAobiA9IGkubGFyZ2VzdEJhdGNoSWQpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEl0KGUucmVhZFRpbWUsIGUuZG9jdW1lbnRLZXksIG4pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBubyA9IHtcbiAgICBkaWRSdW46ICExLFxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXG59O1xuXG5jbGFzcyBzbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgdCwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgZSwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IHQsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IGUsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBzbyh0LCBzby5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgc28uREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiBpbyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSB0LnN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIiksIHIgPSBbXSwgbyA9IElEQktleVJhbmdlLm9ubHkobi5iYXRjaElkKTtcbiAgICBsZXQgdSA9IDA7XG4gICAgY29uc3QgYyA9IHMuWCh7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKCh0LCBlLCBuKSA9PiAodSsrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHIucHVzaChjLm5leHQoKCgpID0+IHtcbiAgICAgICAgRigxID09PSB1KTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IGEgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcyA9IHp0KGUsIHQua2V5LnBhdGgsIG4uYmF0Y2hJZCk7XG4gICAgICAgIHIucHVzaChpLmRlbGV0ZShzKSksIGEucHVzaCh0LmtleSk7XG4gICAgfVxuICAgIHJldHVybiB2dC53YWl0Rm9yKHIpLm5leHQoKCgpID0+IGEpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAqLyBmdW5jdGlvbiBybyh0KSB7XG4gICAgaWYgKCF0KSByZXR1cm4gMDtcbiAgICBsZXQgZTtcbiAgICBpZiAodC5kb2N1bWVudCkgZSA9IHQuZG9jdW1lbnQ7IGVsc2UgaWYgKHQudW5rbm93bkRvY3VtZW50KSBlID0gdC51bmtub3duRG9jdW1lbnQ7IGVsc2Uge1xuICAgICAgICBpZiAoIXQubm9Eb2N1bWVudCkgdGhyb3cgJCgpO1xuICAgICAgICBlID0gdC5ub0RvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSkubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgbXV0YXRpb24gcXVldWUgZm9yIGEgc3BlY2lmaWMgdXNlciwgYmFja2VkIGJ5IEluZGV4ZWREQi4gKi8gc28uREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUgPSAxMCwgXG5zby5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QgPSAxZTMsIHNvLkRFRkFVTFQgPSBuZXcgc28oNDE5NDMwNDAsIHNvLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBzby5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpLCBcbnNvLkRJU0FCTEVEID0gbmV3IHNvKC0xLCAwLCAwKTtcblxuY2xhc3Mgb28ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXG4gICAgICogcmV0cmlldmUgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBlLCB0aGlzLmluZGV4TWFuYWdlciA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLmJuID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBmZSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBGKFwiXCIgIT09IHQudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNBdXRoZW50aWNhdGVkKCkgPyB0LnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgb28oaSwgZSwgbiwgcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICBsZXQgZSA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIGNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUgPSAhMSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gYW8odCksIHIgPSBjbyh0KTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHIuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIEYoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCB1ID0gbmV3IFpzKG8sIGUsIG4sIHMpLCBjID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmJhc2VNdXRhdGlvbnMubWFwKChlID0+IGppKHQubGUsIGUpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKGUgPT4gamkodC5sZSwgZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoSWQ6IG4uYmF0Y2hJZCxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxXcml0ZVRpbWVNczogbi5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLFxuICAgICAgICAgICAgICAgICAgICBiYXNlTXV0YXRpb25zOiBzLFxuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbnM6IGlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHRoaXMudXNlcklkLCB1KSwgYSA9IFtdO1xuICAgICAgICAgICAgbGV0IGggPSBuZXcgRWUoKCh0LCBlKSA9PiBldCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0genQodGhpcy51c2VySWQsIHQua2V5LnBhdGgsIG8pO1xuICAgICAgICAgICAgICAgIGggPSBoLmFkZCh0LmtleS5wYXRoLnBvcExhc3QoKSksIGEucHVzaChyLnB1dChjKSksIGEucHVzaChpLnB1dChlLCBXdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGguZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgYS5wdXNoKHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpKTtcbiAgICAgICAgICAgIH0pKSwgdC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibltvXSA9IHUua2V5cygpO1xuICAgICAgICAgICAgfSkpLCB2dC53YWl0Rm9yKGEpLm5leHQoKCgpID0+IHUpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGNvKHQpLmdldChlKS5uZXh0KCh0ID0+IHQgPyAoRih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCB3cih0aGlzLnNlcmlhbGl6ZXIsIHQpKSA6IG51bGwpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgdGhlIG11dGF0aW9uIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQuXG4gICAgICogRm9yIHByaW1hcnkgY2xpZW50cywgdGhpcyBtZXRob2QgcmV0dXJucyBgbnVsbGAgYWZ0ZXJcbiAgICAgKiBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgIGhhcyBiZWVuIGNhbGxlZC4gU2Vjb25kYXJ5IGNsaWVudHMgcmV0dXJuIGFcbiAgICAgKiBjYWNoZWQgcmVzdWx0IHVudGlsIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgaXMgaW52b2tlZC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIFZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm5bZV0gPyB2dC5yZXNvbHZlKHRoaXMuYm5bZV0pIDogdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5rZXlzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm5bZV0gPSBuLCBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdGhpcy51c2VySWQsIG4gXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGUudXNlcklkID09PSB0aGlzLnVzZXJJZCAmJiAoRihlLmJhdGNoSWQgPj0gbiksIGkgPSB3cih0aGlzLnNlcmlhbGl6ZXIsIGUpKSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkge1xuICAgICAgICBjb25zdCBlID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBuID0gLTE7XG4gICAgICAgIHJldHVybiBjbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IGUsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSBlLmJhdGNoSWQsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgLTEgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gY28odCkuaihcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBlKS5uZXh0KCh0ID0+IHQubWFwKCh0ID0+IHdyKHRoaXMuc2VyaWFsaXplciwgdCkpKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIC8vIFNjYW4gdGhlIGRvY3VtZW50LW11dGF0aW9uIGluZGV4IHN0YXJ0aW5nIHdpdGggYSBwcmVmaXggc3RhcnRpbmcgd2l0aFxuICAgICAgICAvLyB0aGUgZ2l2ZW4gZG9jdW1lbnRLZXkuXG4gICAgICAgIGNvbnN0IG4gPSBqdCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIGFvKHQpLlgoe1xuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChuLCBzLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbywgdSwgY10gPSBuLCBhID0gR3QodSk7XG4gICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSB0aGlzLnVzZXJJZCAmJiBlLnBhdGguaXNFcXVhbChhKSkgXG4gICAgICAgICAgICAvLyBMb29rIHVwIHRoZSBtdXRhdGlvbiBiYXRjaCBpbiB0aGUgc3RvcmUuXG4gICAgICAgICAgICByZXR1cm4gY28odCkuZ2V0KGMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdCkgdGhyb3cgJCgpO1xuICAgICAgICAgICAgICAgIEYodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgaS5wdXNoKHdyKHRoaXMuc2VyaWFsaXplciwgdCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3IEVlKGV0KTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBqdCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSBhbyh0KS5YKHtcbiAgICAgICAgICAgICAgICByYW5nZTogclxuICAgICAgICAgICAgfSwgKCh0LCBzLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3IsIG8sIHVdID0gdCwgYyA9IEd0KG8pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID09PSB0aGlzLnVzZXJJZCAmJiBlLnBhdGguaXNFcXVhbChjKSA/IG4gPSBuLmFkZCh1KSA6IGkuZG9uZSgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcy5wdXNoKG8pO1xuICAgICAgICB9KSksIHZ0LndhaXRGb3IocykubmV4dCgoKCkgPT4gdGhpcy5Tbih0LCBuKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnBhdGgsIHMgPSBuLmxlbmd0aCArIDEsIGkgPSBqdCh0aGlzLnVzZXJJZCwgbiksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3IEVlKGV0KTtcbiAgICAgICAgcmV0dXJuIGFvKHQpLlgoe1xuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKCh0LCBlLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbciwgdSwgY10gPSB0LCBhID0gR3QodSk7XG4gICAgICAgICAgICByID09PSB0aGlzLnVzZXJJZCAmJiBuLmlzUHJlZml4T2YoYSkgPyBcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGVcbiAgICAgICAgICAgIC8vIHF1ZXJ5IHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJ1xuICAgICAgICAgICAgLy8gY2FuJ3QgbWF0Y2ggdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICBhLmxlbmd0aCA9PT0gcyAmJiAobyA9IG8uYWRkKGMpKSA6IGkuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy5Tbih0LCBvKSkpO1xuICAgIH1cbiAgICBTbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAvLyBUT0RPKHJvY2t3b29kKTogSW1wbGVtZW50IHRoaXMgdXNpbmcgaXRlcmF0ZS5cbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goY28odCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSB0KSB0aHJvdyAkKCk7XG4gICAgICAgICAgICAgICAgRih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBuLnB1c2god3IodGhpcy5zZXJpYWxpemVyLCB0KSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSksIHZ0LndhaXRGb3IocykubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGlvKHQuYXQsIHRoaXMudXNlcklkLCBlKS5uZXh0KChuID0+ICh0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRG4oZS5iYXRjaElkKTtcbiAgICAgICAgfSkpLCB2dC5mb3JFYWNoKG4sIChlID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBjYWNoZWQga2V5cyBmb3IgYSBtdXRhdGlvbiBiYXRjaC4gVGhpcyBtZXRob2Qgc2hvdWxkIGJlXG4gICAgICogY2FsbGVkIGJ5IHNlY29uZGFyeSBjbGllbnRzIGFmdGVyIHRoZXkgcHJvY2VzcyBtdXRhdGlvbiB1cGRhdGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGRvZXMgbm90IGhhdmUgdG8gYmUgY2FsbGVkIGZyb20gcHJpbWFyeSBjbGllbnRzIGFzXG4gICAgICogdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUgZW50cmllcyBhcmUgY2xlYXJlZCB3aGVuIGFuIGFja25vd2xlZGdlZCBvclxuICAgICAqIHJlamVjdGVkIGJhdGNoIGlzIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIERuKHQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuYm5bdF07XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFbXB0eSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSkgcmV0dXJuIHZ0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyBlbnRyaWVzIGluIHRoZSBkb2N1bWVudE11dGF0aW9ucyBpbmRleCBpZlxuICAgICAgICAgICAgLy8gdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCBdKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBhbyh0KS5YKHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBHdCh0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgRigwID09PSBzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gdW8odCwgdGhpcy51c2VySWQsIGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBDbih0KSB7XG4gICAgICAgIHJldHVybiBobyh0KS5nZXQodGhpcy51c2VySWQpLm5leHQoKHQgPT4gdCB8fCB7XG4gICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxuICAgICAgICAgICAgbGFzdEFja25vd2xlZGdlZEJhdGNoSWQ6IC0xLFxuICAgICAgICAgICAgbGFzdFN0cmVhbVRva2VuOiBcIlwiXG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiB1byh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGp0KGUsIG4ucGF0aCksIGkgPSBzWzFdLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChzKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBhbyh0KS5YKHtcbiAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgIFk6ICEwXG4gICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IFtyLCB1LCAvKmJhdGNoSUQqLyBjXSA9IHQ7XG4gICAgICAgIHIgPT09IGUgJiYgdSA9PT0gaSAmJiAobyA9ICEwKSwgcy5kb25lKCk7XG4gICAgfSkpLm5leHQoKCgpID0+IG8pKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBhbnkgbXV0YXRpb24gcXVldWUgY29udGFpbnMgdGhlIGdpdmVuIGRvY3VtZW50LiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9ucyBvYmplY3Qgc3RvcmUuXG4gKi9cbmZ1bmN0aW9uIGNvKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJtdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gYW8odCkge1xuICAgIHJldHVybiB3ZSh0LCBcImRvY3VtZW50TXV0YXRpb25zXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGhvKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJtdXRhdGlvblF1ZXVlc1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyBsbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnhuID0gdDtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueG4gKz0gMiwgdGhpcy54bjtcbiAgICB9XG4gICAgc3RhdGljIE5uKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyBsbygwKTtcbiAgICB9XG4gICAgc3RhdGljIGtuKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyBsbygtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBmbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nbih0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgbG8oZS5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMuT24odCwgZSkubmV4dCgoKCkgPT4gZS5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTW4odCkubmV4dCgodCA9PiBydC5mcm9tVGltZXN0YW1wKG5ldyBpdCh0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgdC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTW4odCkubmV4dCgodCA9PiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Nbih0KS5uZXh0KChzID0+IChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIG4gJiYgKHMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICBlID4gcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSksIHRoaXMuT24odCwgcykpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbih0LCBlKS5uZXh0KCgoKSA9PiB0aGlzLk1uKHQpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy5GbihlLCBuKSwgXG4gICAgICAgIHRoaXMuT24odCwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgoKCkgPT4gX28odCkuZGVsZXRlKGUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5Nbih0KSkpLm5leHQoKGUgPT4gKEYoZS50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgZS50YXJnZXRDb3VudCAtPSAxLCB0aGlzLk9uKHQsIGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBfbyh0KS5YKCgociwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IG1yKG8pO1xuICAgICAgICAgICAgdS5zZXF1ZW5jZU51bWJlciA8PSBlICYmIG51bGwgPT09IG4uZ2V0KHUudGFyZ2V0SWQpICYmIChzKyssIGkucHVzaCh0aGlzLnJlbW92ZVRhcmdldERhdGEodCwgdSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHZ0LndhaXRGb3IoaSkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gd2l0aCBlYWNoIGBUYXJnZXREYXRhYCB0aGF0IHdlIGhhdmUgY2FjaGVkLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIF9vKHQpLlgoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbXIobik7XG4gICAgICAgICAgICBlKHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIE1uKHQpIHtcbiAgICAgICAgcmV0dXJuIHdvKHQpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IChGKG51bGwgIT09IHQpLCB0KSkpO1xuICAgIH1cbiAgICBPbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB3byh0KS5wdXQoXCJ0YXJnZXRHbG9iYWxLZXlcIiwgZSk7XG4gICAgfVxuICAgICRuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIF9vKHQpLnB1dChncih0aGlzLnNlcmlhbGl6ZXIsIGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICBGbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiB0LnRhcmdldElkID4gZS5oaWdoZXN0VGFyZ2V0SWQgJiYgKGUuaGlnaGVzdFRhcmdldElkID0gdC50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIHQuc2VxdWVuY2VOdW1iZXIgPiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nbih0KS5uZXh0KCh0ID0+IHQudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IE9uKGUpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF9vKHQpLlgoe1xuICAgICAgICAgICAgcmFuZ2U6IHMsXG4gICAgICAgICAgICBpbmRleDogXCJxdWVyeVRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IG1yKG4pO1xuICAgICAgICAgICAgLy8gQWZ0ZXIgZmluZGluZyBhIHBvdGVudGlhbCBtYXRjaCwgY2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzXG4gICAgICAgICAgICAvLyBhY3R1YWxseSBlcXVhbCB0byB0aGUgcmVxdWVzdGVkIHRhcmdldC5cbiAgICAgICAgICAgICAgICAgICAgICAgICRuKGUsIHIudGFyZ2V0KSAmJiAoaSA9IHIsIHMuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHMgPSBbXSwgaSA9IG1vKHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBxdChlLnBhdGgpO1xuICAgICAgICAgICAgcy5wdXNoKGkucHV0KHtcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogbixcbiAgICAgICAgICAgICAgICBwYXRoOiByXG4gICAgICAgICAgICB9KSksIHMucHVzaCh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBuLCBlKSk7XG4gICAgICAgIH0pKSwgdnQud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHMgPSBtbyh0KTtcbiAgICAgICAgcmV0dXJuIHZ0LmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHF0KGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gdnQud2FpdEZvcihbIHMuZGVsZXRlKFsgbiwgaSBdKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgbiwgZSkgXSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbW8odCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShzKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApLCBzID0gbW8odCk7XG4gICAgICAgIGxldCBpID0gZ3MoKTtcbiAgICAgICAgcmV0dXJuIHMuWCh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IEd0KHRbMV0pLCByID0gbmV3IGh0KHMpO1xuICAgICAgICAgICAgaSA9IGkuYWRkKHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxdChlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuIF0sIFsgc3QobikgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiBtbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsXG4gICAgICAgICAgICBZOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoW3QsIGVdLCBuLCBzKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IHQgJiYgKGkrKywgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gX28odCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IG1yKHQpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9vKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJ0YXJnZXRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHdvKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIG1vKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJ0YXJnZXREb2N1bWVudHNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIGdvKFt0LCBlXSwgW24sIHNdKSB7XG4gICAgY29uc3QgaSA9IGV0KHQsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gZXQoZSwgcykgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyB5byB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkJuID0gdCwgdGhpcy5idWZmZXIgPSBuZXcgRWUoZ28pLCB0aGlzLkxuID0gMDtcbiAgICB9XG4gICAgcW4oKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMuTG47XG4gICAgfVxuICAgIFVuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFsgdCwgdGhpcy5xbigpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy5CbikgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIGdvKGUsIHQpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUodCkuYWRkKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIHBvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMubG9jYWxTdG9yZSA9IG4sIHRoaXMuS24gPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLkduKDZlNCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuS24gJiYgKHRoaXMuS24uY2FuY2VsKCksIHRoaXMuS24gPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLktuO1xuICAgIH1cbiAgICBHbih0KSB7XG4gICAgICAgIE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluICR7dH1tc2ApLCB0aGlzLktuID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiIC8qIFRpbWVySWQuTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCB0LCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5LbiA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9jYWxTdG9yZS5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIER0KHQpID8gTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIHQpIDogYXdhaXQgUnQodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLkduKDNlNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8gY2xhc3MgSW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5RbiA9IHQsIHRoaXMucGFyYW1zID0gZTtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Rbi5qbih0KS5uZXh0KCh0ID0+IE1hdGguZmxvb3IoZSAvIDEwMCAqIHQpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKHQsIGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUpIHJldHVybiB2dC5yZXNvbHZlKCR0LmN0KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyB5byhlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUW4uZm9yRWFjaFRhcmdldCh0LCAodCA9PiBuLlVuKHQuc2VxdWVuY2VOdW1iZXIpKSkubmV4dCgoKCkgPT4gdGhpcy5Rbi56bih0LCAodCA9PiBuLlVuKHQpKSkpKS5uZXh0KCgoKSA9PiBuLm1heFZhbHVlKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Rbi5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFuLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpO1xuICAgIH1cbiAgICBjb2xsZWN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIC0xID09PSB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLCBcbiAgICAgICAgdnQucmVzb2x2ZShubykpIDogdGhpcy5nZXRDYWNoZVNpemUodCkubmV4dCgobiA9PiBuIDwgdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgJHtufSBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCAke3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGR9YCksIFxuICAgICAgICBubykgOiB0aGlzLlduKHQsIGUpKSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFuLmdldENhY2hlU2l6ZSh0KTtcbiAgICB9XG4gICAgV24odCwgZSkge1xuICAgICAgICBsZXQgbiwgcywgaSwgciwgbywgYywgYTtcbiAgICAgICAgY29uc3QgaCA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KHQsIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XG4gICAgICAgIGUgPiB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID8gKE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke2V9YCksIFxuICAgICAgICBzID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiBzID0gZSwgciA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIodCwgcykpKSkubmV4dCgocyA9PiAobiA9IHMsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKHQsIG4sIGUpKSkpLm5leHQoKGUgPT4gKGkgPSBlLCBjID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgbikpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoYSA9IERhdGUubm93KCksIEMoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICAgICAgICAgIE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuXFx0Q291bnRlZCB0YXJnZXRzIGluICR7ciAtIGh9bXNcXG5cXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgJHtzfSBpbiBgICsgKG8gLSByKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7aX0gdGFyZ2V0cyBpbiBgICsgKGMgLSBvKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7dH0gZG9jdW1lbnRzIGluIGAgKyAoYSAtIGMpICsgXCJtc1xcblwiICsgYFRvdGFsIER1cmF0aW9uOiAke2EgLSBofW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgZGlkUnVuOiAhMCxcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IHMsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFRvKHQsIGUpIHtcbiAgICByZXR1cm4gbmV3IElvKHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovIGNsYXNzIEVvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGIgPSB0LCB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBUbyh0aGlzLCBlKTtcbiAgICB9XG4gICAgam4odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Ibih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIEhuKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy56bih0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHpuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSm4odCwgKCh0LCBuKSA9PiBlKG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBBbyh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIEFvKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBbyh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgWW4odCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBobyh0KS5aKChzID0+IHVvKHQsIHMsIGUpLm5leHQoKHQgPT4gKHQgJiYgKG4gPSAhMCksIHZ0LnJlc29sdmUoIXQpKSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSwgcyA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLkpuKHQsICgociwgbykgPT4ge1xuICAgICAgICAgICAgaWYgKG8gPD0gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlluKHQsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIFxuICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkrKywgbi5nZXRFbnRyeSh0LCByKS5uZXh0KCgoKSA9PiAobi5yZW1vdmVFbnRyeShyLCBydC5taW4oKSksIG1vKHQpLmRlbGV0ZShbIDAsIHF0KHIucGF0aCkgXSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHZ0LndhaXRGb3IocykpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gQW8odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgSm4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbW8odCk7XG4gICAgICAgIGxldCBzLCBpID0gJHQuY3Q7XG4gICAgICAgIHJldHVybiBuLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKFt0LCBuXSwge3BhdGg6IHIsIHNlcXVlbmNlTnVtYmVyOiBvfSkgPT4ge1xuICAgICAgICAgICAgMCA9PT0gdCA/IChcbiAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcbiAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxuICAgICAgICAgICAgaSAhPT0gJHQuY3QgJiYgZShuZXcgaHQoR3QocykpLCBpKSwgXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxuICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXG4gICAgICAgICAgICAvLyBpcyAwLlxuICAgICAgICAgICAgaSA9IG8sIHMgPSByKSA6IFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXG4gICAgICAgICAgICBpID0gJHQuY3Q7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gJHQuY3QgJiYgZShuZXcgaHQoR3QocykpLCBpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEFvKHQsIGUpIHtcbiAgICByZXR1cm4gbW8odCkucHV0KFxuICAgIC8qKlxuICogQHJldHVybnMgQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XG4gKiBzdG9yZS5cbiAqL1xuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgcGF0aDogcXQodC5wYXRoKSxcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBlXG4gICAgICAgIH07XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3MgUm8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbi5cbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IG9zKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgcmVtb3ZlIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIGFuLm5ld0ludmFsaWREb2N1bWVudCh0KS5zZXRSZWFkVGltZShlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS4gVGhlIGJ1ZmZlcmVkIGNoYW5nZXMgd2lsbCBmaXJzdCBiZSBjaGVja2VkLFxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmIHdlIGhhdmUgbm90aGluZ1xuICAgICAqIGNhY2hlZC5cbiAgICAgKi8gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY2hhbmdlcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IG4gPyB2dC5yZXNvbHZlKG4pIDogdGhpcy5nZXRGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUsIGZvcndhcmRpbmcgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUga2V5cyBvZiB0aGUgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGNhY2hlZCBkb2N1bWVudHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhbiBlbnRyeSBjYW5ub3QgYmVcbiAgICAgKiAgICAgZm91bmQsIHRoZSBjb3JyZXNwb25kaW5nIGtleSB3aWxsIGJlIG1hcHBlZCB0byBhbiBpbnZhbGlkIGRvY3VtZW50LlxuICAgICAqLyAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGJ1ZmZlcmVkIGNoYW5nZXMgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSwgdXNpbmdcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXG4gICAgICovICAgIGFwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITAsIHRoaXMuYXBwbHlDaGFuZ2VzKHQpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGFzc2VydCB0aGlzLmNoYW5nZXMgaXMgbm90IG51bGwgICovICAgIGFzc2VydE5vdEFwcGxpZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi8gY2xhc3Mgdm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gdDtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBTbyh0KS5wdXQobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkb2N1bWVudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gU28odCkuZGVsZXRlKFxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyB2aWEgdGhlIHByaW1hcnkga2V5IG9mXG4gKiB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICByZXR1cm4gWyBcbiAgICAgICAgICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgICAgICAgICAvKiBjb2xsZWN0aW9uIGlkICovIG5bbi5sZW5ndGggLSAyXSwgZnIoZSksIFxuICAgICAgICAgICAgLyogZG9jdW1lbnQgaWQgKi8gbltuLmxlbmd0aCAtIDFdIF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50Q29sbGVjdGlvbkdyb3VwSW5kZXhgIGluZGV4LlxuICovIChlLCBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5Ybih0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICBsZXQgbiA9IGFuLm5ld0ludmFsaWREb2N1bWVudChlKTtcbiAgICAgICAgcmV0dXJuIFNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoRG8oZSkpXG4gICAgICAgIH0sICgodCwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IHRoaXMuWm4oZSwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUuXG4gICAgICovICAgIHRzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB7XG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnQ6IGFuLm5ld0ludmFsaWREb2N1bWVudChlKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShEbyhlKSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLlpuKGUsIHMpLFxuICAgICAgICAgICAgICAgIHNpemU6IHJvKHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBjcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5lcyh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLlpuKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBzZXQgb2Yga2V5cyBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgZG9jdW1lbnRzIGluZGV4ZWQgYnkga2V5IGFuZCBhIG1hcCBvZiBzaXplcyBpbmRleGVkIGJ5XG4gICAgICogICAgIGtleSAoemVybyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QpLlxuICAgICAqLyAgICBucyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gY3MoKSwgcyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXModCwgZSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5abih0LCBlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBpKSwgcyA9IHMuaW5zZXJ0KHQsIHJvKGUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudHM6IG4sXG4gICAgICAgICAgICBzczogc1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICBlcyh0LCBlLCBuKSB7XG4gICAgICAgIGlmIChlLmlzRW1wdHkoKSkgcmV0dXJuIHZ0LnJlc29sdmUoKTtcbiAgICAgICAgbGV0IHMgPSBuZXcgRWUoeG8pO1xuICAgICAgICBlLmZvckVhY2goKHQgPT4gcyA9IHMuYWRkKHQpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBJREJLZXlSYW5nZS5ib3VuZChEbyhzLmZpcnN0KCkpLCBEbyhzLmxhc3QoKSkpLCByID0gcy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBsZXQgbyA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICByZXR1cm4gU28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogaVxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBodC5mcm9tU2VnbWVudHMoWyAuLi5lLnByZWZpeFBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmRvY3VtZW50SWQgXSk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7byAmJiB4byhvLCBpKSA8IDA7ICkgbihvLCBudWxsKSwgbyA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgbyAmJiBvLmlzRXF1YWwoaSkgJiYgKFxuICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgbihvLCBlKSwgbyA9IHIuaGFzTmV4dCgpID8gci5nZXROZXh0KCkgOiBudWxsKSwgXG4gICAgICAgICAgICAvLyBTa2lwIHRvIHRoZSBuZXh0IGtleSAoaWYgdGhlcmUgaXMgb25lKS5cbiAgICAgICAgICAgIG8gPyBzLkcoRG8obykpIDogcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUga2V5cyBhcmUgbm90IGluIHRoZSBjYWNoZS4gT25lIGNhc2Ugd2hlcmUgYGl0ZXJhdGVgXG4gICAgICAgICAgICAvLyBhYm92ZSB3b24ndCBnbyB0aHJvdWdoIHRoZW0gaXMgd2hlbiB0aGUgY2FjaGUgaXMgZW1wdHkuXG4gICAgICAgICAgICBmb3IgKDtvOyApIG4obywgbnVsbCksIG8gPSByLmhhc05leHQoKSA/IHIuZ2V0TmV4dCgpIDogbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IGUucGF0aCwgciA9IFsgaS5wb3BMYXN0KCkudG9BcnJheSgpLCBpLmxhc3RTZWdtZW50KCksIGZyKG4ucmVhZFRpbWUpLCBuLmRvY3VtZW50S2V5LnBhdGguaXNFbXB0eSgpID8gXCJcIiA6IG4uZG9jdW1lbnRLZXkucGF0aC5sYXN0U2VnbWVudCgpIF0sIG8gPSBbIGkucG9wTGFzdCgpLnRvQXJyYXkoKSwgaS5sYXN0U2VnbWVudCgpLCBbIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdLCBcIlwiIF07XG4gICAgICAgIHJldHVybiBTbyh0KS5qKElEQktleVJhbmdlLmJvdW5kKHIsIG8sICEwKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgbiA9IGNzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlpuKGh0LmZyb21TZWdtZW50cyhpLnByZWZpeFBhdGguY29uY2F0KGkuY29sbGVjdGlvbkdyb3VwLCBpLmRvY3VtZW50SWQpKSwgaSk7XG4gICAgICAgICAgICAgICAgdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAobnMoZSwgdCkgfHwgcy5oYXModC5rZXkpKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRWl0aGVyIHRoZSBkb2N1bWVudCBtYXRjaGVzIHRoZSBnaXZlbiBxdWVyeSwgb3IgaXQgaXMgbXV0YXRlZC5cbiAgICAgICAgICAgICAgICBuID0gbi5pbnNlcnQodC5rZXksIHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGNzKCk7XG4gICAgICAgIGNvbnN0IHIgPSBDbyhlLCBuKSwgbyA9IENvKGUsIEl0Lm1heCgpKTtcbiAgICAgICAgcmV0dXJuIFNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5ib3VuZChyLCBvLCAhMClcbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5abihodC5mcm9tU2VnbWVudHMoZS5wcmVmaXhQYXRoLmNvbmNhdChlLmNvbGxlY3Rpb25Hcm91cCwgZS5kb2N1bWVudElkKSksIGUpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHIua2V5LCByKSwgaS5zaXplID09PSBzICYmIG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGJvKHRoaXMsICEhdCAmJiB0LnRyYWNrUmVtb3ZhbHMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgodCA9PiB0LmJ5dGVTaXplKSk7XG4gICAgfVxuICAgIGdldE1ldGFkYXRhKHQpIHtcbiAgICAgICAgcmV0dXJuIFZvKHQpLmdldChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIpLm5leHQoKHQgPT4gKEYoISF0KSwgdCkpKTtcbiAgICB9XG4gICAgWG4odCwgZSkge1xuICAgICAgICByZXR1cm4gVm8odCkucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYGRiUmVtb3RlRG9jYCBhbmQgcmV0dXJucyB0aGUgZG9jdW1lbnQgKG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgWm4odCwgZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGhyKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmlzTm9Eb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKHJ0Lm1pbigpKSkpIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbi5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLiAqLyBmdW5jdGlvbiBQbyh0KSB7XG4gICAgcmV0dXJuIG5ldyB2byh0KTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIFVubGlrZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIsIHRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gY29tcHV0ZXMgdGhlIHNpemVcbiAqIGRlbHRhIGZvciBhbGwgc3VibWl0dGVkIGNoYW5nZXMuIFRoaXMgYXZvaWRzIGhhdmluZyB0byByZS1yZWFkIGFsbCBkb2N1bWVudHMgZnJvbSBJbmRleGVkRGJcbiAqIHdoZW4gd2UgYXBwbHkgdGhlIGNoYW5nZXMuXG4gKi8gY2xhc3MgYm8gZXh0ZW5kcyBSbyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnJzID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIGFuZCByZWFkIHRpbWVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluXG4gICAgICAgIC8vIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLm9zID0gbmV3IG9zKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3IEVlKCgodCwgZSkgPT4gZXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMub3MuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKGUucHVzaCh0aGlzLnJzLnJlbW92ZUVudHJ5KHQsIGksIG8ucmVhZFRpbWUpKSwgci5pc1ZhbGlkRG9jdW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBscih0aGlzLnJzLnNlcmlhbGl6ZXIsIHIpO1xuICAgICAgICAgICAgICAgIHMgPSBzLmFkZChpLnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gcm8odSk7XG4gICAgICAgICAgICAgICAgbiArPSBjIC0gby5zaXplLCBlLnB1c2godGhpcy5ycy5hZGRFbnRyeSh0LCBpLCB1KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG4gLT0gby5zaXplLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbHIodGhpcy5ycy5zZXJpYWxpemVyLCByLmNvbnZlcnRUb05vRG9jdW1lbnQocnQubWluKCkpKTtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5ycy5hZGRFbnRyeSh0LCBpLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0aGlzLnJzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBuKSk7XG4gICAgICAgIH0pKSwgZS5wdXNoKHRoaXMucnMudXBkYXRlTWV0YWRhdGEodCwgbikpLCB2dC53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLnJzLnRzKHQsIGUpLm5leHQoKHQgPT4gKHRoaXMub3Muc2V0KGUsIHtcbiAgICAgICAgICAgIHNpemU6IHQuc2l6ZSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiB0LmRvY3VtZW50LnJlYWRUaW1lXG4gICAgICAgIH0pLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLnJzLm5zKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBzczogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMub3Muc2V0KGUsIHtcbiAgICAgICAgICAgICAgICBzaXplOiBuLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiB0LmdldChlKS5yZWFkVGltZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgdCkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFZvKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gU28odCkge1xuICAgIHJldHVybiB3ZSh0LCBcInJlbW90ZURvY3VtZW50c1YxNFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50S2V5SW5kZXhgIGluZGV4LlxuICovIGZ1bmN0aW9uIERvKHQpIHtcbiAgICBjb25zdCBlID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyBlLnNsaWNlKDAsIGUubGVuZ3RoIC0gMiksIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gZVtlLmxlbmd0aCAtIDJdLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBlW2UubGVuZ3RoIC0gMV0gXTtcbn1cblxuZnVuY3Rpb24gQ28odCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmRvY3VtZW50S2V5LnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gdCwgZnIoZS5yZWFkVGltZSksIFxuICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gbi5sZW5ndGggPiAwID8gbltuLmxlbmd0aCAtIDFdIDogXCJcIiBdO1xufVxuXG4vKipcbiAqIENvbXBhcmF0b3IgdGhhdCBjb21wYXJlcyBkb2N1bWVudCBrZXlzIGFjY29yZGluZyB0byB0aGUgcHJpbWFyeSBrZXkgc29ydGluZ1xuICogdXNlZCBieSB0aGUgYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudGAgc3RvcmUgKGJ5IHByZWZpeCBwYXRoLCBjb2xsZWN0aW9uIGlkXG4gKiBhbmQgdGhlbiBkb2N1bWVudCBJRCkuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqLyBmdW5jdGlvbiB4byh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHQucGF0aC50b0FycmF5KCksIHMgPSBlLnBhdGgudG9BcnJheSgpO1xuICAgIC8vIFRoZSBvcmRlcmluZyBpcyBiYXNlZCBvbiBodHRwczovL2Nocm9taXVtLmdvb2dsZXNvdXJjZS5jb20vY2hyb21pdW0vYmxpbmsvKy9mZTVjMjFmZWY5NGRhZTcxYzFjMzM0NDc3NWI4ZDhhN2Y3ZTZkOWVjL1NvdXJjZS9tb2R1bGVzL2luZGV4ZWRkYi9JREJLZXkuY3BwIzc0XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggLSAyICYmIHQgPCBzLmxlbmd0aCAtIDI7ICsrdCkgaWYgKGkgPSBldChuW3RdLCBzW3RdKSwgXG4gICAgaSkgcmV0dXJuIGk7XG4gICAgcmV0dXJuIGkgPSBldChuLmxlbmd0aCwgcy5sZW5ndGgpLCBpIHx8IChpID0gZXQobltuLmxlbmd0aCAtIDJdLCBzW3MubGVuZ3RoIC0gMl0pLCBcbiAgICBpIHx8IGV0KG5bbi5sZW5ndGggLSAxXSwgc1tzLmxlbmd0aCAtIDFdKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNjaGVtYSBWZXJzaW9uIGZvciB0aGUgV2ViIGNsaWVudDpcbiAqIDEuICBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZVxuICogICAgIERvY3VtZW50IENhY2hlXG4gKiAyLiAgVXNlZCB0byBlbnN1cmUgYSB0YXJnZXRHbG9iYWwgb2JqZWN0IGV4aXN0cyBhbmQgYWRkIHRhcmdldENvdW50IHRvIGl0LiBOb1xuICogICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gKiAzLiAgRHJvcHBlZCBhbmQgcmUtY3JlYXRlZCBRdWVyeSBDYWNoZSB0byBkZWFsIHdpdGggY2FjaGUgY29ycnVwdGlvbiByZWxhdGVkXG4gKiAgICAgdG8gbGltYm8gcmVzb2x1dGlvbi4gQWRkcmVzc2VzXG4gKiAgICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcbiAqIDQuICBNdWx0aS1UYWIgU3VwcG9ydC5cbiAqIDUuICBSZW1vdmFsIG9mIGhlbGQgd3JpdGUgYWNrcy5cbiAqIDYuICBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxuICogNy4gIEVuc3VyZSBldmVyeSBjYWNoZWQgZG9jdW1lbnQgaGFzIGEgc2VudGluZWwgcm93IHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuXG4gKiA4LiAgQWRkIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGZvciBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMuXG4gKiA5LiAgQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxuICogICAgIGFuIGF1dG8taW5jcmVtZW50aW5nIElELiBUaGlzIGlzIHJlcXVpcmVkIGZvciBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKiAxMC4gUmV3cml0ZSB0aGUgY2Fub25pY2FsIElEcyB0byB0aGUgZXhwbGljaXQgUHJvdG9idWYtYmFzZWQgZm9ybWF0LlxuICogMTEuIEFkZCBidW5kbGVzIGFuZCBuYW1lZF9xdWVyaWVzIGZvciBidW5kbGUgc3VwcG9ydC5cbiAqIDEyLiBBZGQgZG9jdW1lbnQgb3ZlcmxheXMuXG4gKiAxMy4gUmV3cml0ZSB0aGUga2V5cyBvZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHRvIGFsbG93IGZvciBlZmZpY2llbnRcbiAqICAgICBkb2N1bWVudCBsb29rdXAgdmlhIGBnZXRBbGwoKWAuXG4gKiAxNC4gQWRkIG92ZXJsYXlzLlxuICogMTUuIEFkZCBpbmRleGluZyBzdXBwb3J0LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWwgdmlldyAob3ZlcmxheSkgb2YgYSBkb2N1bWVudCwgYW5kIHRoZSBmaWVsZHMgdGhhdCBhcmVcbiAqIGxvY2FsbHkgbXV0YXRlZC5cbiAqL1xuY2xhc3MgTm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZHMgdGhhdCBhcmUgbG9jYWxseSBtdXRhdGVkIGJ5IHBhdGNoIG11dGF0aW9ucy5cbiAgICAgKlxuICAgICAqIElmIHRoZSBvdmVybGF5ZWRcdGRvY3VtZW50IGlzIGZyb20gc2V0IG9yIGRlbGV0ZSBtdXRhdGlvbnMsIHRoaXMgaXMgYG51bGxgLlxuICAgICAqIElmIHRoZXJlIGlzIG5vIG92ZXJsYXkgKG11dGF0aW9uKSBmb3IgdGhlIGRvY3VtZW50LCB0aGlzIGlzIGFuIGVtcHR5IGBGaWVsZE1hc2tgLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5ZWREb2N1bWVudCA9IHQsIHRoaXMubXV0YXRlZEZpZWxkcyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICovIGNsYXNzIGtvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IHQsIHRoaXMubXV0YXRpb25RdWV1ZSA9IGUsIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUgPSBuLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxuICAgICAqIHN0YXRlIGZvciBpdC5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXkodCwgZSkubmV4dCgocyA9PiAobiA9IHMsIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSh0LCBlKSkpKS5uZXh0KCh0ID0+IChudWxsICE9PSBuICYmIEtzKG4ubXV0YXRpb24sIHQsIHZlLmVtcHR5KCksIGl0Lm5vdygpKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICBnZXREb2N1bWVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXModCwgZSkubmV4dCgoZSA9PiB0aGlzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKHQsIGUsIGdzKCkpLm5leHQoKCgpID0+IGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIGBnZXREb2N1bWVudHNgLCBidXQgY3JlYXRlcyB0aGUgbG9jYWwgdmlldyBmcm9tIHRoZSBnaXZlblxuICAgICAqIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50cyBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiB0aGlzIG9wZXJhdGlvbiBpcyBzY29wZWQgdG8uXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byBnZXQgdGhlIGxvY2FsIHZpZXdzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBUaGUgc2V0IG9mIGRvY3VtZW50IGtleXMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlXG4gICAgICogICBpcyBjaGFuZ2VkLiBUaGlzIGlzIHVzZWZ1bCB0byBkZXRlcm1pbmUgaWYgc29tZSBkb2N1bWVudHMgb3ZlcmxheSBuZWVkc1xuICAgICAqICAgdG8gYmUgcmVjYWxjdWxhdGVkLlxuICAgICAqLyAgICBnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0LCBlLCBuID0gZ3MoKSkge1xuICAgICAgICBjb25zdCBzID0gZnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9wdWxhdGVPdmVybGF5cyh0LCBzLCBlKS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyh0LCBlLCBzLCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gaHMoKTtcbiAgICAgICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZSA9IGUuaW5zZXJ0KHQsIG4ub3ZlcmxheWVkRG9jdW1lbnQpO1xuICAgICAgICAgICAgfSkpLCBlO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3ZlcmxheWVkIGRvY3VtZW50cyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IG1hcCwgd2hpY2ggd2lsbCBpbmNsdWRlXG4gICAgICogdGhlIGxvY2FsIHZpZXcgb2YgdGhvc2UgZG9jdW1lbnRzIGFuZCBhIGBGaWVsZE1hc2tgIGluZGljYXRpbmcgd2hpY2ggZmllbGRzXG4gICAgICogYXJlIG11dGF0ZWQgbG9jYWxseSwgYG51bGxgIGlmIG92ZXJsYXkgaXMgYSBTZXQgb3IgRGVsZXRlIG11dGF0aW9uLlxuICAgICAqLyAgICBnZXRPdmVybGF5ZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9wdWxhdGVPdmVybGF5cyh0LCBuLCBlKS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyh0LCBlLCBuLCBncygpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBvdmVybGF5cyBmb3Ige0Bjb2RlIGRvY3N9IGFuZCBhZGRzIHRoZW0gdG8gcHJvdmlkZWQgb3ZlcmxheSBtYXBcbiAgICAgKiBpZiB0aGUgbWFwIGRvZXMgbm90IGFscmVhZHkgY29udGFpbiBhbiBlbnRyeSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IGtleS5cbiAgICAgKi8gICAgcG9wdWxhdGVPdmVybGF5cyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLmhhcyh0KSB8fCBzLnB1c2godCk7XG4gICAgICAgIH0pKSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5cyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlLnNldCh0LCBuKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBjb21wdXRlIHZpZXdzIGZvci4gSXQgYWxzbyBoYXMgdGhlIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb3ZlcmxheXMgLSBUaGUgb3ZlcmxheXMgdGhhdCBuZWVkIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGdpdmVuIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gQSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZXNcbiAgICAgKiAgIG1pZ2h0IGhhdmUgY2hhbmdlZC4gVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIHJlLWNhbGN1bGF0ZVxuICAgICAqICAgb3ZlcmxheXMgZnJvbSBtdXRhdGlvbiBxdWV1ZXMuXG4gICAgICogQHJldHVybiBBIG1hcCByZXByZXNlbnRzIHRoZSBsb2NhbCBkb2N1bWVudHMgdmlldy5cbiAgICAgKi8gICAgY29tcHV0ZVZpZXdzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBjcygpO1xuICAgICAgICBjb25zdCByID0gX3MoKSwgbyA9IF9zKCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gbi5nZXQoZS5rZXkpO1xuICAgICAgICAgICAgLy8gUmVjYWxjdWxhdGUgYW4gb3ZlcmxheSBpZiB0aGUgZG9jdW1lbnQncyBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlZCBkdWUgdG9cbiAgICAgICAgICAgIC8vIGEgcmVtb3RlIGV2ZW50ICphbmQqIHRoZSBvdmVybGF5IGlzIGEgUGF0Y2hNdXRhdGlvbi4gVGhpcyBpcyBiZWNhdXNlXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBleGlzdGVuY2Ugc3RhdGUgY2FuIGNoYW5nZSBpZiBzb21lIHBhdGNoIG11dGF0aW9uJ3NcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbnMgYXJlIG1ldC5cbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHJlY2FsY3VsYXRlIHdoZW4gYG92ZXJsYXlgIGlzIHVuZGVmaW5lZCBhcyB3ZWxsLCBiZWNhdXNlIHRoZXJlXG4gICAgICAgICAgICAvLyBtaWdodCBiZSBhIHBhdGNoIG11dGF0aW9uIHdob3NlIHByZWNvbmRpdGlvbiBkb2VzIG5vdCBtYXRjaCBiZWZvcmUgdGhlXG4gICAgICAgICAgICAvLyBjaGFuZ2UgKGhlbmNlIG92ZXJsYXkgaXMgdW5kZWZpbmVkKSwgYnV0IHdvdWxkIG5vdyBtYXRjaC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHMuaGFzKGUua2V5KSAmJiAodm9pZCAwID09PSBvIHx8IG8ubXV0YXRpb24gaW5zdGFuY2VvZiB6cykgPyBpID0gaS5pbnNlcnQoZS5rZXksIGUpIDogdm9pZCAwICE9PSBvID8gKHIuc2V0KGUua2V5LCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpKSwgXG4gICAgICAgICAgICBLcyhvLm11dGF0aW9uLCBlLCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpLCBpdC5ub3coKSkpIDogXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IGV4aXN0c1xuICAgICAgICAgICAgLy8gVXNpbmcgRU1QVFkgdG8gaW5kaWNhdGUgdGhlcmUgaXMgbm8gb3ZlcmxheSBmb3IgdGhlIGRvY3VtZW50LlxuICAgICAgICAgICAgci5zZXQoZS5rZXksIHZlLmVtcHR5KCkpO1xuICAgICAgICB9KSksIHRoaXMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXModCwgaSkubmV4dCgodCA9PiAodC5mb3JFYWNoKCgodCwgZSkgPT4gci5zZXQodCwgZSkpKSwgXG4gICAgICAgIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgcmV0dXJuIG8uc2V0KHQsIG5ldyBObyhlLCBudWxsICE9PSAobiA9IHIuZ2V0KHQpKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogbnVsbCkpO1xuICAgICAgICB9KSksIG8pKSk7XG4gICAgfVxuICAgIHJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF9zKCk7XG4gICAgICAgIC8vIEEgcmV2ZXJzZSBsb29rdXAgbWFwIGZyb20gYmF0Y2ggaWQgdG8gdGhlIGRvY3VtZW50cyB3aXRoaW4gdGhhdCBiYXRjaC5cbiAgICAgICAgICAgICAgICBsZXQgcyA9IG5ldyBwZSgoKHQsIGUpID0+IHQgLSBlKSksIGkgPSBncygpO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSBpLmtleXMoKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gZS5nZXQodCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHIpIHJldHVybjtcbiAgICAgICAgICAgICAgICBsZXQgbyA9IG4uZ2V0KHQpIHx8IHZlLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgbyA9IGkuYXBwbHlUb0xvY2FsVmlldyhyLCBvKSwgbi5zZXQodCwgbyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IChzLmdldChpLmJhdGNoSWQpIHx8IGdzKCkpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICBzID0gcy5pbnNlcnQoaS5iYXRjaElkLCB1KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBbXSwgbyA9IHMuZ2V0UmV2ZXJzZUl0ZXJhdG9yKCk7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIGluIGRlc2NlbmRpbmcgb3JkZXIgb2YgYmF0Y2ggSURzLCBhbmQgc2tpcCBkb2N1bWVudHMgdGhhdCBhcmVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgc2F2ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG8uZ2V0TmV4dCgpLCB1ID0gcy5rZXksIGMgPSBzLnZhbHVlLCBhID0gZHMoKTtcbiAgICAgICAgICAgICAgICBjLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWkuaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gcXMoZS5nZXQodCksIG4uZ2V0KHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgYS5zZXQodCwgcyksIGkgPSBpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKSwgci5wdXNoKHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKHQsIHUsIGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2dC53YWl0Rm9yKHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNhbGN1bGF0ZXMgb3ZlcmxheXMgYnkgcmVhZGluZyB0aGUgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlXG4gICAgICogZmlyc3QsIGFuZCBzYXZlcyB0aGVtIGFmdGVyIHRoZXkgYXJlIGNhbGN1bGF0ZWQuXG4gICAgICovICAgIHJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyaWVzKHQsIGUpLm5leHQoKGUgPT4gdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXG4gICAgICogQHBhcmFtIG9mZnNldCAtIFJlYWQgdGltZSBhbmQga2V5IHRvIHN0YXJ0IHNjYW5uaW5nIGJ5IChleGNsdXNpdmUpLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBodC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfShlKSA/IHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KHQsIGUucGF0aCkgOiBXbihlKSA/IHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSh0LCBlLCBuKSA6IHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgY29sbGVjdGlvbiBncm91cCwgcmV0dXJucyB0aGUgbmV4dCBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCwgYWxvbmdcbiAgICAgKiB3aXRoIGFuIHVwZGF0ZWQgYmF0Y2ggSUQuXG4gICAgICpcbiAgICAgKiA8cD5UaGUgZG9jdW1lbnRzIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIGFyZSBvcmRlcmVkIGJ5IHJlbW90ZSB2ZXJzaW9uIGZyb20gdGhlIHByb3ZpZGVkXG4gICAgICogb2Zmc2V0LiBJZiB0aGVyZSBhcmUgbm8gbW9yZSByZW1vdGUgZG9jdW1lbnRzIGFmdGVyIHRoZSBwcm92aWRlZCBvZmZzZXQsIGRvY3VtZW50cyB3aXRoXG4gICAgICogbXV0YXRpb25zIGluIG9yZGVyIG9mIGJhdGNoIGlkIGZyb20gdGhlIG9mZnNldCBhcmUgcmV0dXJuZWQuIFNpbmNlIGFsbCBkb2N1bWVudHMgaW4gYSBiYXRjaCBhcmVcbiAgICAgKiByZXR1cm5lZCB0b2dldGhlciwgdGhlIHRvdGFsIG51bWJlciBvZiBkb2N1bWVudHMgcmV0dXJuZWQgY2FuIGV4Y2VlZCB7QGNvZGUgY291bnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb25Hcm91cCBUaGUgY29sbGVjdGlvbiBncm91cCBmb3IgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBvZmZzZXQgdG8gaW5kZXggaW50by5cbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdG8gcmV0dXJuXG4gICAgICogQHJldHVybiBBIExvY2FsV3JpdGVSZXN1bHQgd2l0aCB0aGUgZG9jdW1lbnRzIHRoYXQgZm9sbG93IHRoZSBwcm92aWRlZCBvZmZzZXQgYW5kIHRoZSBsYXN0IHByb2Nlc3NlZCBiYXRjaCBpZC5cbiAgICAgKi8gICAgZ2V0TmV4dERvY3VtZW50cyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzIC0gaS5zaXplID4gMCA/IHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAodCwgZSwgbi5sYXJnZXN0QmF0Y2hJZCwgcyAtIGkuc2l6ZSkgOiB2dC5yZXNvbHZlKGZzKCkpO1xuICAgICAgICAgICAgLy8gVGhlIGNhbGxzaXRlIHdpbGwgdXNlIHRoZSBsYXJnZXN0IGJhdGNoIElEIHRvZ2V0aGVyIHdpdGggdGhlIGxhdGVzdCByZWFkIHRpbWUgdG8gY3JlYXRlXG4gICAgICAgICAgICAvLyBhIG5ldyBpbmRleCBvZmZzZXQuIFNpbmNlIHdlIG9ubHkgcHJvY2VzcyBiYXRjaCBJRHMgaWYgYWxsIHJlbW90ZSBkb2N1bWVudHMgaGF2ZSBiZWVuIHJlYWQsXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IHdpbGwgaW5jcmVhc2UgdGhlIG92ZXJhbGwgcmVhZCB0aW1lLiBUaGlzIGlzIHdoeSB3ZSBvbmx5IG5lZWQgdG8gc3BlY2lhbCBjYXNlXG4gICAgICAgICAgICAvLyB0aGUgYmF0Y2ggaWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IC0xLCB1ID0gaTtcbiAgICAgICAgICAgIHJldHVybiByLm5leHQoKGUgPT4gdnQuZm9yRWFjaChlLCAoKGUsIG4pID0+IChvIDwgbi5sYXJnZXN0QmF0Y2hJZCAmJiAobyA9IG4ubGFyZ2VzdEJhdGNoSWQpLCBcbiAgICAgICAgICAgIGkuZ2V0KGUpID8gdnQucmVzb2x2ZSgpIDogdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHUgPSB1Lmluc2VydChlLCB0KTtcbiAgICAgICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiB0aGlzLnBvcHVsYXRlT3ZlcmxheXModCwgZSwgaSkpKS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyh0LCB1LCBlLCBncygpKSkpLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IGxzKHQpXG4gICAgICAgICAgICB9KSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50KHQsIG5ldyBodChlKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IGhzKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSA9IGUuaW5zZXJ0KHQua2V5LCB0KSksIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IGkgPSBocygpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0Q29sbGVjdGlvblBhcmVudHModCwgcykubmV4dCgociA9PiB2dC5mb3JFYWNoKHIsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVbihlLCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgICAgICB9KGUsIHIuY2hpbGQocykpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodCwgbywgbikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpID0gaS5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpKSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUXVlcnkgdGhlIHJlbW90ZSBkb2N1bWVudHMgYW5kIG92ZXJsYXkgbXV0YXRpb25zLlxuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKHQsIGUucGF0aCwgbi5sYXJnZXN0QmF0Y2hJZCkubmV4dCgoaSA9PiAocyA9IGksIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIC8vIEFzIGRvY3VtZW50cyBtaWdodCBtYXRjaCB0aGUgcXVlcnkgYmVjYXVzZSBvZiB0aGVpciBvdmVybGF5IHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGluY2x1ZGUgZG9jdW1lbnRzIGZvciBhbGwgb3ZlcmxheXMgaW4gdGhlIGluaXRpYWwgZG9jdW1lbnQgc2V0LlxuICAgICAgICAgICAgcy5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmdldEtleSgpO1xuICAgICAgICAgICAgICAgIG51bGwgPT09IHQuZ2V0KHMpICYmICh0ID0gdC5pbnNlcnQocywgYW4ubmV3SW52YWxpZERvY3VtZW50KHMpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAvLyBBcHBseSB0aGUgb3ZlcmxheXMgYW5kIG1hdGNoIGFnYWluc3QgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgbGV0IG4gPSBocygpO1xuICAgICAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gcy5nZXQodCk7XG4gICAgICAgICAgICAgICAgdm9pZCAwICE9PSByICYmIEtzKHIubXV0YXRpb24sIGksIHZlLmVtcHR5KCksIGl0Lm5vdygpKSwgXG4gICAgICAgICAgICAgICAgLy8gRmluYWxseSwgaW5zZXJ0IHRoZSBkb2N1bWVudHMgdGhhdCBzdGlsbCBtYXRjaCB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICBucyhlLCBpKSAmJiAobiA9IG4uaW5zZXJ0KHQsIGkpKTtcbiAgICAgICAgICAgIH0pKSwgbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgTW8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy51cyA9IG5ldyBNYXAsIHRoaXMuY3MgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKHRoaXMudXMuZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMudXMuc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogTmkobi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUodGhpcy5jcy5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNzLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB5cih0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IE5pKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlLlxuICovIGNsYXNzIE9vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXAgc29ydGVkIGJ5IERvY3VtZW50S2V5LCB3aG9zZSB2YWx1ZSBpcyBhIHBhaXIgb2YgdGhlIGxhcmdlc3QgYmF0Y2ggaWRcbiAgICAgICAgLy8gZm9yIHRoZSBvdmVybGF5IGFuZCB0aGUgb3ZlcmxheSBpdHNlbGYuXG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSBuZXcgcGUoaHQuY29tcGFyYXRvciksIHRoaXMuaHMgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUodGhpcy5vdmVybGF5cy5nZXQoZSkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmcygpO1xuICAgICAgICByZXR1cm4gdnQuZm9yRWFjaChlLCAoZSA9PiB0aGlzLmdldE92ZXJsYXkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSB0ICYmIG4uc2V0KGUsIHQpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRlKHQsIGUsIHMpO1xuICAgICAgICB9KSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuaHMuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBzICYmIChzLmZvckVhY2goKHQgPT4gdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMucmVtb3ZlKHQpKSksIFxuICAgICAgICB0aGlzLmhzLmRlbGV0ZShuKSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGZzKCksIGkgPSBlLmxlbmd0aCArIDEsIHIgPSBuZXcgaHQoZS5jaGlsZChcIlwiKSksIG8gPSB0aGlzLm92ZXJsYXlzLmdldEl0ZXJhdG9yRnJvbShyKTtcbiAgICAgICAgZm9yICg7by5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG8uZ2V0TmV4dCgpLnZhbHVlLCByID0gdC5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICghZS5pc1ByZWZpeE9mKHIucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGZyb20gc3ViLWNvbGxlY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICByLnBhdGgubGVuZ3RoID09PSBpICYmICh0Lmxhcmdlc3RCYXRjaElkID4gbiAmJiBzLnNldCh0LmdldEtleSgpLCB0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUocyk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBuZXcgcGUoKCh0LCBlKSA9PiB0IC0gZSkpO1xuICAgICAgICBjb25zdCByID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtyLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gci5nZXROZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBpZiAodC5nZXRLZXkoKS5nZXRDb2xsZWN0aW9uR3JvdXAoKSA9PT0gZSAmJiB0Lmxhcmdlc3RCYXRjaElkID4gbikge1xuICAgICAgICAgICAgICAgIGxldCBlID0gaS5nZXQodC5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gZSAmJiAoZSA9IGZzKCksIGkgPSBpLmluc2VydCh0Lmxhcmdlc3RCYXRjaElkLCBlKSksIGUuc2V0KHQuZ2V0S2V5KCksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBmcygpLCB1ID0gaS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDt1Lmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAodS5nZXROZXh0KCkudmFsdWUuZm9yRWFjaCgoKHQsIGUpID0+IG8uc2V0KHQsIGUpKSksIG8uc2l6ZSgpID49IHMpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKG8pO1xuICAgIH1cbiAgICBkZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhlIG92ZXJsYXkgdG8gaXRzIGJhdGNoIGlkLlxuICAgICAgICBjb25zdCBzID0gdGhpcy5vdmVybGF5cy5nZXQobi5rZXkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaHMuZ2V0KHMubGFyZ2VzdEJhdGNoSWQpLmRlbGV0ZShuLmtleSk7XG4gICAgICAgICAgICB0aGlzLmhzLnNldChzLmxhcmdlc3RCYXRjaElkLCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm92ZXJsYXlzID0gdGhpcy5vdmVybGF5cy5pbnNlcnQobi5rZXksIG5ldyBlaShlLCBuKSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhpcyBvdmVybGF5IHRvIHRoZSBnaXZlbiBsYXJnZXN0QmF0Y2hJZC5cbiAgICAgICAgbGV0IGkgPSB0aGlzLmhzLmdldChlKTtcbiAgICAgICAgdm9pZCAwID09PSBpICYmIChpID0gZ3MoKSwgdGhpcy5ocy5zZXQoZSwgaSkpLCB0aGlzLmhzLnNldChlLCBpLmFkZChuLmtleSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyAkbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLmxzID0gbmV3IEVlKEZvLmZzKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLmRzID0gbmV3IEVlKEZvLl9zKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5scy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBGbyh0LCBlKTtcbiAgICAgICAgdGhpcy5scyA9IHRoaXMubHMuYWRkKG4pLCB0aGlzLmRzID0gdGhpcy5kcy5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICB3cyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLmdzKG5ldyBGbyh0LCBlKSk7XG4gICAgfVxuICAgIHlzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIHBzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBodChuZXcgdXQoW10pKSwgbiA9IG5ldyBGbyhlLCB0KSwgcyA9IG5ldyBGbyhlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ3ModCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgSXMoKSB7XG4gICAgICAgIHRoaXMubHMuZm9yRWFjaCgodCA9PiB0aGlzLmdzKHQpKSk7XG4gICAgfVxuICAgIGdzKHQpIHtcbiAgICAgICAgdGhpcy5scyA9IHRoaXMubHMuZGVsZXRlKHQpLCB0aGlzLmRzID0gdGhpcy5kcy5kZWxldGUodCk7XG4gICAgfVxuICAgIFRzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBodChuZXcgdXQoW10pKSwgbiA9IG5ldyBGbyhlLCB0KSwgcyA9IG5ldyBGbyhlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gZ3MoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEZvKHQsIDApLCBuID0gdGhpcy5scy5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIEZvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5FcyA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyBmcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBodC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgZXQodC5FcywgZS5Fcyk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBfcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBldCh0LkVzLCBlLkVzKSB8fCBodC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBCbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZXQgb2YgYWxsIG11dGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzZW50IGJ1dCBub3QgeWV0IGJlZW4gYXBwbGllZCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMuQXMgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMuUnMgPSBuZXcgRWUoRm8uZnMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5BcztcbiAgICAgICAgdGhpcy5BcysrLCB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gMCAmJiB0aGlzLm11dGF0aW9uUXVldWVbdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCByID0gbmV3IFpzKGksIGUsIG4sIHMpO1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUucHVzaChyKTtcbiAgICAgICAgLy8gVHJhY2sgcmVmZXJlbmNlcyBieSBkb2N1bWVudCBrZXkgYW5kIGluZGV4IGNvbGxlY3Rpb24gcGFyZW50cy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIHRoaXMuUnMgPSB0aGlzLlJzLmFkZChuZXcgRm8oZS5rZXksIGkpKSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZS5rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKHRoaXMudnMoZSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IHRoaXMuUHMobiksIGkgPSBzIDwgMCA/IDAgOiBzO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gaSA/IHRoaXMubXV0YXRpb25RdWV1ZVtpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID8gLTEgOiB0aGlzLkFzIC0gMSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5zbGljZSgpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEZvKGUsIDApLCBzID0gbmV3IEZvKGUsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUnMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnZzKHQuRXMpO1xuICAgICAgICAgICAgaS5wdXNoKGUpO1xuICAgICAgICB9KSksIHZ0LnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3IEVlKGV0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IEZvKHQsIDApLCBzID0gbmV3IEZvKHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgICAgICAgICB0aGlzLlJzLmZvckVhY2hJblJhbmdlKFsgZSwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHQuRXMpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHZ0LnJlc29sdmUodGhpcy5icyhuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBxdWVyeSBwYXRoIGFzIGEgcHJlZml4IGZvciB0ZXN0aW5nIGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgIGNvbnN0IG4gPSBlLnBhdGgsIHMgPSBuLmxlbmd0aCArIDE7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhIGRvY3VtZW50IHJlZmVyZW5jZSBmb3IgYWN0dWFsbHkgc2Nhbm5pbmcgdGhlIGluZGV4LiBVbmxpa2VcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxuICAgICAgICAvLyBzZWdtZW50cy4gVGhlIGVtcHR5IHNlZ21lbnQgY2FuIGJlIHVzZWQgYSBzdWZmaXggb2YgdGhlIHF1ZXJ5IHBhdGhcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBwcmVjZWRlcyBhbGwgb3RoZXIgc2VnbWVudHMgaW4gYW4gb3JkZXJlZCB0cmF2ZXJzYWwuXG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgaHQuaXNEb2N1bWVudEtleShpKSB8fCAoaSA9IGkuY2hpbGQoXCJcIikpO1xuICAgICAgICBjb25zdCByID0gbmV3IEZvKG5ldyBodChpKSwgMCk7XG4gICAgICAgIC8vIEZpbmQgdW5pcXVlIGJhdGNoSURzIHJlZmVyZW5jZWQgYnkgYWxsIGRvY3VtZW50cyBwb3RlbnRpYWxseSBtYXRjaGluZyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuZXcgRWUoZXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5Scy5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQua2V5LnBhdGg7XG4gICAgICAgICAgICByZXR1cm4gISFuLmlzUHJlZml4T2YoZSkgJiYgKFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIGUubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQodC5FcykpLCAhMCk7XG4gICAgICAgIH0pLCByKSwgdnQucmVzb2x2ZSh0aGlzLmJzKG8pKTtcbiAgICB9XG4gICAgYnModCkge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy52cyh0KTtcbiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgZS5wdXNoKG4pO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICBGKDAgPT09IHRoaXMuVnMoZS5iYXRjaElkLCBcInJlbW92ZWRcIikpLCB0aGlzLm11dGF0aW9uUXVldWUuc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLlJzO1xuICAgICAgICByZXR1cm4gdnQuZm9yRWFjaChlLm11dGF0aW9ucywgKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBGbyhzLmtleSwgZS5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgcy5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ScyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRG4odCkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBGbyhlLCAwKSwgcyA9IHRoaXMuUnMuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKGUuaXNFcXVhbChzICYmIHMua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgsIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgYXNzZXJ0cyB0aGF0XG4gICAgICogdGhlIHJlc3VsdGluZyBpbmRleCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxuICAgICAqIGZvcm0gKGUuZy4gXCJhY2tub3dsZWRnZWRcIiBpbiBhIHJvdXRpbmUgdGhhdCBhY2tub3dsZWRnZXMgYmF0Y2hlcykuXG4gICAgICovICAgIFZzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUHModCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUuIFRoaXMgb3BlcmF0aW9uXG4gICAgICogaXMgTygxKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cbiAgICAgKiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXVlLiBOb3RlIHRoaXMgaW5kZXggY2FuIGJlIG5lZ2F0aXZlIGlmIHRoZSByZXF1ZXN0ZWRcbiAgICAgKiBiYXRjaElkIGhhcyBhbHJlYWR5IGJlZW4gcmVtdm9lZCBmcm9tIHRoZSBxdWV1ZSBvciBwYXN0IHRoZSBlbmQgb2YgdGhlXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXG4gICAgICovICAgIFBzKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpIFxuICAgICAgICAvLyBBcyBhbiBpbmRleCB0aGlzIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgcXVldWVcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIC8vIEV4YW1pbmUgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB0byBmaWd1cmUgb3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXG4gICAgICAgIC8vIGJhdGNoSWQgYW5kIGluZGV4ZXMgaW4gdGhlIGFycmF5LiBOb3RlIHRoYXQgc2luY2UgdGhlIHF1ZXVlIGlzIG9yZGVyZWRcbiAgICAgICAgLy8gYnkgYmF0Y2hJZCwgaWYgdGhlIGZpcnN0IGJhdGNoIGhhcyBhIGxhcmdlciBiYXRjaElkIHRoZW4gdGhlIHJlcXVlc3RlZFxuICAgICAgICAvLyBiYXRjaElkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB0IC0gdGhpcy5tdXRhdGlvblF1ZXVlWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIHZzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuUHModCk7XG4gICAgICAgIGlmIChlIDwgMCB8fCBlID49IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlW2VdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovXG5jbGFzcyBMbyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gICAgICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gICAgICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlNzID0gdCwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LCBzID0gdGhpcy5kb2NzLmdldChuKSwgaSA9IHMgPyBzLnNpemUgOiAwLCByID0gdGhpcy5TcyhlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQobiwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IGUubXV0YWJsZUNvcHkoKSxcbiAgICAgICAgICAgIHNpemU6IHJcbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSByIC0gaSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbi5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgIGUgJiYgKHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUodCksIHRoaXMuc2l6ZSAtPSBlLnNpemUpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShuID8gbi5kb2N1bWVudC5tdXRhYmxlQ29weSgpIDogYW4ubmV3SW52YWxpZERvY3VtZW50KGUpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gY3MoKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBlID8gZS5kb2N1bWVudC5tdXRhYmxlQ29weSgpIDogYW4ubmV3SW52YWxpZERvY3VtZW50KHQpKTtcbiAgICAgICAgfSkpLCB2dC5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBjcygpO1xuICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93IGRvd25cbiAgICAgICAgLy8gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLnBhdGgsIG8gPSBuZXcgaHQoci5jaGlsZChcIlwiKSksIHUgPSB0aGlzLmRvY3MuZ2V0SXRlcmF0b3JGcm9tKG8pO1xuICAgICAgICBmb3IgKDt1Lmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB7a2V5OiB0LCB2YWx1ZToge2RvY3VtZW50OiBvfX0gPSB1LmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICghci5pc1ByZWZpeE9mKHQucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgdC5wYXRoLmxlbmd0aCA+IHIubGVuZ3RoICsgMSB8fCAoVHQocHQobyksIG4pIDw9IDAgfHwgKHMuaGFzKG8ua2V5KSB8fCBucyhlLCBvKSkgJiYgKGkgPSBpLmluc2VydChvLmtleSwgby5tdXRhYmxlQ29weSgpKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gdGhlIEluZGV4QmFja2ZpbGxlciBpZiBwZXJzaXN0ZW5jZVxuICAgICAgICAvLyBpcyBlbmFibGVkLlxuICAgICAgICAkKCk7XG4gICAgfVxuICAgIERzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZ0LmZvckVhY2godGhpcy5kb2NzLCAodCA9PiBlKHQpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IHFvKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAqL1xuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlxuICovXG5jbGFzcyBxbyBleHRlbmRzIFJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMucnMgPSB0O1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXModCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuaXNWYWxpZERvY3VtZW50KCkgPyBlLnB1c2godGhpcy5ycy5hZGRFbnRyeSh0LCBzKSkgOiB0aGlzLnJzLnJlbW92ZUVudHJ5KG4pO1xuICAgICAgICB9KSksIHZ0LndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJzLmdldEVudHJ5KHQsIGUpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ycy5nZXRFbnRyaWVzKHQsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVW8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5DcyA9IG5ldyBvcygodCA9PiBPbih0KSksICRuKSwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBydC5taW4oKSwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgSUQgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gMCwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBzZXF1ZW5jZSBudW1iZXIgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMueHMgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgb3JkZXJlZCBiaWRpcmVjdGlvbmFsIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSByZW1vdGUgdGFyZ2V0XG4gICAgICAgICAqIElEcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTnMgPSBuZXcgJG8sIHRoaXMudGFyZ2V0Q291bnQgPSAwLCB0aGlzLmtzID0gbG8uTm4oKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNzLmZvckVhY2goKCh0LCBuKSA9PiBlKG4pKSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKHRoaXMueHMpO1xuICAgIH1cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdGhpcy5rcy5uZXh0KCksIHZ0LnJlc29sdmUodGhpcy5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbiAmJiAodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbiksIGUgPiB0aGlzLnhzICYmICh0aGlzLnhzID0gZSksIFxuICAgICAgICB2dC5yZXNvbHZlKCk7XG4gICAgfVxuICAgICRuKHQpIHtcbiAgICAgICAgdGhpcy5Dcy5zZXQodC50YXJnZXQsIHQpO1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgZSA+IHRoaXMuaGlnaGVzdFRhcmdldElkICYmICh0aGlzLmtzID0gbmV3IGxvKGUpLCB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IGUpLCB0LnNlcXVlbmNlTnVtYmVyID4gdGhpcy54cyAmJiAodGhpcy54cyA9IHQuc2VxdWVuY2VOdW1iZXIpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG4oZSksIHRoaXMudGFyZ2V0Q291bnQgKz0gMSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG4oZSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNzLmRlbGV0ZShlLnRhcmdldCksIHRoaXMuTnMucHMoZS50YXJnZXRJZCksIHRoaXMudGFyZ2V0Q291bnQgLT0gMSwgXG4gICAgICAgIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Dcy5mb3JFYWNoKCgociwgbykgPT4ge1xuICAgICAgICAgICAgby5zZXF1ZW5jZU51bWJlciA8PSBlICYmIG51bGwgPT09IG4uZ2V0KG8udGFyZ2V0SWQpICYmICh0aGlzLkNzLmRlbGV0ZShyKSwgaS5wdXNoKHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgby50YXJnZXRJZCkpLCBcbiAgICAgICAgICAgIHMrKyk7XG4gICAgICAgIH0pKSwgdnQud2FpdEZvcihpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUodGhpcy50YXJnZXRDb3VudCk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Dcy5nZXQoZSkgfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUobik7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5zLndzKGUsIG4pLCB2dC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuTnMueXMoZSwgbik7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLCBpID0gW107XG4gICAgICAgIHJldHVybiBzICYmIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBpLnB1c2gocy5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSk7XG4gICAgICAgIH0pKSwgdnQud2FpdEZvcihpKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ocy5wcyhlKSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLk5zLlRzKGUpO1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSh0aGlzLk5zLmNvbnRhaW5zS2V5KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWVtb3J5LWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgb25seSBpbiBSQU0gYW5kXG4gKiBub3QgcGVyc2lzdGVkIGFjcm9zcyBzZXNzaW9ucy5cbiAqL1xuY2xhc3MgS28ge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhY2NlcHRzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgYSByZWZlcmVuY2UgZGVsZWdhdGUuIFRoaXNcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xuICAgICAqIGVhY2ggb3RoZXIgd2l0aG91dCBoYXZpbmcgbnVsbGFibGUgZmllbGRzIHRoYXQgd291bGQgdGhlbiBuZWVkIHRvIGJlXG4gICAgICogY2hlY2tlZCBvciBhc3NlcnRlZCBvbiBldmVyeSBhY2Nlc3MuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLk1zID0ge30sIHRoaXMub3ZlcmxheXMgPSB7fSwgdGhpcy5PcyA9IG5ldyAkdCgwKSwgdGhpcy4kcyA9ICExLCB0aGlzLiRzID0gITAsIFxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCh0aGlzKSwgdGhpcy5GcyA9IG5ldyBVbyh0aGlzKTtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBuZXcgenIsIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG8odCk7XG4gICAgICAgIH0oKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5Ccyh0KSkpLCB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgYXIoZSksIHRoaXMuTHMgPSBuZXcgTW8odGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vIGR1cmFibGUgc3RhdGUgdG8gZW5zdXJlIGlzIGNsb3NlZCBvbiBzaHV0ZG93bi5cbiAgICAgICAgcmV0dXJuIHRoaXMuJHMgPSAhMSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcztcbiAgICB9XG4gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXROZXR3b3JrRW5hYmxlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIC8vIFdlIGRvIG5vdCBjdXJyZW50bHkgc3VwcG9ydCBpbmRpY2VzIGZvciBtZW1vcnkgcGVyc2lzdGVuY2UsIHNvIHdlIGNhblxuICAgICAgICAvLyByZXR1cm4gdGhlIHNhbWUgc2hhcmVkIGluc3RhbmNlIG9mIHRoZSBtZW1vcnkgaW5kZXggbWFuYWdlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5vdmVybGF5c1t0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBPbywgdGhpcy5vdmVybGF5c1t0LnRvS2V5KCldID0gZSksIGU7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuTXNbdC50b0tleSgpXTtcbiAgICAgICAgcmV0dXJuIG4gfHwgKG4gPSBuZXcgQm8oZSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSksIHRoaXMuTXNbdC50b0tleSgpXSA9IG4pLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnM7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5McztcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBOKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgR28odGhpcy5Pcy5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5xcygpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5VcyhzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgS3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdnQub3IoT2JqZWN0LnZhbHVlcyh0aGlzLk1zKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIEdvIGV4dGVuZHMgQXQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgUW8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLkdzID0gbmV3ICRvLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuUXMgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMganModCkge1xuICAgICAgICByZXR1cm4gbmV3IFFvKHQpO1xuICAgIH1cbiAgICBnZXQgenMoKSB7XG4gICAgICAgIGlmICh0aGlzLlFzKSByZXR1cm4gdGhpcy5RcztcbiAgICAgICAgdGhyb3cgJCgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Hcy5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMuenMuZGVsZXRlKG4udG9TdHJpbmcoKSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuR3MucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnpzLmFkZChuLnRvU3RyaW5nKCkpLCB2dC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuenMuYWRkKGUudG9TdHJpbmcoKSksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5Hcy5wcyhlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMuenMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy56cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIHFzKCkge1xuICAgICAgICB0aGlzLlFzID0gbmV3IFNldDtcbiAgICB9XG4gICAgVXModCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiB2dC5mb3JFYWNoKHRoaXMuenMsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBodC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLldzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzLCBydC5taW4oKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAodGhpcy5RcyA9IG51bGwsIGUuYXBwbHkodCkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Xcyh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgPyB0aGlzLnpzLmRlbGV0ZShlLnRvU3RyaW5nKCkpIDogdGhpcy56cy5hZGQoZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBCcyh0KSB7XG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIFdzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZ0Lm9yKFsgKCkgPT4gdnQucmVzb2x2ZSh0aGlzLkdzLmNvbnRhaW5zS2V5KGUpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHQsIGUpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLktzKHQsIGUpIF0pO1xuICAgIH1cbn1cblxuY2xhc3Mgam8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIHRoaXMuSHMgPSBuZXcgb3MoKHQgPT4gcXQodC5wYXRoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSksIFxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBUbyh0aGlzLCBlKTtcbiAgICB9XG4gICAgc3RhdGljIGpzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqbyh0LCBlKTtcbiAgICB9XG4gICAgLy8gTm8tb3BzLCBwcmVzZW50IHNvIG1lbW9yeSBwZXJzaXN0ZW5jZSBkb2Vzbid0IGhhdmUgdG8gY2FyZSB3aGljaCBkZWxlZ2F0ZVxuICAgIC8vIGl0IGhhcy5cbiAgICBxcygpIHt9XG4gICAgVXModCkge1xuICAgICAgICByZXR1cm4gdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHQsIGUpO1xuICAgIH1cbiAgICBqbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkhuKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHQpLm5leHQoKHQgPT4gZS5uZXh0KChlID0+IHQgKyBlKSkpKTtcbiAgICB9XG4gICAgSG4odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnpuKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGUrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgem4odCwgZSkge1xuICAgICAgICByZXR1cm4gdnQuZm9yRWFjaCh0aGlzLkhzLCAoKG4sIHMpID0+IHRoaXMuWW4odCwgbiwgcykubmV4dCgodCA9PiB0ID8gdnQucmVzb2x2ZSgpIDogZShzKSkpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIGkgPSBzLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gcy5Ecyh0LCAocyA9PiB0aGlzLlluKHQsIHMsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCB8fCAobisrLCBpLnJlbW92ZUVudHJ5KHMsIHJ0Lm1pbigpKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGkuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHMuc2V0KGUsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhzLnNldChuLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIHZ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHMuc2V0KG4sIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHMuc2V0KGUsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgdnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBCcyh0KSB7XG4gICAgICAgIGxldCBlID0gdC5rZXkudG9TdHJpbmcoKS5sZW5ndGg7XG4gICAgICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIChlICs9IHplKHQuZGF0YS52YWx1ZSkpLCBlO1xuICAgIH1cbiAgICBZbih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB2dC5vcihbICgpID0+IHRoaXMucGVyc2lzdGVuY2UuS3ModCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0LCBlKSwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuSHMuZ2V0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIHZ0LnJlc29sdmUodm9pZCAwICE9PSB0ICYmIHQgPiBuKTtcbiAgICAgICAgfSBdKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIHpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaW4gcHJvZHVjdGlvbiwgdGhpcyBtZXRob2QgaXMgb25seSBldmVyIHVzZWQgdG8gdXBncmFkZSB0aGUgc2NoZW1hXG4gICAgICogdG8gU0NIRU1BX1ZFUlNJT04uIERpZmZlcmVudCB2YWx1ZXMgb2YgdG9WZXJzaW9uIGFyZSBvbmx5IHVzZWQgZm9yIHRlc3RpbmdcbiAgICAgKiBhbmQgbG9jYWwgZmVhdHVyZSBkZXZlbG9wbWVudC5cbiAgICAgKi8gICAgJCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgUHQoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm93bmVyXCIpO1xuICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25RdWV1ZXNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwidXNlcklkXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwidXNlck11dGF0aW9uc0luZGV4XCIsIFF0LCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFVwZ3JhZGUgZnVuY3Rpb24gdG8gbWlncmF0ZSB0aGUgJ211dGF0aW9ucycgc3RvcmUgZnJvbSBWMSB0byBWMy4gTG9hZHNcbiAqIGFuZCByZXdyaXRlcyBhbGwgZGF0YS5cbiAqLyAodCksIFdvKHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0gdnQucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiKSwgdC5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbiAgICAgICAgfSh0KSwgV28odCkpLCByID0gci5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLCBuID0ge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RUYXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IDAsXG4gICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjogcnQubWluKCkudG9UaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRDb3VudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfShpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShcIm11dGF0aW9uc1wiKS5qKCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgdC5kZWxldGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgUXQsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnN0b3JlKFwibXV0YXRpb25zXCIpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdnQud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiY2xpZW50TWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImNsaWVudElkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5KcyhpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xuICAgICAgICB9KHQpLCB0aGlzLllzKGkpKSkpKSwgbiA8IDcgJiYgcyA+PSA3ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLlhzKGkpKSkpLCBuIDwgOCAmJiBzID49IDggJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuWnModCwgaSkpKSksIFxuICAgICAgICBuIDwgOSAmJiBzID49IDkgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpICYmIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIik7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICAgICAgLy8gTm90ZTogU2NoZW1hIHZlcnNpb24gOSB1c2VkIHRvIGNyZWF0ZSBhIHJlYWQgdGltZSBpbmRleCBmb3IgdGhlXG4gICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGlzIG5vdyBkb25lIHdpdGggc2NoZW1hIHZlcnNpb24gMTMuXG4gICAgICAgICAgICAgICAgfSkpKSwgbiA8IDEwICYmIHMgPj0gMTAgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMudGkoaSkpKSksIG4gPCAxMSAmJiBzID49IDExICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJidW5kbGVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJidW5kbGVJZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm5hbWVkUXVlcmllc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwibmFtZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgMTIgJiYgcyA+PSAxMiAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50T3ZlcmxheXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBvZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCB1ZSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBPdmVybGF5SW5kZXhcIiwgY2UsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDEzICYmIHMgPj0gMTMgJiYgKHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBIdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCBKdCksIGUuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBZdCk7XG4gICAgICAgIH0odCkpKS5uZXh0KCgoKSA9PiB0aGlzLmVpKHQsIGkpKSkubmV4dCgoKCkgPT4gdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSkpKSwgXG4gICAgICAgIG4gPCAxNCAmJiBzID49IDE0ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLm5pKHQsIGkpKSkpLCBuIDwgMTUgJiYgcyA+PSAxNSAmJiAociA9IHIubmV4dCgoKCkgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4Q29uZmlndXJhdGlvblwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJpbmRleElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4U3RhdGVcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IG5lXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInNlcXVlbmNlTnVtYmVySW5kZXhcIiwgc2UsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleEVudHJpZXNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IGllXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgcmUsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSh0KSkpKSwgcjtcbiAgICB9XG4gICAgWXModCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLlgoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IHJvKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgICAgICBieXRlU2l6ZTogZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIikucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSnModCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcIm11dGF0aW9uUXVldWVzXCIpLCBuID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIGUuaigpLm5leHQoKGUgPT4gdnQuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLnVzZXJJZCwgLTEgXSwgWyBlLnVzZXJJZCwgZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLmooXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgcykubmV4dCgobiA9PiB2dC5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBGKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHdyKHRoaXMuc2VyaWFsaXplciwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlvKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIFhzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIG4gPSB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShcInRhcmdldEdsb2JhbFwiKS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4gbi5YKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgdXQobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIHF0KHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8gdnQucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcXQobiksXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclxuICAgICAgICAgICAgICAgIH0pKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB2dC53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWnModCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiwge1xuICAgICAgICAgICAga2V5UGF0aDogZWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSBlLnN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiksIHMgPSBuZXcgV3IsIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogcXQocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuWCh7XG4gICAgICAgICAgICBZOiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgdXQodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIikuWCh7XG4gICAgICAgICAgICBZOiAhMFxuICAgICAgICB9LCAoKFt0LCBlLCBuXSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IEd0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIGkoci5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgdGkodCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcInRhcmdldHNcIik7XG4gICAgICAgIHJldHVybiBlLlgoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbXIobiksIGkgPSBncih0aGlzLnNlcmlhbGl6ZXIsIHMpO1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIiksIHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpLCByID0gKG8gPSBuLCBvLmRvY3VtZW50ID8gbmV3IGh0KHV0LmZyb21TdHJpbmcoby5kb2N1bWVudC5uYW1lKS5wb3BGaXJzdCg1KSkgOiBvLm5vRG9jdW1lbnQgPyBodC5mcm9tU2VnbWVudHMoby5ub0RvY3VtZW50LnBhdGgpIDogby51bmtub3duRG9jdW1lbnQgPyBodC5mcm9tU2VnbWVudHMoby51bmtub3duRG9jdW1lbnQucGF0aCkgOiAkKCkpLnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAgICAgICAgICAgIGNvbnN0IHUgPSB7XG4gICAgICAgICAgICAgICAgcHJlZml4UGF0aDogci5zbGljZSgwLCByLmxlbmd0aCAtIDIpLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogcltyLmxlbmd0aCAtIDJdLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHJbci5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogbi5yZWFkVGltZSB8fCBbIDAsIDAgXSxcbiAgICAgICAgICAgICAgICB1bmtub3duRG9jdW1lbnQ6IG4udW5rbm93bkRvY3VtZW50LFxuICAgICAgICAgICAgICAgIG5vRG9jdW1lbnQ6IG4ubm9Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogbi5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6ICEhbi5oYXNDb21taXR0ZWRNdXRhdGlvbnNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQodSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdnQud2FpdEZvcihzKSkpO1xuICAgIH1cbiAgICBuaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnN0b3JlKFwibXV0YXRpb25zXCIpLCBzID0gUG8odGhpcy5zZXJpYWxpemVyKSwgaSA9IG5ldyBLbyhRby5qcywgdGhpcy5zZXJpYWxpemVyLmxlKTtcbiAgICAgICAgcmV0dXJuIG4uaigpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgICAgICBsZXQgcyA9IG51bGwgIT09IChlID0gbi5nZXQodC51c2VySWQpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogZ3MoKTtcbiAgICAgICAgICAgICAgICB3cih0aGlzLnNlcmlhbGl6ZXIsIHQpLmtleXMoKS5mb3JFYWNoKCh0ID0+IHMgPSBzLmFkZCh0KSkpLCBuLnNldCh0LnVzZXJJZCwgcyk7XG4gICAgICAgICAgICB9KSksIHZ0LmZvckVhY2gobiwgKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBWKG4pLCBvID0gdnIuZmUodGhpcy5zZXJpYWxpemVyLCByKSwgdSA9IGkuZ2V0SW5kZXhNYW5hZ2VyKHIpLCBjID0gb28uZmUociwgdGhpcy5zZXJpYWxpemVyLCB1LCBpLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGtvKHMsIGMsIG8sIHUpLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKG5ldyBfZShlLCAkdC5jdCksIHQpLm5leHQoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gV28odCkge1xuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBadFxuICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIiwgdGUsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pO1xuICAgIC8vIE5PVEU6IFRoaXMgaXMgdW5pcXVlIG9ubHkgYmVjYXVzZSB0aGUgVGFyZ2V0SWQgaXMgdGhlIHN1ZmZpeC5cbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiLCB7XG4gICAgICAgIGtleVBhdGg6IFwidGFyZ2V0SWRcIlxuICAgIH0pLmNyZWF0ZUluZGV4KFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgWHQsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCB0LmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG5jb25zdCBIbyA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBKbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIHUsIGMsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIGEsIGggPSAxNSkge1xuICAgICAgICBpZiAodGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IHQsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBlLCB0aGlzLmNsaWVudElkID0gbiwgXG4gICAgICAgIHRoaXMuc2kgPSBpLCB0aGlzLndpbmRvdyA9IHIsIHRoaXMuZG9jdW1lbnQgPSBvLCB0aGlzLmlpID0gYywgdGhpcy5yaSA9IGEsIHRoaXMub2kgPSBoLCBcbiAgICAgICAgdGhpcy5PcyA9IG51bGwsIHRoaXMuJHMgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMudWkgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5jaSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMuYWkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuaGkgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLmxpID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIUpvLkQoKSkgdGhyb3cgbmV3IFUocS5VTklNUExFTUVOVEVELCBcIlRoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC5cIik7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBuZXcgRW8odGhpcywgcyksIHRoaXMuZmkgPSBlICsgXCJtYWluXCIsIHRoaXMuc2VyaWFsaXplciA9IG5ldyBhcih1KSwgXG4gICAgICAgIHRoaXMuZGkgPSBuZXcgYnQodGhpcy5maSwgdGhpcy5vaSwgbmV3IHpvKHRoaXMuc2VyaWFsaXplcikpLCB0aGlzLkZzID0gbmV3IGZvKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplciksIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBQbyh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLkxzID0gbmV3IEVyLCB0aGlzLndpbmRvdyAmJiB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgPyB0aGlzLl9pID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlIDogKHRoaXMuX2kgPSBudWxsLCBcbiAgICAgICAgITEgPT09IGEgJiYgayhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiTG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlLiBBcyBhIHJlc3VsdCwgcGVyc2lzdGVuY2UgbWF5IG5vdCB3b3JrIHJlbGlhYmx5LiBJbiBwYXJ0aWN1bGFyIGVuYWJsZVBlcnNpc3RlbmNlKCkgY291bGQgZmFpbCBpbW1lZGlhdGVseSBhZnRlciByZWZyZXNoaW5nIHRoZSBwYWdlLlwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgdG8gc3RhcnQgSW5kZXhlZERiIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgV2hldGhlciBwZXJzaXN0ZW5jZSB3YXMgZW5hYmxlZC5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXhwZWN0ZWQgdG8gZmFpbCBzb21ldGltZXMgKGluIHRoZSBjYXNlIG9mIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGFscmVhZHkgaGF2aW5nIHRoZSBwZXJzaXN0ZW5jZSBsb2NrKSwgc28gaXQncyB0aGUgZmlyc3QgdGhpbmcgd2Ugc2hvdWxkXG4gICAgICAgIC8vIGRvLlxuICAgICAgICByZXR1cm4gdGhpcy53aSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgLy8gRmFpbCBgc3RhcnQoKWAgaWYgYHN5bmNocm9uaXplVGFic2AgaXMgZGlzYWJsZWQgYW5kIHdlIGNhbm5vdFxuICAgICAgICAgICAgLy8gb2J0YWluIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBIbyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5taSgpLCB0aGlzLmdpKCksIHRoaXMueWkoKSwgdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHRoaXMuRnMuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpKSk7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuT3MgPSBuZXcgJHQodCwgdGhpcy5paSk7XG4gICAgICAgIH0pKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiRzID0gITA7XG4gICAgICAgIH0pKS5jYXRjaCgodCA9PiAodGhpcy5kaSAmJiB0aGlzLmRpLmNsb3NlKCksIFByb21pc2UucmVqZWN0KHQpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIHByaW1hcnkgc3RhdGUgb2YgdGhlXG4gICAgICogaW5zdGFuY2UgY2hhbmdlcy4gVXBvbiByZWdpc3RlcmluZywgdGhpcyBsaXN0ZW5lciBpcyBpbnZva2VkIGltbWVkaWF0ZWx5XG4gICAgICogd2l0aCB0aGUgY3VycmVudCBwcmltYXJ5IHN0YXRlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgcGkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saSA9IGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkgcmV0dXJuIHQoZSk7XG4gICAgICAgIH0sIHQodGhpcy5pc1ByaW1hcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIGRhdGFiYXNlIHJlY2VpdmVzIGFcbiAgICAgKiB2ZXJzaW9uIGNoYW5nZSBldmVudCBpbmRpY2F0aW5nIHRoYXQgaXQgaGFzIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuZGkuQigoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IGUubmV3VmVyc2lvbiAmJiBhd2FpdCB0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZCh0KSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IHQgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSB0LCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLnNpLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLndpKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgd2koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IFhvKHQpLnB1dCh7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5ldHdvcmtFbmFibGVkOiB0aGlzLm5ldHdvcmtFbmFibGVkLFxuICAgICAgICAgICAgaW5Gb3JlZ3JvdW5kOiB0aGlzLmluRm9yZWdyb3VuZFxuICAgICAgICB9KS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLklpKHQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuc2kuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5saSghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLlRpKHQpKSkubmV4dCgoZSA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhZSA/IHRoaXMuRWkodCkubmV4dCgoKCkgPT4gITEpKSA6ICEhZSAmJiB0aGlzLkFpKHQpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChEdCh0KSkgXG4gICAgICAgICAgICAvLyBQcm9jZWVkIHdpdGggdGhlIGV4aXN0aW5nIHN0YXRlLiBBbnkgc3Vic2VxdWVudCBhY2Nlc3MgdG9cbiAgICAgICAgICAgIC8vIEluZGV4ZWREQiB3aWxsIHZlcmlmeSB0aGUgbGVhc2UuXG4gICAgICAgICAgICByZXR1cm4gTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGV4dGVuZCBvd25lciBsZWFzZTogXCIsIHQpLCB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgdDtcbiAgICAgICAgICAgIHJldHVybiBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2hcIiwgdCksIFxuICAgICAgICAgICAgLyogaXNQcmltYXJ5PSAqLyAhMTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgdGhpcy5zaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLmxpKHQpKSksIHRoaXMuaXNQcmltYXJ5ID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBJaSh0KSB7XG4gICAgICAgIHJldHVybiBZbyh0KS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHZ0LnJlc29sdmUodGhpcy5SaSh0KSkpKTtcbiAgICB9XG4gICAgdmkodCkge1xuICAgICAgICByZXR1cm4gWG8odCkuZGVsZXRlKHRoaXMuY2xpZW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRocmVzaG9sZCBoYXMgcGFzc2VkLCBwcnVuZXMgdGhlXG4gICAgICogUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGFuZCB0aGUgQ2xpZW50TWV0YWRhdGEgc3RvcmUgYmFzZWQgb24gdGhlIGxhc3QgdXBkYXRlXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cbiAgICAgKi8gICAgYXN5bmMgUGkoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5iaSh0aGlzLmhpLCAxOGU1KSkge1xuICAgICAgICAgICAgdGhpcy5oaSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5ydW5UcmFuc2FjdGlvbihcIm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB3ZSh0LCBcImNsaWVudE1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmooKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuVmkodCwgMThlNSksIHMgPSB0LmZpbHRlcigodCA9PiAtMSA9PT0gbi5pbmRleE9mKHQpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2dC5mb3JFYWNoKHMsICh0ID0+IGUuZGVsZXRlKHQuY2xpZW50SWQpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgoKCkgPT4gW10pKTtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxuICAgICAgICAgICAgLy8gaW5hY3RpdmUgY2xpZW50cyBhcyB6b21iaWVkIGluIExvY2FsU3RvcmFnZS5cbiAgICAgICAgICAgIC8vIElkZWFsbHkgd2UnZCBkZWxldGUgdGhlIEluZGV4ZWREYiBhbmQgTG9jYWxTdG9yYWdlIHpvbWJpZSBlbnRyaWVzIGZvclxuICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxuICAgICAgICAgICAgLy8gZW50cmllcyBmaXJzdCB0byBhdm9pZCBwb3RlbnRpYWxseSByZXZpdmluZyBhIHpvbWJpZWQgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2kpIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLl9pLnJlbW92ZUl0ZW0odGhpcy5TaShlLmNsaWVudElkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVjdXJyaW5nIHRpbWVyIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGFuZCB0byBlaXRoZXJcbiAgICAgKiBleHRlbmQgb3IgYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSBpZiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlLlxuICAgICAqLyAgICB5aSgpIHtcbiAgICAgICAgdGhpcy5haSA9IHRoaXMuc2kuZW5xdWV1ZUFmdGVyRGVsYXkoXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiIC8qIFRpbWVySWQuQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy53aSgpLnRoZW4oKCgpID0+IHRoaXMuUGkoKSkpLnRoZW4oKCgpID0+IHRoaXMueWkoKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICBSaSh0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgdC5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBUaSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnJpKSByZXR1cm4gdnQucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiBZbyh0KS5nZXQoXCJvd25lclwiKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLmJpKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5EaShlLm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuUmkoZSkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5SaShlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgSG8pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBYbyh0KS5qKCkubmV4dCgodCA9PiB2b2lkIDAgPT09IHRoaXMuVmkodCwgNWUzKS5maW5kKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRJZCAhPT0gdC5jbGllbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gIXRoaXMubmV0d29ya0VuYWJsZWQgJiYgdC5uZXR3b3JrRW5hYmxlZCwgbiA9ICF0aGlzLmluRm9yZWdyb3VuZCAmJiB0LmluRm9yZWdyb3VuZCwgcyA9IHRoaXMubmV0d29ya0VuYWJsZWQgPT09IHQubmV0d29ya0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlIHx8IG4gJiYgcykgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpLm5leHQoKHQgPT4gKHRoaXMuaXNQcmltYXJ5ICE9PSB0ICYmIE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICR7dCA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IGVsaWdpYmxlIGZvciBhIHByaW1hcnkgbGVhc2UuYCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gVGhlIHNodXRkb3duKCkgb3BlcmF0aW9ucyBhcmUgaWRlbXBvdGVudCBhbmQgY2FuIGJlIGNhbGxlZCBldmVuIHdoZW5cbiAgICAgICAgLy8gc3RhcnQoKSBhYm9ydGVkIChlLmcuIGJlY2F1c2UgaXQgY291bGRuJ3QgYWNxdWlyZSB0aGUgcGVyc2lzdGVuY2UgbGVhc2UpLlxuICAgICAgICB0aGlzLiRzID0gITEsIHRoaXMuQ2koKSwgdGhpcy5haSAmJiAodGhpcy5haS5jYW5jZWwoKSwgdGhpcy5haSA9IG51bGwpLCB0aGlzLnhpKCksIFxuICAgICAgICB0aGlzLk5pKCksIFxuICAgICAgICAvLyBVc2UgYFNpbXBsZURiLnJ1blRyYW5zYWN0aW9uYCBkaXJlY3RseSB0byBhdm9pZCBmYWlsaW5nIGlmIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGhhcyBvYnRhaW5lZCB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgYXdhaXQgdGhpcy5kaS5ydW5UcmFuc2FjdGlvbihcInNodXRkb3duXCIsIFwicmVhZHdyaXRlXCIsIFsgXCJvd25lclwiLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBfZSh0LCAkdC5jdCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5FaShlKS5uZXh0KCgoKSA9PiB0aGlzLnZpKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5kaS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMua2koKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgVmkodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5maWx0ZXIoKHQgPT4gdGhpcy5iaSh0LnVwZGF0ZVRpbWVNcywgZSkgJiYgIXRoaXMuRGkodC5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgTWkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IFhvKHQpLmooKS5uZXh0KCh0ID0+IHRoaXMuVmkodCwgMThlNSkubWFwKCh0ID0+IHQuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcztcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBvby5mZSh0LCB0aGlzLnNlcmlhbGl6ZXIsIGUsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnM7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSnIodCwgdGhpcy5zZXJpYWxpemVyLmxlLmRhdGFiYXNlSWQpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZSh0KSB7XG4gICAgICAgIHJldHVybiB2ci5mZSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTHM7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gXCJyZWFkb25seVwiID09PSBlID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgaSA9IDE1ID09PSAociA9IHRoaXMub2kpID8gZGUgOiAxNCA9PT0gciA/IGZlIDogMTMgPT09IHIgPyBsZSA6IDEyID09PSByID8gaGUgOiAxMSA9PT0gciA/IGFlIDogdm9pZCAkKCk7XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBvYmplY3Qgc3RvcmVzIGZvciB0aGUgcHJvdmlkZWQgc2NoZW1hLiAqL1xuICAgICAgICB2YXIgcjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIC8vIERvIGFsbCB0cmFuc2FjdGlvbnMgYXMgcmVhZHdyaXRlIGFnYWluc3QgYWxsIG9iamVjdCBzdG9yZXMsIHNpbmNlIHdlXG4gICAgICAgIC8vIGFyZSB0aGUgb25seSByZWFkZXIvd3JpdGVyLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpLnJ1blRyYW5zYWN0aW9uKHQsIHMsIGksIChzID0+IChvID0gbmV3IF9lKHMsIHRoaXMuT3MgPyB0aGlzLk9zLm5leHQoKSA6ICR0LmN0KSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMuSWkobykubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5UaShvKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBrKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5zaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLmxpKCExKSkpLCBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIEV0KTtcbiAgICAgICAgICAgIHJldHVybiBuKG8pO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLkFpKG8pLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5PaShvKS5uZXh0KCgoKSA9PiBuKG8pKSkpKSkudGhlbigodCA9PiAoby5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIE9pKHQpIHtcbiAgICAgICAgcmV0dXJuIFlvKHQpLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5iaSh0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuRGkodC5vd25lcklkKSAmJiAhdGhpcy5SaSh0KSAmJiAhKHRoaXMucmkgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBIbyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBBaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBvd25lcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb246IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sXG4gICAgICAgICAgICBsZWFzZVRpbWVzdGFtcE1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBZbyh0KS5wdXQoXCJvd25lclwiLCBlKTtcbiAgICB9XG4gICAgc3RhdGljIEQoKSB7XG4gICAgICAgIHJldHVybiBidC5EKCk7XG4gICAgfVxuICAgIC8qKiBDaGVja3MgdGhlIHByaW1hcnkgbGVhc2UgYW5kIHJlbW92ZXMgaXQgaWYgd2UgYXJlIHRoZSBjdXJyZW50IHByaW1hcnkuICovICAgIEVpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFlvKHQpO1xuICAgICAgICByZXR1cm4gZS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHRoaXMuUmkodCkgPyAoTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIHByaW1hcnkgbGVhc2UuXCIpLCBcbiAgICAgICAgZS5kZWxldGUoXCJvd25lclwiKSkgOiB2dC5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgLyoqIFZlcmlmaWVzIHRoYXQgYHVwZGF0ZVRpbWVNc2AgaXMgd2l0aGluIGBtYXhBZ2VNc2AuICovICAgIGJpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiAhKHQgPCBuIC0gZSkgJiYgKCEodCA+IG4pIHx8IChrKGBEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6ICR7dH0gPiAke259YCksIFxuICAgICAgICAhMSkpO1xuICAgIH1cbiAgICBtaSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5kb2N1bWVudCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAodGhpcy5jaSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2kuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLCBcbiAgICAgICAgICAgIHRoaXMud2koKSkpKTtcbiAgICAgICAgfSwgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLmNpKSwgdGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xuICAgIH1cbiAgICB4aSgpIHtcbiAgICAgICAgdGhpcy5jaSAmJiAodGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLmNpKSwgdGhpcy5jaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXG4gICAgICogaGFuZGxlci5cbiAgICAgKi8gICAgZ2koKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChudWxsID09PSAodCA9IHRoaXMud2luZG93KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmFkZEV2ZW50TGlzdGVuZXIpICYmICh0aGlzLnVpID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTm90ZTogSW4gdGhlb3J5LCB0aGlzIHNob3VsZCBiZSBzY2hlZHVsZWQgb24gdGhlIEFzeW5jUXVldWUgc2luY2UgaXRcbiAgICAgICAgICAgIC8vIGFjY2Vzc2VzIGludGVybmFsIHN0YXRlLiBXZSBleGVjdXRlIHRoaXMgY29kZSBkaXJlY3RseSBkdXJpbmcgc2h1dGRvd25cbiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBpdCBnZXRzIGEgY2hhbmNlIHRvIHJ1bi5cbiAgICAgICAgICAgIHRoaXMuQ2koKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSAvKD86VmVyc2lvbnxNb2JpbGUpXFwvMVs0NTZdLztcbiAgICAgICAgICAgIGlzU2FmYXJpKCkgJiYgKG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKHQpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2godCkpICYmIFxuICAgICAgICAgICAgLy8gT24gU2FmYXJpIDE0LCAxNSwgYW5kIDE2LCB3ZSBkbyBub3QgcnVuIGFueSBjbGVhbnVwIGFjdGlvbnMgYXMgaXQgbWlnaHRcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYSBidWcgdGhhdCBwcmV2ZW50cyBTYWZhcmkgZnJvbSByZS1vcGVuaW5nIEluZGV4ZWREQiBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHBhZ2UgbG9hZC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI2NTQ3XG4gICAgICAgICAgICB0aGlzLnNpLmVudGVyUmVzdHJpY3RlZE1vZGUoLyogcHVyZ2VFeGlzdGluZ1Rhc2tzPSAqLyAhMCksIHRoaXMuc2kuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSk7XG4gICAgICAgIH0sIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLnVpKSk7XG4gICAgfVxuICAgIE5pKCkge1xuICAgICAgICB0aGlzLnVpICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy51aSksIHRoaXMudWkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cbiAgICAgKi8gICAgRGkodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAobnVsbCA9PT0gKGUgPSB0aGlzLl9pKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmdldEl0ZW0odGhpcy5TaSh0KSkpO1xuICAgICAgICAgICAgcmV0dXJuIE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICcke3R9JyAke24gPyBcImlzXCIgOiBcImlzIG5vdFwifSB6b21iaWVkIGluIExvY2FsU3RvcmFnZWApLCBcbiAgICAgICAgICAgIG47XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgcmV0dXJuIGsoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuXCIsIHQpLCAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgQ2koKSB7XG4gICAgICAgIGlmICh0aGlzLl9pKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5faS5zZXRJdGVtKHRoaXMuU2kodGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgayhcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIiwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi8gICAga2koKSB7XG4gICAgICAgIGlmICh0aGlzLl9pKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5faS5yZW1vdmVJdGVtKHRoaXMuU2kodGhpcy5jbGllbnRJZCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICBTaSh0KSB7XG4gICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3pvbWJpZV8ke3RoaXMucGVyc2lzdGVuY2VLZXl9XyR7dH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBZbyh0KSB7XG4gICAgcmV0dXJuIHdlKHQsIFwib3duZXJcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFhvKHQpIHtcbiAgICByZXR1cm4gd2UodCwgXCJjbGllbnRNZXRhZGF0YVwiKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gWm8odCwgZSkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSB0LnByb2plY3RJZDtcbiAgICByZXR1cm4gdC5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIHQuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIGUgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqL1xuY2xhc3MgdHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZSwgdGhpcy4kaSA9IG4sIHRoaXMuRmkgPSBzO1xuICAgIH1cbiAgICBzdGF0aWMgQmkodCwgZSkge1xuICAgICAgICBsZXQgbiA9IGdzKCksIHMgPSBncygpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5kb2NDaGFuZ2VzKSBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZCh0LmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgIHMgPSBzLmFkZCh0LmRvYy5rZXkpO1xuIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdHUodCwgZS5mcm9tQ2FjaGUsIG4sIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIEZpcmVzdG9yZSBxdWVyeSBlbmdpbmUuXG4gKlxuICogRmlyZXN0b3JlIHF1ZXJpZXMgY2FuIGJlIGV4ZWN1dGVkIGluIHRocmVlIG1vZGVzLiBUaGUgUXVlcnkgRW5naW5lIGRldGVybWluZXNcbiAqIHdoYXQgbW9kZSB0byB1c2UgYmFzZWQgb24gd2hhdCBkYXRhIGlzIHBlcnNpc3RlZC4gVGhlIG1vZGUgb25seSBkZXRlcm1pbmVzXG4gKiB0aGUgcnVudGltZSBjb21wbGV4aXR5IG9mIHRoZSBxdWVyeSAtIHRoZSByZXN1bHQgc2V0IGlzIGVxdWl2YWxlbnQgYWNyb3NzIGFsbFxuICogaW1wbGVtZW50YXRpb25zLlxuICpcbiAqIFRoZSBRdWVyeSBlbmdpbmUgd2lsbCB1c2UgaW5kZXhlZC1iYXNlZCBleGVjdXRpb24gaWYgYSB1c2VyIGhhcyBjb25maWd1cmVkXG4gKiBhbnkgaW5kZXggdGhhdCBjYW4gYmUgdXNlZCB0byBleGVjdXRlIHF1ZXJ5ICh2aWEgYHNldEluZGV4Q29uZmlndXJhdGlvbigpYCkuXG4gKiBPdGhlcndpc2UsIHRoZSBlbmdpbmUgd2lsbCB0cnkgdG8gb3B0aW1pemUgdGhlIHF1ZXJ5IGJ5IHJlLXVzaW5nIGEgcHJldmlvdXNseVxuICogcGVyc2lzdGVkIHF1ZXJ5IHJlc3VsdC4gSWYgdGhhdCBpcyBub3QgcG9zc2libGUsIHRoZSBxdWVyeSB3aWxsIGJlIGV4ZWN1dGVkXG4gKiB2aWEgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAqXG4gKiBJbmRleC1iYXNlZCBleGVjdXRpb24gaXMgdGhlIGRlZmF1bHQgd2hlbiBhdmFpbGFibGUuIFRoZSBxdWVyeSBlbmdpbmVcbiAqIHN1cHBvcnRzIHBhcnRpYWwgaW5kZXhlZCBleGVjdXRpb24gYW5kIG1lcmdlcyB0aGUgcmVzdWx0IGZyb20gdGhlIGluZGV4XG4gKiBsb29rdXAgd2l0aCBkb2N1bWVudHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBpbmRleGVkLiBUaGUgaW5kZXggZXZhbHVhdGlvblxuICogbWF0Y2hlcyB0aGUgYmFja2VuZCdzIGZvcm1hdCBhbmQgYXMgc3VjaCwgdGhlIFNESyBjYW4gdXNlIGluZGV4aW5nIGZvciBhbGxcbiAqIHF1ZXJpZXMgdGhhdCB0aGUgYmFja2VuZCBzdXBwb3J0cy5cbiAqXG4gKiBJZiBubyBpbmRleCBleGlzdHMsIHRoZSBxdWVyeSBlbmdpbmUgdHJpZXMgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldFxuICogZG9jdW1lbnQgbWFwcGluZyBpbiB0aGUgVGFyZ2V0Q2FjaGUuIFRoZXNlIG1hcHBpbmdzIGV4aXN0cyBmb3IgYWxsIHF1ZXJpZXNcbiAqIHRoYXQgaGF2ZSBiZWVuIHN5bmNlZCB3aXRoIHRoZSBiYWNrZW5kIGF0IGxlYXN0IG9uY2UgYW5kIGFsbG93IHRoZSBxdWVyeVxuICogZW5naW5lIHRvIG9ubHkgcmVhZCBkb2N1bWVudHMgdGhhdCBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueVxuICogZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxuICpcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZW4gdGhpcyBvcHRpbWl6YXRpb24gaXMgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCBxdWVyeVxuICogcHJvY2Vzc2luZyBmYWxscyBiYWNrIHRvIGZ1bGwgc2NhbnMuIFRoZXNlIGNhc2VzIGFyZTpcbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBsaW1ibyBkb2N1bWVudHMuXG4gKi8gY2xhc3MgZXUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkxpID0gITE7XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovICAgIGluaXRpYWxpemUodCwgZSkge1xuICAgICAgICB0aGlzLnFpID0gdCwgdGhpcy5pbmRleE1hbmFnZXIgPSBlLCB0aGlzLkxpID0gITA7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlVpKHQsIGUpLm5leHQoKGkgPT4gaSB8fCB0aGlzLktpKHQsIGUsIHMsIG4pKSkubmV4dCgobiA9PiBuIHx8IHRoaXMuR2kodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW4gaW5kZXhlZCBxdWVyeSB0aGF0IGV2YWx1YXRlcyB0aGUgcXVlcnkgYmFzZWQgb24gYSBjb2xsZWN0aW9uJ3NcbiAgICAgKiBwZXJzaXN0ZWQgaW5kZXggdmFsdWVzLiBSZXR1cm5zIGBudWxsYCBpZiBhbiBpbmRleCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAqLyAgICBVaSh0LCBlKSB7XG4gICAgICAgIGlmIChRbihlKSkgXG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiB2dC5yZXNvbHZlKG51bGwpO1xuICAgICAgICBsZXQgbiA9IEpuKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0SW5kZXhUeXBlKHQsIG4pLm5leHQoKHMgPT4gMCAvKiBJbmRleFR5cGUuTk9ORSAqLyA9PT0gcyA/IG51bGwgOiAobnVsbCAhPT0gZS5saW1pdCAmJiAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovID09PSBzICYmIChcbiAgICAgICAgLy8gV2UgY2Fubm90IGFwcGx5IGEgbGltaXQgZm9yIHRhcmdldHMgdGhhdCBhcmUgc2VydmVkIHVzaW5nIGEgcGFydGlhbFxuICAgICAgICAvLyBpbmRleC4gSWYgYSBwYXJ0aWFsIGluZGV4IHdpbGwgYmUgdXNlZCB0byBzZXJ2ZSB0aGUgdGFyZ2V0LCB0aGVcbiAgICAgICAgLy8gcXVlcnkgbWF5IHJldHVybiBhIHN1cGVyc2V0IG9mIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSB0YXJnZXRcbiAgICAgICAgLy8gKGUuZy4gaWYgdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhbGwgdGhlIHRhcmdldCdzIGZpbHRlcnMpLCBvclxuICAgICAgICAvLyBtYXkgcmV0dXJuIHRoZSBjb3JyZWN0IHNldCBvZiBkb2N1bWVudHMgaW4gdGhlIHdyb25nIG9yZGVyIChlLmcuIGlmXG4gICAgICAgIC8vIHRoZSBpbmRleCBkb2Vzbid0IGluY2x1ZGUgYSBzZWdtZW50IGZvciBvbmUgb2YgdGhlIG9yZGVyQnlzKS5cbiAgICAgICAgLy8gVGhlcmVmb3JlLCBhIGxpbWl0IHNob3VsZCBub3QgYmUgYXBwbGllZCBpbiBzdWNoIGNhc2VzLlxuICAgICAgICBlID0gWG4oZSwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSwgbiA9IEpuKGUpKSwgdGhpcy5pbmRleE1hbmFnZXIuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQodCwgbikubmV4dCgocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZ3MoLi4ucyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xaS5nZXREb2N1bWVudHModCwgaSkubmV4dCgocyA9PiB0aGlzLmluZGV4TWFuYWdlci5nZXRNaW5PZmZzZXQodCwgbikubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuUWkoZSwgcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuamkoZSwgciwgaSwgbi5yZWFkVGltZSkgPyB0aGlzLlVpKHQsIFhuKGUsIG51bGwsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLykpIDogdGhpcy56aSh0LCByLCBlLCBuKTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYmFzZWQgb24gdGhlIHRhcmdldCdzIHBlcnNpc3RlZCBxdWVyeSBtYXBwaW5nLiBSZXR1cm5zXG4gICAgICogYG51bGxgIGlmIHRoZSBtYXBwaW5nIGlzIG5vdCBhdmFpbGFibGUgb3IgY2Fubm90IGJlIHVzZWQuXG4gICAgICovICAgIEtpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIFFuKGUpIHx8IHMuaXNFcXVhbChydC5taW4oKSkgPyB0aGlzLkdpKHQsIGUpIDogdGhpcy5xaS5nZXREb2N1bWVudHModCwgbikubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5RaShlLCBpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmppKGUsIHIsIG4sIHMpID8gdGhpcy5HaSh0LCBlKSA6IChDKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgTihcIlF1ZXJ5RW5naW5lXCIsIFwiUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXNcIiwgcy50b1N0cmluZygpLCBlcyhlKSksIFxuICAgICAgICAgICAgdGhpcy56aSh0LCByLCBlLCB5dChzLCAtMSkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAgICAgICAgfVxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovICAgIFFpKHQsIGUpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICAgIGxldCBuID0gbmV3IEVlKGlzKHQpKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIG5zKHQsIHMpICYmIChuID0gbi5hZGQocykpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHdoZW4gaXRcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxuICAgICAqIEBwYXJhbSByZW1vdGVLZXlzIC0gVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxuICAgICAqIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiB0aGUgc25hcHNob3Qgd2hlbiB0aGVcbiAgICAgKiBxdWVyeSB3YXMgbGFzdCBzeW5jaHJvbml6ZWQuXG4gICAgICovICAgIGppKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHQubGltaXQpIFxuICAgICAgICAvLyBRdWVyaWVzIHdpdGhvdXQgbGltaXRzIGRvIG5vdCBuZWVkIHRvIGJlIHJlZmlsbGVkLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIGlmIChuLnNpemUgIT09IGUuc2l6ZSkgXG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0LmxpbWl0VHlwZSA/IGUubGFzdCgpIDogZS5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhzKSA+IDApO1xuICAgIH1cbiAgICBHaSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBDKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgTihcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgZXMoZSkpLCBcbiAgICAgICAgdGhpcy5xaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIEl0Lm1pbigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdGhlIHJlc3VsdHMgZnJvbSBhbiBpbmRleGVkIGV4ZWN1dGlvbiB3aXRoIHRoZSByZW1haW5pbmcgZG9jdW1lbnRzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBpbmRleGVkLlxuICAgICAqLyAgICB6aSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIGFsbCByZXN1bHRzIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIHVwZGF0ZWQgc2luY2UgdGhlIG9mZnNldC5cbiAgICAgICAgcmV0dXJuIHRoaXMucWkuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBuLCBzKS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gTWVyZ2Ugd2l0aCBleGlzdGluZyByZXN1bHRzXG4gICAgICAgIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0ID0gdC5pbnNlcnQoZS5rZXksIGUpO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRzIGBMb2NhbFN0b3JlYCBpbnRlcmZhY2UuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi9cbmNsYXNzIG51IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgdGhpcy5XaSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSGkgPSBuZXcgcGUoZXQpLCBcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cbiAgICAgICAgdGhpcy5KaSA9IG5ldyBvcygodCA9PiBPbih0KSksICRuKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHBlciBjb2xsZWN0aW9uIGdyb3VwIGluZGV4IG9mIHRoZSBsYXN0IHJlYWQgdGltZSBwcm9jZXNzZWQgYnlcbiAgICAgICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuWWkgPSBuZXcgTWFwLCB0aGlzLlhpID0gdC5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIHRoaXMuRnMgPSB0LmdldFRhcmdldENhY2hlKCksIFxuICAgICAgICB0aGlzLkxzID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLlppKG4pO1xuICAgIH1cbiAgICBaaSh0KSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBBZGQgc3BlYyB0ZXN0cyB0aGF0IHRlc3QgdGhlc2UgY29tcG9uZW50cyBjaGFuZ2UgYWZ0ZXIgYVxuICAgICAgICAvLyB1c2VyIGNoYW5nZVxuICAgICAgICB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXREb2N1bWVudE92ZXJsYXlDYWNoZSh0KSwgdGhpcy5pbmRleE1hbmFnZXIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcih0KSwgXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZSh0LCB0aGlzLmluZGV4TWFuYWdlciksIHRoaXMubG9jYWxEb2N1bWVudHMgPSBuZXcga28odGhpcy5YaSwgdGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLCB0aGlzLmluZGV4TWFuYWdlciksIFxuICAgICAgICB0aGlzLlhpLnNldEluZGV4TWFuYWdlcih0aGlzLmluZGV4TWFuYWdlciksIHRoaXMuV2kuaW5pdGlhbGl6ZSh0aGlzLmxvY2FsRG9jdW1lbnRzLCB0aGlzLmluZGV4TWFuYWdlcik7XG4gICAgfVxuICAgIGNvbGxlY3RHYXJiYWdlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb2xsZWN0IGdhcmJhZ2VcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB0LmNvbGxlY3QoZSwgdGhpcy5IaSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN1KFxuLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xudCwgZSwgbiwgcykge1xuICAgIHJldHVybiBuZXcgbnUodCwgZSwgbiwgcyk7XG59XG5cbi8qKlxuICogVGVsbHMgdGhlIExvY2FsU3RvcmUgdGhhdCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlciBoYXMgY2hhbmdlZC5cbiAqXG4gKiBJbiByZXNwb25zZSB0aGUgbG9jYWwgc3RvcmUgc3dpdGNoZXMgdGhlIG11dGF0aW9uIHF1ZXVlIHRvIHRoZSBuZXcgdXNlciBhbmRcbiAqIHJldHVybnMgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IEFuZHJvaWQgYW5kIGlPUyBvbmx5IHJldHVybiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IHRoZVxuLy8gY2hhbmdlLlxuYXN5bmMgZnVuY3Rpb24gaXUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpLm5leHQoKGkgPT4gKHMgPSBpLCBuLlppKGUpLCBuLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IFtdLCByID0gW107XG4gICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXG4gICAgICAgICAgICBsZXQgbyA9IGdzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGkucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgci5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzZXQgb2YgYWxsIChwb3RlbnRpYWxseSkgY2hhbmdlZCBkb2N1bWVudHMgYW5kIHRoZSBsaXN0XG4gICAgICAgICAgICAvLyBvZiBtdXRhdGlvbiBiYXRjaCBJRHMgdGhhdCB3ZXJlIGFmZmVjdGVkIGJ5IGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBvKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgdHI6IHQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBpLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG59XG5cbi8qIEFjY2VwdHMgbG9jYWxseSBnZW5lcmF0ZWQgTXV0YXRpb25zIGFuZCBjb21taXQgdGhlbSB0byBzdG9yYWdlLiAqL1xuLyoqXG4gKiBBY2tub3dsZWRnZXMgdGhlIGdpdmVuIGJhdGNoLlxuICpcbiAqIE9uIHRoZSBoYXBweSBwYXRoIHdoZW4gYSBiYXRjaCBpcyBhY2tub3dsZWRnZWQsIHRoZSBsb2NhbCBzdG9yZSB3aWxsXG4gKlxuICogICsgcmVtb3ZlIHRoZSBiYXRjaCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZTtcbiAqICArIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGU7XG4gKiAgKyByZWNhbGN1bGF0ZSB0aGUgbGF0ZW5jeSBjb21wZW5zYXRlZCB2aWV3IGltcGxpZWQgYnkgdGhvc2UgY2hhbmdlcyAodGhlcmVcbiAqICAgIG1heSBiZSBtdXRhdGlvbnMgaW4gdGhlIHF1ZXVlIHRoYXQgYWZmZWN0IHRoZSBkb2N1bWVudHMgYnV0IGhhdmVuJ3QgYmVlblxuICogICAgYWNrbm93bGVkZ2VkIHlldCk7IGFuZFxuICogICsgZ2l2ZSB0aGUgY2hhbmdlZCBkb2N1bWVudHMgYmFjayB0aGUgc3luYyBlbmdpbmVcbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIChtb2RpZmllZCkgZG9jdW1lbnRzLlxuICovXG5mdW5jdGlvbiBydSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBY2tub3dsZWRnZSBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgcyA9IGUuYmF0Y2gua2V5cygpLCBpID0gbi5YaS5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5iYXRjaCwgciA9IGkua2V5cygpO1xuICAgICAgICAgICAgbGV0IG8gPSB2dC5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBvID0gby5uZXh0KCgoKSA9PiBzLmdldEVudHJ5KGUsIHQpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmRvY1ZlcnNpb25zLmdldCh0KTtcbiAgICAgICAgICAgICAgICAgICAgRihudWxsICE9PSByKSwgZS52ZXJzaW9uLmNvbXBhcmVUbyhyKSA8IDAgJiYgKGkuYXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIG4pLCBlLmlzVmFsaWREb2N1bWVudCgpICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIGUuc2V0UmVhZFRpbWUobi5jb21taXRWZXJzaW9uKSwgcy5hZGRFbnRyeShlKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiB0Lm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaChlLCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4sIHQsIGUsIGkpLm5leHQoKCgpID0+IGkuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBzLCBlLmJhdGNoLmJhdGNoSWQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyh0LCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IGdzKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubXV0YXRpb25SZXN1bHRzLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICAgICAgdC5tdXRhdGlvblJlc3VsdHNbbl0udHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPiAwICYmIChlID0gZS5hZGQodC5iYXRjaC5tdXRhdGlvbnNbbl0ua2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqLyAoZSkpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModCwgcykpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cbiAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXG4gKi9cbmZ1bmN0aW9uIG91KHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBsYXN0IHJlbW90ZSBzbmFwc2hvdCB2ZXJzaW9uXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5Gcy5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpKSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKSBkb2N1bWVudHMuIFdlIGFzc3VtZSB0aGF0IHRoZSByZW1vdGVcbiAqIGV2ZW50IHJlZmxlY3RzIGFueSB3cml0ZSBiYXRjaGVzIHRoYXQgaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBvciByZWplY3RlZFxuICogKGkuZS4gd2UgZG8gbm90IHJlLWFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byB1cGRhdGVzIGZyb20gdGhpcyBldmVudCkuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqLyBmdW5jdGlvbiB1dSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBlLnNuYXBzaG90VmVyc2lvbjtcbiAgICBsZXQgaSA9IG4uSGk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSByZW1vdGUgZXZlbnRcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuLlhpLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVzZXQgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIGluIGNhc2UgdGhpcyB0cmFuc2FjdGlvbiBnZXRzIHJlLXJ1bi5cbiAgICAgICAgICAgICAgICBpID0gbi5IaTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHIsIHUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBpLmdldCh1KTtcbiAgICAgICAgICAgIGlmICghYykgcmV0dXJuO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXG4gICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuLkZzLnJlbW92ZU1hdGNoaW5nS2V5cyh0LCByLnJlbW92ZWREb2N1bWVudHMsIHUpLm5leHQoKCgpID0+IG4uRnMuYWRkTWF0Y2hpbmdLZXlzKHQsIHIuYWRkZWREb2N1bWVudHMsIHUpKSkpO1xuICAgICAgICAgICAgbGV0IGEgPSBjLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICBudWxsICE9PSBlLnRhcmdldE1pc21hdGNoZXMuZ2V0KHUpID8gYSA9IGEud2l0aFJlc3VtZVRva2VuKFZlLkVNUFRZX0JZVEVfU1RSSU5HLCBydC5taW4oKSkud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocnQubWluKCkpIDogci5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmIChhID0gYS53aXRoUmVzdW1lVG9rZW4oci5yZXN1bWVUb2tlbiwgcykpLCBcbiAgICAgICAgICAgIGkgPSBpLmluc2VydCh1LCBhKSwgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcbiAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xuICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXG4gKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcbiAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXG4gKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIHRvbyBmcmVxdWVudC5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBwZXJzaXN0IHRhcmdldCBkYXRhIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhIHJlc3VtZSB0b2tlbi5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBhbGxvdyByZXN1bWUgdG9rZW4gY2hhbmdlcyB0byBiZSBidWZmZXJlZCBpbmRlZmluaXRlbHkuIFRoaXNcbiAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9vcCBvdmVyIGFsbCBhY3RpdmUgcXVlcmllcyBvbiBzaHV0ZG93bi4gRXNwZWNpYWxseSBpbiB0aGUgYnJvd3NlclxuICAgICAgICAgICAgICAgIC8vIHdlIG1heSBub3QgZ2V0IHRpbWUgdG8gZG8gYW55dGhpbmcgaW50ZXJlc3Rpbmcgd2hpbGUgdGhlIGN1cnJlbnQgdGFiIGlzXG4gICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgLSB0LnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpID49IDNlOCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAvLyB0b2tlbiBpdCdzIG5vdCB3b3J0aCBwZXJzaXN0aW5nLiBOb3RlIHRoYXQgdGhlIFJlbW90ZVN0b3JlIGtlZXBzIGFuXG4gICAgICAgICAgICAgICAgLy8gaW4tbWVtb3J5IHZpZXcgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFyZ2V0cyB3aGljaCBpbmNsdWRlcyB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgLy8gdXAtdG8tZGF0ZSByZXN1bWUgdG9rZW4gcmVnYXJkbGVzcyBvZiB3aGF0IHdlIGRvIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIE5vdGlmaWVzIGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cbiAqLyAoYywgYSwgcikgJiYgby5wdXNoKG4uRnMudXBkYXRlVGFyZ2V0RGF0YSh0LCBhKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IHUgPSBjcygpLCBjID0gZ3MoKTtcbiAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcbiAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcbiAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxuICAgICAgICAvLyBsaW1iby5cbiAgICAgICAgaWYgKGUuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goKHMgPT4ge1xuICAgICAgICAgICAgZS5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhzKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHQsIHMpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbFxuICAgICAgICAvLyB0aGUgcmVtb3RlIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaChjdSh0LCByLCBlLmRvY3VtZW50VXBkYXRlcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB1ID0gdC5lciwgYyA9IHQubnI7XG4gICAgICAgIH0pKSksICFzLmlzRXF1YWwocnQubWluKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5Gcy5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpLm5leHQoKGUgPT4gbi5Gcy5zZXRUYXJnZXRzTWV0YWRhdGEodCwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHMpKSk7XG4gICAgICAgICAgICBvLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZ0LndhaXRGb3IobykubmV4dCgoKCkgPT4gci5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModCwgdSwgYykpKS5uZXh0KCgoKSA9PiB1KSk7XG4gICAgfSkpLnRoZW4oKHQgPT4gKG4uSGkgPSBpLCB0KSkpO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyBkb2N1bWVudCBjaGFuZ2UgYnVmZmVyIHdpdGggZG9jdW1lbnRzIGZyb20gYmFja2VuZCBvciBhIGJ1bmRsZS5cbiAqIFJldHVybnMgdGhlIGRvY3VtZW50IGNoYW5nZXMgcmVzdWx0aW5nIGZyb20gYXBwbHlpbmcgdGhvc2UgZG9jdW1lbnRzLCBhbmRcbiAqIGFsc28gYSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZSBhcmUgY2hhbmdlZCBhcyBhIHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICovIGZ1bmN0aW9uIGN1KHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IGdzKCksIGkgPSBncygpO1xuICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4gcyA9IHMuYWRkKHQpKSksIGUuZ2V0RW50cmllcyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgbGV0IHMgPSBjcygpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHQuZ2V0KG4pO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VlIGlmIHRoZXJlIGlzIGEgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZSBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHIuaXNGb3VuZERvY3VtZW50KCkgIT09IG8uaXNGb3VuZERvY3VtZW50KCkgJiYgKGkgPSBpLmFkZChuKSksIFxuICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXG4gICAgICAgICAgICAvLyBjYWNoZS5cbiAgICAgICAgICAgIHIuaXNOb0RvY3VtZW50KCkgJiYgci52ZXJzaW9uLmlzRXF1YWwocnQubWluKCkpID8gKFxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkgYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXG4gICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XG4gICAgICAgICAgICAvLyBhY2Nlc3MuXG4gICAgICAgICAgICBlLnJlbW92ZUVudHJ5KG4sIHIucmVhZFRpbWUpLCBzID0gcy5pbnNlcnQobiwgcikpIDogIW8uaXNWYWxpZERvY3VtZW50KCkgfHwgci52ZXJzaW9uLmNvbXBhcmVUbyhvLnZlcnNpb24pID4gMCB8fCAwID09PSByLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgJiYgby5oYXNQZW5kaW5nV3JpdGVzID8gKGUuYWRkRW50cnkociksIFxuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KG4sIHIpKSA6IE4oXCJMb2NhbFN0b3JlXCIsIFwiSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciBcIiwgbiwgXCIuIEN1cnJlbnQgdmVyc2lvbjpcIiwgby52ZXJzaW9uLCBcIiBXYXRjaCB2ZXJzaW9uOlwiLCByLnZlcnNpb24pO1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGVyOiBzLFxuICAgICAgICAgICAgbnI6IGlcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbXV0YXRpb24gYmF0Y2ggYWZ0ZXIgdGhlIHBhc3NlZCBpbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZVxuICogb3IgbnVsbCBpZiBlbXB0eS5cbiAqIEBwYXJhbSBhZnRlckJhdGNoSWQgLSBJZiBwcm92aWRlZCwgdGhlIGJhdGNoIHRvIHNlYXJjaCBhZnRlci5cbiAqIEByZXR1cm5zIFRoZSBuZXh0IG11dGF0aW9uIG9yIG51bGwgaWYgdGhlcmUgd2Fzbid0IG9uZS5cbiAqL1xuZnVuY3Rpb24gYXUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5leHQgbXV0YXRpb24gYmF0Y2hcIiwgXCJyZWFkb25seVwiLCAodCA9PiAodm9pZCAwID09PSBlICYmIChlID0gLTEpLCBcbiAgICBuLm11dGF0aW9uUXVldWUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBodSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4uRnMuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIHZ0LnJlc29sdmUocykpIDogbi5Gcy5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgY3IoZSwgaSwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLkZzLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5IaS5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4uSGkgPSBuLkhpLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4uSmkuc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBsdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBzLkhpLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIUR0KHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgTihcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5IaSA9IHMuSGkucmVtb3ZlKGUpLCBzLkppLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIGZ1KHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICBsZXQgaSA9IHJ0Lm1pbigpLCByID0gZ3MoKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBMKHQpLCBpID0gcy5KaS5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyB2dC5yZXNvbHZlKHMuSGkuZ2V0KGkpKSA6IHMuRnMuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIEpuKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLkZzLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5XaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4gPyBpIDogcnQubWluKCksIG4gPyByIDogZ3MoKSkpKS5uZXh0KCh0ID0+ICh3dShzLCBzcyhlKSwgdCksIFxuICAgIHtcbiAgICAgICAgZG9jdW1lbnRzOiB0LFxuICAgICAgICBzcjogclxuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIGR1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IEwobi5GcyksIGkgPSBuLkhpLmdldChlKTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5oZSh0LCBlKS5uZXh0KCh0ID0+IHQgPyB0LnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBuLllpLmdldChlKSB8fCBydC5taW4oKTtcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbWF4aW11bSByZWFkIHRpbWUgZm9yIHRoZSBjb2xsZWN0aW9uLiBUaGlzIHNob3VsZCBhbHdheXNcbiAgICAvLyBleGlzdCwgYnV0IHRvIHJlZHVjZSB0aGUgY2hhbmNlIGZvciByZWdyZXNzaW9ucyB3ZSBkZWZhdWx0IHRvXG4gICAgLy8gU25hcHNob3RWZXJzaW9uLk1pbigpXG4gICAgLy8gVE9ETyhpbmRleGluZyk6IENvbnNpZGVyIHJlbW92aW5nIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXcgZG9jdW1lbnQgY2hhbmdlc1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uWGkuZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCB5dChzLCAtMSksIFxuICAgIC8qIGxpbWl0PSAqLyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpKS50aGVuKCh0ID0+ICh3dShuLCBlLCB0KSwgdCkpKTtcbn1cblxuLyoqIFNldHMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAncyBtYXhpbXVtIHJlYWQgdGltZSBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudHMuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gd3UodCwgZSwgbikge1xuICAgIGxldCBzID0gdC5ZaS5nZXQoZSkgfHwgcnQubWluKCk7XG4gICAgbi5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICBlLnJlYWRUaW1lLmNvbXBhcmVUbyhzKSA+IDAgJiYgKHMgPSBlLnJlYWRUaW1lKTtcbiAgICB9KSksIHQuWWkuc2V0KGUsIHMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IHVzaW5nIHRoZSBnaXZlbiBidW5kbGUgbmFtZSwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvXG4gKiBob2xkIHRoZSBrZXlzIG9mIGFsbCBkb2N1bWVudHMgZnJvbSB0aGUgYnVuZGxlIGluIHF1ZXJ5LWRvY3VtZW50IG1hcHBpbmdzLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGxvYWRlZCBkb2N1bWVudHMgZG8gbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZFxuICogcmlnaHQgYXdheS5cbiAqL1xuLyoqXG4gKiBBcHBsaWVzIHRoZSBkb2N1bWVudHMgZnJvbSBhIGJ1bmRsZSB0byB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKVxuICogZG9jdW1lbnRzLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG11KHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gTCh0KTtcbiAgICBsZXQgciA9IGdzKCksIG8gPSBjcygpO1xuICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmlyKHQubWV0YWRhdGEubmFtZSk7XG4gICAgICAgIHQuZG9jdW1lbnQgJiYgKHIgPSByLmFkZChuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnJyKHQpO1xuICAgICAgICBzLnNldFJlYWRUaW1lKGUudXIodC5tZXRhZGF0YS5yZWFkVGltZSkpLCBvID0gby5pbnNlcnQobiwgcyk7XG4gICAgfVxuICAgIGNvbnN0IHUgPSBpLlhpLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIGMgPSBhd2FpdCBodShpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBKbihHbih1dC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gY3UodCwgdSwgbykubmV4dCgoZSA9PiAodS5hcHBseSh0KSwgXG4gICAgZSkpKS5uZXh0KChlID0+IGkuRnMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgYy50YXJnZXRJZCkubmV4dCgoKCkgPT4gaS5Gcy5hZGRNYXRjaGluZ0tleXModCwgciwgYy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLmxvY2FsRG9jdW1lbnRzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKHQsIGUuZXIsIGUubnIpKSkubmV4dCgoKCkgPT4gZS5lcikpKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhlIGdpdmVuIGJ1bmRsZSBoYXMgYWxyZWFkeVxuICogYmVlbiBsb2FkZWQgYW5kIHRoZSBjcmVhdGUgdGltZSBpcyBuZXdlciB0aGFuIHRoZSBjdXJyZW50IGxvYWRpbmcgYnVuZGxlLlxuICovXG4vKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgTmFtZWRRdWVyeWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGd1KHQsIGUsIG4gPSBncygpKSB7XG4gICAgLy8gQWxsb2NhdGUgYSB0YXJnZXQgZm9yIHRoZSBuYW1lZCBxdWVyeSBzdWNoIHRoYXQgaXQgY2FuIGJlIHJlc3VtZWRcbiAgICAvLyBmcm9tIGFzc29jaWF0ZWQgcmVhZCB0aW1lIGlmIHVzZXJzIHVzZSBpdCB0byBsaXN0ZW4uXG4gICAgLy8gTk9URTogdGhpcyBhbHNvIG1lYW5zIGlmIG5vIGNvcnJlc3BvbmRpbmcgdGFyZ2V0IGV4aXN0cywgdGhlIG5ldyB0YXJnZXRcbiAgICAvLyB3aWxsIHJlbWFpbiBhY3RpdmUgYW5kIHdpbGwgbm90IGdldCBjb2xsZWN0ZWQsIHVubGVzcyB1c2VycyBoYXBwZW4gdG9cbiAgICAvLyB1bmxpc3RlbiB0aGUgcXVlcnkgc29tZWhvdy5cbiAgICBjb25zdCBzID0gYXdhaXQgaHUodCwgSm4oeXIoZS5idW5kbGVkUXVlcnkpKSksIGkgPSBMKHQpO1xuICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBuYW1lZCBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBOaShlLnJlYWRUaW1lKTtcbiAgICAgICAgLy8gU2ltcGx5IHNhdmUgdGhlIHF1ZXJ5IGl0c2VsZiBpZiBpdCBpcyBvbGRlciB0aGFuIHdoYXQgdGhlIFNESyBhbHJlYWR5XG4gICAgICAgIC8vIGhhcy5cbiAgICAgICAgICAgICAgICBpZiAocy5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHIpID49IDApIHJldHVybiBpLkxzLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgYmVjYXVzZSB0aGUgcXVlcnkgZnJvbSB0aGUgYnVuZGxlIGlzIG5ld2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBzLndpdGhSZXN1bWVUb2tlbihWZS5FTVBUWV9CWVRFX1NUUklORywgcik7XG4gICAgICAgIHJldHVybiBpLkhpID0gaS5IaS5pbnNlcnQoby50YXJnZXRJZCwgbyksIGkuRnMudXBkYXRlVGFyZ2V0RGF0YSh0LCBvKS5uZXh0KCgoKSA9PiBpLkZzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Gcy5hZGRNYXRjaGluZ0tleXModCwgbiwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLkxzLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfSkpO1xufVxuXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIHl1KHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBwdSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke3R9XyR7bn1gO1xuICAgIHJldHVybiBlLmlzQXV0aGVudGljYXRlZCgpICYmIChzICs9IGBfJHtlLnVpZH1gKSwgcztcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIEl1KHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgVHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgY3IodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBzICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHMuc3RhdGUpICYmICh2b2lkIDAgPT09IHMuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygcy5lcnJvcik7XG4gICAgICAgIHJldHVybiByICYmIHMuZXJyb3IgJiYgKHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5jb2RlLCBcbiAgICAgICAgciAmJiAoaSA9IG5ldyBVKHMuZXJyb3IuY29kZSwgcy5lcnJvci5tZXNzYWdlKSkpLCByID8gbmV3IFR1KHQsIGUsIHMuc3RhdGUsIGkpIDogKGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBhcigpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgRXUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuc3RhdGUgPSBlLCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIGNyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAocyA9IG5ldyBVKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IEV1KHQsIG4uc3RhdGUsIHMpIDogKGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgYXIoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgQXUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBjcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IHBzKCk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyBzICYmIHQgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrdCkgcyA9IEx0KG4uYWN0aXZlVGFyZ2V0SWRzW3RdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1t0XSk7XG4gICAgICAgIHJldHVybiBzID8gbmV3IEF1KHQsIGkpIDogKGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgUnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIGNyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGllbnRJZCA/IG5ldyBSdShlLmNsaWVudElkLCBlLm9ubGluZVN0YXRlKSA6IChrKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyB2dSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gcHMoKTtcbiAgICB9XG4gICAgaHIodCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0KTtcbiAgICB9XG4gICAgbHIodCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBhcigpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBQdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQsIHRoaXMuc2kgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5kciA9IHMsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5fciA9IHRoaXMud3IuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMubXIgPSBuZXcgcGUoZXQpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3IgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCByID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMueXIgPSB5dSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmRyKSwgXG4gICAgICAgIHRoaXMucHIgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMubXIgPSB0aGlzLm1yLmluc2VydCh0aGlzLmRyLCBuZXcgdnUpLCB0aGlzLklyID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7cn1fKFteX10qKSRgKSwgXG4gICAgICAgIHRoaXMuVHIgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3J9XyhcXFxcZCspKD86XyguKikpPyRgKSwgdGhpcy5FciA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3J9XyhcXFxcZCspJGApLCBcbiAgICAgICAgdGhpcy5BciA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF92Ml88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIGVuZGluZyB3aXRoIFwidjJcIiBzdG9yZXMgdGhlIGxpc3Qgb2YgbW9kaWZpZWQgY29sbGVjdGlvbiBncm91cHMuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5SciA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5fcik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIEQodCkge1xuICAgICAgICByZXR1cm4gISghdCB8fCAhdC5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5NaSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHRoaXMuZHIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0SXRlbSh5dSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBBdS5jcihlLCB0KTtcbiAgICAgICAgICAgICAgICBuICYmICh0aGlzLm1yID0gdGhpcy5tci5pbnNlcnQobi5jbGllbnRJZCwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudnIoKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3Rpbmcgb25saW5lIHN0YXRlIGFuZCBjYWxsIHRoZSBjYWxsYmFjayBoYW5kbGVyXG4gICAgICAgIC8vIGlmIGFwcGxpY2FibGUuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLkFyKTtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlByKGUpO1xuICAgICAgICAgICAgdCAmJiB0aGlzLmJyKHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmdyKSB0aGlzLndyKHQpO1xuICAgICAgICB0aGlzLmdyID0gW10sIFxuICAgICAgICAvLyBSZWdpc3RlciBhIHdpbmRvdyB1bmxvYWQgaG9vayB0byByZW1vdmUgdGhlIGNsaWVudCBtZXRhZGF0YSBlbnRyeSBmcm9tXG4gICAgICAgIC8vIFdlYlN0b3JhZ2UgZXZlbiBpZiBgc2h1dGRvd24oKWAgd2FzIG5vdCBjYWxsZWQuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCAoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSksIHRoaXMuc3RhcnRlZCA9ICEwO1xuICAgIH1cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMucHIsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Wcih0aGlzLm1yKTtcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLm1yLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmFjdGl2ZVRhcmdldElkcy5oYXModCkgJiYgKGUgPSAhMCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5Tcih0LCBcInBlbmRpbmdcIik7XG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLlNyKHQsIGUsIG4pLCBcbiAgICAgICAgLy8gT25jZSBhIGZpbmFsIG11dGF0aW9uIHJlc3VsdCBpcyBvYnNlcnZlZCBieSBvdGhlciBjbGllbnRzLCB0aGV5IG5vIGxvbmdlclxuICAgICAgICAvLyBhY2Nlc3MgdGhlIG11dGF0aW9uJ3MgbWV0YWRhdGEgZW50cnkuIFNpbmNlIFdlYlN0b3JhZ2UgcmVwbGF5cyBldmVudHNcbiAgICAgICAgLy8gaW4gb3JkZXIsIGl0IGlzIHNhZmUgdG8gZGVsZXRlIHRoZSBlbnRyeSByaWdodCBhZnRlciB1cGRhdGluZyBpdC5cbiAgICAgICAgdGhpcy5Ecih0KTtcbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIGxldCBlID0gXCJub3QtY3VycmVudFwiO1xuICAgICAgICAvLyBMb29rdXAgYW4gZXhpc3RpbmcgcXVlcnkgc3RhdGUgaWYgdGhlIHRhcmdldCBJRCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkXG4gICAgICAgIC8vIGJ5IGFub3RoZXIgdGFiXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVRdWVyeVRhcmdldCh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKEl1KHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICAgICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IEV1LmNyKHQsIG4pO1xuICAgICAgICAgICAgICAgIHMgJiYgKGUgPSBzLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5Dci5ocih0KSwgdGhpcy52cigpLCBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5Dci5scih0KSwgdGhpcy52cigpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Dci5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUodCkge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oSXUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5Ocih0LCBlLCBuKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkRyKHQpO1xuICAgICAgICB9KSksIHRoaXMuY3VycmVudFVzZXIgPSB0LCBuLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24odCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICB0aGlzLmtyKHQpO1xuICAgIH1cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQodCkge1xuICAgICAgICB0aGlzLk1yKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLl9yKSwgdGhpcy5yZW1vdmVJdGVtKHRoaXMueXIpLCBcbiAgICAgICAgdGhpcy5zdGFydGVkID0gITEpO1xuICAgIH1cbiAgICBnZXRJdGVtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHQpO1xuICAgICAgICByZXR1cm4gTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVBRFwiLCB0LCBlKSwgZTtcbiAgICB9XG4gICAgc2V0SXRlbSh0LCBlKSB7XG4gICAgICAgIE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCB0LCBlKSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0odCkge1xuICAgICAgICBOKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRU1PVkVcIiwgdCksIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHQpO1xuICAgIH1cbiAgICB3cih0KSB7XG4gICAgICAgIC8vIE5vdGU6IFRoZSBmdW5jdGlvbiBpcyB0eXBlZCB0byB0YWtlIEV2ZW50IHRvIGJlIGludGVyZmFjZS1jb21wYXRpYmxlIHdpdGhcbiAgICAgICAgLy8gYFdpbmRvdy5hZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgIGlmIChlLnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGlmIChOKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJFVkVOVFwiLCBlLmtleSwgZS5uZXdWYWx1ZSksIGUua2V5ID09PSB0aGlzLnlyKSByZXR1cm4gdm9pZCBrKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLnNpLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLmtleSkgaWYgKHRoaXMuSXIudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5PcihlLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHIodCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuRnIoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy4kcih0LmNsaWVudElkLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLlRyLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkJyKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuTHIodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5Fci50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5xcihlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLlVyKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLkFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlByKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5icih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5wcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9ICR0LmN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGKFwibnVtYmVyXCIgPT0gdHlwZW9mIG4pLCBlID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2VcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxuICovIChlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgIT09ICR0LmN0ICYmIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLlJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5LcihlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHQubWFwKCh0ID0+IHRoaXMuc3luY0VuZ2luZS5Hcih0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmdyLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IENyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tci5nZXQodGhpcy5kcik7XG4gICAgfVxuICAgIHZyKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy55ciwgdGhpcy5Dci5hcigpKTtcbiAgICB9XG4gICAgU3IodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IFR1KHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0gcHUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLmFyKCkpO1xuICAgIH1cbiAgICBEcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBwdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICBrcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5kcixcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuQXIsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgTnIodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSXUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgRXUodCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLmFyKCkpO1xuICAgIH1cbiAgICBNcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHQpKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuUnIsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUga2V5IGluIFdlYlN0b3JhZ2UuIFJldHVybnMgbnVsbCBpZiB0aGUga2V5IGRvZXMgbm90XG4gICAgICogbWF0Y2ggdGhlIGV4cGVjdGVkIGtleSBmb3JtYXQuXG4gICAgICovICAgIE9yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuSXIuZXhlYyh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyBlWzFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZSBjb3VsZCBub3RcbiAgICAgKiBiZSBwYXJzZWQuXG4gICAgICovICAgIEZyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuT3IodCk7XG4gICAgICAgIHJldHVybiBBdS5jcihuLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgQnIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Uci5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBUdS5jcihuZXcgVihpKSwgcywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIHFyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuRXIuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIEV1LmNyKHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgUHIodCkge1xuICAgICAgICByZXR1cm4gUnUuY3IodCk7XG4gICAgfVxuICAgIEtyKHQpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gICAgfVxuICAgIGFzeW5jIExyKHQpIHtcbiAgICAgICAgaWYgKHQudXNlci51aWQgPT09IHRoaXMuY3VycmVudFVzZXIudWlkKSByZXR1cm4gdGhpcy5zeW5jRW5naW5lLlFyKHQuYmF0Y2hJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgICAgIE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciAke3QudXNlci51aWR9YCk7XG4gICAgfVxuICAgIFVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5qcih0LnRhcmdldElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICB9XG4gICAgJHIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IHRoaXMubXIuaW5zZXJ0KHQsIGUpIDogdGhpcy5tci5yZW1vdmUodCksIHMgPSB0aGlzLlZyKHRoaXMubXIpLCBpID0gdGhpcy5WcihuKSwgciA9IFtdLCBvID0gW107XG4gICAgICAgIHJldHVybiBpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgcy5oYXModCkgfHwgci5wdXNoKHQpO1xuICAgICAgICB9KSksIHMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLmhhcyh0KSB8fCBvLnB1c2godCk7XG4gICAgICAgIH0pKSwgdGhpcy5zeW5jRW5naW5lLnpyKHIsIG8pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXIgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGJyKHQpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cbiAgICAgICAgdGhpcy5tci5nZXQodC5jbGllbnRJZCkgJiYgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodC5vbmxpbmVTdGF0ZSk7XG4gICAgfVxuICAgIFZyKHQpIHtcbiAgICAgICAgbGV0IGUgPSBwcygpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZSA9IGUudW5pb25XaXRoKG4uYWN0aXZlVGFyZ2V0SWRzKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbn1cblxuY2xhc3MgYnUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLldyID0gbmV3IHZ1LCB0aGlzLkhyID0ge30sIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuV3IuaHIodCksIHRoaXMuSHJbdF0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5Iclt0XSA9IGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLldyLmxyKHQpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Xci5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUodCkge1xuICAgICAgICBkZWxldGUgdGhpcy5Iclt0XTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Xci5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Xci5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuV3IgPSBuZXcgdnUsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKHQpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBWdSB7XG4gICAgSnIodCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cbiAqL1xuY2xhc3MgU3Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLllyID0gKCkgPT4gdGhpcy5YcigpLCB0aGlzLlpyID0gKCkgPT4gdGhpcy5lbygpLCB0aGlzLm5vID0gW10sIHRoaXMuc28oKTtcbiAgICB9XG4gICAgSnIodCkge1xuICAgICAgICB0aGlzLm5vLnB1c2godCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLllyKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuWnIpO1xuICAgIH1cbiAgICBzbygpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5ZciksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLlpyKTtcbiAgICB9XG4gICAgWHIoKSB7XG4gICAgICAgIE4oXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5ubykgdCgwIC8qIE5ldHdvcmtTdGF0dXMuQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgZW8oKSB7XG4gICAgICAgIE4oXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogVU5BVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLm5vKSB0KDEgLyogTmV0d29ya1N0YXR1cy5VTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBEKCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBtb3N0IHJlY2VudCBpbnZvY2F0aW9uIG9mXG4gKiBgZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKClgLCBvciBudWxsIGlmIGl0IGhhcyBuZXZlciBiZWVuIGludm9rZWQuXG4gKi8gbGV0IER1ID0gbnVsbDtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYW4gaW5pdGlhbCB2YWx1ZSBmb3IgYGxhc3RVbmlxdWVEZWJ1Z0lkYC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWQgZnJvbSBhIHJhbmdlIG9mIGludGVnZXJzIHRoYXQgYXJlXG4gKiByZXByZXNlbnRlZCBhcyA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBtZWFucyB0aGF0ICh3aXRoaW4gcmVhc29uKSBhbnlcbiAqIG51bWJlcnMgZ2VuZXJhdGVkIGJ5IGluY3JlbWVudGluZyB0aGUgcmV0dXJuZWQgbnVtYmVyIGJ5IDEgd2lsbCBhbHNvIGJlXG4gKiByZXByZXNlbnRlZCBieSA4IGhleGFkZWNpbWFsIGRpZ2l0cy4gVGhpcyBsZWFkcyB0byBhbGwgXCJJRHNcIiBoYXZpbmcgdGhlIHNhbWVcbiAqIGxlbmd0aCB3aGVuIGNvbnZlcnRlZCB0byBhIGhleGFkZWNpbWFsIHN0cmluZywgbWFraW5nIHJlYWRpbmcgbG9ncyBjb250YWluaW5nXG4gKiB0aGVzZSBJRHMgZWFzaWVyIHRvIGZvbGxvdy4gQW5kIHNpbmNlIHRoZSByZXR1cm4gdmFsdWUgaXMgcmFuZG9tbHkgc2VsZWN0ZWRcbiAqIGl0IHdpbGwgaGVscCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gbG9ncyBmcm9tIGRpZmZlcmVudCBleGVjdXRpb25zLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIHVuaXF1ZSBJRCBhcyBhIGhleGFkZWNpbWFsIHN0cmluZy5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgSUQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBkZWJ1ZyBsb2dnaW5nIG1lc3NhZ2VzIHRvIGhlbHBcbiAqIGNvcnJlbGF0ZSBsb2cgbWVzc2FnZXMgdGhhdCBtYXkgYmUgc3BhdGlhbGx5IHNlcGFyYXRlZCBpbiB0aGUgbG9ncywgYnV0XG4gKiBsb2dpY2FsbHkgcmVsYXRlZC4gRm9yIGV4YW1wbGUsIGEgbmV0d29yayBjb25uZWN0aW9uIGNvdWxkIGluY2x1ZGUgdGhlIHNhbWVcbiAqIFwiZGVidWcgSURcIiBzdHJpbmcgaW4gYWxsIG9mIGl0cyBsb2cgbWVzc2FnZXMgdG8gaGVscCB0cmFjZSBhIHNwZWNpZmljXG4gKiBjb25uZWN0aW9uIG92ZXIgdGltZS5cbiAqXG4gKiBAcmV0dXJuIHRoZSAxMC1jaGFyYWN0ZXIgZ2VuZXJhdGVkIElEIChlLmcuIFwiMHhhMWIyYzNkNFwiKS5cbiAqL1xuZnVuY3Rpb24gQ3UoKSB7XG4gICAgcmV0dXJuIG51bGwgPT09IER1ID8gRHUgPSAyNjg0MzU0NTYgKyBNYXRoLnJvdW5kKDIxNDc0ODM2NDggKiBNYXRoLnJhbmRvbSgpKSA6IER1KyssIFxuICAgIFwiMHhcIiArIER1LnRvU3RyaW5nKDE2KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgeHUgPSB7XG4gICAgQmF0Y2hHZXREb2N1bWVudHM6IFwiYmF0Y2hHZXRcIixcbiAgICBDb21taXQ6IFwiY29tbWl0XCIsXG4gICAgUnVuUXVlcnk6IFwicnVuUXVlcnlcIixcbiAgICBSdW5BZ2dyZWdhdGlvblF1ZXJ5OiBcInJ1bkFnZ3JlZ2F0aW9uUXVlcnlcIlxufTtcblxuLyoqXG4gKiBNYXBzIFJQQyBuYW1lcyB0byB0aGUgY29ycmVzcG9uZGluZyBSRVNUIGVuZHBvaW50IG5hbWUuXG4gKlxuICogV2UgdXNlIGFycmF5IG5vdGF0aW9uIHRvIGF2b2lkIG1hbmdsaW5nLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNpbXBsZSBoZWxwZXIgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIHRoZSBTdHJlYW0gaW50ZXJmYWNlIHRvXG4gKiBicmlkZ2UgdG8gb3RoZXIgaW1wbGVtZW50YXRpb25zIHRoYXQgYXJlIHN0cmVhbXMgYnV0IGRvIG5vdCBpbXBsZW1lbnQgdGhlXG4gKiBpbnRlcmZhY2UuIFRoZSBzdHJlYW0gY2FsbGJhY2tzIGFyZSBpbnZva2VkIHdpdGggdGhlIGNhbGxPbi4uLiBtZXRob2RzLlxuICovXG5jbGFzcyBOdSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmlvID0gdC5pbywgdGhpcy5ybyA9IHQucm87XG4gICAgfVxuICAgIG9vKHQpIHtcbiAgICAgICAgdGhpcy51byA9IHQ7XG4gICAgfVxuICAgIGNvKHQpIHtcbiAgICAgICAgdGhpcy5hbyA9IHQ7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIHRoaXMuaG8gPSB0O1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5ybygpO1xuICAgIH1cbiAgICBzZW5kKHQpIHtcbiAgICAgICAgdGhpcy5pbyh0KTtcbiAgICB9XG4gICAgbG8oKSB7XG4gICAgICAgIHRoaXMudW8oKTtcbiAgICB9XG4gICAgZm8odCkge1xuICAgICAgICB0aGlzLmFvKHQpO1xuICAgIH1cbiAgICBfbyh0KSB7XG4gICAgICAgIHRoaXMuaG8odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBrdSA9IFwiV2ViQ2hhbm5lbENvbm5lY3Rpb25cIjtcblxuY2xhc3MgTXUgZXh0ZW5kcyBcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIFJlc3QtYmFzZWQgY29ubmVjdGlvbnMgdG8gdGhlIGJhY2tlbmQgKFdlYkNoYW5uZWwgYW5kXG4gKiBIVFRQKS5cbiAqL1xuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSB0LmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IGUgPSB0LnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO1xuICAgICAgICB0aGlzLndvID0gZSArIFwiOi8vXCIgKyB0Lmhvc3QsIHRoaXMubW8gPSBcInByb2plY3RzL1wiICsgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL2RhdGFiYXNlcy9cIiArIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSArIFwiL2RvY3VtZW50c1wiO1xuICAgIH1cbiAgICBnZXQgeW8oKSB7XG4gICAgICAgIC8vIEJvdGggYGludm9rZVJQQygpYCBhbmQgYGludm9rZVN0cmVhbWluZ1JQQygpYCB1c2UgdGhlaXIgYHBhdGhgIGFyZ3VtZW50cyB0byBkZXRlcm1pbmVcbiAgICAgICAgLy8gd2hlcmUgdG8gcnVuIHRoZSBxdWVyeSwgYW5kIGV4cGVjdCB0aGUgYHJlcXVlc3RgIHRvIE5PVCBzcGVjaWZ5IHRoZSBcInBhdGhcIi5cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBwbyh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBDdSgpLCBvID0gdGhpcy5Jbyh0LCBlKTtcbiAgICAgICAgTihcIlJlc3RDb25uZWN0aW9uXCIsIGBTZW5kaW5nIFJQQyAnJHt0fScgJHtyfTpgLCBvLCBuKTtcbiAgICAgICAgY29uc3QgdSA9IHt9O1xuICAgICAgICByZXR1cm4gdGhpcy5Ubyh1LCBzLCBpKSwgdGhpcy5Fbyh0LCBvLCB1LCBuKS50aGVuKChlID0+IChOKFwiUmVzdENvbm5lY3Rpb25cIiwgYFJlY2VpdmVkIFJQQyAnJHt0fScgJHtyfTogYCwgZSksIFxuICAgICAgICBlKSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93IE0oXCJSZXN0Q29ubmVjdGlvblwiLCBgUlBDICcke3R9JyAke3J9IGZhaWxlZCB3aXRoIGVycm9yOiBgLCBlLCBcInVybDogXCIsIG8sIFwicmVxdWVzdDpcIiwgbiksIFxuICAgICAgICAgICAgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBBbyh0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXG4gICAgICAgIHJldHVybiB0aGlzLnBvKHQsIGUsIG4sIHMsIGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgKi8gICAgVG8odCwgZSwgbikge1xuICAgICAgICB0W1wiWC1Hb29nLUFwaS1DbGllbnRcIl0gPSBcImdsLWpzLyBmaXJlL1wiICsgUywgXG4gICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxuICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xuICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlICRodHRwT3ZlcndyaXRlXG4gICAgICAgIC8vIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICAgICAgICB0W1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCIsIHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkICYmICh0W1wiWC1GaXJlYmFzZS1HTVBJRFwiXSA9IHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkKSwgXG4gICAgICAgIGUgJiYgZS5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpLCBuICYmIG4uaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKTtcbiAgICB9XG4gICAgSW8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0geHVbdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLndvfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIEVvKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IEN1KCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBuZXcgWGhySW87XG4gICAgICAgICAgICB1LnNldFdpdGhDcmVkZW50aWFscyghMCksIHUubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1LmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHUuZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBOKGt1LCBgWEhSIGZvciBSUEMgJyR7dH0nICR7aX0gcmVjZWl2ZWQ6YCwgSlNPTi5zdHJpbmdpZnkoZSkpLCByKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgTihrdSwgYFJQQyAnJHt0fScgJHtpfSB0aW1lZCBvdXRgKSwgbyhuZXcgVShxLkRFQURMSU5FX0VYQ0VFREVELCBcIlJlcXVlc3QgdGltZSBvdXRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5IVFRQX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHUuZ2V0U3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTihrdSwgYFJQQyAnJHt0fScgJHtpfSBmYWlsZWQgd2l0aCBzdGF0dXM6YCwgbiwgXCJyZXNwb25zZSB0ZXh0OlwiLCB1LmdldFJlc3BvbnNlVGV4dCgpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBuID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gdS5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHQpICYmICh0ID0gdFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS5zdGF0dXMgJiYgZS5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocSkuaW5kZXhPZihlKSA+PSAwID8gZSA6IHEuVU5LTk9XTjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8obmV3IFUodCwgZS5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG8obmV3IFUocS5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyB1LmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgVShxLlVOQVZBSUxBQkxFLCBcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBOKGt1LCBgUlBDICcke3R9JyAke2l9IGNvbXBsZXRlZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBjID0gSlNPTi5zdHJpbmdpZnkocyk7XG4gICAgICAgICAgICBOKGt1LCBgUlBDICcke3R9JyAke2l9IHNlbmRpbmcgcmVxdWVzdDpgLCBzKSwgdS5zZW5kKGUsIFwiUE9TVFwiLCBjLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgUm8odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gQ3UoKSwgaSA9IFsgdGhpcy53bywgXCIvXCIsIFwiZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmVcIiwgXCIvXCIsIHQsIFwiL2NoYW5uZWxcIiBdLCByID0gY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpLCBvID0gZ2V0U3RhdEV2ZW50VGFyZ2V0KCksIHUgPSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogXCJnc2Vzc2lvbmlkXCIsXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogYHByb2plY3RzLyR7dGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogITAsXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiAhMCxcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogNmU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nLFxuICAgICAgICAgICAgZGV0ZWN0QnVmZmVyaW5nUHJveHk6IHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmICh1LnhtbEh0dHBGYWN0b3J5ID0gbmV3IEZldGNoWG1sSHR0cEZhY3Rvcnkoe30pKSwgdGhpcy5Ubyh1LmluaXRNZXNzYWdlSGVhZGVycywgZSwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGVuY29kZUluaXRNZXNzYWdlSGVhZGVycyBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW4gdGhlIHJlcXVlc3QncyBQT1NUIHBheWxvYWQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC5cbiAgICAgICAgdS5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgPSAhMDtcbiAgICAgICAgY29uc3QgYyA9IGkuam9pbihcIlwiKTtcbiAgICAgICAgTihrdSwgYENyZWF0aW5nIFJQQyAnJHt0fScgc3RyZWFtICR7c306ICR7Y31gLCB1KTtcbiAgICAgICAgY29uc3QgYSA9IHIuY3JlYXRlV2ViQ2hhbm5lbChjLCB1KTtcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxuICAgICAgICAgICAgICAgIGxldCBoID0gITEsIGwgPSAhMTtcbiAgICAgICAgLy8gQSBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBzdHJlYW0gd2FzIGNsb3NlZCAoYnkgdXMgb3IgdGhyb3VnaCBhblxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xuICAgICAgICAvLyBvbiBhIGNsb3NlZCBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBmID0gbmV3IE51KHtcbiAgICAgICAgICAgIGlvOiBlID0+IHtcbiAgICAgICAgICAgICAgICBsID8gTihrdSwgYE5vdCBzZW5kaW5nIGJlY2F1c2UgUlBDICcke3R9JyBzdHJlYW0gJHtzfSBpcyBjbG9zZWQ6YCwgZSkgOiAoaCB8fCAoTihrdSwgYE9wZW5pbmcgUlBDICcke3R9JyBzdHJlYW0gJHtzfSB0cmFuc3BvcnQuYCksIFxuICAgICAgICAgICAgICAgIGEub3BlbigpLCBoID0gITApLCBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSBzZW5kaW5nOmAsIGUpLCBhLnNlbmQoZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJvOiAoKSA9PiBhLmNsb3NlKClcbiAgICAgICAgfSksIGQgPSAodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgdC5saXN0ZW4oZSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4odCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQoYSwgV2ViQ2hhbm5lbC5FdmVudFR5cGUuT1BFTiwgKCgpID0+IHtcbiAgICAgICAgICAgIGwgfHwgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0IG9wZW5lZC5gKTtcbiAgICAgICAgfSkpLCBkKGEsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgbCB8fCAobCA9ICEwLCBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSB0cmFuc3BvcnQgY2xvc2VkYCksIGYuZm8oKSk7XG4gICAgICAgIH0pKSwgZChhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKGUgPT4ge1xuICAgICAgICAgICAgbCB8fCAobCA9ICEwLCBNKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSB0cmFuc3BvcnQgZXJyb3JlZDpgLCBlKSwgZi5mbyhuZXcgVShxLlVOQVZBSUxBQkxFLCBcIlRoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZFwiKSkpO1xuICAgICAgICB9KSksIGQoYSwgV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgKGUgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICBpZiAoIWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZS5kYXRhWzBdO1xuICAgICAgICAgICAgICAgIEYoISFpKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gaSwgbyA9IHIuZXJyb3IgfHwgKG51bGwgPT09IChuID0gclswXSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5lcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gcmVjZWl2ZWQgZXJyb3I6YCwgbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpaVt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiB1aShlKTtcbiAgICAgICAgICAgICAgICAgICAgfShlKSwgaSA9IG8ubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gcS5JTlRFUk5BTCwgaSA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgZSArIFwiIHdpdGggbWVzc2FnZSBcIiArIG8ubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBsID0gITAsIGYuZm8obmV3IFUobiwgaSkpLCBhLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IHJlY2VpdmVkOmAsIGkpLCBmLl9vKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIGQobywgRXZlbnQuU1RBVF9FVkVOVCwgKGUgPT4ge1xuICAgICAgICAgICAgZS5zdGF0ID09PSBTdGF0LlBST1hZID8gTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gZGV0ZWN0ZWQgYnVmZmVyaW5nIHByb3h5YCkgOiBlLnN0YXQgPT09IFN0YXQuTk9QUk9YWSAmJiBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSBkZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlgKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIGYubG8oKTtcbiAgICAgICAgfSksIDApLCBmO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBPdSgpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gJHUoKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBGdSh0KSB7XG4gICAgcmV0dXJuIG5ldyBWaSh0LCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBCdSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuc2kgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLnZvID0gbiwgdGhpcy5QbyA9IHMsIHRoaXMuYm8gPSBpLCB0aGlzLlZvID0gMCwgXG4gICAgICAgIHRoaXMuU28gPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLkRvID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5WbyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBDbygpIHtcbiAgICAgICAgdGhpcy5WbyA9IHRoaXMuYm87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgeG8odCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy5WbyArIHRoaXMuTm8oKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5EbyksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmIE4oXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMuVm99IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuU28gPSB0aGlzLnNpLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLkRvID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5WbyAqPSB0aGlzLlBvLCB0aGlzLlZvIDwgdGhpcy52byAmJiAodGhpcy5WbyA9IHRoaXMudm8pLCB0aGlzLlZvID4gdGhpcy5ibyAmJiAodGhpcy5WbyA9IHRoaXMuYm8pO1xuICAgIH1cbiAgICBrbygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5TbyAmJiAodGhpcy5Tby5za2lwRGVsYXkoKSwgdGhpcy5TbyA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuU28gJiYgKHRoaXMuU28uY2FuY2VsKCksIHRoaXMuU28gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIE5vKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLlZvO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBMdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgICAgICB0aGlzLnNpID0gdCwgdGhpcy5NbyA9IG4sIHRoaXMuT28gPSBzLCB0aGlzLmNvbm5lY3Rpb24gPSBpLCB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyID0gciwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyID0gbywgdGhpcy5saXN0ZW5lciA9IHUsIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJG8gPSAwLCB0aGlzLkZvID0gbnVsbCwgdGhpcy5CbyA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5MbyA9IG5ldyBCdSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgcW8oKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyAqLyA9PT0gdGhpcy5zdGF0ZSB8fCA1IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmICovID09PSB0aGlzLnN0YXRlIHx8IHRoaXMuVW8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cbiAgICAgKiBjYWxsZWQpIGFuZCB0aGUgc3RyZWFtIGlzIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgVW8oKSB7XG4gICAgICAgIHJldHVybiAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gIT09IHRoaXMuc3RhdGUgPyB0aGlzLmF1dGgoKSA6IHRoaXMuS28oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIFJQQy4gVGhpcyBjYWxsIGlzIGlkZW1wb3RlbnQgYW5kIGFsbG93ZWQgcmVnYXJkbGVzcyBvZiB0aGVcbiAgICAgKiBjdXJyZW50IGlzU3RhcnRlZCgpIHN0YXRlLlxuICAgICAqXG4gICAgICogV2hlbiBzdG9wIHJldHVybnMsIGlzU3RhcnRlZCgpIGFuZCBpc09wZW4oKSB3aWxsIGJvdGggcmV0dXJuIGZhbHNlLlxuICAgICAqLyAgICBhc3luYyBzdG9wKCkge1xuICAgICAgICB0aGlzLnFvKCkgJiYgYXdhaXQgdGhpcy5jbG9zZSgwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICBHbygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCB0aGlzLkxvLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBRbygpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5VbygpICYmIG51bGwgPT09IHRoaXMuRm8gJiYgKHRoaXMuRm8gPSB0aGlzLnNpLmVucXVldWVBZnRlckRlbGF5KHRoaXMuTW8sIDZlNCwgKCgpID0+IHRoaXMuam8oKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIHpvKHQpIHtcbiAgICAgICAgdGhpcy5XbygpLCB0aGlzLnN0cmVhbS5zZW5kKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIGpvKCkge1xuICAgICAgICBpZiAodGhpcy5VbygpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqIE1hcmtzIHRoZSBzdHJlYW0gYXMgYWN0aXZlIGFnYWluLiAqLyAgICBXbygpIHtcbiAgICAgICAgdGhpcy5GbyAmJiAodGhpcy5Gby5jYW5jZWwoKSwgdGhpcy5GbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogQ2FuY2VscyB0aGUgaGVhbHRoIGNoZWNrIGRlbGF5ZWQgb3BlcmF0aW9uLiAqLyAgICBIbygpIHtcbiAgICAgICAgdGhpcy5CbyAmJiAodGhpcy5Cby5jYW5jZWwoKSwgdGhpcy5CbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwIGFzIG5lY2Vzc2FyeTpcbiAgICAgKlxuICAgICAqICogY2xvc2VzIHRoZSB1bmRlcmx5aW5nIEdSUEMgc3RyZWFtO1xuICAgICAqICogY2FsbHMgdGhlIG9uQ2xvc2UgaGFuZGxlciB3aXRoIHRoZSBnaXZlbiAnZXJyb3InO1xuICAgICAqICogc2V0cyBpbnRlcm5hbCBzdHJlYW0gc3RhdGUgdG8gJ2ZpbmFsU3RhdGUnO1xuICAgICAqICogYWRqdXN0cyB0aGUgYmFja29mZiB0aW1lciBiYXNlZCBvbiB0aGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEEgbmV3IHN0cmVhbSBjYW4gYmUgb3BlbmVkIGJ5IGNhbGxpbmcgc3RhcnQoKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaW5hbFN0YXRlIC0gdGhlIGludGVuZGVkIHN0YXRlIG9mIHRoZSBzdHJlYW0gYWZ0ZXIgY2xvc2luZy5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSB0aGUgZXJyb3IgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCB3aXRoLlxuICAgICAqLyAgICBhc3luYyBjbG9zZSh0LCBlKSB7XG4gICAgICAgIC8vIENhbmNlbCBhbnkgb3V0c3RhbmRpbmcgdGltZXJzICh0aGV5J3JlIGd1YXJhbnRlZWQgbm90IHRvIGV4ZWN1dGUpLlxuICAgICAgICB0aGlzLldvKCksIHRoaXMuSG8oKSwgdGhpcy5Mby5jYW5jZWwoKSwgXG4gICAgICAgIC8vIEludmFsaWRhdGVzIGFueSBzdHJlYW0tcmVsYXRlZCBjYWxsYmFja3MgKGUuZy4gZnJvbSBhdXRoIG9yIHRoZVxuICAgICAgICAvLyB1bmRlcmx5aW5nIHN0cmVhbSksIGd1YXJhbnRlZWluZyB0aGV5IHdvbid0IGV4ZWN1dGUuXG4gICAgICAgIHRoaXMuJG8rKywgNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLkxvLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gcS5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIGsoZS50b1N0cmluZygpKSwgayhcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuTG8uQ28oKSkgOiBlICYmIGUuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLkpvKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuY28oZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBKbygpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5Zbyh0aGlzLiRvKSwgZSA9IHRoaXMuJG87XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpIF0pLnRoZW4oKChbdCwgbl0pID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy4kbyA9PT0gZSAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy5Ybyh0LCBuKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IFUocS5VTktOT1dOLCBcIkZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiBcIiArIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuWm8odCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWG8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Zbyh0aGlzLiRvKTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLnR1KHQsIGUpLCB0aGlzLnN0cmVhbS5vbygoKCkgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gKHRoaXMuc3RhdGUgPSAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovICwgdGhpcy5CbyA9IHRoaXMuc2kuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5PbywgMWU0LCAoKCkgPT4gKHRoaXMuVW8oKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLm9vKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uY28oKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5abyh0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEtvKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyAsIHRoaXMuTG8ueG8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgWm8odCkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuIE4oXCJQZXJzaXN0ZW50U3RyZWFtXCIsIGBjbG9zZSB3aXRoIGVycm9yOiAke3R9YCksIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5jbG9zZSg0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBZbyh0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2kuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy4kbyA9PT0gdCA/IGUoKSA6IChOKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgcXUgZXh0ZW5kcyBMdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpO1xuICAgIH1cbiAgICB0dSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uUm8oXCJMaXN0ZW5cIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy5Mby5yZXNldCgpO1xuICAgICAgICBjb25zdCBlID0gUWkodGhpcy5zZXJpYWxpemVyLCB0KSwgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkpIHJldHVybiBydC5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldElkcyAmJiBlLnRhcmdldElkcy5sZW5ndGggPyBydC5taW4oKSA6IGUucmVhZFRpbWUgPyBOaShlLnJlYWRUaW1lKSA6IHJ0Lm1pbigpO1xuICAgICAgICB9KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5ldShlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgbnUodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBMaSh0aGlzLnNlcmlhbGl6ZXIpLCBlLmFkZFRhcmdldCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKG4gPSBGbihzKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IEhpKHQsIHMpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBKaSh0LCBzKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IGUudGFyZ2V0SWQsIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgIG4ucmVzdW1lVG9rZW4gPSBDaSh0LCBlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gU2kodCwgZS5leHBlY3RlZENvdW50KTtcbiAgICAgICAgICAgICAgICBudWxsICE9PSBzICYmIChuLmV4cGVjdGVkQ291bnQgPSBzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHJ0Lm1pbigpKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgICAgICAvLyBSaWdodCBub3csIG1hbnkgdGVzdHMgZGVwZW5kIG9uIHRoaXMgYmVoYXZpb3VyIHRob3VnaCAobGVhdmluZyBtaW4oKSBvdXRcbiAgICAgICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgICAgICBuLnJlYWRUaW1lID0gRGkodCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IFNpKHQsIGUuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiAobi5leHBlY3RlZENvdW50ID0gcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICBjb25zdCBuID0gWGkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgbiAmJiAoZS5sYWJlbHMgPSBuKSwgdGhpcy56byhlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5yZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXG4gICAgICovICAgIHN1KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gTGkodGhpcy5zZXJpYWxpemVyKSwgZS5yZW1vdmVUYXJnZXQgPSB0LCB0aGlzLnpvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIFdyaXRlIFJQQy5cbiAqXG4gKiBUaGUgV3JpdGUgUlBDIHJlcXVpcmVzIHRoZSBjYWxsZXIgdG8gbWFpbnRhaW4gc3BlY2lhbCBzdHJlYW1Ub2tlblxuICogc3RhdGUgaW4gYmV0d2VlbiBjYWxscywgdG8gaGVscCB0aGUgc2VydmVyIHVuZGVyc3RhbmQgd2hpY2ggcmVzcG9uc2VzIHRoZVxuICogY2xpZW50IGhhcyBwcm9jZXNzZWQgYnkgdGhlIHRpbWUgdGhlIG5leHQgcmVxdWVzdCBpcyBtYWRlLiBFdmVyeSByZXNwb25zZVxuICogd2lsbCBjb250YWluIGEgc3RyZWFtVG9rZW47IHRoaXMgdmFsdWUgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIG5leHRcbiAqIHJlcXVlc3QuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBzdGFydCgpIG9uIHRoaXMgc3RyZWFtLCB0aGUgbmV4dCByZXF1ZXN0IG11c3QgYmUgYSBoYW5kc2hha2UsXG4gKiBjb250YWluaW5nIHdoYXRldmVyIHN0cmVhbVRva2VuIGlzIG9uIGhhbmQuIE9uY2UgYSByZXNwb25zZSB0byB0aGlzXG4gKiByZXF1ZXN0IGlzIHJlY2VpdmVkLCBhbGwgcGVuZGluZyBtdXRhdGlvbnMgbWF5IGJlIHN1Ym1pdHRlZC4gV2hlblxuICogc3VibWl0dGluZyBtdWx0aXBsZSBiYXRjaGVzIG9mIG11dGF0aW9ucyBhdCB0aGUgc2FtZSB0aW1lLCBpdCdzXG4gKiBva2F5IHRvIHVzZSB0aGUgc2FtZSBzdHJlYW1Ub2tlbiBmb3IgdGhlIGNhbGxzIHRvIHdyaXRlTXV0YXRpb25zLlxuICpcbiAqIFRPRE8oYi8zMzI3MTIzNSk6IFVzZSBwcm90byB0eXBlc1xuICovIGNsYXNzIFV1IGV4dGVuZHMgTHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5Xcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpLCB0aGlzLml1ID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxuICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cbiAgICAgKi8gICAgZ2V0IHJ1KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdTtcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLml1ID0gITEsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBKbygpIHtcbiAgICAgICAgdGhpcy5pdSAmJiB0aGlzLm91KFtdKTtcbiAgICB9XG4gICAgdHUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLlJvKFwiV3JpdGVcIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBGKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy5pdSkge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMuTG8ucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBXaSh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IE5pKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci51dShuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIEYoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMuaXUgPSAhMCwgdGhpcy5saXN0ZW5lci5jdSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBhdSgpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IExpKHRoaXMuc2VyaWFsaXplciksIHRoaXMuem8odCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIG91KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gamkodGhpcy5zZXJpYWxpemVyLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuem8oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3MgS3UgZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuY29ubmVjdGlvbiA9IG4sIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzLCB0aGlzLmh1ID0gITE7XG4gICAgfVxuICAgIGx1KCkge1xuICAgICAgICBpZiAodGhpcy5odSkgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgcG8odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5sdSgpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuY29ubmVjdGlvbi5wbyh0LCBlLCBuLCBzLCBpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBxLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgdCkgOiBuZXcgVShxLlVOS05PV04sIHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIEFvKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubHUoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW2ksIHJdKSA9PiB0aGlzLmNvbm5lY3Rpb24uQW8odCwgZSwgbiwgaSwgciwgcykpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFUocS5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5odSA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbmFzeW5jIGZ1bmN0aW9uIEd1KHQsIGUsIG4pIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCBpID0gTCh0KSwge3JlcXVlc3Q6IHIsIGZ1OiBvfSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEppKHQsIGUpLCBpID0ge30sIHIgPSBbXTtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIC8vIE1hcCBhbGwgY2xpZW50LXNpZGUgYWxpYXNlcyB0byBhIHVuaXF1ZSBzaG9ydC1mb3JtXG4gICAgICAgICAgICAvLyBhbGlhcy4gVGhpcyBhdm9pZHMgaXNzdWVzIHdpdGggY2xpZW50LXNpZGUgYWxpYXNlcyB0aGF0XG4gICAgICAgICAgICAvLyBleGNlZWQgdGhlIDE1MDAtYnl0ZSBzdHJpbmcgc2l6ZSBsaW1pdC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImFnZ3JlZ2F0ZV9cIiArIG8rKztcbiAgICAgICAgICAgIGlbZV0gPSB0LmFsaWFzLCBcImNvdW50XCIgPT09IHQuZ3QgPyByLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiBlLFxuICAgICAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICAgICAgfSkgOiBcImF2Z1wiID09PSB0Lmd0ID8gci5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogZSxcbiAgICAgICAgICAgICAgICBhdmc6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pIDogXCJzdW1cIiA9PT0gdC5ndCAmJiByLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiBlLFxuICAgICAgICAgICAgICAgIHN1bToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZFBhdGgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uczogcixcbiAgICAgICAgICAgICAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiBzLnN0cnVjdHVyZWRRdWVyeVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBzLnBhcmVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1OiBpXG4gICAgICAgIH07XG4gICAgfShpLnNlcmlhbGl6ZXIsIEpuKGUpLCBuKSwgdSA9IHIucGFyZW50O1xuICAgIGkuY29ubmVjdGlvbi55byB8fCBkZWxldGUgci5wYXJlbnQ7XG4gICAgY29uc3QgYyA9IChhd2FpdCBpLkFvKFwiUnVuQWdncmVnYXRpb25RdWVyeVwiLCB1LCByLCAvKmV4cGVjdGVkUmVzcG9uc2VDb3VudD0qLyAxKSkuZmlsdGVyKCh0ID0+ICEhdC5yZXN1bHQpKTtcbiAgICAvLyBPbWl0IFJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXNwb25zZSB0aGF0IG9ubHkgY29udGFpbiByZWFkVGltZXMuXG4gICAgICAgIEYoMSA9PT0gYy5sZW5ndGgpO1xuICAgIC8vIFJlbWFwIHRoZSBzaG9ydC1mb3JtIGFsaWFzZXMgdGhhdCB3ZXJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgIC8vIHRvIHRoZSBjbGllbnQtc2lkZSBhbGlhc2VzLiBVc2VycyB3aWxsIGFjY2VzcyB0aGUgcmVzdWx0c1xuICAgIC8vIHVzaW5nIHRoZSBjbGllbnQtc2lkZSBhbGlhcy5cbiAgICBjb25zdCBhID0gbnVsbCA9PT0gKHMgPSBjWzBdLnJlc3VsdCkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5hZ2dyZWdhdGVGaWVsZHM7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGEpLnJlZHVjZSgoKHQsIGUpID0+ICh0W29bZV1dID0gYVtlXSwgdCkpLCB7fSk7XG59XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIFF1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kdSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdSA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53dSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgbXUoKSB7XG4gICAgICAgIDAgPT09IHRoaXMuZHUgJiYgKHRoaXMuZ3UoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIHRoaXMuX3UgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIFRpbWVySWQuT25saW5lU3RhdGVUaW1lb3V0ICovICwgMWU0LCAoKCkgPT4gKHRoaXMuX3UgPSBudWxsLCBcbiAgICAgICAgdGhpcy55dShcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIDEwIHNlY29uZHMuXCIpLCB0aGlzLmd1KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cbiAgICAgKi8gICAgcHUodCkge1xuICAgICAgICBcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyA9PT0gdGhpcy5zdGF0ZSA/IHRoaXMuZ3UoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykgOiAodGhpcy5kdSsrLCBcbiAgICAgICAgdGhpcy5kdSA+PSAxICYmICh0aGlzLkl1KCksIHRoaXMueXUoYENvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiAke3QudG9TdHJpbmcoKX1gKSwgXG4gICAgICAgIHRoaXMuZ3UoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cbiAgICAgKi8gICAgc2V0KHQpIHtcbiAgICAgICAgdGhpcy5JdSgpLCB0aGlzLmR1ID0gMCwgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IHQgJiYgKFxuICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXG4gICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cbiAgICAgICAgdGhpcy53dSA9ICExKSwgdGhpcy5ndSh0KTtcbiAgICB9XG4gICAgZ3UodCkge1xuICAgICAgICB0ICE9PSB0aGlzLnN0YXRlICYmICh0aGlzLnN0YXRlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodCkpO1xuICAgIH1cbiAgICB5dSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBgQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiAke3R9XFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5gO1xuICAgICAgICB0aGlzLnd1ID8gKGsoZSksIHRoaXMud3UgPSAhMSkgOiBOKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIGUpO1xuICAgIH1cbiAgICBJdSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5fdSAmJiAodGhpcy5fdS5jYW5jZWwoKSwgdGhpcy5fdSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MganUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5UdSA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRXUgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5BdSA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUnUgPSBbXSwgdGhpcy52dSA9IGksIHRoaXMudnUuSnIoKHQgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIGVjKHRoaXMpICYmIChOKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEwodCk7XG4gICAgICAgICAgICAgICAgICAgIGUuQXUuYWRkKDQgLyogT2ZmbGluZUNhdXNlLkNvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IFd1KGUpLCBlLlB1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUuQXUuZGVsZXRlKDQgLyogT2ZmbGluZUNhdXNlLkNvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IHp1KGUpO1xuICAgICAgICAgICAgICAgIH0odGhpcykpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHRoaXMuUHUgPSBuZXcgUXUobiwgcyk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB6dSh0KSB7XG4gICAgaWYgKGVjKHQpKSBmb3IgKGNvbnN0IGUgb2YgdC5SdSkgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gV3UodCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LlJ1KSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIEh1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBuLkV1LmhhcyhlLnRhcmdldElkKSB8fCAoXG4gICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxuICAgIG4uRXUuc2V0KGUudGFyZ2V0SWQsIGUpLCB0YyhuKSA/IFxuICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXG4gICAgWnUobikgOiBwYyhuKS5VbygpICYmIFl1KG4sIGUpKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBsaXN0ZW4gZnJvbSBzZXJ2ZXIuIEl0IGlzIGEgbm8tb3AgaWYgdGhlIGdpdmVuIHRhcmdldCBpZCBpc1xuICogbm90IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovIGZ1bmN0aW9uIEp1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IHBjKG4pO1xuICAgIG4uRXUuZGVsZXRlKGUpLCBzLlVvKCkgJiYgWHUobiwgZSksIDAgPT09IG4uRXUuc2l6ZSAmJiAocy5VbygpID8gcy5RbygpIDogZWMobikgJiYgXG4gICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcbiAgICAvLyBoYXZlIG5vIGxpc3RlbmVycywgc2luY2Ugd2l0aG91dCBhbnkgbGlzdGVucyB0byBzZW5kIHdlIGNhbm5vdFxuICAgIC8vIGNvbmZpcm0gaWYgdGhlIHN0cmVhbSBpcyBoZWFsdGh5IGFuZCB1cGdyYWRlIHRvIE9ubGluZVN0YXRlLk9ubGluZS5cbiAgICBuLlB1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSBhY2sgdG8gcHJvY2VzcyBhbnkgbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiBZdSh0LCBlKSB7XG4gICAgaWYgKHQuYnUuTHQoZS50YXJnZXRJZCksIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCB8fCBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocnQubWluKCkpID4gMCkge1xuICAgICAgICBjb25zdCBuID0gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlLnRhcmdldElkKS5zaXplO1xuICAgICAgICBlID0gZS53aXRoRXhwZWN0ZWRDb3VudChuKTtcbiAgICB9XG4gICAgcGModCkubnUoZSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gWHUodCwgZSkge1xuICAgIHQuYnUuTHQoZSksIHBjKHQpLnN1KGUpO1xufVxuXG5mdW5jdGlvbiBadSh0KSB7XG4gICAgdC5idSA9IG5ldyBFaSh7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgaGU6IGUgPT4gdC5FdS5nZXQoZSkgfHwgbnVsbCxcbiAgICAgICAgb2U6ICgpID0+IHQuZGF0YXN0b3JlLnNlcmlhbGl6ZXIuZGF0YWJhc2VJZFxuICAgIH0pLCBwYyh0KS5zdGFydCgpLCB0LlB1Lm11KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiB0Yyh0KSB7XG4gICAgcmV0dXJuIGVjKHQpICYmICFwYyh0KS5xbygpICYmIHQuRXUuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIGVjKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gTCh0KS5BdS5zaXplO1xufVxuXG5mdW5jdGlvbiBuYyh0KSB7XG4gICAgdC5idSA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2ModCkge1xuICAgIHQuRXUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgWXUodCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpYyh0LCBlKSB7XG4gICAgbmModCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgdGModCkgPyAodC5QdS5wdShlKSwgWnUodCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5QdS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJjKHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuUHUuc2V0KFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovKSwgZSBpbnN0YW5jZW9mIElpICYmIDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovID09PSBlLnN0YXRlICYmIGUuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGUudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIHQuRXUuaGFzKHMpICYmIChhd2FpdCB0LnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ocywgbiksIHQuRXUuZGVsZXRlKHMpLCB0LmJ1LnJlbW92ZVRhcmdldChzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAodCwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBOKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCBlLnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBvYyh0LCBuKTtcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiB5aSA/IHQuYnUuV3QoZSkgOiBlIGluc3RhbmNlb2YgcGkgPyB0LmJ1LmVlKGUpIDogdC5idS5ZdChlKSwgXG4gICAgIW4uaXNFcXVhbChydC5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBvdSh0LmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyhlKSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5idS51ZShlKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcbiAgICAgICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5FdS5nZXQocyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIHQuRXUuc2V0KHMsIGkud2l0aFJlc3VtZVRva2VuKG4ucmVzdW1lVG9rZW4sIGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSksIFxuICAgICAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XG4gICAgICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICBuLnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5FdS5nZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzKSBcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZXN1bWUgdG9rZW4gZm9yIHRoZSB0YXJnZXQsIHNpbmNlIHdlJ3JlIGluIGEga25vd24gbWlzbWF0Y2hcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5FdS5zZXQoZSwgcy53aXRoUmVzdW1lVG9rZW4oVmUuRU1QVFlfQllURV9TVFJJTkcsIHMuc25hcHNob3RWZXJzaW9uKSksIFxuICAgICAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcbiAgICAgICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxuICAgICAgICAgICAgICAgIFh1KHQsIGUpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBjcihzLnRhcmdldCwgZSwgbiwgcy5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgWXUodCwgaSk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBOKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBvYyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gb2ModCwgZSwgbikge1xuICAgIGlmICghRHQoZSkpIHRocm93IGU7XG4gICAgdC5BdS5hZGQoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IFd1KHQpLCB0LlB1LnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gb3UodC5sb2NhbFN0b3JlKSksIFxuICAgIC8vIFByb2JlIEluZGV4ZWREQiBwZXJpb2RpY2FsbHkgYW5kIHJlLWVuYWJsZSBuZXR3b3JrXG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiUmV0cnlpbmcgSW5kZXhlZERCIGFjY2Vzc1wiKSwgYXdhaXQgbigpLCB0LkF1LmRlbGV0ZSgxIC8qIE9mZmxpbmVDYXVzZS5JbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgenUodCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gdWModCwgZSkge1xuICAgIHJldHVybiBlKCkuY2F0Y2goKG4gPT4gb2ModCwgbiwgZSkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2ModCkge1xuICAgIGNvbnN0IGUgPSBMKHQpLCBuID0gSWMoZSk7XG4gICAgbGV0IHMgPSBlLlR1Lmxlbmd0aCA+IDAgPyBlLlR1W2UuVHUubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO2FjKGUpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBhdShlLmxvY2FsU3RvcmUsIHMpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgMCA9PT0gZS5UdS5sZW5ndGggJiYgbi5RbygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHQuYmF0Y2hJZCwgaGMoZSwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBvYyhlLCB0KTtcbiAgICB9XG4gICAgbGMoZSkgJiYgZmMoZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIGFjKHQpIHtcbiAgICByZXR1cm4gZWModCkgJiYgdC5UdS5sZW5ndGggPCAxMDtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cbiAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gKi8gZnVuY3Rpb24gaGModCwgZSkge1xuICAgIHQuVHUucHVzaChlKTtcbiAgICBjb25zdCBuID0gSWModCk7XG4gICAgbi5VbygpICYmIG4ucnUgJiYgbi5vdShlLm11dGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIGxjKHQpIHtcbiAgICByZXR1cm4gZWModCkgJiYgIUljKHQpLnFvKCkgJiYgdC5UdS5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBmYyh0KSB7XG4gICAgSWModCkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGModCkge1xuICAgIEljKHQpLmF1KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9jKHQpIHtcbiAgICBjb25zdCBlID0gSWModCk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuVHUpIGUub3Uobi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB3Yyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuVHUuc2hpZnQoKSwgaSA9IHRpLmZyb20ocywgZSwgbik7XG4gICAgYXdhaXQgdWModCwgKCgpID0+IHQucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGkpKSksIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxuICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgIGF3YWl0IGNjKHQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYyh0LCBlKSB7XG4gICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgYWZ0ZXIgdGhlIHdyaXRlIGhhbmRzaGFrZSBjb21wbGV0ZXMsIGEgd3JpdGVcbiAgICAvLyBvcGVyYXRpb24gZmFpbGVkIGFuZCB3ZSBmYWlsIHRoZSBwZW5kaW5nIG9wZXJhdGlvbi5cbiAgICBlICYmIEljKHQpLnJ1ICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChuID0gZS5jb2RlLCBvaShuKSAmJiBuICE9PSBxLkFCT1JURUQpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgcGVybWFuZW50IGVycm9yLCB0aGUgcmVxdWVzdCBpdHNlbGYgd2FzIHRoZSBwcm9ibGVtXG4gICAgICAgICAgICAvLyBzbyBpdCdzIG5vdCBnb2luZyB0byBzdWNjZWVkIGlmIHdlIHJlc2VuZCBpdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LlR1LnNoaWZ0KCk7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xuICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XG4gICAgICAgICAgICAvLyByZXN0YXJ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgSWModCkuR28oKSwgYXdhaXQgdWModCwgKCgpID0+IHQucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgZSkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgY2ModCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG47XG4gICAgfSh0LCBlKSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICBsYyh0KSAmJiBmYyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIG4uYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE4oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICBjb25zdCBzID0gZWMobik7XG4gICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgIG4uQXUuYWRkKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBXdShuKSwgcyAmJiBcbiAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgbi5QdS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoZSksIFxuICAgIG4uQXUuZGVsZXRlKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCB6dShuKTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cbiAqLyBhc3luYyBmdW5jdGlvbiB5Yyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgZSA/IChuLkF1LmRlbGV0ZSgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIGF3YWl0IHp1KG4pKSA6IGUgfHwgKG4uQXUuYWRkKDIgLyogT2ZmbGluZUNhdXNlLklzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgV3UobiksIG4uUHUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIHBjKHQpIHtcbiAgICByZXR1cm4gdC5WdSB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuVnUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgICAgICByZXR1cm4gcy5sdSgpLCBuZXcgcXUoZSwgcy5jb25uZWN0aW9uLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLnNlcmlhbGl6ZXIsIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBvbzogc2MuYmluZChudWxsLCB0KSxcbiAgICAgICAgY286IGljLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGV1OiByYy5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuUnUucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5WdS5HbygpLCB0Yyh0KSA/IFp1KHQpIDogdC5QdS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpIDogKGF3YWl0IHQuVnUuc3RvcCgpLCBcbiAgICAgICAgbmModCkpO1xuICAgIH0pKSksIHQuVnU7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBJYyh0KSB7XG4gICAgcmV0dXJuIHQuU3UgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LlN1ID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTCh0KTtcbiAgICAgICAgcmV0dXJuIHMubHUoKSwgbmV3IFV1KGUsIHMuY29ubmVjdGlvbiwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5zZXJpYWxpemVyLCBuKTtcbiAgICB9KHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgb286IGRjLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGNvOiBtYy5iaW5kKG51bGwsIHQpLFxuICAgICAgICBjdTogX2MuYmluZChudWxsLCB0KSxcbiAgICAgICAgdXU6IHdjLmJpbmQobnVsbCwgdClcbiAgICB9KSwgdC5SdS5wdXNoKChhc3luYyBlID0+IHtcbiAgICAgICAgZSA/ICh0LlN1LkdvKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IGNjKHQpKSA6IChhd2FpdCB0LlN1LnN0b3AoKSwgdC5UdS5sZW5ndGggPiAwICYmIChOKFwiUmVtb3RlU3RvcmVcIiwgYFN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoICR7dC5UdS5sZW5ndGh9IHBlbmRpbmcgd3JpdGVzYCksIFxuICAgICAgICB0LlR1ID0gW10pKTtcbiAgICB9KSkpLCB0LlN1O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cbiAqXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gKlxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXG4gKlxuICogTm90ZTogV2UgaW1wbGVtZW50IGBQcm9taXNlTGlrZWAgaW5zdGVhZCBvZiBgUHJvbWlzZWAsIGFzIHRoZSBgUHJvbWlzZWAgdHlwZVxuICogaW4gbmV3ZXIgdmVyc2lvbnMgb2YgVHlwZVNjcmlwdCBkZWZpbmVzIGBmaW5hbGx5YCwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpblxuICogSUUuXG4gKi9cbmNsYXNzIFRjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMudGltZXJJZCA9IGUsIHRoaXMudGFyZ2V0VGltZU1zID0gbiwgdGhpcy5vcCA9IHMsIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gaSwgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgSywgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpLCBcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKCh0ID0+IHt9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSAtIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxuICAgICAqIEBwYXJhbSBpZCAtIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXG4gICAgICogQHBhcmFtIGRlbGF5TXMgLSBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxuICAgICAqIEBwYXJhbSBvcCAtIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZUFuZFNjaGVkdWxlKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IERhdGUubm93KCkgKyBuLCBvID0gbmV3IFRjKHQsIGUsIHIsIHMsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQodCkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKHQpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IFUocS5DQU5DRUxMRUQsIFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiICsgKHQgPyBcIjogXCIgKyB0IDogXCJcIikpKSk7XG4gICAgfVxuICAgIGhhbmRsZURlbGF5RWxhcHNlZCgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgPyAodGhpcy5jbGVhclRpbWVvdXQoKSwgXG4gICAgICAgIHRoaXMub3AoKS50aGVuKCh0ID0+IHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KSkpKSA6IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyksIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSwgXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmVzdG9yZUVycm9yIHRoYXQgY2FuIGJlIHN1cmZhY2VkIHRvIHRoZSB1c2VyIGlmIHRoZSBwcm92aWRlZFxuICogZXJyb3IgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gUmUtdGhyb3dzIHRoZSBlcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gRWModCwgZSkge1xuICAgIGlmIChrKFwiQXN5bmNRdWV1ZVwiLCBgJHtlfTogJHt0fWApLCBEdCh0KSkgcmV0dXJuIG5ldyBVKHEuVU5BVkFJTEFCTEUsIGAke2V9OiAke3R9YCk7XG4gICAgdGhyb3cgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIEFjIHtcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQgPyAoZSwgbikgPT4gdChlLCBuKSB8fCBodC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiAodCwgZSkgPT4gaHQuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpLCBcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IGhzKCksIHRoaXMuc29ydGVkU2V0ID0gbmV3IHBlKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXG4gICAgICogY29tcGFyYXRvci5cbiAgICAgKi8gICAgc3RhdGljIGVtcHR5U2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBYyh0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XG4gICAgICovICAgIGluZGV4T2YodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZihlKSA6IC0xO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovICAgIGFkZCh0KSB7XG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxuICAgICAgICBjb25zdCBlID0gdGhpcy5kZWxldGUodC5rZXkpO1xuICAgICAgICByZXR1cm4gZS5jb3B5KGUua2V5ZWRNYXAuaW5zZXJ0KHQua2V5LCB0KSwgZS5zb3J0ZWRTZXQuaW5zZXJ0KHQsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUodCksIHRoaXMuc29ydGVkU2V0LnJlbW92ZShlKSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIEFjKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCksIG4gPSB0LnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKCF0LmlzRXF1YWwocykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgMCA9PT0gdC5sZW5ndGggPyBcIkRvY3VtZW50U2V0ICgpXCIgOiBcIkRvY3VtZW50U2V0IChcXG4gIFwiICsgdC5qb2luKFwiICBcXG5cIikgKyBcIlxcbilcIjtcbiAgICB9XG4gICAgY29weSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQWM7XG4gICAgICAgIHJldHVybiBuLmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3IsIG4ua2V5ZWRNYXAgPSB0LCBuLnNvcnRlZFNldCA9IGUsIG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxuICovIGNsYXNzIFJjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5EdSA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2sodCkge1xuICAgICAgICBjb25zdCBlID0gdC5kb2Mua2V5LCBuID0gdGhpcy5EdS5nZXQoZSk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMuRHUgPSB0aGlzLkR1Lmluc2VydChlLCB0KSA6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gdC50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLkR1ID0gdGhpcy5EdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5EdSA9IHRoaXMuRHUuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLkR1ID0gdGhpcy5EdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5EdSA9IHRoaXMuRHUucmVtb3ZlKGUpIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuRHUgPSB0aGlzLkR1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuRHUgPSB0aGlzLkR1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgICQoKSA6IHRoaXMuRHUgPSB0aGlzLkR1Lmluc2VydChlLCB0KTtcbiAgICB9XG4gICAgQ3UoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHUuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQucHVzaChuKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgdmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUsIGMpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuZG9jcyA9IGUsIHRoaXMub2xkRG9jcyA9IG4sIHRoaXMuZG9jQ2hhbmdlcyA9IHMsIHRoaXMubXV0YXRlZEtleXMgPSBpLCBcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSByLCB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBvLCB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gdSwgXG4gICAgICAgIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9IGM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHModCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgci5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgbmV3IHZjKHQsIGUsIEFjLmVtcHR5U2V0KGUpLCByLCBuLCBzLCBcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gITAsIFxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEsIGkpO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZSAmJiB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPT09IHQuaGFzQ2FjaGVkUmVzdWx0cyAmJiB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPT09IHQuc3luY1N0YXRlQ2hhbmdlZCAmJiB0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwodC5tdXRhdGVkS2V5cykgJiYgWm4odGhpcy5xdWVyeSwgdC5xdWVyeSkgJiYgdGhpcy5kb2NzLmlzRXF1YWwodC5kb2NzKSAmJiB0aGlzLm9sZERvY3MuaXNFcXVhbCh0Lm9sZERvY3MpKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NDaGFuZ2VzLCBuID0gdC5kb2NDaGFuZ2VzO1xuICAgICAgICBpZiAoZS5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQrKykgaWYgKGVbdF0udHlwZSAhPT0gblt0XS50eXBlIHx8ICFlW3RdLmRvYy5pc0VxdWFsKG5bdF0uZG9jKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxuICovIGNsYXNzIFBjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy54dSA9IHZvaWQgMCwgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIGJjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IG9zKCh0ID0+IHRzKHQpKSwgWm4pLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLk51ID0gbmV3IFNldDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFZjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMSwgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIgfHwgKGkgPSAhMCwgciA9IG5ldyBQYyksIGkpIHRyeSB7XG4gICAgICAgIHIueHUgPSBhd2FpdCBuLm9uTGlzdGVuKHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEVjKHQsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtlcyhlLnF1ZXJ5KX0nIGZhaWxlZGApO1xuICAgICAgICByZXR1cm4gdm9pZCBlLm9uRXJyb3Iobik7XG4gICAgfVxuICAgIGlmIChuLnF1ZXJpZXMuc2V0KHMsIHIpLCByLmxpc3RlbmVycy5wdXNoKGUpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICBlLmt1KG4ub25saW5lU3RhdGUpLCByLnh1KSB7XG4gICAgICAgIGUuTXUoci54dSkgJiYgeGMobik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBTYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITE7XG4gICAgY29uc3QgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgY29uc3QgdCA9IHIubGlzdGVuZXJzLmluZGV4T2YoZSk7XG4gICAgICAgIHQgPj0gMCAmJiAoci5saXN0ZW5lcnMuc3BsaWNlKHQsIDEpLCBpID0gMCA9PT0gci5saXN0ZW5lcnMubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGkpIHJldHVybiBuLnF1ZXJpZXMuZGVsZXRlKHMpLCBuLm9uVW5saXN0ZW4ocyk7XG59XG5cbmZ1bmN0aW9uIERjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBsZXQgcyA9ICExO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnF1ZXJ5LCBpID0gbi5xdWVyaWVzLmdldChlKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBpLmxpc3RlbmVycykgZS5NdSh0KSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIGkueHUgPSB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHMgJiYgeGMobik7XG59XG5cbmZ1bmN0aW9uIENjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KSwgaSA9IHMucXVlcmllcy5nZXQoZSk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgdCBvZiBpLmxpc3RlbmVycykgdC5vbkVycm9yKG4pO1xuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXG4gICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXG4gICAgICAgIHMucXVlcmllcy5kZWxldGUoZSk7XG59XG5cbi8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuZnVuY3Rpb24geGModCkge1xuICAgIHQuTnUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQubmV4dCgpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqLyBjbGFzcyBOYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5PdSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiR1ID0gITEsIHRoaXMuRnUgPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBNdSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZG9jQ2hhbmdlcykgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgZS5wdXNoKG4pO1xuICAgICAgICAgICAgdCA9IG5ldyB2Yyh0LnF1ZXJ5LCB0LmRvY3MsIHQub2xkRG9jcywgZSwgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUsIHQuc3luY1N0YXRlQ2hhbmdlZCwgXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITAsIHQuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHUgPyB0aGlzLkJ1KHQpICYmICh0aGlzLk91Lm5leHQodCksIGUgPSAhMCkgOiB0aGlzLkx1KHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLnF1KHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy5GdSA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLk91LmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAga3UodCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnUgJiYgIXRoaXMuJHUgJiYgdGhpcy5MdSh0aGlzLkZ1LCB0KSAmJiAodGhpcy5xdSh0aGlzLkZ1KSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIEx1KHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLlV1IHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgdC5oYXNDYWNoZWRSZXN1bHRzIHx8IFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IGUpO1xuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzLCBoYXZlIGNhY2hlZCByZXN1bHRzIGJlZm9yZSxcbiAgICAgICAgLy8gb3Igd2UgYXJlIG9mZmxpbmUuXG4gICAgICAgIH1cbiAgICBCdSh0KSB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxuICAgICAgICAvLyBwcm9wYWdhdGUuXG4gICAgICAgIGlmICh0LmRvY0NoYW5nZXMubGVuZ3RoID4gMCkgcmV0dXJuICEwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5GdSAmJiB0aGlzLkZ1Lmhhc1BlbmRpbmdXcml0ZXMgIT09IHQuaGFzUGVuZGluZ1dyaXRlcztcbiAgICAgICAgcmV0dXJuICEoIXQuc3luY1N0YXRlQ2hhbmdlZCAmJiAhZSkgJiYgITAgPT09IHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXG4gICAgICAgIH1cbiAgICBxdSh0KSB7XG4gICAgICAgIHQgPSB2Yy5mcm9tSW5pdGlhbERvY3VtZW50cyh0LnF1ZXJ5LCB0LmRvY3MsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0Lmhhc0NhY2hlZFJlc3VsdHMpLCBcbiAgICAgICAgdGhpcy4kdSA9ICEwLCB0aGlzLk91Lm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIGtjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuS3UgPSB0LCB0aGlzLmJ5dGVMZW5ndGggPSBlO1xuICAgIH1cbiAgICBHdSgpIHtcbiAgICAgICAgcmV0dXJuIFwibWV0YWRhdGFcIiBpbiB0aGlzLkt1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIE1jIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQ7XG4gICAgfVxuICAgIGlyKHQpIHtcbiAgICAgICAgcmV0dXJuICRpKHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIHJyKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWV0YWRhdGEuZXhpc3RzID8gS2kodGhpcy5zZXJpYWxpemVyLCB0LmRvY3VtZW50LCAhMSkgOiBhbi5uZXdOb0RvY3VtZW50KHRoaXMuaXIodC5tZXRhZGF0YS5uYW1lKSwgdGhpcy51cih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIHVyKHQpIHtcbiAgICAgICAgcmV0dXJuIE5pKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzIE9jIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuUXUgPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSBuLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW10sIFxuICAgICAgICAvKiogQmF0Y2hlZCBkb2N1bWVudHMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW10sIFxuICAgICAgICAvKiogVGhlIGNvbGxlY3Rpb24gZ3JvdXBzIGFmZmVjdGVkIGJ5IHRoaXMgYnVuZGxlLiAqL1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMgPSBuZXcgU2V0LCB0aGlzLnByb2dyZXNzID0gJGModCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIGp1KHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIGlmICh0Lkt1Lm5hbWVkUXVlcnkpIHRoaXMucXVlcmllcy5wdXNoKHQuS3UubmFtZWRRdWVyeSk7IGVsc2UgaWYgKHQuS3UuZG9jdW1lbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHQuS3UuZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICAgICAgfSksIHQuS3UuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKytlO1xuICAgICAgICAgICAgY29uc3QgbiA9IHV0LmZyb21TdHJpbmcodC5LdS5kb2N1bWVudE1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzLmFkZChuLmdldChuLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgfSBlbHNlIHQuS3UuZG9jdW1lbnQgJiYgKHRoaXMuZG9jdW1lbnRzW3RoaXMuZG9jdW1lbnRzLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gdC5LdS5kb2N1bWVudCwgXG4gICAgICAgICsrZSk7XG4gICAgICAgIHJldHVybiBlICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IGUsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICB6dSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwLCBuID0gbmV3IE1jKHRoaXMuc2VyaWFsaXplcik7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSBpZiAocy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5pcihzLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoZS5nZXQobikgfHwgZ3MoKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IG11KHRoaXMubG9jYWxTdG9yZSwgbmV3IE1jKHRoaXMuc2VyaWFsaXplciksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLlF1LmlkKSwgZSA9IHRoaXMuenUodGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBndSh0aGlzLmxvY2FsU3RvcmUsIHQsIGUuZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwge1xuICAgICAgICAgICAgcHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICAgICAgICBXdTogdGhpcy5jb2xsZWN0aW9uR3JvdXBzLFxuICAgICAgICAgICAgSHU6IHRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gJGModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgRmMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgQmMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIExjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5KdSA9IGUsIHRoaXMuWXUgPSBudWxsLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMuWHUgPSBncygpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IGdzKCksIHRoaXMuWnUgPSBpcyh0KSwgdGhpcy50YyA9IG5ldyBBYyh0aGlzLlp1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgZWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp1O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIG5jKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyBlLnNjIDogbmV3IFJjLCBzID0gZSA/IGUudGMgOiB0aGlzLnRjO1xuICAgICAgICBsZXQgaSA9IGUgPyBlLm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgciA9IHMsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IHUgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMubGFzdCgpIDogbnVsbCwgYyA9IFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKHQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBzLmdldCh0KSwgaCA9IG5zKHRoaXMucXVlcnksIGUpID8gZSA6IG51bGwsIGwgPSAhIWEgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXMoYS5rZXkpLCBmID0gISFoICYmIChoLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhoLmtleSkgJiYgaC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IGQgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhICYmIGgpIHtcbiAgICAgICAgICAgICAgICBhLmRhdGEuaXNFcXVhbChoLmRhdGEpID8gbCAhPT0gZiAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITApIDogdGhpcy5pYyhhLCBoKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITAsICh1ICYmIHRoaXMuWnUoaCwgdSkgPiAwIHx8IGMgJiYgdGhpcy5adShoLCBjKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhYSAmJiBoID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICB9KSwgZCA9ICEwKSA6IGEgJiYgIWggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGFcbiAgICAgICAgICAgIH0pLCBkID0gITAsICh1IHx8IGMpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgZCAmJiAoaCA/IChyID0gci5hZGQoaCksIGkgPSBmID8gaS5hZGQodCkgOiBpLmRlbGV0ZSh0KSkgOiAociA9IHIuZGVsZXRlKHQpLCBpID0gaS5kZWxldGUodCkpKTtcbiAgICAgICAgfSkpLCBudWxsICE9PSB0aGlzLnF1ZXJ5LmxpbWl0KSBmb3IgKDtyLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlID8gci5sYXN0KCkgOiByLmZpcnN0KCk7XG4gICAgICAgICAgICByID0gci5kZWxldGUodC5rZXkpLCBpID0gaS5kZWxldGUodC5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGM6IHIsXG4gICAgICAgICAgICBzYzogbixcbiAgICAgICAgICAgIGppOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWModCwgZSkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiB0Lmhhc0xvY2FsTXV0YXRpb25zICYmIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICFlLmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXG4gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudGM7XG4gICAgICAgIHRoaXMudGMgPSB0LnRjLCB0aGlzLm11dGF0ZWRLZXlzID0gdC5tdXRhdGVkS2V5cztcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcbiAgICAgICAgY29uc3QgaSA9IHQuc2MuQ3UoKTtcbiAgICAgICAgaS5zb3J0KCgodCwgZSkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbih0KSAtIG4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQudHlwZSwgZS50eXBlKSB8fCB0aGlzLlp1KHQuZG9jLCBlLmRvYykpKSwgdGhpcy5yYyhuKTtcbiAgICAgICAgY29uc3QgciA9IGUgPyB0aGlzLm9jKCkgOiBbXSwgbyA9IDAgPT09IHRoaXMuWHUuc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNTdGF0ZS5TeW5jZWQgKi8gOiAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyAsIHUgPSBvICE9PSB0aGlzLll1O1xuICAgICAgICBpZiAodGhpcy5ZdSA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IHUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyB2Yyh0aGlzLnF1ZXJ5LCB0LnRjLCBzLCBpLCB0Lm11dGF0ZWRLZXlzLCAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyA9PT0gbywgdSwgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCAhIW4gJiYgbi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSxcbiAgICAgICAgICAgICAgICB1YzogclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1YzogclxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICBrdSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyA9PT0gdCA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIHRjOiB0aGlzLnRjLFxuICAgICAgICAgICAgc2M6IG5ldyBSYyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxuICAgICAgICAgICAgamk6ICExXG4gICAgICAgIH0sIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpKSA6IHtcbiAgICAgICAgICAgIHVjOiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXG4gICAgICovICAgIGNjKHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXG4gICAgICAgIHJldHVybiAhdGhpcy5KdS5oYXModCkgJiYgKFxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXG4gICAgICAgICEhdGhpcy50Yy5oYXModCkgJiYgIXRoaXMudGMuZ2V0KHQpLmhhc0xvY2FsTXV0YXRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxuICAgICAqLyAgICByYyh0KSB7XG4gICAgICAgIHQgJiYgKHQuYWRkZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLkp1ID0gdGhpcy5KdS5hZGQodCkpKSwgdC5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHt9KSksIFxuICAgICAgICB0LnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLkp1ID0gdGhpcy5KdS5kZWxldGUodCkpKSwgdGhpcy5jdXJyZW50ID0gdC5jdXJyZW50KTtcbiAgICB9XG4gICAgb2MoKSB7XG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHJldHVybiBbXTtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlh1O1xuICAgICAgICB0aGlzLlh1ID0gZ3MoKSwgdGhpcy50Yy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2ModC5rZXkpICYmICh0aGlzLlh1ID0gdGhpcy5YdS5hZGQodC5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuWHUuaGFzKHQpIHx8IGUucHVzaChuZXcgQmModCkpO1xuICAgICAgICB9KSksIHRoaXMuWHUuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmhhcyhuKSB8fCBlLnB1c2gobmV3IEZjKG4pKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBhYyh0KSB7XG4gICAgICAgIHRoaXMuSnUgPSB0LnNyLCB0aGlzLlh1ID0gZ3MoKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubmModC5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoZSwgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgaGMoKSB7XG4gICAgICAgIHJldHVybiB2Yy5mcm9tSW5pdGlhbERvY3VtZW50cyh0aGlzLnF1ZXJ5LCB0aGlzLnRjLCB0aGlzLm11dGF0ZWRLZXlzLCAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyA9PT0gdGhpcy5ZdSwgdGhpcy5oYXNDYWNoZWRSZXN1bHRzKTtcbiAgICB9XG59XG5cbi8qKlxuICogUXVlcnlWaWV3IGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSB0aGF0IFN5bmNFbmdpbmUgbmVlZHMgdG8ga2VlcCB0cmFjayBvZiBmb3JcbiAqIGEgcGFydGljdWxhciBxdWVyeS5cbiAqL1xuY2xhc3MgcWMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMudmlldyA9IG47XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi8gY2xhc3MgVWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGMgPSAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYFN5bmNFbmdpbmVgIGNvb3JkaW5hdGluZyB3aXRoIG90aGVyIHBhcnRzIG9mIFNESy5cbiAqXG4gKiBUaGUgcGFydHMgb2YgU3luY0VuZ2luZSB0aGF0IGFjdCBhcyBhIGNhbGxiYWNrIHRvIFJlbW90ZVN0b3JlIG5lZWQgdG8gYmVcbiAqIHJlZ2lzdGVyZWQgaW5kaXZpZHVhbGx5LiBUaGlzIGlzIGRvbmUgaW4gYHN5bmNFbmdpbmVXcml0ZSgpYCBhbmRcbiAqIGBzeW5jRW5naW5lTGlzdGVuKClgIChhcyB3ZWxsIGFzIGBhcHBseVByaW1hcnlTdGF0ZSgpYCkgYXMgdGhlc2UgbWV0aG9kc1xuICogc2VydmUgYXMgZW50cnkgcG9pbnRzIHRvIFJlbW90ZVN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqLyBjbGFzcyBLYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5yZW1vdGVTdG9yZSA9IGUsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHMsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHIsIHRoaXMuZmMgPSB7fSwgdGhpcy5kYyA9IG5ldyBvcygodCA9PiB0cyh0KSksIFpuKSwgXG4gICAgICAgIHRoaXMuX2MgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBrZXlzIG9mIGRvY3VtZW50cyB0aGF0IGFyZSBpbiBsaW1ibyBmb3Igd2hpY2ggd2UgaGF2ZW4ndCB5ZXQgc3RhcnRlZCBhXG4gICAgICAgICAqIGxpbWJvIHJlc29sdXRpb24gcXVlcnkuIFRoZSBzdHJpbmdzIGluIHRoaXMgc2V0IGFyZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgICogYGtleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpYCB3aGVyZSBga2V5YCBpcyBhIGBEb2N1bWVudEtleWAgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYFNldGAgdHlwZSB3YXMgY2hvc2VuIGJlY2F1c2UgaXQgcHJvdmlkZXMgZWZmaWNpZW50IGxvb2t1cCBhbmQgcmVtb3ZhbFxuICAgICAgICAgKiBvZiBhcmJpdHJhcnkgZWxlbWVudHMgYW5kIGl0IGFsc28gbWFpbnRhaW5zIGluc2VydGlvbiBvcmRlciwgcHJvdmlkaW5nIHRoZVxuICAgICAgICAgKiBkZXNpcmVkIHF1ZXVlLWxpa2UgRklGTyBzZW1hbnRpY3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndjID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgdGFyZ2V0IElEIGZvciBlYWNoIGRvY3VtZW50IHRoYXQgaXMgaW4gbGltYm8gd2l0aCBhblxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYyA9IG5ldyBwZShodC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nYyA9IG5ldyBNYXAsIHRoaXMueWMgPSBuZXcgJG8sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xuICAgICAgICB0aGlzLkljID0ge30sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXG4gICAgICAgIHRoaXMuVGMgPSBuZXcgTWFwLCB0aGlzLkVjID0gbG8ua24oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuQWMgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5BYztcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gR2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBwYSh0KTtcbiAgICBsZXQgcywgaTtcbiAgICBjb25zdCByID0gbi5kYy5nZXQoZSk7XG4gICAgaWYgKHIpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHMgPSByLnRhcmdldElkLCBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQocyksIGkgPSByLnZpZXcuaGMoKTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBodShuLmxvY2FsU3RvcmUsIEpuKGUpKSwgciA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcyA9IHQudGFyZ2V0SWQsIGkgPSBhd2FpdCBRYyhuLCBlLCBzLCBcImN1cnJlbnRcIiA9PT0gciwgdC5yZXN1bWVUb2tlbiksIG4uaXNQcmltYXJ5Q2xpZW50ICYmIEh1KG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIFFjKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIHQuUmMgPSAoZSwgbiwgcykgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGUudmlldy5uYyhuKTtcbiAgICAgICAgaS5qaSAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBmdSh0LmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogdH0pID0+IGUudmlldy5uYyh0LCBpKSkpKTtcbiAgICAgICAgY29uc3QgciA9IHMgJiYgcy50YXJnZXRDaGFuZ2VzLmdldChlLnRhcmdldElkKSwgbyA9IGUudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgcik7XG4gICAgICAgIHJldHVybiBpYSh0LCBlLnRhcmdldElkLCBvLnVjKSwgby5zbmFwc2hvdDtcbiAgICB9KHQsIGUsIG4sIHMpO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBmdSh0LmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBvID0gbmV3IExjKGUsIHIuc3IpLCB1ID0gby5uYyhyLmRvY3VtZW50cyksIGMgPSBnaS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UobiwgcyAmJiBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSB0Lm9ubGluZVN0YXRlLCBpKSwgYSA9IG8uYXBwbHlDaGFuZ2VzKHUsIFxuICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgYyk7XG4gICAgaWEodCwgbiwgYS51Yyk7XG4gICAgY29uc3QgaCA9IG5ldyBxYyhlLCBuLCBvKTtcbiAgICByZXR1cm4gdC5kYy5zZXQoZSwgaCksIHQuX2MuaGFzKG4pID8gdC5fYy5nZXQobikucHVzaChlKSA6IHQuX2Muc2V0KG4sIFsgZSBdKSwgYS5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIGpjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IG4uZGMuZ2V0KGUpLCBpID0gbi5fYy5nZXQocy50YXJnZXRJZCk7XG4gICAgaWYgKGkubGVuZ3RoID4gMSkgcmV0dXJuIG4uX2Muc2V0KHMudGFyZ2V0SWQsIGkuZmlsdGVyKCh0ID0+ICFabih0LCBlKSkpKSwgdm9pZCBuLmRjLmRlbGV0ZShlKTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChzLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpIHx8IGF3YWl0IGx1KG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHMudGFyZ2V0SWQpLCBKdShuLnJlbW90ZVN0b3JlLCBzLnRhcmdldElkKSwgXG4gICAgICAgICAgICBuYShuLCBzLnRhcmdldElkKTtcbiAgICAgICAgfSkpLmNhdGNoKFJ0KTtcbiAgICB9IGVsc2UgbmEobiwgcy50YXJnZXRJZCksIGF3YWl0IGx1KG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIHpjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSWEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gaXQubm93KCksIGkgPSBlLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIGdzKCkpO1xuICAgICAgICAgICAgbGV0IHIsIG87XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIGtleXMgZG8gbm90IGhhdmUgYSByZW1vdGUgdmVyc2lvbiBpbiB0aGUgY2FjaGUsIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBpcyBuZWVkZWQgdG8gY3JlYXRlIHRoZSByaWdodCBvdmVybGF5IG11dGF0aW9uOiBpZiBubyByZW1vdGUgdmVyc2lvblxuICAgICAgICAgICAgICAgIC8vIHByZXNlbnRzLCB3ZSBkbyBub3QgbmVlZCB0byBjcmVhdGUgb3ZlcmxheXMgYXMgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIFRPRE8oT3ZlcmxheSk6IElzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBkZXRlcm1pbmUgdGhpcz8gVXNpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gIGRvY3VtZW50IHZlcnNpb24gZG9lcyBub3Qgd29yayBiZWNhdXNlIGxvY2FsIG11dGF0aW9ucyBzZXQgdGhlbSBiYWNrXG4gICAgICAgICAgICAgICAgLy8gIHRvIDAuXG4gICAgICAgICAgICAgICAgbGV0IHUgPSBjcygpLCBjID0gZ3MoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5YaS5nZXRFbnRyaWVzKHQsIGkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1ID0gdCwgdS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5pc1ZhbGlkRG9jdW1lbnQoKSB8fCAoYyA9IGMuYWRkKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldE92ZXJsYXllZERvY3VtZW50cyh0LCB1KSkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByID0gaTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEdzKHQsIHIuZ2V0KHQua2V5KS5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgenModC5rZXksIGUsIGNuKGUudmFsdWUubWFwVmFsdWUpLCBGcy5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5hZGRNdXRhdGlvbkJhdGNoKHQsIHMsIG8sIGUpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHIsIGMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXModCwgZS5iYXRjaElkLCBzKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkudGhlbigoKCkgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogbHMocilcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0ocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24odC5iYXRjaElkKSwgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgbGV0IHMgPSB0LkljW3QuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICBzIHx8IChzID0gbmV3IHBlKGV0KSk7XG4gICAgICAgICAgICBzID0gcy5pbnNlcnQoZSwgbiksIHQuSWNbdC5jdXJyZW50VXNlci50b0tleSgpXSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcbiAqIGl0LlxuICovIChzLCB0LmJhdGNoSWQsIG4pLCBhd2FpdCB1YShzLCB0LmNoYW5nZXMpLCBhd2FpdCBjYyhzLnJlbW90ZVN0b3JlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIElmIHdlIGNhbid0IHBlcnNpc3QgdGhlIG11dGF0aW9uLCB3ZSByZWplY3QgdGhlIHVzZXIgY2FsbGJhY2sgYW5kXG4gICAgICAgIC8vIGRvbid0IHNlbmQgdGhlIG11dGF0aW9uLiBUaGUgdXNlciBjYW4gdGhlbiByZXRyeSB0aGUgd3JpdGUuXG4gICAgICAgIGNvbnN0IGUgPSBFYyh0LCBcIkZhaWxlZCB0byBwZXJzaXN0IHdyaXRlXCIpO1xuICAgICAgICBuLnJlamVjdChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBvbmUgcmVtb3RlIGV2ZW50IHRvIHRoZSBzeW5jIGVuZ2luZSwgbm90aWZ5aW5nIGFueSB2aWV3cyBvZiB0aGVcbiAqIGNoYW5nZXMsIGFuZCByZWxlYXNpbmcgYW55IHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IHdvdWxkIGJlY29tZVxuICogdmlzaWJsZSBiZWNhdXNlIG9mIHRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoZSByZW1vdGUgZXZlbnQgY29udGFpbnMuXG4gKi8gYXN5bmMgZnVuY3Rpb24gV2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB1dShuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmdjLmdldChlKTtcbiAgICAgICAgICAgIHMgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgRih0LmFkZGVkRG9jdW1lbnRzLnNpemUgKyB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PSAxKSwgXG4gICAgICAgICAgICB0LmFkZGVkRG9jdW1lbnRzLnNpemUgPiAwID8gcy5sYyA9ICEwIDogdC5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCA/IEYocy5sYykgOiB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKEYocy5sYyksIFxuICAgICAgICAgICAgcy5sYyA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgdWEobiwgdCwgZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBSdCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gSGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXG4gICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxuICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cbiAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgaWYgKHMuaXNQcmltYXJ5Q2xpZW50ICYmIDAgLyogT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUgKi8gPT09IG4gfHwgIXMuaXNQcmltYXJ5Q2xpZW50ICYmIDEgLyogT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUgKi8gPT09IG4pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBzLmRjLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcy52aWV3Lmt1KGUpO1xuICAgICAgICAgICAgaS5zbmFwc2hvdCAmJiB0LnB1c2goaS5zbmFwc2hvdCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICBuLm9ubGluZVN0YXRlID0gZTtcbiAgICAgICAgICAgIGxldCBzID0gITE7XG4gICAgICAgICAgICBuLnF1ZXJpZXMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5saXN0ZW5lcnMpIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIHQua3UoZSkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHMgJiYgeGMobik7XG4gICAgICAgIH0ocy5ldmVudE1hbmFnZXIsIGUpLCB0Lmxlbmd0aCAmJiBzLmZjLmV1KHQpLCBzLm9ubGluZVN0YXRlID0gZSwgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIEpjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gcy5nYy5nZXQoZSksIHIgPSBpICYmIGkua2V5O1xuICAgIGlmIChyKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCB0ID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuICAgICAgICAvLyBUT0RPKGIvMjE3MTg5MjE2KTogVGhpcyBsaW1ibyBkb2N1bWVudCBzaG91bGQgaWRlYWxseSBoYXZlIGEgcmVhZCB0aW1lLFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIHBpY2tlZCB1cCBieSBhbnkgcmVhZC10aW1lIGJhc2VkIHNjYW5zLiBUaGUgYmFja2VuZCxcbiAgICAgICAgLy8gaG93ZXZlciwgZG9lcyBub3Qgc2VuZCBhIHJlYWQgdGltZSBmb3IgdGFyZ2V0IHJlbW92YWxzLlxuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChyLCBhbi5uZXdOb0RvY3VtZW50KHIsIHJ0Lm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBncygpLmFkZChyKSwgaSA9IG5ldyBtaShydC5taW4oKSwgXG4gICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIG5ldyBNYXAsIFxuICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgcGUoZXQpLCB0LCBuKTtcbiAgICAgICAgYXdhaXQgV2MocywgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHMubWMgPSBzLm1jLnJlbW92ZShyKSwgcy5nYy5kZWxldGUoZSksIG9hKHMpO1xuICAgIH0gZWxzZSBhd2FpdCBsdShzLmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiBuYShzLCBlLCBuKSkpLmNhdGNoKFJ0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gWWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gZS5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBydShuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIGVhKG4sIHMsIC8qZXJyb3I9Ki8gbnVsbCksIHRhKG4sIHMpLCBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUocywgXCJhY2tub3dsZWRnZWRcIiksIFxuICAgICAgICBhd2FpdCB1YShuLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IFJ0KHQpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gWGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChGKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIFxuICAgICAgICAgICAgICAgIG4ubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpKSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIHMsIGUpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyh0LCBzKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHQsIHMpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIGVhKHMsIGUsIG4pLCB0YShzLCBlKSwgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbiksIFxuICAgICAgICBhd2FpdCB1YShzLCB0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIGF3YWl0IFJ0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXG4gKiBhcmUgYWNrbm93bGVkZ2VkIC5cbiAqLyBhc3luYyBmdW5jdGlvbiBaYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgZWMobi5yZW1vdGVTdG9yZSkgfHwgTihcIlN5bmNFbmdpbmVcIiwgXCJUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJ2F3YWl0UGVuZGluZ1dyaXRlcygpJyB3aWxsIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgbmV0d29yayBpcyBlbmFibGVkLlwiKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEwodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IHQpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIGUucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gbi5UYy5nZXQodCkgfHwgW107XG4gICAgICAgIHMucHVzaChlKSwgbi5UYy5zZXQodCwgcyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gRWModCwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIGUucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIHRhKHQsIGUpIHtcbiAgICAodC5UYy5nZXQoZSkgfHwgW10pLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0LnJlc29sdmUoKTtcbiAgICB9KSksIHQuVGMuZGVsZXRlKGUpO1xufVxuXG4vKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovIGZ1bmN0aW9uIGVhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICBsZXQgaSA9IHMuSWNbcy5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xuICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxuICAgICAgICBpZiAoaSkge1xuICAgICAgICBjb25zdCB0ID0gaS5nZXQoZSk7XG4gICAgICAgIHQgJiYgKG4gPyB0LnJlamVjdChuKSA6IHQucmVzb2x2ZSgpLCBpID0gaS5yZW1vdmUoZSkpLCBzLkljW3MuY3VycmVudFVzZXIudG9LZXkoKV0gPSBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbmEodCwgZSwgbiA9IG51bGwpIHtcbiAgICB0LnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSk7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuX2MuZ2V0KGUpKSB0LmRjLmRlbGV0ZShzKSwgbiAmJiB0LmZjLnZjKHMsIG4pO1xuICAgIGlmICh0Ll9jLmRlbGV0ZShlKSwgdC5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgdC55Yy5wcyhlKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQueWMuY29udGFpbnNLZXkoZSkgfHwgXG4gICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgICAgIHNhKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzYSh0LCBlKSB7XG4gICAgdC53Yy5kZWxldGUoZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IHQubWMuZ2V0KGUpO1xuICAgIG51bGwgIT09IG4gJiYgKEp1KHQucmVtb3RlU3RvcmUsIG4pLCB0Lm1jID0gdC5tYy5yZW1vdmUoZSksIHQuZ2MuZGVsZXRlKG4pLCBvYSh0KSk7XG59XG5cbmZ1bmN0aW9uIGlhKHQsIGUsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbikgaWYgKHMgaW5zdGFuY2VvZiBGYykgdC55Yy5hZGRSZWZlcmVuY2Uocy5rZXksIGUpLCByYSh0LCBzKTsgZWxzZSBpZiAocyBpbnN0YW5jZW9mIEJjKSB7XG4gICAgICAgIE4oXCJTeW5jRW5naW5lXCIsIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHMua2V5KSwgdC55Yy5yZW1vdmVSZWZlcmVuY2Uocy5rZXksIGUpO1xuICAgICAgICB0LnljLmNvbnRhaW5zS2V5KHMua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIHNhKHQsIHMua2V5KTtcbiAgICB9IGVsc2UgJCgpO1xufVxuXG5mdW5jdGlvbiByYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUua2V5LCBzID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHQubWMuZ2V0KG4pIHx8IHQud2MuaGFzKHMpIHx8IChOKFwiU3luY0VuZ2luZVwiLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgdC53Yy5hZGQocyksIFxuICAgIG9hKHQpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIG9hKHQpIHtcbiAgICBmb3IgKDt0LndjLnNpemUgPiAwICYmIHQubWMuc2l6ZSA8IHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCBlID0gdC53Yy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIHQud2MuZGVsZXRlKGUpO1xuICAgICAgICBjb25zdCBuID0gbmV3IGh0KHV0LmZyb21TdHJpbmcoZSkpLCBzID0gdC5FYy5uZXh0KCk7XG4gICAgICAgIHQuZ2Muc2V0KHMsIG5ldyBVYyhuKSksIHQubWMgPSB0Lm1jLmluc2VydChuLCBzKSwgSHUodC5yZW1vdGVTdG9yZSwgbmV3IGNyKEpuKEduKG4ucGF0aCkpLCBzLCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyAsICR0LmN0KSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB1YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBbXSwgciA9IFtdLCBvID0gW107XG4gICAgcy5kYy5pc0VtcHR5KCkgfHwgKHMuZGMuZm9yRWFjaCgoKHQsIHUpID0+IHtcbiAgICAgICAgby5wdXNoKHMuUmModSwgZSwgbikudGhlbigodCA9PiB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdmlld3MgaWYgdGhlcmUgYXJlIGFjdHVhbCBjaGFuZ2VzLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGNoYW5nZXMsIG9yIHdlIGFyZSBoYW5kbGluZyBhIGdsb2JhbCBzbmFwc2hvdCwgbm90aWZ5XG4gICAgICAgICAgICAvLyBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgcXVlcnkgc3RhdGUuXG4gICAgICAgICAgICAodCB8fCBuKSAmJiBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUodS50YXJnZXRJZCwgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZnJvbUNhY2hlKSA/IFwibm90LWN1cnJlbnRcIiA6IFwiY3VycmVudFwiKSwgXG4gICAgICAgICAgICB0KSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0dS5CaSh1LnRhcmdldElkLCB0KTtcbiAgICAgICAgICAgICAgICByLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgcy5mYy5ldShpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHZ0LmZvckVhY2goZSwgKGUgPT4gdnQuZm9yRWFjaChlLiRpLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpLm5leHQoKCgpID0+IHZ0LmZvckVhY2goZS5GaSwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFEdCh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgIE4oXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5IaS5nZXQoZSksIHMgPSB0LnNuYXBzaG90VmVyc2lvbiwgaSA9IHQud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocyk7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5IaSA9IG4uSGkuaW5zZXJ0KGUsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShzLmxvY2FsU3RvcmUsIHIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKGUpKSB7XG4gICAgICAgIE4oXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCBlLnRvS2V5KCkpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgaXUobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IGUsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgdC5UYy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LnJlamVjdChuZXcgVShxLkNBTkNFTExFRCwgZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdC5UYy5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZShlLCB0LnJlbW92ZWRCYXRjaElkcywgdC5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgdWEobiwgdC50cik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBuLmdjLmdldChlKTtcbiAgICBpZiAocyAmJiBzLmxjKSByZXR1cm4gZ3MoKS5hZGQocy5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IHQgPSBncygpO1xuICAgICAgICBjb25zdCBzID0gbi5fYy5nZXQoZSk7XG4gICAgICAgIGlmICghcykgcmV0dXJuIHQ7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5kYy5nZXQoZSk7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgocy52aWV3LmVjKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIGhhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGF3YWl0IGZ1KG4ubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBlLnZpZXcuYWMocyk7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIGlhKG4sIGUudGFyZ2V0SWQsIGkudWMpLCBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gbGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiBfdShuLmxvY2FsU3RvcmUsIGUpLnRoZW4oKHQgPT4gdWEobiwgdCkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZmEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBMKHQpLCByID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IEwobi5tdXRhdGlvblF1ZXVlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5Wbih0LCBlKS5uZXh0KChlID0+IGUgPyBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBlKSA6IHZ0LnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpO1xuICAgIG51bGwgIT09IHIgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBjYyhpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBlYShpLCBlLCBzIHx8IG51bGwpLCB0YShpLCBlKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBMKEwodCkubXV0YXRpb25RdWV1ZSkuRG4oZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgZSkpIDogJCgpLCBhd2FpdCB1YShpLCByKSkgOiBcbiAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXG4gICAgLy8gYW5kIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUsIGluIHdoaWNoIGNhc2Ugd2Ugd29uJ3QgaGF2ZSBjYWNoZWRcbiAgICAvLyB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzLiBJbiB0aGlzIGNhc2Ugd2UgY2FuIHNhZmVseSBpZ25vcmUgdGhlIHVwZGF0ZVxuICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcbiAgICAvLyBoYWQsIHdlIHdvdWxkIGhhdmUgY2FjaGVkIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMpLCBhbmQgc28gd2Ugd2lsbCBqdXN0XG4gICAgLy8gc2VlIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcyB2aWEgbm9ybWFsIHJlbW90ZSBkb2N1bWVudCB1cGRhdGVzXG4gICAgLy8gYXMgYXBwbGljYWJsZS5cbiAgICBOKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIGUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGlmIChwYShuKSwgSWEobiksICEwID09PSBlICYmICEwICE9PSBuLkFjKSB7XG4gICAgICAgIC8vIFNlY29uZGFyeSB0YWJzIG9ubHkgbWFpbnRhaW4gVmlld3MgZm9yIHRoZWlyIGxvY2FsIGxpc3RlbmVycyBhbmQgdGhlXG4gICAgICAgIC8vIFZpZXdzIGludGVybmFsIHN0YXRlIG1heSBub3QgYmUgMTAwJSBwb3B1bGF0ZWQgKGluIHBhcnRpY3VsYXJcbiAgICAgICAgLy8gc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgdHJhY2sgc3luY2VkRG9jdW1lbnRzLCB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGVcbiAgICAgICAgLy8gc2VydmVyIGNvbnNpZGVycyB0byBiZSBpbiB0aGUgdGFyZ2V0KS4gU28gd2hlbiBhIHNlY29uZGFyeSBiZWNvbWVzXG4gICAgICAgIC8vIHByaW1hcnksIHdlIG5lZWQgdG8gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgdmlld3MgZm9yIGFsbCB0YXJnZXRzXG4gICAgICAgIC8vIG1hdGNoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAgICBjb25zdCB0ID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSwgZSA9IGF3YWl0IF9hKG4sIHQudG9BcnJheSgpKTtcbiAgICAgICAgbi5BYyA9ICEwLCBhd2FpdCB5YyhuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBIdShuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9IGVsc2UgaWYgKCExID09PSBlICYmICExICE9PSBuLkFjKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IGUgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbi5fYy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQoaSkgPyB0LnB1c2goaSkgOiBlID0gZS50aGVuKCgoKSA9PiAobmEobiwgaSksIFxuICAgICAgICAgICAgbHUobi5sb2NhbFN0b3JlLCBpLCBcbiAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApKSkpLCBKdShuLnJlbW90ZVN0b3JlLCBpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBlLCBhd2FpdCBfYShuLCB0KSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgZS5nYy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIEp1KGUucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCBlLnljLklzKCksIGUuZ2MgPSBuZXcgTWFwLCBlLm1jID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXG4gKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSB0YXJnZXRzIC0gdGhlIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIHZpZXdzIHRoYXQgbmVlZCB0byBiZSByZWNvbXB1dGVkXG4gKiBAcGFyYW0gdHJhbnNpdGlvblRvUHJpbWFyeSAtIGB0cnVlYCBpZmYgdGhlIHRhYiB0cmFuc2l0aW9ucyBmcm9tIGEgc2Vjb25kYXJ5XG4gKiB0YWIgdG8gYSBwcmltYXJ5IHRhYlxuICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuKSwgbi5BYyA9ICExLCBhd2FpdCB5YyhuLnJlbW90ZVN0b3JlLCAhMSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBbXSwgciA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBjb25zdCBuID0gcy5fYy5nZXQodCk7XG4gICAgICAgIGlmIChuICYmIDAgIT09IG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBmZXRjaCB0aGVpciBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAvLyBmcm9tIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXG4gICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXG4gICAgICAgICAgICBlID0gYXdhaXQgaHUocy5sb2NhbFN0b3JlLCBKbihuWzBdKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzLmRjLmdldCh0KSwgbiA9IGF3YWl0IGhhKHMsIGUpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgci5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgZHUocy5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGUgPSBhd2FpdCBodShzLmxvY2FsU3RvcmUsIG4pLCBhd2FpdCBRYyhzLCB3YShuKSwgdCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEsIGUucmVzdW1lVG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGkucHVzaChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHMuZmMuZXUociksIGk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeWAgb2JqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBgVGFyZ2V0YC4gVGhlcmUgaXMgbm8gd2F5IHRvXG4gKiBvYnRhaW4gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIHNvIHdlIHN5bnRoZXNpemUgYSBgUXVlcnlgIGZyb20gdGhlIGBUYXJnZXRgXG4gKiBvYmplY3QuXG4gKlxuICogVGhlIHN5bnRoZXNpemVkIHJlc3VsdCBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgYnV0XG4gKiBzaW5jZSB0aGUgc3ludGhlc2l6ZWQgYFF1ZXJ5YCBzaG91bGQgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHMgYXMgdGhlXG4gKiBvcmlnaW5hbCBvbmUgKG9ubHkgdGhlIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzIG1pZ2h0IGRpZmZlciksIHRoZSBwb3RlbnRpYWxcbiAqIGRpZmZlcmVuY2Ugd2lsbCBub3QgY2F1c2UgaXNzdWVzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gd2EodCkge1xuICAgIHJldHVybiBLbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0Lm9yZGVyQnksIHQuZmlsdGVycywgdC5saW1pdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIG1hKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICByZXR1cm4gTChMKGUubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UpLk1pKCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBnYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEwodCk7XG4gICAgaWYgKGkuQWMpIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgIHJldHVybiB2b2lkIE4oXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpO1xuICAgIGNvbnN0IHIgPSBpLl9jLmdldChlKTtcbiAgICBpZiAociAmJiByLmxlbmd0aCA+IDApIHN3aXRjaCAobikge1xuICAgICAgY2FzZSBcImN1cnJlbnRcIjpcbiAgICAgIGNhc2UgXCJub3QtY3VycmVudFwiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgX3UoaS5sb2NhbFN0b3JlLCBzcyhyWzBdKSksIHMgPSBtaS5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZShlLCBcImN1cnJlbnRcIiA9PT0gbiwgVmUuRU1QVFlfQllURV9TVFJJTkcpO1xuICAgICAgICAgICAgYXdhaXQgdWEoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgbHUoaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBuYShpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgICQoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiB5YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHBhKHQpO1xuICAgIGlmIChzLkFjKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5fYy5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgTihcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgZHUocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IGh1KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBRYyhzLCB3YShlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEsIG4ucmVzdW1lVG9rZW4pLCBIdShzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5fYy5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IGx1KHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBKdShzLnJlbW90ZVN0b3JlLCB0KSwgbmEocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaChSdCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBXYy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gYWEuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gSmMuYmluZChudWxsLCBlKSwgZS5mYy5ldSA9IERjLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLmZjLnZjID0gQ2MuYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uIElhKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBZYy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IFhjLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIFRhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChcbiAgICAvKiogTG9hZHMgYSBidW5kbGUgYW5kIHJldHVybnMgdGhlIGxpc3Qgb2YgYWZmZWN0ZWQgY29sbGVjdGlvbiBncm91cHMuICovXG4gICAgYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGUuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBOaShlLmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLkxzLmdldEJ1bmRsZU1ldGFkYXRhKHQsIGUuaWQpKSkudGhlbigodCA9PiAhIXQgJiYgdC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhzKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovICh0LmxvY2FsU3RvcmUsIHMpKSByZXR1cm4gYXdhaXQgZS5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IHQudG90YWxCeXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHMpKSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3MoJGMocykpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBPYyhzLCB0LmxvY2FsU3RvcmUsIGUuc2VyaWFsaXplcik7XG4gICAgICAgICAgICBsZXQgciA9IGF3YWl0IGUuUGMoKTtcbiAgICAgICAgICAgIGZvciAoO3I7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBpLmp1KHIpO1xuICAgICAgICAgICAgICAgIHQgJiYgbi5fdXBkYXRlUHJvZ3Jlc3ModCksIHIgPSBhd2FpdCBlLlBjKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHVhKHQsIG8uSHUsIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLkxzLnNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpLCBQcm9taXNlLnJlc29sdmUoby5XdSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBNKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHt0fWApLCBuLl9mYWlsV2l0aCh0KSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLm5vdGlmeUJ1bmRsZUxvYWRlZCh0KTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIEVhIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IEZ1KHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5jcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSwgXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLmNyZWF0ZVBlcnNpc3RlbmNlKHQpLCBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMubG9jYWxTdG9yZSA9IHRoaXMuY3JlYXRlTG9jYWxTdG9yZSh0KSwgXG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLmNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKHQsIHRoaXMubG9jYWxTdG9yZSksIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIodCwgdGhpcy5sb2NhbFN0b3JlKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIodCwgZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUodCkge1xuICAgICAgICByZXR1cm4gc3UodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGV1LCB0LmluaXRpYWxVc2VyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgS28oUW8uanMsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBidTtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG5jbGFzcyBBYSBleHRlbmRzIEVhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0O1xuICAgIH1cbiAgICBjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIEYodGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSBpbnN0YW5jZW9mIGpvKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBwbyhuLCB0LmFzeW5jUXVldWUsIGUpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBzby53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogc28uREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBLbygodCA9PiBqby5qcyh0LCBlKSksIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIFJhIGV4dGVuZHMgRWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5iYyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCksIGF3YWl0IHRoaXMuYmMuaW5pdGlhbGl6ZSh0aGlzLCB0KSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IElhKHRoaXMuYmMuc3luY0VuZ2luZSksIGF3YWl0IGNjKHRoaXMuYmMucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5waSgoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCksIFxuICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUodCkge1xuICAgICAgICByZXR1cm4gc3UodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGV1LCB0LmluaXRpYWxVc2VyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgcG8obiwgdC5hc3luY1F1ZXVlLCBlKTtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBPdChlLCB0aGlzLnBlcnNpc3RlbmNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNdCh0LmFzeW5jUXVldWUsIG4pO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBabyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBzby53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogc28uREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBKbyh0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCBPdSgpLCAkdSgpLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBidTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIHZhIGV4dGVuZHMgUmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy5iYyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYmMuc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIFB1ICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBRcjogZmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIGpyOiBnYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgenI6IHlhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBNaTogbWEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIEdyOiBsYS5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnBpKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRhKHRoaXMuYmMuc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQoKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpLCBcbiAgICAgICAgICAgIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydGVkID8gdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSA6IHQgfHwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBPdSgpO1xuICAgICAgICBpZiAoIVB1LkQoZSkpIHRocm93IG5ldyBVKHEuVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gWm8odC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IFB1KGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIFBhIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBIYyh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IGNhLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IHljKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBiYztcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEZ1KHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IE11KHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgS3UodCwgZSwgbiwgcyk7XG4gICAgICAgIH0odC5hdXRoQ3JlZGVudGlhbHMsIHQuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gSGModGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSBTdS5EKCkgPyBuZXcgU3UgOiBuZXcgVnUsIG5ldyBqdShlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgdmFyIGUsIG4sIHMsIGksIHI7XG4gICAgICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqLyAgICB9XG4gICAgY3JlYXRlU3luY0VuZ2luZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgICAgICBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBjb25zdCB1ID0gbmV3IEtjKHQsIGUsIG4sIHMsIGksIHIpO1xuICAgICAgICAgICAgcmV0dXJuIG8gJiYgKHUuQWMgPSAhMCksIHU7XG4gICAgICAgIH0odGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLmV2ZW50TWFuYWdlciwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgdC5pbml0aWFsVXNlciwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucywgZSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksIGUuQXUuYWRkKDUgLyogT2ZmbGluZUNhdXNlLlNodXRkb3duICovKSwgXG4gICAgICAgICAgICBhd2FpdCBXdShlKSwgZS52dS5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuUHUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gYmEodCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZXNvbHZlKClcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBPbiB3ZWIsIGEgYFJlYWRhYmxlU3RyZWFtYCBpcyB3cmFwcGVkIGFyb3VuZCBieSBhIGBCeXRlU3RyZWFtUmVhZGVyYC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qXG4gKiBBIHdyYXBwZXIgaW1wbGVtZW50YXRpb24gb2YgT2JzZXJ2ZXI8VD4gdGhhdCB3aWxsIGRpc3BhdGNoIGV2ZW50c1xuICogYXN5bmNocm9ub3VzbHkuIFRvIGFsbG93IGltbWVkaWF0ZSBzaWxlbmNpbmcsIGEgbXV0ZSBjYWxsIGlzIGFkZGVkIHdoaWNoXG4gKiBjYXVzZXMgZXZlbnRzIHNjaGVkdWxlZCB0byBubyBsb25nZXIgYmUgcmFpc2VkLlxuICovXG5jbGFzcyBWYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHNldCB0byB0cnVlLCB3aWxsIG5vdCByYWlzZSBmdXR1cmUgZXZlbnRzLiBOZWNlc3NhcnkgdG8gZGVhbCB3aXRoXG4gICAgICAgICAqIGFzeW5jIGRldGFjaG1lbnQgb2YgbGlzdGVuZXIuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGVkID0gITE7XG4gICAgfVxuICAgIG5leHQodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm5leHQgJiYgdGhpcy5WYyh0aGlzLm9ic2VydmVyLm5leHQsIHQpO1xuICAgIH1cbiAgICBlcnJvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZXJyb3IgPyB0aGlzLlZjKHRoaXMub2JzZXJ2ZXIuZXJyb3IsIHQpIDogayhcIlVuY2F1Z2h0IEVycm9yIGluIHNuYXBzaG90IGxpc3RlbmVyOlwiLCB0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBTYygpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICBWYyh0LCBlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCB0KGUpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgU2Ege1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLkRjID0gdCwgdGhpcy5zZXJpYWxpemVyID0gZSwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IEssIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuQ2MgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMueGMoKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHQgJiYgdC5HdSgpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKHQuS3UubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuS3UpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5EYy5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIFBjKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMueGMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyB4YygpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuTmMoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5DYy5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMua2MoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuTWMobik7XG4gICAgICAgIHJldHVybiBuZXcga2MoSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgT2MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIE5jKCkge1xuICAgICAgICBmb3IgKDt0aGlzLk9jKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLiRjKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLk9jKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLmtjKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyBNYyh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4kYygpICYmIHRoaXMua2MoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuQ2MuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAga2ModCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMuRGMuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgJGMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLkRjLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgRGEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IExpKG4uc2VyaWFsaXplcikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+IE9pKG4uc2VyaWFsaXplciwgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4uQW8oXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpLCBlLmxlbmd0aCksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gR2kobi5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgICAgICBvLnNldChlLmtleS50b1N0cmluZygpLCBlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIEYoISFlKSwgdS5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpLCB1O1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB0aGlzLnJlY29yZFZlcnNpb24odCkpKSwgZTtcbiAgICB9XG4gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IFlzKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5kZWxldGUoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBodC5mcm9tUGF0aChlKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IFhzKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBMaShuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgodCA9PiBqaShuLnNlcmlhbGl6ZXIsIHQpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLnBvKFwiQ29tbWl0XCIsIHMsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIGUgPSB0LnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0LmlzTm9Eb2N1bWVudCgpKSB0aHJvdyAkKCk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICBlID0gcnQubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5BQk9SVEVELCBcIkRvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy5cIik7XG4gICAgICAgIH0gZWxzZSB0aGlzLnJlYWRWZXJzaW9ucy5zZXQodC5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXG4gICAgICovICAgIHByZWNvbmRpdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUgPyBlLmlzRXF1YWwocnQubWluKCkpID8gRnMuZXhpc3RzKCExKSA6IEZzLnVwZGF0ZVRpbWUoZSkgOiBGcy5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwocnQubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZzLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBGcy5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi8gY2xhc3MgQ2Ege1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLm9wdGlvbnMgPSBuLCB0aGlzLnVwZGF0ZUZ1bmN0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBpLCB0aGlzLkZjID0gbi5tYXhBdHRlbXB0cywgdGhpcy5MbyA9IG5ldyBCdSh0aGlzLmFzeW5jUXVldWUsIFwidHJhbnNhY3Rpb25fcmV0cnlcIiAvKiBUaW1lcklkLlRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLkZjIC09IDEsIHRoaXMuQmMoKTtcbiAgICB9XG4gICAgQmMoKSB7XG4gICAgICAgIHRoaXMuTG8ueG8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRGEodGhpcy5kYXRhc3RvcmUpLCBlID0gdGhpcy5MYyh0KTtcbiAgICAgICAgICAgIGUgJiYgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdC5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnFjKHQpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnFjKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIExjKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuICFGdChlKSAmJiBlLmNhdGNoICYmIGUudGhlbiA/IGUgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHFjKHQpIHtcbiAgICAgICAgdGhpcy5GYyA+IDAgJiYgdGhpcy5VYyh0KSA/ICh0aGlzLkZjIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5CYygpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QodCk7XG4gICAgfVxuICAgIFVjKHQpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IGUgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IGUgfHwgXCJhbHJlYWR5LWV4aXN0c1wiID09PSBlIHx8ICFvaShlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBGaXJlc3RvcmVDbGllbnQgaXMgYSB0b3AtbGV2ZWwgY2xhc3MgdGhhdCBjb25zdHJ1Y3RzIGFuZCBvd25zIGFsbCBvZiB0aGUgLy9cbiAqIHBpZWNlcyBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgLy9cbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLiAvL1xuICovXG5jbGFzcyB4YSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIHF1ZXVlIHJlc3BvbnNpYmxlIGZvciBhbGwgb2Ygb3VyIGludGVybmFsIHByb2Nlc3NpbmcuIFdoZW5cbiAgICAgKiB3ZSBnZXQgaW5jb21pbmcgd29yayBmcm9tIHRoZSB1c2VyICh2aWEgcHVibGljIEFQSSkgb3IgdGhlIG5ldHdvcmtcbiAgICAgKiAoaW5jb21pbmcgR1JQQyBtZXNzYWdlcyksIHdlIHNob3VsZCBhbHdheXMgc2NoZWR1bGUgb250byB0aGlzIHF1ZXVlLlxuICAgICAqIFRoaXMgZW5zdXJlcyBhbGwgb2Ygb3VyIHdvcmsgaXMgcHJvcGVybHkgc2VyaWFsaXplZCAoZS5nLiB3ZSBkb24ndFxuICAgICAqIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgb3BlcmF0aW9uIHdoaWxlIHRoZSBwcmV2aW91cyBvbmUgaXMgd2FpdGluZyBmb3JcbiAgICAgKiBhbiBhc3luYyBJL08gdG8gY29tcGxldGUpLlxuICAgICAqL1xuICAgIG4sIHMpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLmRhdGFiYXNlSW5mbyA9IHMsIFxuICAgICAgICB0aGlzLnVzZXIgPSBWLlVOQVVUSEVOVElDQVRFRCwgdGhpcy5jbGllbnRJZCA9IHR0LkEoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzLnN0YXJ0KG4sIChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCB0LnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zdGFydChuLCAodCA9PiAoTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIG5ldyBhcHAgY2hlY2sgdG9rZW49XCIsIHQpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lcih0LCB0aGlzLnVzZXIpKSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IHQ7XG4gICAgfVxuICAgIHNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLiBFbnN1cmVzIHRoYXQgb3RoZXIgbWV0aG9kcyBvbiAvL1xuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuIC8vXG4gICAgICovICAgIHZlcmlmeU5vdFRlcm1pbmF0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd24pIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVudGVyUmVzdHJpY3RlZE1vZGUoKTtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gRWMoZSwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgdC5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgdC5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gTmEodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobik7XG4gICAgbGV0IHMgPSBuLmluaXRpYWxVc2VyO1xuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyB0ID0+IHtcbiAgICAgICAgcy5pc0VxdWFsKHQpIHx8IChhd2FpdCBpdShlLmxvY2FsU3RvcmUsIHQpLCBzID0gdCk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIGUucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IHQudGVybWluYXRlKCkpKSwgdC5fb2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBrYSh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgT2EodCk7XG4gICAgTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBnYyhlLnJlbW90ZVN0b3JlLCB0KSkpLCB0LnNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcigoKHQsIG4pID0+IGdjKGUucmVtb3RlU3RvcmUsIG4pKSksIFxuICAgIHQuX29ubGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG4vKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi8gZnVuY3Rpb24gTWEodCkge1xuICAgIHJldHVybiBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gdC5jb2RlID09PSBxLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5jb2RlID09PSBxLlVOSU1QTEVNRU5URUQgOiAhKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiB0IGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSB8fCAoXG4gICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgMjIgPT09IHQuY29kZSB8fCAyMCA9PT0gdC5jb2RlIHx8IFxuICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xuICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cbiAgICAxMSA9PT0gdC5jb2RlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gT2EodCkge1xuICAgIGlmICghdC5fb2ZmbGluZUNvbXBvbmVudHMpIGlmICh0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB7XG4gICAgICAgIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyB1c2VyIHByb3ZpZGVkIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IE5hKHQsIHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29mZmxpbmUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZTtcbiAgICAgICAgICAgIGlmICghTWEobikpIHRocm93IG47XG4gICAgICAgICAgICBNKFwiRXJyb3IgdXNpbmcgdXNlciBwcm92aWRlZCBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyBuKSwgYXdhaXQgTmEodCwgbmV3IEVhKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIGF3YWl0IE5hKHQsIG5ldyBFYSk7XG4gICAgcmV0dXJuIHQuX29mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiAkYSh0KSB7XG4gICAgcmV0dXJuIHQuX29ubGluZUNvbXBvbmVudHMgfHwgKHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPyAoTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIHVzZXIgcHJvdmlkZWQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IGthKHQsIHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29ubGluZSkpIDogKE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBrYSh0LCBuZXcgUGEpKSksIHQuX29ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIEZhKHQpIHtcbiAgICByZXR1cm4gT2EodCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIEJhKHQpIHtcbiAgICByZXR1cm4gT2EodCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gTGEodCkge1xuICAgIHJldHVybiAkYSh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gcWEodCkge1xuICAgIHJldHVybiAkYSh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5mdW5jdGlvbiBVYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gS2EodCkge1xuICAgIGNvbnN0IGUgPSBhd2FpdCAkYSh0KSwgbiA9IGUuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0gR2MuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBqYy5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIFxuICAgIG47XG59XG5cbi8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlLWVucXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovIGZ1bmN0aW9uIEdhKHQpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IEZhKHQpLCBuID0gYXdhaXQgTGEodCk7XG4gICAgICAgIHJldHVybiBlLnNldE5ldHdvcmtFbmFibGVkKCEwKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEwodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5BdS5kZWxldGUoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgenUoZSk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKiogRGlzYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbi4gUGVuZGluZyBvcGVyYXRpb25zIHdpbGwgbm90IGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBRYSh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBGYSh0KSwgbiA9IGF3YWl0IExhKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMSksIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgZS5BdS5hZGQoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgYXdhaXQgV3UoZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5QdS5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBqYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50KHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgVShxLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gRWModCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IEJhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHphKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBWYSh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFNjKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIXUgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBVKHEuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogdSAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFUocS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBOYyhHbihuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIFV1OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFZjKHQsIG8pO1xuICAgIH0oYXdhaXQgS2EodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBXYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1KHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgTGMoZSwgcy5zciksIHIgPSBpLm5jKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IEVjKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgQmEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gSGEodCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IFZhKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gU2ModCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgVShxLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IE5jKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgVXU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gVmModCwgbyk7XG4gICAgfShhd2FpdCBLYSh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEphKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFZhKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBMKHQpLk51LmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IEthKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uU2MoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIEwodCkuTnUuZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IEthKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBZYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gaGkoKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTYSh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBiYSh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBiYShuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfShuLCBGdShlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgVGEoYXdhaXQgcWEodCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gWGEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLkxzLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IEJhKHQpLCBlKSkpO1xufVxuXG5mdW5jdGlvbiBaYSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gbi5pbmRleE1hbmFnZXIsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb25maWd1cmUgaW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBzLmdldEZpZWxkSW5kZXhlcyh0KS5uZXh0KChuID0+IFxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENvbXBhcmVzIHR3byBhcnJheSBmb3IgZXF1YWxpdHkgdXNpbmcgY29tcGFyYXRvci4gVGhlIG1ldGhvZCBjb21wdXRlcyB0aGVcbiAqIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgaW4gYGFmdGVyYCBidXQgbm90XG4gKiBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluIGBiZWZvcmVgIGJ1dCBtaXNzaW5nXG4gKiBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgICAgICB0ID0gWyAuLi50IF0sIGUgPSBbIC4uLmUgXSwgdC5zb3J0KG4pLCBlLnNvcnQobik7XG4gICAgICAgICAgICBjb25zdCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCB1ID0gMCwgYyA9IDA7XG4gICAgICAgICAgICBmb3IgKDt1IDwgbyAmJiBjIDwgcjsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG4odFtjXSwgZVt1XSk7XG4gICAgICAgICAgICAgICAgciA8IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICBpKHRbYysrXSkgOiByID4gMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgIHMoZVt1KytdKSA6ICh1KyssIGMrKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDt1IDwgbzsgKSBzKGVbdSsrXSk7XG4gICAgICAgICAgICBmb3IgKDtjIDwgcjsgKSBpKHRbYysrXSk7XG4gICAgICAgIH0obiwgZSwgX3QsIChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLmFkZEZpZWxkSW5kZXgodCwgZSkpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMuZGVsZXRlRmllbGRJbmRleCh0LCBlKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHZ0LndhaXRGb3IoaSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcbiAgICAvLyAgICAgZmlyZXN0b3JlX2NsaWVudHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cbiAgICAoYXdhaXQgQmEodCksIGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHRoID0gbmV3IE1hcDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBtYXAgdGhhdCBlbnN1cmVzIG9ubHkgb25lIERhdGFzdG9yZSBleGlzdHMgcGVyIEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBlaCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdHdvIGJvb2xlYW4gb3B0aW9ucyBhcmUgbm90IHNldCBhdCB0aGUgc2FtZSB0aW1lLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gbmgodCwgZSwgbiwgcykge1xuICAgIGlmICghMCA9PT0gZSAmJiAhMCA9PT0gcykgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgJHt0fSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBzaCh0KSB7XG4gICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgY29sbGVjdGlvbiAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0XG4gKiBjb250YWlucyBhbiBvZGQgbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gaWgodCkge1xuICAgIGlmIChodC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gcmgodCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0Lmxlbmd0aCA+IDIwICYmICh0ID0gYCR7dC5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIFwiXCIgKyB0O1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQuY29uc3RydWN0b3IpIHJldHVybiB0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAodCk7XG4gICAgICAgICAgICByZXR1cm4gZSA/IGBhIGN1c3RvbSAke2V9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyBcImEgZnVuY3Rpb25cIiA6ICQoKTtcbn1cblxuZnVuY3Rpb24gb2godCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIHQgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQgPSB0Ll9kZWxlZ2F0ZSksICEodCBpbnN0YW5jZW9mIGUpKSB7XG4gICAgICAgIGlmIChlLm5hbWUgPT09IHQuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IHJoKHQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgdHlwZSAnJHtlLm5hbWV9JywgYnV0IGl0IHdhczogJHtufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiB1aCh0LCBlKSB7XG4gICAgaWYgKGUgPD0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke2V9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBjaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0LnNzbCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiwgdGhpcy5zc2wgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gdC5ob3N0LCB0aGlzLnNzbCA9IG51bGwgPT09IChlID0gdC5zc2wpIHx8IHZvaWQgMCA9PT0gZSB8fCBlO1xuICAgICAgICBpZiAodGhpcy5jcmVkZW50aWFscyA9IHQuY3JlZGVudGlhbHMsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBcbiAgICAgICAgdGhpcy5jYWNoZSA9IHQubG9jYWxDYWNoZSwgdm9pZCAwID09PSB0LmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQuY2FjaGVTaXplQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgbmgoXCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcpLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gITEgOiB2b2lkIDAgPT09IHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBmYWxzZSA6IFxuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIGNvZXJjZSB0aGUgdmFsdWUgdG8gYm9vbGVhbiBldmVuIHRob3VnaFxuICAgICAgICAvLyB0aGUgVHlwZVNjcmlwdCBjb21waWxlciBoYXMgbmFycm93ZWQgdGhlIHR5cGUgdG8gYm9vbGVhbiBhbHJlYWR5LlxuICAgICAgICAvLyBub2luc3BlY3Rpb24gUG9pbnRsZXNzQm9vbGVhbkV4cHJlc3Npb25KU1xuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSB0Lmhvc3QgJiYgdGhpcy5zc2wgPT09IHQuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IHQuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICovIGNsYXNzIGFoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuX2RhdGFiYXNlSWQgPSBuLCBcbiAgICAgICAgdGhpcy5fYXBwID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgY2goe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgY2godCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gbmV3IFE7XG4gICAgICAgICAgICBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZmlyc3RQYXJ0eVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSCh0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsLCB0LmF1dGhUb2tlbkZhY3RvcnkgfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIm1ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY3JlZGVudGlhbHMpKTtcbiAgICB9XG4gICAgX2dldFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9mcmVlemVTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITAsIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYXRlVGFzayB8fCAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBGaXJlc3RvcmVgIGluc3RhbmNlLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcHA6IHRoaXMuX2FwcCxcbiAgICAgICAgICAgIGRhdGFiYXNlSWQ6IHRoaXMuX2RhdGFiYXNlSWQsXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5fc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlcyBhbGwgY29tcG9uZW50cyB1c2VkIGJ5IHRoaXMgY2xpZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgbWV0aG9kIHRvIGNsZWFuIHVwIHRoZWlyIG93biBkZXBlbmRlbmNpZXMsIGJ1dCBtdXN0IGFsc28gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kLlxuICAgICAqXG4gICAgICogT25seSBldmVyIGNhbGxlZCBvbmNlLlxuICAgICAqLyAgICBfdGVybWluYXRlKCkge1xuICAgICAgICAvKipcbiAqIFJlbW92ZXMgYWxsIGNvbXBvbmVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBpbnN0YW5jZS4gTXVzdCBiZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aC5nZXQodCk7XG4gICAgICAgICAgICBlICYmIChOKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIHRoLmRlbGV0ZSh0KSwgZS50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyBmdW5jdGlvbiBoaCh0LCBlLCBuLCBzID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCByID0gKHQgPSBvaCh0LCBhaCkpLl9nZXRTZXR0aW5ncygpO1xuICAgIGlmIChcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiICE9PSByLmhvc3QgJiYgci5ob3N0ICE9PSBlICYmIE0oXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIHVzZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkXCIpLCBcbiAgICB0Ll9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHIpLCB7XG4gICAgICAgIGhvc3Q6IGAke2V9OiR7bn1gLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCBzLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IGUsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBzLm1vY2tVc2VyVG9rZW4pIGUgPSBzLm1vY2tVc2VyVG9rZW4sIG4gPSBWLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICBlID0gY3JlYXRlTW9ja1VzZXJUb2tlbihzLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHMubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVihyKTtcbiAgICAgICAgfVxuICAgICAgICB0Ll9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgaihuZXcgRyhlLCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBsaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkaCh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGxoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIGZoIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGZoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayAocXVlcnk6MSl9KS5cbiAqLyBjbGFzcyBkaCBleHRlbmRzIGZoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgR24obikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgbGgodGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBodCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGRoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9oKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZWgoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIGFoKSB7XG4gICAgICAgIGNvbnN0IHMgPSB1dC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gaWgocyksIG5ldyBkaCh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBsaCB8fCB0IGluc3RhbmNlb2YgZGgpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQodXQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBpaChzKSwgbmV3IGRoKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gd2godCwgZSkge1xuICAgIGlmICh0ID0gb2godCwgYWgpLCBlaChcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgZmgodCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVW4odXQuZW1wdHlQYXRoKCksIHQpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBtaCh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKGUgPSB0dC5BKCkpLCBlaChcImRvY1wiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBhaCkge1xuICAgICAgICBjb25zdCBzID0gdXQuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIHNoKHMpLCBuZXcgbGgodCwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IGh0KHMpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgbGggfHwgdCBpbnN0YW5jZW9mIGRoKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKHV0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4gc2gocyksIG5ldyBsaCh0LmZpcmVzdG9yZSwgdCBpbnN0YW5jZW9mIGRoID8gdC5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgaHQocykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gZ2godCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCAodCBpbnN0YW5jZW9mIGxoIHx8IHQgaW5zdGFuY2VvZiBkaCkgJiYgKGUgaW5zdGFuY2VvZiBsaCB8fCBlIGluc3RhbmNlb2YgZGgpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiB5aCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgaW5zdGFuY2VvZiBmaCAmJiBlIGluc3RhbmNlb2YgZmggJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiBabih0Ll9xdWVyeSwgZS5fcXVlcnkpICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHBoIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMuS2MgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMuR2MgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMuUWMgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLmpjID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuemMgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMuV2MgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLkhjID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLkpjID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy5MbyA9IG5ldyBCdSh0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLlljID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9ICR1KCk7XG4gICAgICAgICAgICB0ICYmIE4oXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgdC52aXNpYmlsaXR5U3RhdGUpLCB0aGlzLkxvLmtvKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSAkdSgpO1xuICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyICYmIHQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5ZYyk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZSh0KTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQodCkge1xuICAgICAgICB0aGlzLlhjKCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuWmModCk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUodCkge1xuICAgICAgICBpZiAoIXRoaXMuUWMpIHtcbiAgICAgICAgICAgIHRoaXMuUWMgPSAhMCwgdGhpcy5IYyA9IHQgfHwgITE7XG4gICAgICAgICAgICBjb25zdCBlID0gJHUoKTtcbiAgICAgICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlljKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuWGMoKSwgdGhpcy5RYykgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdGhpcy5aYygoKCkgPT4gdGhpcy5RYyAmJiB0aGlzLkhjID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAodCgpLnRoZW4oZS5yZXNvbHZlLCBlLnJlamVjdCksIFxuICAgICAgICBlLnByb21pc2UpKSkudGhlbigoKCkgPT4gZS5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUodCkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLkdjLnB1c2godCksIHRoaXMudGEoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgdGEoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLkdjLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLkdjWzBdKCksIHRoaXMuR2Muc2hpZnQoKSwgdGhpcy5Mby5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLkdjLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLkxvLnhvKCgoKSA9PiB0aGlzLnRhKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBaYyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLktjLnRoZW4oKCgpID0+ICh0aGlzLldjID0gITAsIHQoKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnpjID0gdCwgdGhpcy5XYyA9ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqXG4gKiBDaHJvbWUgaW5jbHVkZXMgRXJyb3IubWVzc2FnZSBpbiBFcnJvci5zdGFjay4gT3RoZXIgYnJvd3NlcnMgZG8gbm90LlxuICogVGhpcyByZXR1cm5zIGV4cGVjdGVkIG91dHB1dCBvZiBtZXNzYWdlICsgc3RhY2sgd2hlbiBhdmFpbGFibGUuXG4gKiBAcGFyYW0gZXJyb3IgLSBFcnJvciBvciBGaXJlc3RvcmVFcnJvclxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSB0Lm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICB0LnN0YWNrICYmIChlID0gdC5zdGFjay5pbmNsdWRlcyh0Lm1lc3NhZ2UpID8gdC5zdGFjayA6IHQubWVzc2FnZSArIFwiXFxuXCIgKyB0LnN0YWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcbiAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XG4gICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxuICAgICAgICAgICAgdGhyb3cgayhcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIGUpLCB0O1xuICAgICAgICB9KSkudGhlbigodCA9PiAodGhpcy5XYyA9ICExLCB0KSkpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5LYyA9IGUsIGU7XG4gICAgfVxuICAgIGVucXVldWVBZnRlckRlbGF5KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5YYygpLCBcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxuICAgICAgICB0aGlzLkpjLmluZGV4T2YodCkgPiAtMSAmJiAoZSA9IDApO1xuICAgICAgICBjb25zdCBzID0gVGMuY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdCwgZSwgbiwgKHQgPT4gdGhpcy5lYSh0KSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5qYy5wdXNoKHMpLCBzO1xuICAgIH1cbiAgICBYYygpIHtcbiAgICAgICAgdGhpcy56YyAmJiAkKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBuYSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgdDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdCA9IHRoaXMuS2MsIGF3YWl0IHQ7XG4gICAgICAgIH0gd2hpbGUgKHQgIT09IHRoaXMuS2MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIHNhKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuamMpIGlmIChlLnRpbWVySWQgPT09IHQpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgaWEodCkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLm5hKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMuamMuc29ydCgoKHQsIGUpID0+IHQudGFyZ2V0VGltZU1zIC0gZS50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmpjKSBpZiAoZS5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBUaW1lcklkLkFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmEoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICByYSh0KSB7XG4gICAgICAgIHRoaXMuSmMucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIGVhKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmpjLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMuamMuc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSWgodCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBUaCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBLLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29uc3RhbnQgdXNlZCB0byBpbmRpY2F0ZSB0aGUgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWQuXG4gKiBTZXQgdGhpcyB2YWx1ZSBhcyB0aGUgYGNhY2hlU2l6ZUJ5dGVzYCBvbiB0aGUgc2V0dGluZ3MgcGFzc2VkIHRvIHRoZVxuICoge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gY29uc3QgRWggPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKi8gY2xhc3MgQWggZXh0ZW5kcyBhaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgcGgsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gKG51bGwgPT0gcyA/IHZvaWQgMCA6IHMubmFtZSkgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBiaCh0aGlzKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB7QGxpbmsgRmlyZXN0b3JlfSB3aXRoIHRoZSBwcm92aWRlZCBzZXR0aW5ncy5cbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmdcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBuYW1lIG9mIGRhdGFiYXNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBSaCh0LCBlLCBuKSB7XG4gICAgbiB8fCAobiA9IFwiKGRlZmF1bHQpXCIpO1xuICAgIGNvbnN0IHMgPSBfZ2V0UHJvdmlkZXIodCwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKHMuaXNJbml0aWFsaXplZChuKSkge1xuICAgICAgICBjb25zdCB0ID0gcy5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgaWRlbnRpZmllcjogblxuICAgICAgICB9KSwgaSA9IHMuZ2V0T3B0aW9ucyhuKTtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChpLCBlKSkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgdm9pZCAwICE9PSBlLmxvY2FsQ2FjaGUpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZSBhbmQgY2FjaGVTaXplQnl0ZXMgY2Fubm90IGJlIHNwZWNpZmllZCBhdCB0aGUgc2FtZSB0aW1lIGFzIGNhY2hlU2l6ZUJ5dGVzIHdpbGxiZSBkZXByZWNhdGVkLiBJbnN0ZWFkLCBzcGVjaWZ5IHRoZSBjYWNoZSBzaXplIGluIHRoZSBjYWNoZSBvYmplY3RcIik7XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gcy5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogZSxcbiAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBuXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHZoKGUsIG4pIHtcbiAgICBjb25zdCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSA/IGUgOiBnZXRBcHAoKSwgaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBlIDogbiB8fCBcIihkZWZhdWx0KVwiLCByID0gX2dldFByb3ZpZGVyKHMsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlcbiAgICB9KTtcbiAgICBpZiAoIXIuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IHQgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoXCJmaXJlc3RvcmVcIik7XG4gICAgICAgIHQgJiYgaGgociwgLi4udCk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIFBoKHQpIHtcbiAgICByZXR1cm4gdC5fZmlyZXN0b3JlQ2xpZW50IHx8IGJoKHQpLCB0Ll9maXJlc3RvcmVDbGllbnQudmVyaWZ5Tm90VGVybWluYXRlZCgpLCB0Ll9maXJlc3RvcmVDbGllbnQ7XG59XG5cbmZ1bmN0aW9uIGJoKHQpIHtcbiAgICB2YXIgZSwgbiwgcztcbiAgICBjb25zdCBpID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgciA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPZSh0LCBlLCBuLCBzLmhvc3QsIHMuc3NsLCBzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBzLnVzZUZldGNoU3RyZWFtcyk7XG4gICAgfSh0Ll9kYXRhYmFzZUlkLCAobnVsbCA9PT0gKGUgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub3B0aW9ucy5hcHBJZCkgfHwgXCJcIiwgdC5fcGVyc2lzdGVuY2VLZXksIGkpO1xuICAgIHQuX2ZpcmVzdG9yZUNsaWVudCA9IG5ldyB4YSh0Ll9hdXRoQ3JlZGVudGlhbHMsIHQuX2FwcENoZWNrQ3JlZGVudGlhbHMsIHQuX3F1ZXVlLCByKSwgXG4gICAgKG51bGwgPT09IChuID0gaS5jYWNoZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKSAmJiAobnVsbCA9PT0gKHMgPSBpLmNhY2hlKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlcikgJiYgKHQuX2ZpcmVzdG9yZUNsaWVudC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciA9IHtcbiAgICAgICAgX29mZmxpbmVLaW5kOiBpLmNhY2hlLmtpbmQsXG4gICAgICAgIF9vZmZsaW5lOiBpLmNhY2hlLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIsXG4gICAgICAgIF9vbmxpbmU6IGkuY2FjaGUuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyXG4gICAgfSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9IG9yXG4gKiB7QGxpbmsgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZX0uXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIGl0XG4gKiByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyAtIE9wdGlvbmFsIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmVcbiAqIHBlcnNpc3RlbmNlLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50IHN0b3JhZ2UuXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiBJbnN0ZWFkLCBzZXRcbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYEluZGV4ZWREYkxvY2FsQ2FjaGVgIHRvXG4gKiB0dXJuIG9uIEluZGV4ZWREYiBjYWNoZS4gQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdoZW4gYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gZnVuY3Rpb24gVmgodCwgZSkge1xuICAgIEZoKHQgPSBvaCh0LCBBaCkpO1xuICAgIGNvbnN0IG4gPSBQaCh0KTtcbiAgICBpZiAobi5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgTShcImVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgcyA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIGkgPSBuZXcgUGE7XG4gICAgcmV0dXJuIERoKG4sIGksIG5ldyBSYShpLCBzLmNhY2hlU2l6ZUJ5dGVzLCBudWxsID09IGUgPyB2b2lkIDAgOiBlLmZvcmNlT3duZXJzaGlwKSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIG11bHRpLXRhYiBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLiBJZiBlbmFibGVkXG4gKiBhY3Jvc3MgYWxsIHRhYnMsIGFsbCBvcGVyYXRpb25zIHNoYXJlIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZSwgaW5jbHVkaW5nXG4gKiBzaGFyZWQgZXhlY3V0aW9uIG9mIHF1ZXJpZXMgYW5kIGxhdGVuY3ktY29tcGVuc2F0ZWQgbG9jYWwgZG9jdW1lbnQgdXBkYXRlc1xuICogYWNyb3NzIGFsbCBjb25uZWN0ZWQgaW5zdGFuY2VzLlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlXG4gKiBpdCByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBJbmRleGVkRGJMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBpbmRleGVkZGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIFNoKHQpIHtcbiAgICBGaCh0ID0gb2godCwgQWgpKTtcbiAgICBjb25zdCBlID0gUGgodCk7XG4gICAgaWYgKGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIE0oXCJlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgUGE7XG4gICAgcmV0dXJuIERoKGUsIHMsIG5ldyB2YShzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gRGgodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IE5hKHQsIG4pLCBhd2FpdCBrYSh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICAgICAgaWYgKCFNYShlKSkgdGhyb3cgZTtcbiAgICAgICAgICAgIE0oXCJFcnJvciBlbmFibGluZyBpbmRleGVkZGIgY2FjaGUuIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgY2FjaGU6IFwiICsgZSksIHMucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovIGZ1bmN0aW9uIENoKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgJiYgIXQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCBlID0gbmV3IEs7XG4gICAgcmV0dXJuIHQuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFidC5EKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdCArIFwibWFpblwiO1xuICAgICAgICAgICAgICAgIGF3YWl0IGJ0LmRlbGV0ZShlKTtcbiAgICAgICAgICAgIH0oWm8odC5fZGF0YWJhc2VJZCwgdC5fcGVyc2lzdGVuY2VLZXkpKSwgZS5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGUucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLCBlLnByb21pc2U7XG59XG5cbi8qKlxuICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBmb3IgdGhlIGFjdGl2ZSB1c2VyIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyB3cml0ZXMuXG4gKiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIHdhaXRzIGZvciBhbGwgcHJldmlvdXNseSBpc3N1ZWQgd3JpdGVzIChpbmNsdWRpbmdcbiAqIHRob3NlIHdyaXR0ZW4gaW4gYSBwcmV2aW91cyBhcHAgc2Vzc2lvbiksIGJ1dCBpdCBkb2VzIG5vdCB3YWl0IGZvciB3cml0ZXNcbiAqIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiBJZiB5b3Ugd2FudCB0byB3YWl0IGZvclxuICogYWRkaXRpb25hbCB3cml0ZXMsIGNhbGwgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIGFnYWluLlxuICpcbiAqIEFueSBvdXRzdGFuZGluZyBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgcHJvbWlzZXMgYXJlIHJlamVjdGVkIGR1cmluZyB1c2VyXG4gKiBjaGFuZ2VzLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiB4aCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFpjKGF3YWl0IHFhKHQpLCBlKSkpLCBlLnByb21pc2U7XG4gICAgfShQaCh0ID0gb2godCwgQWgpKSk7XG59XG5cbi8qKlxuICogUmUtZW5hYmxlcyB1c2Ugb2YgdGhlIG5ldHdvcmsgZm9yIHRoaXMge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgYWZ0ZXIgYSBwcmlvclxuICogY2FsbCB0byB7QGxpbmsgZGlzYWJsZU5ldHdvcmt9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBlbmFibGVkLlxuICovIGZ1bmN0aW9uIE5oKHQpIHtcbiAgICByZXR1cm4gR2EoUGgodCA9IG9oKHQsIEFoKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiBraCh0KSB7XG4gICAgcmV0dXJuIFFhKFBoKHQgPSBvaCh0LCBBaCkpKTtcbn1cblxuLyoqXG4gKiBUZXJtaW5hdGVzIHRoZSBwcm92aWRlZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgb25seSB0aGUgYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgZnVuY3Rpb25cbiAqIG1heSBiZSB1c2VkLiBBbnkgb3RoZXIgZnVuY3Rpb24gd2lsbCB0aHJvdyBhIGBGaXJlc3RvcmVFcnJvcmAuXG4gKlxuICogVG8gcmVzdGFydCBhZnRlciB0ZXJtaW5hdGlvbiwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEZpcmViYXNlRmlyZXN0b3JlIHdpdGhcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBUZXJtaW5hdGlvbiBkb2VzIG5vdCBjYW5jZWwgYW55IHBlbmRpbmcgd3JpdGVzLCBhbmQgYW55IHByb21pc2VzIHRoYXQgYXJlXG4gKiBhd2FpdGluZyBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciB3aWxsIG5vdCBiZSByZXNvbHZlZC4gSWYgeW91IGhhdmVcbiAqIHBlcnNpc3RlbmNlIGVuYWJsZWQsIHRoZSBuZXh0IHRpbWUgeW91IHN0YXJ0IHRoaXMgaW5zdGFuY2UsIGl0IHdpbGwgcmVzdW1lXG4gKiBzZW5kaW5nIHRoZXNlIHdyaXRlcyB0byB0aGUgc2VydmVyLlxuICpcbiAqIE5vdGU6IFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgaXMgbm90IHJlcXVpcmVkLiBUaGlzXG4gKiBmdW5jdGlvbiBpcyB1c2VmdWwgb25seSB3aGVuIHlvdSB3YW50IHRvIGZvcmNlIHRoaXMgaW5zdGFuY2UgdG8gcmVsZWFzZSBhbGxcbiAqIG9mIGl0cyByZXNvdXJjZXMgb3IgaW4gY29tYmluYXRpb24gd2l0aCBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB0b1xuICogZW5zdXJlIHRoYXQgYWxsIGxvY2FsIHN0YXRlIGlzIGRlc3Ryb3llZCBiZXR3ZWVuIHRlc3QgcnVucy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIGluc3RhbmNlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogdGVybWluYXRlZC5cbiAqLyBmdW5jdGlvbiBNaCh0KSB7XG4gICAgcmV0dXJuIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UodC5hcHAsIFwiZmlyZXN0b3JlXCIsIHQuX2RhdGFiYXNlSWQuZGF0YWJhc2UpLCB0Ll9kZWxldGUoKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBsb2FkIGJ1bmRsZXMgZm9yLlxuICogQHBhcmFtIGJ1bmRsZURhdGEgLSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBidW5kbGUgdG8gYmUgbG9hZGVkLiBWYWxpZFxuICogb2JqZWN0cyBhcmUgYEFycmF5QnVmZmVyYCwgYFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+YCBvciBgc3RyaW5nYC5cbiAqXG4gKiBAcmV0dXJucyBBIGBMb2FkQnVuZGxlVGFza2Agb2JqZWN0LCB3aGljaCBub3RpZmllcyBjYWxsZXJzIHdpdGggcHJvZ3Jlc3NcbiAqIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYVxuICogYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovIGZ1bmN0aW9uIE9oKHQsIGUpIHtcbiAgICBjb25zdCBuID0gUGgodCA9IG9oKHQsIEFoKSksIHMgPSBuZXcgVGg7XG4gICAgcmV0dXJuIFlhKG4sIHQuX2RhdGFiYXNlSWQsIGUsIHMpLCBzO1xufVxuXG4vKipcbiAqIFJlYWRzIGEgRmlyZXN0b3JlIHtAbGluayBRdWVyeX0gZnJvbSBsb2NhbCBjYWNoZSwgaWRlbnRpZmllZCBieSB0aGUgZ2l2ZW5cbiAqIG5hbWUuXG4gKlxuICogVGhlIG5hbWVkIHF1ZXJpZXMgYXJlIHBhY2thZ2VkICBpbnRvIGJ1bmRsZXMgb24gdGhlIHNlcnZlciBzaWRlIChhbG9uZ1xuICogd2l0aCByZXN1bHRpbmcgZG9jdW1lbnRzKSwgYW5kIGxvYWRlZCB0byBsb2NhbCBjYWNoZSB1c2luZyBgbG9hZEJ1bmRsZWAuIE9uY2VcbiAqIGluIGxvY2FsIGNhY2hlLCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCBhIHtAbGluayBRdWVyeX0gYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIHJlYWQgdGhlIHF1ZXJ5IGZyb20uXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgUXVlcnkgb3IgYG51bGxgLlxuICovIGZ1bmN0aW9uICRoKHQsIGUpIHtcbiAgICByZXR1cm4gWGEoUGgodCA9IG9oKHQsIEFoKSksIGUpLnRoZW4oKGUgPT4gZSA/IG5ldyBmaCh0LCBudWxsLCBlLnF1ZXJ5KSA6IG51bGwpKTtcbn1cblxuZnVuY3Rpb24gRmgodCkge1xuICAgIGlmICh0Ll9pbml0aWFsaXplZCB8fCB0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciBiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgZW5hYmxlIHBlcnNpc3RlbmNlIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGFnZ3JlZ2F0aW9uIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBieSBGaXJlc3RvcmUuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmNsYXNzIEJoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQWdncmVnYXRlRmllbGQ8VD5cbiAgICAgKiBAcGFyYW0gX2FnZ3JlZ2F0ZVR5cGUgU3BlY2lmaWVzIHRoZSB0eXBlIG9mIGFnZ3JlZ2F0aW9uIG9wZXJhdGlvbiB0byBwZXJmb3JtLlxuICAgICAqIEBwYXJhbSBfaW50ZXJuYWxGaWVsZFBhdGggT3B0aW9uYWxseSBzcGVjaWZpZXMgdGhlIGZpZWxkIHRoYXQgaXMgYWdncmVnYXRlZC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUT0RPIChzdW0vYXZnKSBtYWtlIGFnZ3JlZ2F0ZVR5cGUgcHVibGljIHdoZW4gdGhlIGZlYXR1cmUgaXMgc3VwcG9ydGVkXG4gICAgdCA9IFwiY291bnRcIiwgZSkge1xuICAgICAgICB0aGlzLl9hZ2dyZWdhdGVUeXBlID0gdCwgdGhpcy5faW50ZXJuYWxGaWVsZFBhdGggPSBlLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlRmllbGRcIjtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHJlc3VsdHMgb2YgZXhlY3V0aW5nIGFuIGFnZ3JlZ2F0aW9uIHF1ZXJ5LlxuICovIGNsYXNzIExoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9kYXRhID0gbiwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RcIiwgdGhpcy5xdWVyeSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqXG4gICAgICogVGhlIGtleXMgb2YgdGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGJlIHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxuICAgICAqIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3Qgc3BlY2lmaWVkIHRvIHRoZSBhZ2dyZWdhdGlvbiBtZXRob2QsIGFuZCB0aGUgdmFsdWVzXG4gICAgICogd2lsbCBiZSB0aGUgY29ycmVzcG9uZGluZyBhZ2dyZWdhdGlvbiByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0T2JqZWN0TWFwKHRoaXMuX2RhdGEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgcWgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHFoKFZlLmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcWgoVmUuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovIGNsYXNzIFVoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYEZpZWxkUGF0aGAgZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAgICAgKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyAtIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi50KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7ICsrZSkgaWYgKDAgPT09IHRbZV0ubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBuYW1lIGF0IGFyZ3VtZW50ICQoaSArIDEpLiBGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS5cIik7XG4gICAgICAgIHRoaXMuX2ludGVybmFsUGF0aCA9IG5ldyBhdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgRmllbGRQYXRoYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwodC5faW50ZXJuYWxQYXRoKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgc2VudGluZWwgYEZpZWxkUGF0aGAgdG8gcmVmZXIgdG8gdGhlIElEIG9mIGEgZG9jdW1lbnQuXG4gKiBJdCBjYW4gYmUgdXNlZCBpbiBxdWVyaWVzIHRvIHNvcnQgb3IgZmlsdGVyIGJ5IHRoZSBkb2N1bWVudCBJRC5cbiAqLyBmdW5jdGlvbiBLaCgpIHtcbiAgICByZXR1cm4gbmV3IFVoKFwiX19uYW1lX19cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNlbnRpbmVsIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gd3JpdGluZyBkb2N1bWVudCBmaWVsZHMgd2l0aCBgc2V0KClgXG4gKiBvciBgdXBkYXRlKClgLlxuICovIGNsYXNzIEdoIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gX21ldGhvZE5hbWUgLSBUaGUgcHVibGljIEFQSSBlbmRwb2ludCB0aGF0IHJldHVybnMgdGhpcyBjbGFzcy5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9tZXRob2ROYW1lID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGEgZ2VvZ3JhcGhpYyBsb2NhdGlvbiBpbiBGaXJlc3RvcmUuIFRoZVxuICogbG9jYXRpb24gaXMgcmVwcmVzZW50ZWQgYXMgbGF0aXR1ZGUvbG9uZ2l0dWRlIHBhaXIuXG4gKlxuICogTGF0aXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy05MCwgOTBdLlxuICogTG9uZ2l0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstMTgwLCAxODBdLlxuICovIGNsYXNzIFFoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBgR2VvUG9pbnRgIG9iamVjdCB3aXRoIHRoZSBwcm92aWRlZCBsYXRpdHVkZSBhbmRcbiAgICAgKiBsb25naXR1ZGUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBsYXRpdHVkZSAtIFRoZSBsYXRpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgLSBUaGUgbG9uZ2l0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIGlmICghaXNGaW5pdGUodCkgfHwgdCA8IC05MCB8fCB0ID4gOTApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogXCIgKyB0KTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShlKSB8fCBlIDwgLTE4MCB8fCBlID4gMTgwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6IFwiICsgZSk7XG4gICAgICAgIHRoaXMuX2xhdCA9IHQsIHRoaXMuX2xvbmcgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbGF0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb25naXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBHZW9Qb2ludGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSB0Ll9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gdC5fbG9uZztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEdlb1BvaW50LiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5fbGF0LFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB0aGlzLl9sb25nXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXG4gICAgICovICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gZXQodGhpcy5fbGF0LCB0Ll9sYXQpIHx8IGV0KHRoaXMuX2xvbmcsIHQuX2xvbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgamggPSAvXl9fLipfXyQvO1xuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi8gY2xhc3Mgemgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5maWVsZE1hc2sgPyBuZXcgenModCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpIDogbmV3IGpzKHQsIHRoaXMuZGF0YSwgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovIGNsYXNzIFdoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBUaGUgZmllbGRNYXNrIGRvZXMgbm90IGluY2x1ZGUgZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB6cyh0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBIaCh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovIDpcbiAgICAgIGNhc2UgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyAkKCk7XG4gICAgfVxufVxuXG4vKiogQSBcImNvbnRleHRcIiBvYmplY3QgcGFzc2VkIGFyb3VuZCB3aGlsZSBwYXJzaW5nIHVzZXIgZGF0YS4gKi8gY2xhc3MgSmgge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUGFyc2VDb250ZXh0IHdpdGggdGhlIGdpdmVuIHNvdXJjZSBhbmQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyAtIFRoZSBzZXR0aW5ncyBmb3IgdGhlIHBhcnNlci5cbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSBJRCBvZiB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHRvIGdlbmVyYXRlIHRoZSBWYWx1ZSBwcm90by5cbiAgICAgKiBAcGFyYW0gaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAtIFdoZXRoZXIgdG8gaWdub3JlIHVuZGVmaW5lZCBwcm9wZXJ0aWVzXG4gICAgICogcmF0aGVyIHRoYW4gdGhyb3cuXG4gICAgICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWRcbiAgICAgKiB3aGlsZSBwYXJzaW5nIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBmaWVsZE1hc2sgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXG4gICAgICogdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdywgc28gcGF0aCBjYW4gYmVcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cbiAgICAgKiB3aGljaCBjYXNlIGNlcnRhaW4gZmVhdHVyZXMgd2lsbCBub3Qgd29yayBhbmQgZXJyb3JzIHdpbGwgYmUgc29tZXdoYXRcbiAgICAgKiBjb21wcm9taXNlZCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy5zZXJpYWxpemVyID0gbiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gcywgXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXG4gICAgICAgIC8vIGV4dGVybmFsIGNhbGwgYW5kIHdlIG5lZWQgdG8gdmFsaWRhdGUgdGhlIGVudGlyZSBwYXRoLlxuICAgICAgICB2b2lkIDAgPT09IGkgJiYgdGhpcy5vYSgpLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGkgfHwgW10sIHRoaXMuZmllbGRNYXNrID0gciB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBhdGg7XG4gICAgfVxuICAgIGdldCB1YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MudWE7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbmV3IGNvbnRleHQgd2l0aCB0aGUgc3BlY2lmaWVkIHNldHRpbmdzIG92ZXJ3cml0dGVuLiAqLyAgICBjYSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSmgoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzKSwgdCksIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XG4gICAgfVxuICAgIGFhKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAoZSA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jaGlsZCh0KSwgcyA9IHRoaXMuY2Eoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIGhhOiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHMubGEodCksIHM7XG4gICAgfVxuICAgIGZhKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAoZSA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jaGlsZCh0KSwgcyA9IHRoaXMuY2Eoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIGhhOiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHMub2EoKSwgcztcbiAgICB9XG4gICAgZGEodCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXG4gICAgICAgIC8vIHVuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2Eoe1xuICAgICAgICAgICAgcGF0aDogdm9pZCAwLFxuICAgICAgICAgICAgaGE6ICEwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYSh0KSB7XG4gICAgICAgIHJldHVybiBtbCh0LCB0aGlzLnNldHRpbmdzLm1ldGhvZE5hbWUsIHRoaXMuc2V0dGluZ3Mud2EgfHwgITEsIHRoaXMucGF0aCwgdGhpcy5zZXR0aW5ncy5tYSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqLyAgICBjb250YWlucyh0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZmllbGRNYXNrLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUpKSkgfHwgdm9pZCAwICE9PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlLmZpZWxkKSkpO1xuICAgIH1cbiAgICBvYSgpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICh0aGlzLnBhdGgpIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5wYXRoLmxlbmd0aDsgdCsrKSB0aGlzLmxhKHRoaXMucGF0aC5nZXQodCkpO1xuICAgIH1cbiAgICBsYSh0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgdGhyb3cgdGhpcy5fYShcIkRvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcbiAgICAgICAgaWYgKEhoKHRoaXMudWEpICYmIGpoLnRlc3QodCkpIHRocm93IHRoaXMuX2EoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXG4gKiBjbGFzc2VzLlxuICovIGNsYXNzIFloIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IGUsIHRoaXMuc2VyaWFsaXplciA9IG4gfHwgRnUodCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRvcC1sZXZlbCBwYXJzZSBjb250ZXh0LiAqLyAgICBnYSh0LCBlLCBuLCBzID0gITEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKaCh7XG4gICAgICAgICAgICB1YTogdCxcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6IGUsXG4gICAgICAgICAgICBtYTogbixcbiAgICAgICAgICAgIHBhdGg6IGF0LmVtcHR5UGF0aCgpLFxuICAgICAgICAgICAgaGE6ICExLFxuICAgICAgICAgICAgd2E6IHNcbiAgICAgICAgfSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBYaCh0KSB7XG4gICAgY29uc3QgZSA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIG4gPSBGdSh0Ll9kYXRhYmFzZUlkKTtcbiAgICByZXR1cm4gbmV3IFloKHQuX2RhdGFiYXNlSWQsICEhZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBuKTtcbn1cblxuLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwuICovIGZ1bmN0aW9uIFpoKHQsIGUsIG4sIHMsIGksIHIgPSB7fSkge1xuICAgIGNvbnN0IG8gPSB0LmdhKHIubWVyZ2UgfHwgci5tZXJnZUZpZWxkcyA/IDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOiAwIC8qIFVzZXJEYXRhU291cmNlLlNldCAqLyAsIGUsIG4sIGkpO1xuICAgIGZsKFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgbywgcyk7XG4gICAgY29uc3QgdSA9IGhsKHMsIG8pO1xuICAgIGxldCBjLCBhO1xuICAgIGlmIChyLm1lcmdlKSBjID0gbmV3IHZlKG8uZmllbGRNYXNrKSwgYSA9IG8uZmllbGRUcmFuc2Zvcm1zOyBlbHNlIGlmIChyLm1lcmdlRmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBkbChlLCBzLCBuKTtcbiAgICAgICAgICAgIGlmICghby5jb250YWlucyhpKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRmllbGQgJyR7aX0nIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuYCk7XG4gICAgICAgICAgICBnbCh0LCBpKSB8fCB0LnB1c2goaSk7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IG5ldyB2ZSh0KSwgYSA9IG8uZmllbGRUcmFuc2Zvcm1zLmZpbHRlcigodCA9PiBjLmNvdmVycyh0LmZpZWxkKSkpO1xuICAgIH0gZWxzZSBjID0gbnVsbCwgYSA9IG8uZmllbGRUcmFuc2Zvcm1zO1xuICAgIHJldHVybiBuZXcgemgobmV3IHVuKHUpLCBjLCBhKTtcbn1cblxuY2xhc3MgdGwgZXh0ZW5kcyBHaCB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBpZiAoMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyAhPT0gdC51YSkgdGhyb3cgMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gPT09IHQudWEgPyB0Ll9hKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwgb2YgeW91ciB1cGRhdGUgZGF0YWApIDogdC5fYShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggc2V0KCkgdW5sZXNzIHlvdSBwYXNzIHttZXJnZTp0cnVlfWApO1xuICAgICAgICAvLyBObyB0cmFuc2Zvcm0gdG8gYWRkIGZvciBhIGRlbGV0ZSwgYnV0IHdlIG5lZWQgdG8gYWRkIGl0IHRvIG91clxuICAgICAgICAvLyBmaWVsZE1hc2sgc28gaXQgZ2V0cyBkZWxldGVkLlxuICAgICAgICByZXR1cm4gdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpLCBudWxsO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiB0bDtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNoaWxkIGNvbnRleHQgZm9yIHBhcnNpbmcgU2VyaWFsaXphYmxlRmllbGRWYWx1ZXMuXG4gKlxuICogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBjYWxsaW5nIGBQYXJzZUNvbnRleHQuY29udGV4dFdpdGhgIGJlY2F1c2UgaXQga2VlcHNcbiAqIHRoZSBmaWVsZFRyYW5zZm9ybXMgYW5kIGZpZWxkTWFzayBzZXBhcmF0ZS5cbiAqXG4gKiBUaGUgY3JlYXRlZCBjb250ZXh0IGhhcyBpdHMgYGRhdGFTb3VyY2VgIHNldCB0byBgVXNlckRhdGFTb3VyY2UuQXJndW1lbnRgLlxuICogQWx0aG91Z2ggdGhlc2UgdmFsdWVzIGFyZSB1c2VkIHdpdGggd3JpdGVzLCBhbnkgZWxlbWVudHMgaW4gdGhlc2UgRmllbGRWYWx1ZXNcbiAqIGFyZSBub3QgY29uc2lkZXJlZCB3cml0ZXMgc2luY2UgdGhleSBjYW5ub3QgY29udGFpbiBhbnkgRmllbGRWYWx1ZSBzZW50aW5lbHMsXG4gKiBldGMuXG4gKlxuICogQHBhcmFtIGZpZWxkVmFsdWUgLSBUaGUgc2VudGluZWwgRmllbGRWYWx1ZSBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2hpbGRcbiAqICAgICBjb250ZXh0LlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgcGFyZW50IGNvbnRleHQuXG4gKiBAcGFyYW0gYXJyYXlFbGVtZW50IC0gV2hldGhlciBvciBub3QgdGhlIEZpZWxkVmFsdWUgaGFzIGFuIGFycmF5LlxuICovIGZ1bmN0aW9uIGVsKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IEpoKHtcbiAgICAgICAgdWE6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLFxuICAgICAgICBtYTogZS5zZXR0aW5ncy5tYSxcbiAgICAgICAgbWV0aG9kTmFtZTogdC5fbWV0aG9kTmFtZSxcbiAgICAgICAgaGE6IG5cbiAgICB9LCBlLmRhdGFiYXNlSWQsIGUuc2VyaWFsaXplciwgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbn1cblxuY2xhc3MgbmwgZXh0ZW5kcyBHaCB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICByZXR1cm4gbmV3IE1zKHQucGF0aCwgbmV3IGJzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2Ygbmw7XG4gICAgfVxufVxuXG5jbGFzcyBzbCBleHRlbmRzIEdoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLnlhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gZWwodGhpcywgdCwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy55YS5tYXAoKHQgPT4gYWwodCwgZSkpKSwgcyA9IG5ldyBWcyhuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyh0LnBhdGgsIHMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBpbCBleHRlbmRzIEdoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLnlhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gZWwodGhpcywgdCwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy55YS5tYXAoKHQgPT4gYWwodCwgZSkpKSwgcyA9IG5ldyBEcyhuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyh0LnBhdGgsIHMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBybCBleHRlbmRzIEdoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLnBhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IHhzKHQuc2VyaWFsaXplciwgRXModC5zZXJpYWxpemVyLCB0aGlzLnBhKSk7XG4gICAgICAgIHJldHVybiBuZXcgTXModC5wYXRoLCBlKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi8gZnVuY3Rpb24gb2wodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSB0LmdhKDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgZSwgbik7XG4gICAgZmwoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBpLCBzKTtcbiAgICBjb25zdCByID0gW10sIG8gPSB1bi5lbXB0eSgpO1xuICAgIGdlKHMsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCB1ID0gd2woZSwgdCwgbik7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBzID0gZ2V0TW9kdWxhckluc3RhbmNlKHMpO1xuICAgICAgICBjb25zdCBjID0gaS5mYSh1KTtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiB0bCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICByLnB1c2godSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IGFsKHMsIGMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChyLnB1c2godSksIG8uc2V0KHUsIHQpKTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCB1ID0gbmV3IHZlKHIpO1xuICAgIHJldHVybiBuZXcgV2gobywgdSwgaS5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhIGxpc3Qgb2YgZmllbGQvdmFsdWUgYXJndW1lbnRzLiAqLyBmdW5jdGlvbiB1bCh0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgY29uc3QgbyA9IHQuZ2EoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCBlLCBuKSwgdSA9IFsgZGwoZSwgcywgbikgXSwgYyA9IFsgaSBdO1xuICAgIGlmIChyLmxlbmd0aCAlIDIgIT0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCArPSAyKSB1LnB1c2goZGwoZSwgclt0XSkpLCBjLnB1c2goclt0ICsgMV0pO1xuICAgIGNvbnN0IGEgPSBbXSwgaCA9IHVuLmVtcHR5KCk7XG4gICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHBpY2sgdGhlIGxhc3QgdmFsdWUgZm9yIGEgZmllbGQgaWYgdGhlXG4gICAgLy8gdXNlciBzcGVjaWZpZWQgdGhlIGZpZWxkIG11bHRpcGxlIHRpbWVzLlxuICAgIGZvciAobGV0IHQgPSB1Lmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSBpZiAoIWdsKGEsIHVbdF0pKSB7XG4gICAgICAgIGNvbnN0IGUgPSB1W3RdO1xuICAgICAgICBsZXQgbiA9IGNbdF07XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pO1xuICAgICAgICBjb25zdCBzID0gby5mYShlKTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiB0bCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICBhLnB1c2goZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IGFsKG4sIHMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChhLnB1c2goZSksIGguc2V0KGUsIHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsID0gbmV3IHZlKGEpO1xuICAgIHJldHVybiBuZXcgV2goaCwgbCwgby5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgXCJxdWVyeSB2YWx1ZVwiIChlLmcuIHZhbHVlIGluIGEgd2hlcmUgZmlsdGVyIG9yIGEgdmFsdWUgaW4gYSBjdXJzb3JcbiAqIGJvdW5kKS5cbiAqXG4gKiBAcGFyYW0gYWxsb3dBcnJheXMgLSBXaGV0aGVyIHRoZSBxdWVyeSB2YWx1ZSBpcyBhbiBhcnJheSB0aGF0IG1heSBkaXJlY3RseVxuICogY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cbiAqLyBmdW5jdGlvbiBjbCh0LCBlLCBuLCBzID0gITEpIHtcbiAgICByZXR1cm4gYWwobiwgdC5nYShzID8gNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsIGUpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdXNlciBkYXRhIHRvIFByb3RvYnVmIFZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBEYXRhIHRvIGJlIHBhcnNlZC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXG4gKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxuICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXG4gKi8gZnVuY3Rpb24gYWwodCwgZSkge1xuICAgIGlmIChsbChcbiAgICAvLyBVbndyYXAgdGhlIEFQSSB0eXBlIGZyb20gdGhlIENvbXBhdCBTREsuIFRoaXMgd2lsbCByZXR1cm4gdGhlIEFQSSB0eXBlXG4gICAgLy8gZnJvbSBmaXJlc3RvcmUtZXhwLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpKSByZXR1cm4gZmwoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTpcIiwgZSwgdCksIGhsKHQsIGUpO1xuICAgIGlmICh0IGluc3RhbmNlb2YgR2gpIFxuICAgIC8vIEZpZWxkVmFsdWVzIHVzdWFsbHkgcGFyc2UgaW50byB0cmFuc2Zvcm1zIChleGNlcHQgZGVsZXRlRmllbGQoKSlcbiAgICAvLyBpbiB3aGljaCBjYXNlIHdlIGRvIG5vdCB3YW50IHRvIGluY2x1ZGUgdGhpcyBmaWVsZCBpbiBvdXIgcGFyc2VkIGRhdGFcbiAgICAvLyAoYXMgZG9pbmcgc28gd2lsbCBvdmVyd3JpdGUgdGhlIGZpZWxkIGRpcmVjdGx5IHByaW9yIHRvIHRoZSB0cmFuc2Zvcm1cbiAgICAvLyB0cnlpbmcgdG8gdHJhbnNmb3JtIGl0KS4gU28gd2UgZG9uJ3QgYWRkIHRoaXMgbG9jYXRpb24gdG9cbiAgICAvLyBjb250ZXh0LmZpZWxkTWFzayBhbmQgd2UgcmV0dXJuIG51bGwgYXMgb3VyIHBhcnNpbmcgcmVzdWx0LlxuICAgIC8qKlxuICogXCJQYXJzZXNcIiB0aGUgcHJvdmlkZWQgRmllbGRWYWx1ZUltcGwsIGFkZGluZyBhbnkgbmVjZXNzYXJ5IHRyYW5zZm9ybXMgdG9cbiAqIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAoIUhoKGUudWEpKSB0aHJvdyBlLl9hKGAke3QuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKWApO1xuICAgICAgICBpZiAoIWUucGF0aCkgdGhyb3cgZS5fYShgJHt0Ll9tZXRob2ROYW1lfSgpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNgKTtcbiAgICAgICAgY29uc3QgbiA9IHQuX3RvRmllbGRUcmFuc2Zvcm0oZSk7XG4gICAgICAgIG4gJiYgZS5maWVsZFRyYW5zZm9ybXMucHVzaChuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZVxuICovICh0LCBlKSwgbnVsbDtcbiAgICBpZiAodm9pZCAwID09PSB0ICYmIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcykgXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCBpdCBjYW4gbmV2ZXIgcGFydGljaXBhdGUgaW4gdGhlIGZpZWxkTWFzaywgc29cbiAgICAvLyBkb24ndCBoYW5kbGUgdGhpcyBiZWxvdy4gSWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgIGlzIGZhbHNlLFxuICAgIC8vIGBwYXJzZVNjYWxhclZhbHVlYCB3aWxsIHJlamVjdCBhbiB1bmRlZmluZWQgdmFsdWUuXG4gICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKFxuICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcbiAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxuICAgIGUucGF0aCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCksIHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxuICAgICAgICAvLyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xuICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxuICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXG4gICAgICAgIGlmIChlLnNldHRpbmdzLmhhICYmIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyAhPT0gZS51YSkgdGhyb3cgZS5fYShcIk5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gYWwoaSwgZS5kYShzKSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSB0ICYmIChcbiAgICAgICAgICAgICAgICAvLyBKdXN0IGluY2x1ZGUgbnVsbHMgaW4gdGhlIGFycmF5IGZvciBmaWVsZHMgYmVpbmcgcmVwbGFjZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwuXG4gICAgICAgICAgICAgICAgdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgICAgIH0pLCBuLnB1c2godCksIHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAobnVsbCA9PT0gKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpKSByZXR1cm4ge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIEVzKGUuc2VyaWFsaXplciwgdCk7XG4gICAgICAgIGlmIChcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGl0LmZyb21EYXRlKHQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogRGkoZS5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGl0KSB7XG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBpdCh0LnNlY29uZHMsIDFlMyAqIE1hdGguZmxvb3IodC5uYW5vc2Vjb25kcyAvIDFlMykpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogRGkoZS5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFFoKSByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiB0LmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdC5sb25naXR1ZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBxaCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJ5dGVzVmFsdWU6IENpKGUuc2VyaWFsaXplciwgdC5fYnl0ZVN0cmluZylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBsaCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZGF0YWJhc2VJZCwgcyA9IHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xuICAgICAgICAgICAgaWYgKCFzLmlzRXF1YWwobikpIHRocm93IGUuX2EoYERvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSBidXQgc2hvdWxkIGJlIGZvciBkYXRhYmFzZSAke24ucHJvamVjdElkfS8ke24uZGF0YWJhc2V9YCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiBraSh0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCBlLmRhdGFiYXNlSWQsIHQuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlLl9hKGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtyaCh0KX1gKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBobCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHt9O1xuICAgIHJldHVybiB5ZSh0KSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICBlLnBhdGggJiYgZS5wYXRoLmxlbmd0aCA+IDAgJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpIDogZ2UodCwgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBhbChzLCBlLmFhKHQpKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChuW3RdID0gaSk7XG4gICAgfSkpLCB7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGxsKHQpIHtcbiAgICByZXR1cm4gIShcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQgfHwgdCBpbnN0YW5jZW9mIEFycmF5IHx8IHQgaW5zdGFuY2VvZiBEYXRlIHx8IHQgaW5zdGFuY2VvZiBpdCB8fCB0IGluc3RhbmNlb2YgUWggfHwgdCBpbnN0YW5jZW9mIHFoIHx8IHQgaW5zdGFuY2VvZiBsaCB8fCB0IGluc3RhbmNlb2YgR2gpO1xufVxuXG5mdW5jdGlvbiBmbCh0LCBlLCBuKSB7XG4gICAgaWYgKCFsbChuKSB8fCAhZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpKTtcbiAgICB9KG4pKSB7XG4gICAgICAgIGNvbnN0IHMgPSByaChuKTtcbiAgICAgICAgdGhyb3cgXCJhbiBvYmplY3RcIiA9PT0gcyA/IGUuX2EodCArIFwiIGEgY3VzdG9tIG9iamVjdFwiKSA6IGUuX2EodCArIFwiIFwiICsgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBkbCh0LCBlLCBuKSB7XG4gICAgaWYgKChcbiAgICAvLyBJZiByZXF1aXJlZCwgcmVwbGFjZSB0aGUgRmllbGRQYXRoIENvbXBhdCBjbGFzcyB3aXRoIHdpdGggdGhlIGZpcmVzdG9yZS1leHBcbiAgICAvLyBGaWVsZFBhdGguXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgaW5zdGFuY2VvZiBVaCkgcmV0dXJuIGUuX2ludGVybmFsUGF0aDtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIHdsKHQsIGUpO1xuICAgIHRocm93IG1sKFwiRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBcIiwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgX2wgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiB3bCh0LCBlLCBuKSB7XG4gICAgaWYgKGUuc2VhcmNoKF9sKSA+PSAwKSB0aHJvdyBtbChgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaCguLi5lLnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgIHRocm93IG1sKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgdCwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbWwodCwgZSwgbiwgcywgaSkge1xuICAgIGNvbnN0IHIgPSBzICYmICFzLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgdSA9IGBGdW5jdGlvbiAke2V9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmICh1ICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgdSArPSBcIi4gXCI7XG4gICAgbGV0IGMgPSBcIlwiO1xuICAgIHJldHVybiAociB8fCBvKSAmJiAoYyArPSBcIiAoZm91bmRcIiwgciAmJiAoYyArPSBgIGluIGZpZWxkICR7c31gKSwgbyAmJiAoYyArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYyArPSBcIilcIiksIG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgdSArIHQgKyBjKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIGdsKHQsIGUpIHtcbiAgICByZXR1cm4gdC5zb21lKCh0ID0+IHQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIHlsIHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHMsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgbGgodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBwbCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKElsKFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUoZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBwbCBleHRlbmRzIHlsIHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIElsKHQsIGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IHdsKHQsIGUpIDogZSBpbnN0YW5jZW9mIFVoID8gZS5faW50ZXJuYWxQYXRoIDogZS5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gVGwodCkge1xuICAgIGlmIChcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gdC5saW1pdFR5cGUgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgVShxLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBbiBgQXBwbGlhYmxlQ29uc3RyYWludGAgaXMgYW4gYWJzdHJhY3Rpb24gb2YgYSBjb25zdHJhaW50IHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAqIHRvIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICovIGNsYXNzIEVsIHt9XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIChlbmRCZWZvcmU6MSl9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSwge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovIGNsYXNzIEFsIGV4dGVuZHMgRWwge31cblxuZnVuY3Rpb24gUmwodCwgZSwgLi4ubikge1xuICAgIGxldCBzID0gW107XG4gICAgZSBpbnN0YW5jZW9mIEVsICYmIHMucHVzaChlKSwgcyA9IHMuY29uY2F0KG4pLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgYmwpKS5sZW5ndGgsIG4gPSB0LmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgdmwpKS5sZW5ndGg7XG4gICAgICAgIGlmIChlID4gMSB8fCBlID4gMCAmJiBuID4gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWRRdWVyeS4gV2hlbiB1c2luZyBjb21wb3NpdGUgZmlsdGVycywgeW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBmaWx0ZXIgYXQgdGhlIHRvcCBsZXZlbC4gQ29uc2lkZXIgbmVzdGluZyB0aGUgbXVsdGlwbGUgZmlsdGVycyB3aXRoaW4gYW4gYGFuZCguLi4pYCBzdGF0ZW1lbnQuIEZvciBleGFtcGxlOiBjaGFuZ2UgYHF1ZXJ5KHF1ZXJ5LCB3aGVyZSguLi4pLCBvciguLi4pKWAgdG8gYHF1ZXJ5KHF1ZXJ5LCBhbmQod2hlcmUoLi4uKSwgb3IoLi4uKSkpYC5cIik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gKHMpO1xuICAgIGZvciAoY29uc3QgZSBvZiBzKSB0ID0gZS5fYXBwbHkodCk7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQSBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeSBieSBmaWx0ZXJpbmcgb24gb25lIG9yIG1vcmUgZG9jdW1lbnQgZmllbGRzLlxuICogYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSBhbmQgY2FuIHRoZW5cbiAqIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zXG4gKiB0aGlzIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgdmwgZXh0ZW5kcyBBbCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IHQsIHRoaXMuX29wID0gZSwgdGhpcy5fdmFsdWUgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2bCh0LCBlLCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3BhcnNlKHQpO1xuICAgICAgICByZXR1cm4gR2wodC5fcXVlcnksIGUpLCBuZXcgZmgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBZbih0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbiAgICBfcGFyc2UodCkge1xuICAgICAgICBjb25zdCBlID0gWGgodC5maXJlc3RvcmUpLCBuID0gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICAgICAgbGV0IHU7XG4gICAgICAgICAgICBpZiAoaS5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSByIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSByKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtyfScgcXVlcmllcyBvbiBkb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICBLbChvLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgZS5wdXNoKFVsKHMsIHQsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgdSA9IFVsKHMsIHQsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAhPT0gciAmJiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAhPT0gciAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gciB8fCBLbChvLCByKSwgXG4gICAgICAgICAgICB1ID0gY2wobiwgZSwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSByIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSByKTtcbiAgICAgICAgICAgIHJldHVybiBtbi5jcmVhdGUoaSwgciwgdSk7XG4gICAgICAgIH0odC5fcXVlcnksIFwid2hlcmVcIiwgZSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuX2ZpZWxkLCB0aGlzLl9vcCwgdGhpcy5fdmFsdWUpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50c1xuICogbXVzdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZVxuICogcmVsYXRpb24gY29uc3RyYWludCBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gUGwodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBlLCBpID0gSWwoXCJ3aGVyZVwiLCB0KTtcbiAgICByZXR1cm4gdmwuX2NyZWF0ZShpLCBzLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzXG4gKiByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeSBieSBwZXJmb3JtaW5nIHRoZSBsb2dpY2FsIE9SIG9yIEFORCBvZiBtdWx0aXBsZVxuICoge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fXMgb3Ige0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH1zLlxuICogYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBvcn0gb3JcbiAqIHtAbGluayBhbmR9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhlIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIGJsIGV4dGVuZHMgRWwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYmwodCwgZSk7XG4gICAgfVxuICAgIF9wYXJzZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzLm1hcCgoZSA9PiBlLl9wYXJzZSh0KSkpLmZpbHRlcigodCA9PiB0LmdldEZpbHRlcnMoKS5sZW5ndGggPiAwKSk7XG4gICAgICAgIHJldHVybiAxID09PSBlLmxlbmd0aCA/IGVbMF0gOiBnbi5jcmVhdGUoZSwgdGhpcy5fZ2V0T3BlcmF0b3IoKSk7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIDAgPT09IGUuZ2V0RmlsdGVycygpLmxlbmd0aCA/IHQgOiAoZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSB0O1xuICAgICAgICAgICAgY29uc3QgcyA9IGUuZ2V0RmxhdHRlbmVkRmlsdGVycygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHMpIEdsKG4sIHQpLCBuID0gWW4obiwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgZmlsdGVyIG9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIGdpdmVuIGxpc3Qgb2YgZmlsdGVycyBhbmRcbiAgICAgICAgLy8gcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gICAgICAgICh0Ll9xdWVyeSwgZSksIG5ldyBmaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIFluKHQuX3F1ZXJ5LCBlKSkpO1xuICAgIH1cbiAgICBfZ2V0UXVlcnlDb25zdHJhaW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHM7XG4gICAgfVxuICAgIF9nZXRPcGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIFwiYW5kXCIgPT09IHRoaXMudHlwZSA/IFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovIDogXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBkaXNqdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBkaXNqdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFueSBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBkaXNqdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIFZsKC4uLnQpIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgUXVlcnlGaWx0ZXJDb25zdHJhaW50c1xuICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4gamwoXCJvclwiLCB0KSkpLCBibC5fY3JlYXRlKFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyAsIHQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGNvbmp1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGNvbmp1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYWxsIG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGNvbmp1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gU2woLi4udCkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiBqbChcImFuZFwiLCB0KSkpLCBibC5fY3JlYXRlKFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovICwgdCk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBzb3J0IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZ1xuICoge0BsaW5rIG9yZGVyQnl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIG9yZGVyQnkgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudCBpblxuICogdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqLyBjbGFzcyBEbCBleHRlbmRzIEFsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gdCwgdGhpcy5fZGlyZWN0aW9uID0gZSwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEbCh0LCBlKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LnN0YXJ0QXQpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5lbmRBdCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgZG4oZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBqbih0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHpuKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIFFsKHQsIG4sIGUuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0odCwgcyksIHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovICh0Ll9xdWVyeSwgdGhpcy5fZmllbGQsIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiBuZXcgZmgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBuLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeU9yZGVyQnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBOb3RlOiBEb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnRcbiAqIGluIHRoZSBxdWVyeSByZXN1bHQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBmaWVsZCB0byBzb3J0IGJ5LlxuICogQHBhcmFtIGRpcmVjdGlvblN0ciAtIE9wdGlvbmFsIGRpcmVjdGlvbiB0byBzb3J0IGJ5ICgnYXNjJyBvciAnZGVzYycpLiBJZlxuICogbm90IHNwZWNpZmllZCwgb3JkZXIgd2lsbCBiZSBhc2NlbmRpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gQ2wodCwgZSA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gZSwgcyA9IElsKFwib3JkZXJCeVwiLCB0KTtcbiAgICByZXR1cm4gRGwuX2NyZWF0ZShzLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUxpbWl0Q29uc3RyYWludGAgaXMgdXNlZCB0byBsaW1pdCB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBieVxuICogYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlMaW1pdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgbGltaXR9IG9yXG4gKiB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlMaW1pdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIHhsIGV4dGVuZHMgQWwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX2xpbWl0ID0gZSwgdGhpcy5fbGltaXRUeXBlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IHhsKHQsIGUsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gbmV3IGZoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgWG4odC5fcXVlcnksIHRoaXMuX2xpbWl0LCB0aGlzLl9saW1pdFR5cGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gTmwodCkge1xuICAgIHJldHVybiB1aChcImxpbWl0XCIsIHQpLCB4bC5fY3JlYXRlKFwibGltaXRcIiwgdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBrbCh0KSB7XG4gICAgcmV0dXJuIHVoKFwibGltaXRUb0xhc3RcIiwgdCksIHhsLl9jcmVhdGUoXCJsaW1pdFRvTGFzdFwiLCB0LCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKHN0YXJ0QXQ6MSl9IG9yXG4gKiB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGFcbiAqIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgTWwgZXh0ZW5kcyBBbCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5fZG9jT3JGaWVsZHMgPSBlLCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWwodCwgZSwgbik7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBxbCh0LCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IGZoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIGUsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPbCguLi50KSB7XG4gICAgcmV0dXJuIE1sLl9jcmVhdGUoXCJzdGFydEF0XCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gJGwoLi4udCkge1xuICAgIHJldHVybiBNbC5fY3JlYXRlKFwic3RhcnRBZnRlclwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlFbmRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgZW5kIG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlFbmRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKGVuZEF0OjEpfSBvclxuICoge0BsaW5rIChlbmRCZWZvcmU6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlFbmRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIEZsIGV4dGVuZHMgQWwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX2RvY09yRmllbGRzID0gZSwgdGhpcy5faW5jbHVzaXZlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEZsKHQsIGUsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gcWwodCwgdGhpcy50eXBlLCB0aGlzLl9kb2NPckZpZWxkcywgdGhpcy5faW5jbHVzaXZlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBmaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIGUpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCbCguLi50KSB7XG4gICAgcmV0dXJuIEZsLl9jcmVhdGUoXCJlbmRCZWZvcmVcIiwgdCwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG5mdW5jdGlvbiBMbCguLi50KSB7XG4gICAgcmV0dXJuIEZsLl9jcmVhdGUoXCJlbmRBdFwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBxbCh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiB5bCkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgVShxLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgSG4odCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKFdlKGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChOZSh0KSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgaG4ociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gWGgodC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCB1ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGMpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBjfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVduKHQpICYmIC0xICE9PSBjLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtjfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC5jaGlsZCh1dC5mcm9tU3RyaW5nKGMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtufScgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBodChuKTtcbiAgICAgICAgICAgICAgICAgICAgdS5wdXNoKFdlKGUsIGkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gY2wobiwgcywgYyk7XG4gICAgICAgICAgICAgICAgICAgIHUucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGhuKHUsIHIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBgZG9jdW1lbnRJZFZhbHVlYCBpbnRvIGEgYFJlZmVyZW5jZVZhbHVlYCwgdGhyb3dpbmdcbiAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAqIG9yIGBzdHJpbmdgLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBpLCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFVsKHQsIGUsIG4pIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgKG4gPSBnZXRNb2R1bGFySW5zdGFuY2UobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghV24oZSkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgcyA9IGUucGF0aC5jaGlsZCh1dC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KHMpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtzfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7cy5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIFdlKHQsIG5ldyBodChzKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgbGgpIHJldHVybiBXZSh0LCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHtyaChuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiBLbCh0LCBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHQpIHx8IDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7ZS50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogVGhpcyBpcyBub3QgYSBjb21wcmVoZW5zaXZlIGNoZWNrLCBhbmQgdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgcmVtb3ZlZCBpbiB0aGVcbiAqIGxvbmcgdGVybS4gVmFsaWRhdGlvbnMgc2hvdWxkIG9jY3VyIGluIHRoZSBGaXJlc3RvcmUgYmFja2VuZC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGluZXF1YWxpdHkgcGVyIHF1ZXJ5LlxuICogMi4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBHbCh0LCBlKSB7XG4gICAgaWYgKGUuaXNJbmVxdWFsaXR5KCkpIHtcbiAgICAgICAgY29uc3QgbiA9IHpuKHQpLCBzID0gZS5maWVsZDtcbiAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgIW4uaXNFcXVhbChzKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJyR7bi50b1N0cmluZygpfScgYW5kICcke3MudG9TdHJpbmcoKX0nYCk7XG4gICAgICAgIGNvbnN0IGkgPSBqbih0KTtcbiAgICAgICAgbnVsbCAhPT0gaSAmJiBRbCh0LCBzLCBpKTtcbiAgICB9XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGZvciAoY29uc3QgdCBvZiBuLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgaWYgKGUuaW5kZXhPZih0Lm9wKSA+PSAwKSByZXR1cm4gdC5vcDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSh0LmZpbHRlcnMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9KGUub3ApKTtcbiAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgIHRocm93IG4gPT09IGUub3AgPyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG5mdW5jdGlvbiBRbCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwoZSkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHtlLnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7ZS50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG5mdW5jdGlvbiBqbCh0LCBlKSB7XG4gICAgaWYgKCEoZSBpbnN0YW5jZW9mIHZsIHx8IGUgaW5zdGFuY2VvZiBibCkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBBcHBsaWFibGVDb25zdHJhaW50cyBjcmVhdGVkIHdpdGggYSBjYWxsIHRvICd3aGVyZSguLi4pJywgJ29yKC4uLiknLCBvciAnYW5kKC4uLiknLmApO1xufVxuXG5jbGFzcyB6bCB7XG4gICAgY29udmVydFZhbHVlKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKExlKHQpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBDZSh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoeGUodC5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UodC5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KHQuYXJyYXlWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0KHQubWFwVmFsdWUsIGUpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93ICQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0T2JqZWN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdE1hcCh0LmZpZWxkcywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBjb252ZXJ0T2JqZWN0TWFwKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBnZSh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG5bdF0gPSB0aGlzLmNvbnZlcnRWYWx1ZShzLCBlKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IFFoKENlKHQubGF0aXR1ZGUpLCBDZSh0LmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gKHQudmFsdWVzIHx8IFtdKS5tYXAoKHQgPT4gdGhpcy5jb252ZXJ0VmFsdWUodCwgZSkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IGtlKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCBlKTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChNZSh0KSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdXQuZnJvbVN0cmluZyh0KTtcbiAgICAgICAgRih1cihuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgJGUobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyBodChuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHMuaXNFcXVhbChlKSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgayhgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHtlLnByb2plY3RJZH0vJHtlLmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gV2wodCwgZSwgbikge1xuICAgIGxldCBzO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiBzID0gdCA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyB0LnRvRmlyZXN0b3JlKGUsIG4pIDogdC50b0ZpcmVzdG9yZShlKSA6IGUsIFxuICAgIHM7XG59XG5cbmNsYXNzIEhsIGV4dGVuZHMgemwge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IHFoKHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBsaCh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBzdW0gb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIHN1bSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gSmwodCkge1xuICAgIHJldHVybiBuZXcgQmgoXCJzdW1cIiwgZGwoXCJzdW1cIiwgdCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBhdmVyYWdlIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBhdmVyYWdlIGFjcm9zcyB0aGUgcmVzdWx0IHNldC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBZbCh0KSB7XG4gICAgcmV0dXJuIG5ldyBCaChcImF2Z1wiLCBkbChcImF2ZXJhZ2VcIiwgdCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBjb3VudCBvZlxuICogZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gWGwoKSB7XG4gICAgcmV0dXJuIG5ldyBCaChcImNvdW50XCIpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byAnQWdncmVnYXRlRmllbGRgIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG4gKlxuICogQHBhcmFtIGxlZnQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgcmlnaHRgLlxuICogQHBhcmFtIHJpZ2h0IENvbXBhcmUgdGhpcyBBZ2dyZWdhdGVGaWVsZCB0byB0aGUgYGxlZnRgLlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIFpsKHQsIGUpIHtcbiAgICB2YXIgbiwgcztcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEJoICYmIGUgaW5zdGFuY2VvZiBCaCAmJiB0Ll9hZ2dyZWdhdGVUeXBlID09PSBlLl9hZ2dyZWdhdGVUeXBlICYmIChudWxsID09PSAobiA9IHQuX2ludGVybmFsRmllbGRQYXRoKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbm9uaWNhbFN0cmluZygpKSA9PT0gKG51bGwgPT09IChzID0gZS5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2Fub25pY2FsU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBUd28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCBcImVxdWFsXCIgaWYgdGhleSBoYXZlXG4gKiB1bmRlcmx5aW5nIHF1ZXJpZXMgdGhhdCBjb21wYXJlIGVxdWFsLCBhbmQgdGhlIHNhbWUgZGF0YS5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIFRoZSBmaXJzdCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIFRoZSBzZWNvbmQgYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIGNvbXBhcmUuXG4gKlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBcImVxdWFsXCIsIGFzIGRlZmluZWQgYWJvdmUsIG9yIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiB0Zih0LCBlKSB7XG4gICAgcmV0dXJuIHloKHQucXVlcnksIGUucXVlcnkpICYmIGRlZXBFcXVhbCh0LmRhdGEoKSwgZS5kYXRhKCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgZWYge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBuZiBleHRlbmRzIHlsIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGRhdGEgZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgc2YodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCwgZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoSWwoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShuLCBlLnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3Mgc2YgZXh0ZW5kcyBuZiB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyByZiB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IGVmKHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3IHNmKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgZWYodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBzZih0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBuLmRvYy5rZXksIG4uZG9jLCBuZXcgZWYodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4uZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogZSsrXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IHQuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKCh0ID0+IGUgfHwgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IHNmKHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyBlZih0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IGUudHlwZSAmJiAoaSA9IG4uaW5kZXhPZihlLmRvYy5rZXkpLCBuID0gbi5kZWxldGUoZS5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gZS50eXBlICYmIChuID0gbi5hZGQoZS5kb2MpLCByID0gbi5pbmRleE9mKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogb2YoZS50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odGhpcywgZSksIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gZSksIHRoaXMuX2NhY2hlZENoYW5nZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBvZih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgcmV0dXJuIFwibW9kaWZpZWRcIjtcblxuICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uIHVmKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG5mICYmIGUgaW5zdGFuY2VvZiBuZiA/IHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHQuX2tleS5pc0VxdWFsKGUuX2tleSkgJiYgKG51bGwgPT09IHQuX2RvY3VtZW50ID8gbnVsbCA9PT0gZS5fZG9jdW1lbnQgOiB0Ll9kb2N1bWVudC5pc0VxdWFsKGUuX2RvY3VtZW50KSkgJiYgdC5fY29udmVydGVyID09PSBlLl9jb252ZXJ0ZXIgOiB0IGluc3RhbmNlb2YgcmYgJiYgZSBpbnN0YW5jZW9mIHJmICYmICh0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiB5aCh0LnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0Lm1ldGFkYXRhLmlzRXF1YWwoZS5tZXRhZGF0YSkgJiYgdC5fc25hcHNob3QuaXNFcXVhbChlLl9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBjZih0KSB7XG4gICAgdCA9IG9oKHQsIGxoKTtcbiAgICBjb25zdCBlID0gb2godC5maXJlc3RvcmUsIEFoKTtcbiAgICByZXR1cm4gemEoUGgoZSksIHQuX2tleSkudGhlbigobiA9PiBFZihlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBhZiBleHRlbmRzIHpsIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxaCh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgbGgodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gaGYodCkge1xuICAgIHQgPSBvaCh0LCBsaCk7XG4gICAgY29uc3QgZSA9IG9oKHQuZmlyZXN0b3JlLCBBaCksIG4gPSBQaChlKSwgcyA9IG5ldyBhZihlKTtcbiAgICByZXR1cm4gamEobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyBuZihlLCBzLCB0Ll9rZXksIG4sIG5ldyBlZihudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGxmKHQpIHtcbiAgICB0ID0gb2godCwgbGgpO1xuICAgIGNvbnN0IGUgPSBvaCh0LmZpcmVzdG9yZSwgQWgpO1xuICAgIHJldHVybiB6YShQaChlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gRWYoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBmZih0KSB7XG4gICAgdCA9IG9oKHQsIGZoKTtcbiAgICBjb25zdCBlID0gb2godC5maXJlc3RvcmUsIEFoKSwgbiA9IFBoKGUpLCBzID0gbmV3IGFmKGUpO1xuICAgIHJldHVybiBUbCh0Ll9xdWVyeSksIEhhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyByZihlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlbXB0eSByZXN1bHQgc2V0IGlmIG5vIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgcXVlcnkgYXJlIGN1cnJlbnRseVxuICogY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBkZih0KSB7XG4gICAgdCA9IG9oKHQsIGZoKTtcbiAgICBjb25zdCBlID0gb2godC5maXJlc3RvcmUsIEFoKSwgbiA9IFBoKGUpLCBzID0gbmV3IGFmKGUpO1xuICAgIHJldHVybiBXYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgcmYoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBfZih0KSB7XG4gICAgdCA9IG9oKHQsIGZoKTtcbiAgICBjb25zdCBlID0gb2godC5maXJlc3RvcmUsIEFoKSwgbiA9IFBoKGUpLCBzID0gbmV3IGFmKGUpO1xuICAgIHJldHVybiBIYShuLCB0Ll9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyByZihlLCBzLCB0LCBuKSkpO1xufVxuXG5mdW5jdGlvbiB3Zih0LCBlLCBuKSB7XG4gICAgdCA9IG9oKHQsIGxoKTtcbiAgICBjb25zdCBzID0gb2godC5maXJlc3RvcmUsIEFoKSwgaSA9IFdsKHQuY29udmVydGVyLCBlLCBuKTtcbiAgICByZXR1cm4gVGYocywgWyBaaChYaChzKSwgXCJzZXREb2NcIiwgdC5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwgbikudG9NdXRhdGlvbih0Ll9rZXksIEZzLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIG1mKHQsIGUsIG4sIC4uLnMpIHtcbiAgICB0ID0gb2godCwgbGgpO1xuICAgIGNvbnN0IGkgPSBvaCh0LmZpcmVzdG9yZSwgQWgpLCByID0gWGgoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgVWggPyB1bChyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUsIG4sIHMpIDogb2wociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlKTtcbiAgICByZXR1cm4gVGYoaSwgWyBvLnRvTXV0YXRpb24odC5fa2V5LCBGcy5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBnZih0KSB7XG4gICAgcmV0dXJuIFRmKG9oKHQuZmlyZXN0b3JlLCBBaCksIFsgbmV3IFlzKHQuX2tleSwgRnMubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24geWYodCwgZSkge1xuICAgIGNvbnN0IG4gPSBvaCh0LmZpcmVzdG9yZSwgQWgpLCBzID0gbWgodCksIGkgPSBXbCh0LmNvbnZlcnRlciwgZSk7XG4gICAgcmV0dXJuIFRmKG4sIFsgWmgoWGgodC5maXJlc3RvcmUpLCBcImFkZERvY1wiLCBzLl9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihzLl9rZXksIEZzLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHMpKTtcbn1cblxuZnVuY3Rpb24gcGYodCwgLi4uZSkge1xuICAgIHZhciBuLCBzLCBpO1xuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCk7XG4gICAgbGV0IHIgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgZVtvXSB8fCBJaChlW29dKSB8fCAociA9IGVbb10sIG8rKyk7XG4gICAgY29uc3QgdSA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogci5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXG4gICAgfTtcbiAgICBpZiAoSWgoZVtvXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbb107XG4gICAgICAgIGVbb10gPSBudWxsID09PSAobiA9IHQubmV4dCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5iaW5kKHQpLCBlW28gKyAxXSA9IG51bGwgPT09IChzID0gdC5lcnJvcikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5iaW5kKHQpLCBcbiAgICAgICAgZVtvICsgMl0gPSBudWxsID09PSAoaSA9IHQuY29tcGxldGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYmluZCh0KTtcbiAgICB9XG4gICAgbGV0IGMsIGEsIGg7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBsaCkgYSA9IG9oKHQuZmlyZXN0b3JlLCBBaCksIGggPSBHbih0Ll9rZXkucGF0aCksIGMgPSB7XG4gICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgZVtvXSAmJiBlW29dKEVmKGEsIHQsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IG9oKHQsIGZoKTtcbiAgICAgICAgYSA9IG9oKG4uZmlyZXN0b3JlLCBBaCksIGggPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBhZihhKTtcbiAgICAgICAgYyA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGVbb10gJiYgZVtvXShuZXcgcmYoYSwgcywgbiwgdCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgICAgICB9LCBUbCh0Ll9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgVmEocyksIHIgPSBuZXcgTmMoZSwgaSwgbik7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gVmMoYXdhaXQgS2EodCksIHIpKSksICgpID0+IHtcbiAgICAgICAgICAgIGkuU2MoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFNjKGF3YWl0IEthKHQpLCByKSkpO1xuICAgICAgICB9O1xuICAgIH0oUGgoYSksIGgsIHUsIGMpO1xufVxuXG5mdW5jdGlvbiBJZih0LCBlKSB7XG4gICAgcmV0dXJuIEphKFBoKHQgPSBvaCh0LCBBaCkpLCBJaChlKSA/IGUgOiB7XG4gICAgICAgIG5leHQ6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBUZih0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHpjKGF3YWl0IHFhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG4gICAgfShQaCh0KSwgZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBFZih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG4uZG9jcy5nZXQoZS5fa2V5KSwgaSA9IG5ldyBhZih0KTtcbiAgICByZXR1cm4gbmV3IG5mKHQsIGksIGUuX2tleSwgcywgbmV3IGVmKG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5LFxuICogd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gY291bnQgdGhlIGRvY3VtZW50cyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5IHRoZVxuICogZmluYWwgY291bnQsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGlzIGZ1bmN0aW9uIGNhbiBldmVuXG4gKiBjb3VudCB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0IHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG9cbiAqIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHNpemUgdG8gY2FsY3VsYXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSBjb3VudDsgdGhlIGNvdW50IGNhbiBiZVxuICogcmV0cmlldmVkIGZyb20gYHNuYXBzaG90LmRhdGEoKS5jb3VudGAsIHdoZXJlIGBzbmFwc2hvdGAgaXMgdGhlXG4gKiBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gd2hpY2ggdGhlIHJldHVybmVkIFByb21pc2UgcmVzb2x2ZXMuXG4gKi8gZnVuY3Rpb24gQWYodCkge1xuICAgIHJldHVybiBSZih0LCB7XG4gICAgICAgIGNvdW50OiBYbCgpXG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3BlY2lmaWVkIGFnZ3JlZ2F0aW9ucyBvdmVyIHRoZSBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdFxuICogc2V0IG9mIHRoZSBnaXZlbiBxdWVyeSwgd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGFnZ3JlZ2F0aW9uIHZhbHVlcywgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGlzIGRvd25sb2FkZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGNhbiBldmVuIHBlcmZvcm0gYWdncmVnYXRpb25zIG9mIHRoZSBkb2N1bWVudHMgaWYgdGhlIHJlc3VsdCBzZXRcbiAqIHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG8gZG93bmxvYWQgZW50aXJlbHkgKGUuZy4gdGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZDogZXZlcnkgcmVxdWVzdCB1c2luZyB0aGlzIHNvdXJjZSBuZWNlc3NhcmlseSBpbnZvbHZlcyBhIHJvdW5kIHRyaXAgdG9cbiAqIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHRvIGFnZ3JlZ2F0ZSBvdmVyLlxuICogQHBhcmFtIGFnZ3JlZ2F0ZVNwZWMgQW4gYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgYWdncmVnYXRlc1xuICogdG8gcGVyZm9ybSBvdmVyIHRoZSByZXN1bHQgc2V0LiBUaGUgQWdncmVnYXRlU3BlYyBzcGVjaWZpZXMgYWxpYXNlcyBmb3IgZWFjaFxuICogYWdncmVnYXRlLCB3aGljaCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYWdncmVnYXRlIHJlc3VsdC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhZ2dyZWdhdGVTbmFwc2hvdCA9IGF3YWl0IGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIocXVlcnksIHtcbiAqICAgY291bnRPZkRvY3M6IGNvdW50KCksXG4gKiAgIHRvdGFsSG91cnM6IHN1bSgnaG91cnMnKSxcbiAqICAgYXZlcmFnZVNjb3JlOiBhdmVyYWdlKCdzY29yZScpXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb3VudE9mRG9jczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmNvdW50T2ZEb2NzO1xuICogY29uc3QgdG90YWxIb3VyczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLnRvdGFsSG91cnM7XG4gKiBjb25zdCBhdmVyYWdlU2NvcmU6IG51bWJlciB8IG51bGwgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuYXZlcmFnZVNjb3JlO1xuICogYGBgXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gUmYodCwgZSkge1xuICAgIGNvbnN0IG4gPSBvaCh0LmZpcmVzdG9yZSwgQWgpLCBzID0gUGgobiksIGkgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBzKSAmJiBuLnB1c2goZSh0W3NdLCBzLCB0KSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH0oZSwgKCh0LCBlKSA9PiBuZXcgbmkoZSwgdC5fYWdncmVnYXRlVHlwZSwgdC5faW50ZXJuYWxGaWVsZFBhdGgpKSk7XG4gICAgLy8gUnVuIHRoZSBhZ2dyZWdhdGlvbiBhbmQgY29udmVydCB0aGUgcmVzdWx0c1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPIChzdW0vYXZnKSBzaG91bGQgd2UgdXBkYXRlIHRoaXMgdG8gdXNlIHRoZSBldmVudCBtYW5hZ2VyP1xuICAgICAgICAgICAgLy8gSW1wbGVtZW50IGFuZCBjYWxsIGV4ZWN1dGVBZ2dyZWdhdGVRdWVyeVZpYVNuYXBzaG90TGlzdGVuZXIsIHNpbWlsYXJcbiAgICAgICAgICAgIC8vIHRvIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBmaXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyXG4gICAgICAgICAgICAvLyBhYm92ZVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMjc3NjI4Mzg0KTogY2hlY2sgYGNhblVzZU5ldHdvcmsoKWAgYW5kIGhhbmRsZSBtdWx0aS10YWIuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGF3YWl0IFVhKHQpO1xuICAgICAgICAgICAgICAgIHMucmVzb2x2ZShHdShpLCBlLCBuKSk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgcy5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgcy5wcm9taXNlO1xuICAgIH0ocywgdC5fcXVlcnksIGkpLnRoZW4oKGUgPT4gXG4gICAgLyoqXG4gKiBDb252ZXJ0cyB0aGUgY29yZSBhZ2dyZWdyYXRpb24gcmVzdWx0IHRvIGFuIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YFxuICogdGhhdCBjYW4gYmUgcmV0dXJuZWQgdG8gdGhlIGNvbnN1bWVyLlxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gYWdncmVnYXRlUmVzdWx0IENvcmUgYWdncmVnYXRpb24gcmVzdWx0XG4gKiBAaW50ZXJuYWxcbiAqL1xuICAgIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBhZih0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaChlLCBzLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIHQsIGUpKSk7XG59XG5cbmNsYXNzIHZmIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5XCIsIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IFBhLCAobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5nYXJiYWdlQ29sbGVjdG9yKSA/IHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IHQuZ2FyYmFnZUNvbGxlY3Rvci5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIDogdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IEVhO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIFBmIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICB0aGlzLmtpbmQgPSBcInBlcnNpc3RlbnRcIiwgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQudGFiTWFuYWdlcikgPyAodC50YWJNYW5hZ2VyLl9pbml0aWFsaXplKHQpLCBcbiAgICAgICAgZSA9IHQudGFiTWFuYWdlcikgOiAoZSA9IE1mKHZvaWQgMCksIGUuX2luaXRpYWxpemUodCkpLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IGUuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBcbiAgICAgICAgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gZS5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIGJmIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlFYWdlclwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgRWE7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgVmYge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlMcnVcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IEFhKHQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yYC4gVGhpcyBpcyBhbHNvIHRoZVxuICogZGVmYXVsdCBnYXJiYWdlIGNvbGxlY3RvciB1bmxlc3MgaXQgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIFNmKCkge1xuICAgIHJldHVybiBuZXcgYmY7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvcmAuXG4gKlxuICogQSB0YXJnZXQgc2l6ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHBhcnQgb2YgdGhlIHNldHRpbmcgcGFyYW1ldGVyLiBUaGVcbiAqIGNvbGxlY3RvciB3aWxsIHN0YXJ0IGRlbGV0aW5nIGRvY3VtZW50cyBvbmNlIHRoZSBjYWNoZSBzaXplIGV4Y2VlZHNcbiAqIHRoZSBnaXZlbiBzaXplLiBUaGUgZGVmYXVsdCBjYWNoZSBzaXplIGlzIDQwTUIgKDQwICogMTAyNCAqIDEwMjQgYnl0ZXMpLlxuICovIGZ1bmN0aW9uIERmKHQpIHtcbiAgICByZXR1cm4gbmV3IFZmKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuY2FjaGVTaXplQnl0ZXMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUxvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICovIGZ1bmN0aW9uIENmKHQpIHtcbiAgICByZXR1cm4gbmV3IHZmKHQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYC4gVGhlIGluc3RhbmNlIGNhbiBiZSBzZXQgdG9cbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gdGVsbCB0aGUgU0RLIHdoaWNoIGNhY2hlIGxheWVyIHRvIHVzZS5cbiAqLyBmdW5jdGlvbiB4Zih0KSB7XG4gICAgcmV0dXJuIG5ldyBQZih0KTtcbn1cblxuY2xhc3MgTmYge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5mb3JjZU93bmVyc2hpcCA9IHQsIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFNpbmdsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKHQpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgUGEsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBSYSh0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5jYWNoZVNpemVCeXRlcywgdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxufVxuXG5jbGFzcyBrZiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwiUGVyc2lzdGVudE11bHRpcGxlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBQYSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IHZhKHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBudWxsID09IHQgPyB2b2lkIDAgOiB0LmNhY2hlU2l6ZUJ5dGVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXJgLlxuICpcbiAqIEBwYXJhbSBzZXR0aW5ncyBDb25maWd1cmVzIHRoZSBjcmVhdGVkIHRhYiBtYW5hZ2VyLlxuICovIGZ1bmN0aW9uIE1mKHQpIHtcbiAgICByZXR1cm4gbmV3IE5mKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZm9yY2VPd25lcnNoaXApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXJgLlxuICovIGZ1bmN0aW9uIE9mKCkge1xuICAgIHJldHVybiBuZXcga2Y7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0ICRmID0ge1xuICAgIG1heEF0dGVtcHRzOiA1XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi9cbmNsYXNzIEZmIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fY29tbWl0SGFuZGxlciA9IGUsIHRoaXMuX211dGF0aW9ucyA9IFtdLCB0aGlzLl9jb21taXR0ZWQgPSAhMSwgXG4gICAgICAgIHRoaXMuX2RhdGFSZWFkZXIgPSBYaCh0KTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHMgPSBCZih0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gV2wocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gWmgodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihzLl9rZXksIEZzLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgaSA9IEJmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIFVoID8gdWwodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogb2wodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKGkuX2tleSwgRnMuZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBlID0gQmYodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IFlzKGUuX2tleSwgRnMubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhpcyB3cml0ZSBiYXRjaCBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgdGhlc2Ugd3JpdGVzIHdpbGwgb25seSBiZSByZWZsZWN0ZWQgaW4gZG9jdW1lbnQgcmVhZHMgdGhhdFxuICAgICAqIG9jY3VyIGFmdGVyIHRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzLiBJZiB0aGUgY2xpZW50IGlzIG9mZmxpbmUsIHRoZVxuICAgICAqIHdyaXRlIGZhaWxzLiBJZiB5b3Ugd291bGQgbGlrZSB0byBzZWUgbG9jYWwgbW9kaWZpY2F0aW9ucyBvciBidWZmZXIgd3JpdGVzXG4gICAgICogdW50aWwgdGhlIGNsaWVudCBpcyBvbmxpbmUsIHVzZSB0aGUgZnVsbCBGaXJlc3RvcmUgU0RLLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGUgYmF0Y2ggaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgYXMgYW4gYXRvbWljIHVuaXQgKG5vdGUgdGhhdCBpdCB3b24ndFxuICAgICAqIHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICAgICAqLyAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKSwgdGhpcy5fY29tbWl0dGVkID0gITAsIHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF92ZXJpZnlOb3RDb21taXR0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSBoYXMgYmVlbiBjYWxsZWQuXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQmYodCwgZSkge1xuICAgIGlmICgodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkuZmlyZXN0b3JlICE9PSBlKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiUHJvdmlkZWQgZG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIGluc3RhbmNlLlwiKTtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE8obXJzY2htaWR0KSBDb25zaWRlciB1c2luZyBgQmFzZVRyYW5zYWN0aW9uYCBhcyB0aGUgYmFzZSBjbGFzcyBpbiB0aGVcbi8vIGxlZ2FjeSBTREsuXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG5jbGFzcyBMZiBleHRlbmRzIGNsYXNzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdHJhbnNhY3Rpb24gPSBlLCB0aGlzLl9kYXRhUmVhZGVyID0gWGgodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gQmYodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBIbCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24ubG9va3VwKFsgZS5fa2V5IF0pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0IHx8IDEgIT09IHQubGVuZ3RoKSByZXR1cm4gJCgpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbMF07XG4gICAgICAgICAgICBpZiAocy5pc0ZvdW5kRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyB5bCh0aGlzLl9maXJlc3RvcmUsIG4sIHMua2V5LCBzLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICBpZiAocy5pc05vRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyB5bCh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgbnVsbCwgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgJCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBCZih0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gV2wocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gWmgodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQocy5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgY29uc3QgaSA9IEJmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIFVoID8gdWwodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IG9sKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUoaS5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEJmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUoZS5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5fZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBCZih0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGFmKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQodCkudGhlbigodCA9PiBuZXcgbmYodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIHQuX2RvY3VtZW50LCBuZXcgZWYoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIGUuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzIHRvXG4gKiBjb21taXQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHFmKHQsIGUsIG4pIHtcbiAgICB0ID0gb2godCwgQWgpO1xuICAgIGNvbnN0IHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sICRmKSwgbik7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKHQubWF4QXR0ZW1wdHMgPCAxKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTWF4IGF0dGVtcHRzIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICB9KHMpO1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgVWEodCk7XG4gICAgICAgICAgICBuZXcgQ2EodC5hc3luY1F1ZXVlLCBpLCBuLCBlLCBzKS5ydW4oKTtcbiAgICAgICAgfSkpLCBzLnByb21pc2U7XG4gICAgfShQaCh0KSwgKG4gPT4gZShuZXcgTGYodCwgbikpKSwgcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCBmb3IgdXNlIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSBvclxuICoge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSB3aXRoIGB7bWVyZ2U6IHRydWV9YCB0byBtYXJrIGEgZmllbGQgZm9yIGRlbGV0aW9uLlxuICovIGZ1bmN0aW9uIFVmKCkge1xuICAgIHJldHVybiBuZXcgdGwoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gS2YoKSB7XG4gICAgcmV0dXJuIG5ldyBubChcInNlcnZlclRpbWVzdGFtcFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gdW5pb24gdGhlIGdpdmVuIGVsZW1lbnRzIHdpdGggYW55IGFycmF5XG4gKiB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0IGluIHRoZSBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuIElmIHRoZSBmaWVsZCBiZWluZ1xuICogbW9kaWZpZWQgaXMgbm90IGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGFycmF5XG4gKiBjb250YWluaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gdW5pb24gaW50byB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWAuXG4gKi8gZnVuY3Rpb24gR2YoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBzbChcImFycmF5VW5pb25cIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIFFmKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgaWwoXCJhcnJheVJlbW92ZVwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGpmKHQpIHtcbiAgICByZXR1cm4gbmV3IHJsKFwiaW5jcmVtZW50XCIsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24gemYodCkge1xuICAgIHJldHVybiBQaCh0ID0gb2godCwgQWgpKSwgbmV3IEZmKHQsIChlID0+IFRmKHQsIGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIFdmKHQsIGUpIHtcbiAgICB2YXIgbjtcbiAgICBjb25zdCBzID0gUGgodCA9IG9oKHQsIEFoKSk7XG4gICAgaWYgKCFzLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIHx8IFwibWVtb3J5XCIgPT09IChudWxsID09PSAobiA9IHMuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uX29mZmxpbmVLaW5kKSkgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCByZXR1cm4gYW4gZXJyb3IgaWYgdGhlIHVzZXIgaGFzIG5vdCBlbmFibGVkXG4gICAgLy8gcGVyc2lzdGVuY2Ugc2luY2UgYGVuYWJsZUluZGV4ZWRkYlBlcnNpc3RlbmNlKClgIGNhbiBmYWlsIG9uIHRoZSBXZWIuXG4gICAgcmV0dXJuIE0oXCJDYW5ub3QgZW5hYmxlIGluZGV4ZXMgd2hlbiBwZXJzaXN0ZW5jZSBpcyBkaXNhYmxlZFwiKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gcGFyc2UgSlNPTjogXCIgKyAobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odCkgOiB0LCBuID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUuaW5kZXhlcykpIGZvciAoY29uc3QgdCBvZiBlLmluZGV4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBIZih0LCBcImNvbGxlY3Rpb25Hcm91cFwiKSwgcyA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodC5maWVsZHMpKSBmb3IgKGNvbnN0IGUgb2YgdC5maWVsZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gd2woXCJzZXRJbmRleENvbmZpZ3VyYXRpb25cIiwgSGYoZSwgXCJmaWVsZFBhdGhcIikpO1xuICAgICAgICAgICAgICAgIFwiQ09OVEFJTlNcIiA9PT0gZS5hcnJheUNvbmZpZyA/IHMucHVzaChuZXcgd3QodCwgMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8pKSA6IFwiQVNDRU5ESU5HXCIgPT09IGUub3JkZXIgPyBzLnB1c2gobmV3IHd0KHQsIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpIDogXCJERVNDRU5ESU5HXCIgPT09IGUub3JkZXIgJiYgcy5wdXNoKG5ldyB3dCh0LCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuLnB1c2gobmV3IGx0KGx0LlVOS05PV05fSUQsIGUsIHMsIGd0LmVtcHR5KCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9KGUpO1xuICAgIHJldHVybiBaYShzLCBpKTtcbn1cblxuZnVuY3Rpb24gSGYodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiB0W2VdKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTWlzc2luZyBzdHJpbmcgdmFsdWUgZm9yOiBcIiArIGUpO1xuICAgIHJldHVybiB0W2VdO1xufVxuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbih0LCBlID0gITApIHtcbiAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICBTID0gdDtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKCh0LCB7aW5zdGFuY2VJZGVudGlmaWVyOiBuLCBvcHRpb25zOiBzfSkgPT4ge1xuICAgICAgICBjb25zdCBpID0gdC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSwgciA9IG5ldyBBaChuZXcgeih0LmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSksIG5ldyBZKHQuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIikpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3ICRlKHQub3B0aW9ucy5wcm9qZWN0SWQsIGUpO1xuICAgICAgICB9KGksIG4pLCBpKTtcbiAgICAgICAgcmV0dXJuIHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogZVxuICAgICAgICB9LCBzKSwgci5fc2V0U2V0dGluZ3MocyksIHI7XG4gICAgfSksIFwiUFVCTElDXCIpLnNldE11bHRpcGxlSW5zdGFuY2VzKCEwKSksIHJlZ2lzdGVyVmVyc2lvbihiLCBcIjMuMTEuMFwiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oYiwgXCIzLjExLjBcIiwgXCJlc20yMDE3XCIpO1xufSgpO1xuXG5leHBvcnQgeyB6bCBhcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBCaCBhcyBBZ2dyZWdhdGVGaWVsZCwgTGggYXMgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCwgcWggYXMgQnl0ZXMsIEVoIGFzIENBQ0hFX1NJWkVfVU5MSU1JVEVELCBkaCBhcyBDb2xsZWN0aW9uUmVmZXJlbmNlLCBsaCBhcyBEb2N1bWVudFJlZmVyZW5jZSwgbmYgYXMgRG9jdW1lbnRTbmFwc2hvdCwgVWggYXMgRmllbGRQYXRoLCBHaCBhcyBGaWVsZFZhbHVlLCBBaCBhcyBGaXJlc3RvcmUsIFUgYXMgRmlyZXN0b3JlRXJyb3IsIFFoIGFzIEdlb1BvaW50LCBUaCBhcyBMb2FkQnVuZGxlVGFzaywgZmggYXMgUXVlcnksIGJsIGFzIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCwgQWwgYXMgUXVlcnlDb25zdHJhaW50LCBzZiBhcyBRdWVyeURvY3VtZW50U25hcHNob3QsIEZsIGFzIFF1ZXJ5RW5kQXRDb25zdHJhaW50LCB2bCBhcyBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCwgeGwgYXMgUXVlcnlMaW1pdENvbnN0cmFpbnQsIERsIGFzIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQsIHJmIGFzIFF1ZXJ5U25hcHNob3QsIE1sIGFzIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQsIGVmIGFzIFNuYXBzaG90TWV0YWRhdGEsIGl0IGFzIFRpbWVzdGFtcCwgTGYgYXMgVHJhbnNhY3Rpb24sIEZmIGFzIFdyaXRlQmF0Y2gsICRlIGFzIF9EYXRhYmFzZUlkLCBodCBhcyBfRG9jdW1lbnRLZXksIFggYXMgX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyLCBRIGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBhdCBhcyBfRmllbGRQYXRoLCBjaSBhcyBfVGVzdGluZ0hvb2tzLCBvaCBhcyBfY2FzdCwgQiBhcyBfZGVidWdBc3NlcnQsIGJlIGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgTSBhcyBfbG9nV2FybiwgbmggYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIHlmIGFzIGFkZERvYywgWmwgYXMgYWdncmVnYXRlRmllbGRFcXVhbCwgdGYgYXMgYWdncmVnYXRlUXVlcnlTbmFwc2hvdEVxdWFsLCBTbCBhcyBhbmQsIFFmIGFzIGFycmF5UmVtb3ZlLCBHZiBhcyBhcnJheVVuaW9uLCBZbCBhcyBhdmVyYWdlLCBDaCBhcyBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBfaCBhcyBjb2xsZWN0aW9uLCB3aCBhcyBjb2xsZWN0aW9uR3JvdXAsIGhoIGFzIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgWGwgYXMgY291bnQsIGdmIGFzIGRlbGV0ZURvYywgVWYgYXMgZGVsZXRlRmllbGQsIGtoIGFzIGRpc2FibGVOZXR3b3JrLCBtaCBhcyBkb2MsIEtoIGFzIGRvY3VtZW50SWQsIFZoIGFzIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBTaCBhcyBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBOaCBhcyBlbmFibGVOZXR3b3JrLCBMbCBhcyBlbmRBdCwgQmwgYXMgZW5kQmVmb3JlLCBQaCBhcyBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkLCBUZiBhcyBleGVjdXRlV3JpdGUsIFJmIGFzIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIsIEFmIGFzIGdldENvdW50RnJvbVNlcnZlciwgY2YgYXMgZ2V0RG9jLCBoZiBhcyBnZXREb2NGcm9tQ2FjaGUsIGxmIGFzIGdldERvY0Zyb21TZXJ2ZXIsIGZmIGFzIGdldERvY3MsIGRmIGFzIGdldERvY3NGcm9tQ2FjaGUsIF9mIGFzIGdldERvY3NGcm9tU2VydmVyLCB2aCBhcyBnZXRGaXJlc3RvcmUsIGpmIGFzIGluY3JlbWVudCwgUmggYXMgaW5pdGlhbGl6ZUZpcmVzdG9yZSwgTmwgYXMgbGltaXQsIGtsIGFzIGxpbWl0VG9MYXN0LCBPaCBhcyBsb2FkQnVuZGxlLCBTZiBhcyBtZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3IsIENmIGFzIG1lbW9yeUxvY2FsQ2FjaGUsIERmIGFzIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IsICRoIGFzIG5hbWVkUXVlcnksIHBmIGFzIG9uU25hcHNob3QsIElmIGFzIG9uU25hcHNob3RzSW5TeW5jLCBWbCBhcyBvciwgQ2wgYXMgb3JkZXJCeSwgeGYgYXMgcGVyc2lzdGVudExvY2FsQ2FjaGUsIE9mIGFzIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIsIE1mIGFzIHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyLCBSbCBhcyBxdWVyeSwgeWggYXMgcXVlcnlFcXVhbCwgZ2ggYXMgcmVmRXF1YWwsIHFmIGFzIHJ1blRyYW5zYWN0aW9uLCBLZiBhcyBzZXJ2ZXJUaW1lc3RhbXAsIHdmIGFzIHNldERvYywgV2YgYXMgc2V0SW5kZXhDb25maWd1cmF0aW9uLCB4IGFzIHNldExvZ0xldmVsLCB1ZiBhcyBzbmFwc2hvdEVxdWFsLCAkbCBhcyBzdGFydEFmdGVyLCBPbCBhcyBzdGFydEF0LCBKbCBhcyBzdW0sIE1oIGFzIHRlcm1pbmF0ZSwgbWYgYXMgdXBkYXRlRG9jLCB4aCBhcyB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgUGwgYXMgd2hlcmUsIHpmIGFzIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IGdldEZpcmVzdG9yZSwgY29sbGVjdGlvbiwgZG9jLCBnZXREb2NzLCBzZXREb2MsIGRlbGV0ZURvYyAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuXG5jb25zdCBmaXJlYmFzZUFwcCA9IGluaXRpYWxpemVBcHAoe1xuICBhcGlLZXk6IFwiQUl6YVN5Q0h4VHFRdm5UQWpsNW9vc2NNV3ZwUWFoNk9IQ01DWEo0XCIsXG4gIGF1dGhEb21haW46IFwidG8tZG8tbGlzdC05NTNiZS5maXJlYmFzZWFwcC5jb21cIixcbiAgcHJvamVjdElkOiBcInRvLWRvLWxpc3QtOTUzYmVcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJ0by1kby1saXN0LTk1M2JlLmFwcHNwb3QuY29tXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjQyMDExNzA3OTEzXCIsXG4gIGFwcElkOiBcIjE6NDIwMTE3MDc5MTM6d2ViOjFkNDAwY2MzYTU4ZTc4MzcyZDg2ZDhcIixcbiAgbWVhc3VyZW1lbnRJZDogXCJHLTFCMjIyOUpMUVlcIlxufSk7XG5cbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGZpcmViYXNlQXBwKVxuLy8gZGIuY29sbGVjdGlvbigndGFza3MnKS5nZXREb2NzKCk7XG4vLyBjb25zdCB0b2Rvc0NvbCA9IGNvbGxlY3Rpb24oZGIsICd0YXNrcycpXG4vLyBnZXRUYXNrcyhkYilcblxuYXN5bmMgZnVuY3Rpb24gZ2V0VGFza3MoZGIpIHtcbiAgICBjb25zdCB0YXNrc0NvbCA9IGNvbGxlY3Rpb24oZGIsICd0YXNrcycpO1xuICAgIGNvbnN0IHRhc2tzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHRhc2tzQ29sKTtcbiAgICBjb25zdCB0YXNrTGlzdERCID0gdGFza3NTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gZG9jLmRhdGEoKSk7XG4gICAgLy8gY29uc29sZS5sb2codGFza0xpc3REQilcbiAgICByZXR1cm4gdGFza0xpc3REQjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVGFzayh0aXRsZSkge1xuICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsIFwidGFza3NcIiwgdGl0bGUpKTtcbn1cbi8vIGxldCB0YXNrTGlzdCA9IGdldFRhc2tzKGRiKTtcblxuLy9UT0RPOiBjb21wbGV0aW9uIHN0YXR1cz9cbmNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHlMZXZlbCwgdGFza0NhdGVnb3J5KSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlOyBcbiAgICAgICAgdGhpcy5wcmlvcml0eUxldmVsID0gcHJpb3JpdHlMZXZlbDtcbiAgICAgICAgdGhpcy50YXNrQ2F0ZWdvcnkgPSB0YXNrQ2F0ZWdvcnk7XG4gICAgICAgIC8vIHRoaXMuY29tcGxldGlvblN0YXR1cyA9IGNvbXBsZXRpb25TdGF0dXM7XG4gICAgfVxufTtcblxuLy9TZXQgdGFza2xpc3Qgd2l0aCBhcnJheSBpbiBsb2NhbFN0b3JhZ2Ugb3IgYmxhbmsgYXJyYXlcbi8vIGZ1bmN0aW9uIGNoZWNrU3RvcmFnZSgpIHtcbi8vICAgICBpZiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0xpc3QnKSkgIT0gbnVsbCkge1xuLy8gICAgICAgICBsZXQgc2F2ZWRMaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0xpc3QnKSlcbi8vICAgICAgICAgcmV0dXJuIHNhdmVkTGlzdDtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgICByZXR1cm4gW107XG4vLyAgICAgfVxuLy8gfVxuXG4vLyBsZXQgdGFza0xpc3QgPSBjaGVja1N0b3JhZ2UoKTtcblxuZnVuY3Rpb24gdXBkYXRlU3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRhc2tMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHRhc2tMaXN0KSk7XG59XG5cbi8vQWRkIG5ldyB0YXNrIHRvIGFycmF5LCB1cGRhdGUgYXJyYXkgaW4gbG9jYWxTdG9yYWdlXG5mdW5jdGlvbiBhZGRUYXNrVG9MaXN0KFRhc2ssIGRvY0tleSkge1xuICAgIHNldERvYyhkb2MoZGIsIFwidGFza3NcIiwgZG9jS2V5KSwge1xuICAgICAgICB0aXRsZTogVGFzay50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IFRhc2suZGVzY3JpcHRpb24sXG4gICAgICAgIGR1ZURhdGU6IFRhc2suZHVlRGF0ZSxcbiAgICAgICAgcHJpb3JpdHlMZXZlbDogVGFzay5wcmlvcml0eUxldmVsLFxuICAgICAgICB0YXNrQ2F0ZWdvcnk6IFRhc2sudGFza0NhdGVnb3J5LFxuICAgICAgfSk7XG4gICAgLy8gdGFza0xpc3QucHVzaChUYXNrKTtcbiAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRhc2tMaXN0XCIsIEpTT04uc3RyaW5naWZ5KHRhc2tMaXN0KSk7XG59XG5cbmV4cG9ydCB7IFRhc2ssIGFkZFRhc2tUb0xpc3QsIHVwZGF0ZVN0b3JhZ2UsIGdldFRhc2tzLCBkZWxldGVUYXNrLCBkYiwgc2V0RG9jLCBkb2MgfTsiLCIvL0NsZWFyIGNvbnRlbnQgZGl2IHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gbGlzdCB2aWV3IGFuZCBmb3JtIHZpZXdcbmZ1bmN0aW9uIGNsZWFyVmlldygpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgIHdoaWxlIChjb250ZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgY29udGVudC5yZW1vdmVDaGlsZChjb250ZW50Lmxhc3RDaGlsZCk7XG4gICAgICB9XG59O1xuXG5leHBvcnQgeyBjbGVhclZpZXcgfTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gdmFsdWUgYSBkYXRlP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLiBUaGUgZnVuY3Rpb24gd29ya3MgZm9yIGRhdGVzIHRyYW5zZmVycmVkIGFjcm9zcyBpZnJhbWVzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgLSB0aGUgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIGRhdGVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIGEgdmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZShuZXcgRGF0ZSgpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoTmFOKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3Igc29tZSB2YWx1ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZSgnMjAxNC0wMi0zMScpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBvYmplY3Q6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoe30pXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBEYXRlIHx8IF90eXBlb2YodmFsdWUpID09PSAnb2JqZWN0JyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBEYXRlXSc7XG59IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IF90eXBlb2YoYXJndW1lbnQpID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjc3RyaW5nLWFyZ3VtZW50c1wiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCBpc0RhdGUgZnJvbSBcIi4uL2lzRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1ZhbGlkXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHZhbGlkP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBmYWxzZSBpZiBhcmd1bWVudCBpcyBJbnZhbGlkIERhdGUgYW5kIHRydWUgb3RoZXJ3aXNlLlxuICogQXJndW1lbnQgaXMgY29udmVydGVkIHRvIERhdGUgdXNpbmcgYHRvRGF0ZWAuIFNlZSBbdG9EYXRlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL3RvRGF0ZX1cbiAqIEludmFsaWQgRGF0ZSBpcyBhIERhdGUsIHdob3NlIHRpbWUgdmFsdWUgaXMgTmFOLlxuICpcbiAqIFRpbWUgdmFsdWUgb2YgRGF0ZTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS45LjEuMVxuICpcbiAqIEBwYXJhbSB7Kn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgdmFsaWRcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIHZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKDIwMTQsIDEsIDMxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIHZhbHVlLCBjb252ZXJ0YWJsZSBpbnRvIGEgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzVmFsaWQoMTM5MzgwNDgwMDAwMClcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIGludmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzVmFsaWQobmV3IERhdGUoJycpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmFsaWQoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuXG4gIGlmICghaXNEYXRlKGRpcnR5RGF0ZSkgJiYgdHlwZW9mIGRpcnR5RGF0ZSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICByZXR1cm4gIWlzTmFOKE51bWJlcihkYXRlKSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBhZGRNaWxsaXNlY29uZHNcbiAqIEBjYXRlZ29yeSBNaWxsaXNlY29uZCBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBZGQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQWRkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gYmUgY2hhbmdlZFxuICogQHBhcmFtIHtOdW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGJlIGFkZGVkLiBQb3NpdGl2ZSBkZWNpbWFscyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguZmxvb3JgLCBkZWNpbWFscyBsZXNzIHRoYW4gemVybyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguY2VpbGAuXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIG5ldyBkYXRlIHdpdGggdGhlIG1pbGxpc2Vjb25kcyBhZGRlZFxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBZGQgNzUwIG1pbGxpc2Vjb25kcyB0byAxMCBKdWx5IDIwMTQgMTI6NDU6MzAuMDAwOlxuICogY29uc3QgcmVzdWx0ID0gYWRkTWlsbGlzZWNvbmRzKG5ldyBEYXRlKDIwMTQsIDYsIDEwLCAxMiwgNDUsIDMwLCAwKSwgNzUwKVxuICogLy89PiBUaHUgSnVsIDEwIDIwMTQgMTI6NDU6MzAuNzUwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciB0aW1lc3RhbXAgPSB0b0RhdGUoZGlydHlEYXRlKS5nZXRUaW1lKCk7XG4gIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpO1xuICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgYW1vdW50KTtcbn0iLCJpbXBvcnQgYWRkTWlsbGlzZWNvbmRzIGZyb20gXCIuLi9hZGRNaWxsaXNlY29uZHMvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdWJNaWxsaXNlY29uZHNcbiAqIEBjYXRlZ29yeSBNaWxsaXNlY29uZCBIZWxwZXJzXG4gKiBAc3VtbWFyeSBTdWJ0cmFjdCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFN1YnRyYWN0IHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBiZSBjaGFuZ2VkXG4gKiBAcGFyYW0ge051bWJlcn0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gYmUgc3VidHJhY3RlZC4gUG9zaXRpdmUgZGVjaW1hbHMgd2lsbCBiZSByb3VuZGVkIHVzaW5nIGBNYXRoLmZsb29yYCwgZGVjaW1hbHMgbGVzcyB0aGFuIHplcm8gd2lsbCBiZSByb3VuZGVkIHVzaW5nIGBNYXRoLmNlaWxgLlxuICogQHJldHVybnMge0RhdGV9IHRoZSBuZXcgZGF0ZSB3aXRoIHRoZSBtaWxsaXNlY29uZHMgc3VidHJhY3RlZFxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBTdWJ0cmFjdCA3NTAgbWlsbGlzZWNvbmRzIGZyb20gMTAgSnVseSAyMDE0IDEyOjQ1OjMwLjAwMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN1Yk1pbGxpc2Vjb25kcyhuZXcgRGF0ZSgyMDE0LCA2LCAxMCwgMTIsIDQ1LCAzMCwgMCksIDc1MClcbiAqIC8vPT4gVGh1IEp1bCAxMCAyMDE0IDEyOjQ1OjI5LjI1MFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN1Yk1pbGxpc2Vjb25kcyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgYW1vdW50ID0gdG9JbnRlZ2VyKGRpcnR5QW1vdW50KTtcbiAgcmV0dXJuIGFkZE1pbGxpc2Vjb25kcyhkaXJ0eURhdGUsIC1hbW91bnQpO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uLy4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG52YXIgTUlMTElTRUNPTkRTX0lOX0RBWSA9IDg2NDAwMDAwO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VVRDRGF5T2ZZZWFyKGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICBkYXRlLnNldFVUQ01vbnRoKDAsIDEpO1xuICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgc3RhcnRPZlllYXJUaW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgdmFyIGRpZmZlcmVuY2UgPSB0aW1lc3RhbXAgLSBzdGFydE9mWWVhclRpbWVzdGFtcDtcbiAgcmV0dXJuIE1hdGguZmxvb3IoZGlmZmVyZW5jZSAvIE1JTExJU0VDT05EU19JTl9EQVkpICsgMTtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi8uLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZlVUQ0lTT1dlZWsoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gMTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRheSA9IGRhdGUuZ2V0VVRDRGF5KCk7XG4gIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcbiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpIC0gZGlmZik7XG4gIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uLy4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgc3RhcnRPZlVUQ0lTT1dlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZVVENJU09XZWVrL2luZGV4LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVVENJU09XZWVrWWVhcihkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xuICB2YXIgZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhciA9IG5ldyBEYXRlKDApO1xuICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIgKyAxLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhci5zZXRVVENIb3VycygwLCAwLCAwLCAwKTtcbiAgdmFyIHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZVVENJU09XZWVrKGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIpO1xuICB2YXIgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhciA9IG5ldyBEYXRlKDApO1xuICBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIDQpO1xuICBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgc3RhcnRPZlRoaXNZZWFyID0gc3RhcnRPZlVUQ0lTT1dlZWsoZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhcik7XG5cbiAgaWYgKGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZOZXh0WWVhci5nZXRUaW1lKCkpIHtcbiAgICByZXR1cm4geWVhciArIDE7XG4gIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZlRoaXNZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufSIsImltcG9ydCBnZXRVVENJU09XZWVrWWVhciBmcm9tIFwiLi4vZ2V0VVRDSVNPV2Vla1llYXIvaW5kZXguanNcIjtcbmltcG9ydCBzdGFydE9mVVRDSVNPV2VlayBmcm9tIFwiLi4vc3RhcnRPZlVUQ0lTT1dlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZlVUQ0lTT1dlZWtZZWFyKGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIHllYXIgPSBnZXRVVENJU09XZWVrWWVhcihkaXJ0eURhdGUpO1xuICB2YXIgZm91cnRoT2ZKYW51YXJ5ID0gbmV3IERhdGUoMCk7XG4gIGZvdXJ0aE9mSmFudWFyeS5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5LnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgZGF0ZSA9IHN0YXJ0T2ZVVENJU09XZWVrKGZvdXJ0aE9mSmFudWFyeSk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uLy4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHN0YXJ0T2ZVVENJU09XZWVrIGZyb20gXCIuLi9zdGFydE9mVVRDSVNPV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHN0YXJ0T2ZVVENJU09XZWVrWWVhciBmcm9tIFwiLi4vc3RhcnRPZlVUQ0lTT1dlZWtZZWFyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbnZhciBNSUxMSVNFQ09ORFNfSU5fV0VFSyA9IDYwNDgwMDAwMDtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVUQ0lTT1dlZWsoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGlmZiA9IHN0YXJ0T2ZVVENJU09XZWVrKGRhdGUpLmdldFRpbWUoKSAtIHN0YXJ0T2ZVVENJU09XZWVrWWVhcihkYXRlKS5nZXRUaW1lKCk7IC8vIFJvdW5kIHRoZSBudW1iZXIgb2YgZGF5cyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyXG4gIC8vIGJlY2F1c2UgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudFxuICAvLyAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZiB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpXG5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIE1JTExJU0VDT05EU19JTl9XRUVLKSArIDE7XG59IiwidmFyIGRlZmF1bHRPcHRpb25zID0ge307XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0T3B0aW9ucyhuZXdPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gbmV3T3B0aW9ucztcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi8uLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZlVUQ1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmLCBfcmVmMiwgX3JlZjMsIF9vcHRpb25zJHdlZWtTdGFydHNPbiwgX29wdGlvbnMkbG9jYWxlLCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8sIF9kZWZhdWx0T3B0aW9ucyRsb2NhbCwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMjtcblxuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZiA9IChfcmVmMiA9IChfcmVmMyA9IChfb3B0aW9ucyR3ZWVrU3RhcnRzT24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gIT09IHZvaWQgMCA/IF9vcHRpb25zJHdlZWtTdGFydHNPbiA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPSBfb3B0aW9ucyRsb2NhbGUub3B0aW9ucykgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlJG9wdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRsb2NhbGUkb3B0aW8ud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPSBkZWZhdWx0T3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwub3B0aW9ucykgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlZmF1bHRPcHRpb25zJGxvY2FsMi53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCBzdGFydE9mVVRDV2VlayBmcm9tIFwiLi4vc3RhcnRPZlVUQ1dlZWsvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi4vZGVmYXVsdE9wdGlvbnMvaW5kZXguanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICB2YXIgX3JlZiwgX3JlZjIsIF9yZWYzLCBfb3B0aW9ucyRmaXJzdFdlZWtDb24sIF9vcHRpb25zJGxvY2FsZSwgX29wdGlvbnMkbG9jYWxlJG9wdGlvLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwsIF9kZWZhdWx0T3B0aW9ucyRsb2NhbDI7XG5cbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpO1xuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICB2YXIgZmlyc3RXZWVrQ29udGFpbnNEYXRlID0gdG9JbnRlZ2VyKChfcmVmID0gKF9yZWYyID0gKF9yZWYzID0gKF9vcHRpb25zJGZpcnN0V2Vla0NvbiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUpICE9PSBudWxsICYmIF9vcHRpb25zJGZpcnN0V2Vla0NvbiAhPT0gdm9pZCAwID8gX29wdGlvbnMkZmlyc3RXZWVrQ29uIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9IF9vcHRpb25zJGxvY2FsZS5vcHRpb25zKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGxvY2FsZSRvcHRpby5maXJzdFdlZWtDb250YWluc0RhdGUpICE9PSBudWxsICYmIF9yZWYzICE9PSB2b2lkIDAgPyBfcmVmMyA6IGRlZmF1bHRPcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSkgIT09IG51bGwgJiYgX3JlZjIgIT09IHZvaWQgMCA/IF9yZWYyIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9IF9kZWZhdWx0T3B0aW9ucyRsb2NhbC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSkgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IDEpOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDEgYW5kIDcgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA+PSAxICYmIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA8PSA3KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdmaXJzdFdlZWtDb250YWluc0RhdGUgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDcgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBmaXJzdFdlZWtPZk5leHRZZWFyID0gbmV3IERhdGUoMCk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0VVRDRnVsbFllYXIoeWVhciArIDEsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIHZhciBzdGFydE9mTmV4dFllYXIgPSBzdGFydE9mVVRDV2VlayhmaXJzdFdlZWtPZk5leHRZZWFyLCBvcHRpb25zKTtcbiAgdmFyIGZpcnN0V2Vla09mVGhpc1llYXIgPSBuZXcgRGF0ZSgwKTtcbiAgZmlyc3RXZWVrT2ZUaGlzWWVhci5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgc3RhcnRPZlRoaXNZZWFyID0gc3RhcnRPZlVUQ1dlZWsoZmlyc3RXZWVrT2ZUaGlzWWVhciwgb3B0aW9ucyk7XG5cbiAgaWYgKGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZOZXh0WWVhci5nZXRUaW1lKCkpIHtcbiAgICByZXR1cm4geWVhciArIDE7XG4gIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZlRoaXNZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufSIsImltcG9ydCBnZXRVVENXZWVrWWVhciBmcm9tIFwiLi4vZ2V0VVRDV2Vla1llYXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHN0YXJ0T2ZVVENXZWVrIGZyb20gXCIuLi9zdGFydE9mVVRDV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZlVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICB2YXIgX3JlZiwgX3JlZjIsIF9yZWYzLCBfb3B0aW9ucyRmaXJzdFdlZWtDb24sIF9vcHRpb25zJGxvY2FsZSwgX29wdGlvbnMkbG9jYWxlJG9wdGlvLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwsIF9kZWZhdWx0T3B0aW9ucyRsb2NhbDI7XG5cbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIHZhciBmaXJzdFdlZWtDb250YWluc0RhdGUgPSB0b0ludGVnZXIoKF9yZWYgPSAoX3JlZjIgPSAoX3JlZjMgPSAoX29wdGlvbnMkZmlyc3RXZWVrQ29uID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSkgIT09IG51bGwgJiYgX29wdGlvbnMkZmlyc3RXZWVrQ29uICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRmaXJzdFdlZWtDb24gOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlJG9wdGlvID0gX29wdGlvbnMkbG9jYWxlLm9wdGlvbnMpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkbG9jYWxlJG9wdGlvLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSkgIT09IG51bGwgJiYgX3JlZjMgIT09IHZvaWQgMCA/IF9yZWYzIDogZGVmYXVsdE9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlKSAhPT0gbnVsbCAmJiBfcmVmMiAhPT0gdm9pZCAwID8gX3JlZjIgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsID0gZGVmYXVsdE9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID0gX2RlZmF1bHRPcHRpb25zJGxvY2FsLm9wdGlvbnMpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIuZmlyc3RXZWVrQ29udGFpbnNEYXRlKSAhPT0gbnVsbCAmJiBfcmVmICE9PSB2b2lkIDAgPyBfcmVmIDogMSk7XG4gIHZhciB5ZWFyID0gZ2V0VVRDV2Vla1llYXIoZGlydHlEYXRlLCBvcHRpb25zKTtcbiAgdmFyIGZpcnN0V2VlayA9IG5ldyBEYXRlKDApO1xuICBmaXJzdFdlZWsuc2V0VVRDRnVsbFllYXIoeWVhciwgMCwgZmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgZmlyc3RXZWVrLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICB2YXIgZGF0ZSA9IHN0YXJ0T2ZVVENXZWVrKGZpcnN0V2Vlaywgb3B0aW9ucyk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uLy4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHN0YXJ0T2ZVVENXZWVrIGZyb20gXCIuLi9zdGFydE9mVVRDV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHN0YXJ0T2ZVVENXZWVrWWVhciBmcm9tIFwiLi4vc3RhcnRPZlVUQ1dlZWtZZWFyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbnZhciBNSUxMSVNFQ09ORFNfSU5fV0VFSyA9IDYwNDgwMDAwMDtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVUQ1dlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGlmZiA9IHN0YXJ0T2ZVVENXZWVrKGRhdGUsIG9wdGlvbnMpLmdldFRpbWUoKSAtIHN0YXJ0T2ZVVENXZWVrWWVhcihkYXRlLCBvcHRpb25zKS5nZXRUaW1lKCk7IC8vIFJvdW5kIHRoZSBudW1iZXIgb2YgZGF5cyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyXG4gIC8vIGJlY2F1c2UgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudFxuICAvLyAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZiB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpXG5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIE1JTExJU0VDT05EU19JTl9XRUVLKSArIDE7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkTGVhZGluZ1plcm9zKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XG4gIHZhciBzaWduID0gbnVtYmVyIDwgMCA/ICctJyA6ICcnO1xuICB2YXIgb3V0cHV0ID0gTWF0aC5hYnMobnVtYmVyKS50b1N0cmluZygpO1xuXG4gIHdoaWxlIChvdXRwdXQubGVuZ3RoIDwgdGFyZ2V0TGVuZ3RoKSB7XG4gICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xuICB9XG5cbiAgcmV0dXJuIHNpZ24gKyBvdXRwdXQ7XG59IiwiaW1wb3J0IGFkZExlYWRpbmdaZXJvcyBmcm9tIFwiLi4vLi4vYWRkTGVhZGluZ1plcm9zL2luZGV4LmpzXCI7XG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqL1xuXG52YXIgZm9ybWF0dGVycyA9IHtcbiAgLy8gWWVhclxuICB5OiBmdW5jdGlvbiB5KGRhdGUsIHRva2VuKSB7XG4gICAgLy8gRnJvbSBodHRwOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LTMxL3RyMzUtZGF0ZXMuaHRtbCNEYXRlX0Zvcm1hdF90b2tlbnNcbiAgICAvLyB8IFllYXIgICAgIHwgICAgIHkgfCB5eSB8ICAgeXl5IHwgIHl5eXkgfCB5eXl5eSB8XG4gICAgLy8gfC0tLS0tLS0tLS18LS0tLS0tLXwtLS0tfC0tLS0tLS18LS0tLS0tLXwtLS0tLS0tfFxuICAgIC8vIHwgQUQgMSAgICAgfCAgICAgMSB8IDAxIHwgICAwMDEgfCAgMDAwMSB8IDAwMDAxIHxcbiAgICAvLyB8IEFEIDEyICAgIHwgICAgMTIgfCAxMiB8ICAgMDEyIHwgIDAwMTIgfCAwMDAxMiB8XG4gICAgLy8gfCBBRCAxMjMgICB8ICAgMTIzIHwgMjMgfCAgIDEyMyB8ICAwMTIzIHwgMDAxMjMgfFxuICAgIC8vIHwgQUQgMTIzNCAgfCAgMTIzNCB8IDM0IHwgIDEyMzQgfCAgMTIzNCB8IDAxMjM0IHxcbiAgICAvLyB8IEFEIDEyMzQ1IHwgMTIzNDUgfCA0NSB8IDEyMzQ1IHwgMTIzNDUgfCAxMjM0NSB8XG4gICAgdmFyIHNpZ25lZFllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7IC8vIFJldHVybnMgMSBmb3IgMSBCQyAod2hpY2ggaXMgeWVhciAwIGluIEphdmFTY3JpcHQpXG5cbiAgICB2YXIgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModG9rZW4gPT09ICd5eScgPyB5ZWFyICUgMTAwIDogeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gTW9udGhcbiAgTTogZnVuY3Rpb24gTShkYXRlLCB0b2tlbikge1xuICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKTtcbiAgICByZXR1cm4gdG9rZW4gPT09ICdNJyA/IFN0cmluZyhtb250aCArIDEpIDogYWRkTGVhZGluZ1plcm9zKG1vbnRoICsgMSwgMik7XG4gIH0sXG4gIC8vIERheSBvZiB0aGUgbW9udGhcbiAgZDogZnVuY3Rpb24gZChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENEYXRlKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIEFNIG9yIFBNXG4gIGE6IGZ1bmN0aW9uIGEoZGF0ZSwgdG9rZW4pIHtcbiAgICB2YXIgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF0ZS5nZXRVVENIb3VycygpIC8gMTIgPj0gMSA/ICdwbScgOiAnYW0nO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSAnYSc6XG4gICAgICBjYXNlICdhYSc6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWUudG9VcHBlckNhc2UoKTtcblxuICAgICAgY2FzZSAnYWFhJzpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZTtcblxuICAgICAgY2FzZSAnYWFhYWEnOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlWzBdO1xuXG4gICAgICBjYXNlICdhYWFhJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWUgPT09ICdhbScgPyAnYS5tLicgOiAncC5tLic7XG4gICAgfVxuICB9LFxuICAvLyBIb3VyIFsxLTEyXVxuICBoOiBmdW5jdGlvbiBoKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldFVUQ0hvdXJzKCkgJSAxMiB8fCAxMiwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gSG91ciBbMC0yM11cbiAgSDogZnVuY3Rpb24gSChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENIb3VycygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBNaW51dGVcbiAgbTogZnVuY3Rpb24gbShkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRVVENNaW51dGVzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIFNlY29uZFxuICBzOiBmdW5jdGlvbiBzKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldFVUQ1NlY29uZHMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFM6IGZ1bmN0aW9uIFMoZGF0ZSwgdG9rZW4pIHtcbiAgICB2YXIgbnVtYmVyT2ZEaWdpdHMgPSB0b2tlbi5sZW5ndGg7XG4gICAgdmFyIG1pbGxpc2Vjb25kcyA9IGRhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7XG4gICAgdmFyIGZyYWN0aW9uYWxTZWNvbmRzID0gTWF0aC5mbG9vcihtaWxsaXNlY29uZHMgKiBNYXRoLnBvdygxMCwgbnVtYmVyT2ZEaWdpdHMgLSAzKSk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhmcmFjdGlvbmFsU2Vjb25kcywgdG9rZW4ubGVuZ3RoKTtcbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGZvcm1hdHRlcnM7IiwiaW1wb3J0IGdldFVUQ0RheU9mWWVhciBmcm9tIFwiLi4vLi4vLi4vX2xpYi9nZXRVVENEYXlPZlllYXIvaW5kZXguanNcIjtcbmltcG9ydCBnZXRVVENJU09XZWVrIGZyb20gXCIuLi8uLi8uLi9fbGliL2dldFVUQ0lTT1dlZWsvaW5kZXguanNcIjtcbmltcG9ydCBnZXRVVENJU09XZWVrWWVhciBmcm9tIFwiLi4vLi4vLi4vX2xpYi9nZXRVVENJU09XZWVrWWVhci9pbmRleC5qc1wiO1xuaW1wb3J0IGdldFVUQ1dlZWsgZnJvbSBcIi4uLy4uLy4uL19saWIvZ2V0VVRDV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IGdldFVUQ1dlZWtZZWFyIGZyb20gXCIuLi8uLi8uLi9fbGliL2dldFVUQ1dlZWtZZWFyL2luZGV4LmpzXCI7XG5pbXBvcnQgYWRkTGVhZGluZ1plcm9zIGZyb20gXCIuLi8uLi9hZGRMZWFkaW5nWmVyb3MvaW5kZXguanNcIjtcbmltcG9ydCBsaWdodEZvcm1hdHRlcnMgZnJvbSBcIi4uL2xpZ2h0Rm9ybWF0dGVycy9pbmRleC5qc1wiO1xudmFyIGRheVBlcmlvZEVudW0gPSB7XG4gIGFtOiAnYW0nLFxuICBwbTogJ3BtJyxcbiAgbWlkbmlnaHQ6ICdtaWRuaWdodCcsXG4gIG5vb246ICdub29uJyxcbiAgbW9ybmluZzogJ21vcm5pbmcnLFxuICBhZnRlcm5vb246ICdhZnRlcm5vb24nLFxuICBldmVuaW5nOiAnZXZlbmluZycsXG4gIG5pZ2h0OiAnbmlnaHQnXG59O1xuXG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCBNaWxsaXNlY29uZHMgaW4gZGF5ICAgICAgICAgICAgfFxuICogfCAgYiAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgfCAgQiAgfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgfFxuICogfCAgYyAgfCBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2VlayAgfCAgQyogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZSAgfCBMb2NhbCBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgfCAgRSAgfCBEYXkgb2Ygd2VlayAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgRiogfCBEYXkgb2Ygd2VlayBpbiBtb250aCAgICAgICAgICAgfFxuICogfCAgZyogfCBNb2RpZmllZCBKdWxpYW4gZGF5ICAgICAgICAgICAgfCAgRyAgfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaSEgfCBJU08gZGF5IG9mIHdlZWsgICAgICAgICAgICAgICAgfCAgSSEgfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgfFxuICogfCAgaiogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfCAgSiogfCBMb2NhbGl6ZWQgaG91ciB3L28gZGF5IHBlcmlvZCAgfFxuICogfCAgayAgfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgfCAgSyAgfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbCogfCAoZGVwcmVjYXRlZCkgICAgICAgICAgICAgICAgICAgfCAgTCAgfCBTdGFuZC1hbG9uZSBtb250aCAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbyEgfCBPcmRpbmFsIG51bWJlciBtb2RpZmllciAgICAgICAgfCAgTyAgfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgfFxuICogfCAgcCEgfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgfCAgUCEgfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgfFxuICogfCAgcSAgfCBTdGFuZC1hbG9uZSBxdWFydGVyICAgICAgICAgICAgfCAgUSAgfCBRdWFydGVyICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgciogfCBSZWxhdGVkIEdyZWdvcmlhbiB5ZWFyICAgICAgICAgfCAgUiEgfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgdCEgfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgfCAgVCEgfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgfFxuICogfCAgdSAgfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgfCAgVSogfCBDeWNsaWMgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgdiogfCBUaW1lem9uZSAoZ2VuZXJpYyBub24tbG9jYXQuKSAgfCAgViogfCBUaW1lem9uZSAobG9jYXRpb24pICAgICAgICAgICAgfFxuICogfCAgdyAgfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgfCAgVyogfCBXZWVrIG9mIG1vbnRoICAgICAgICAgICAgICAgICAgfFxuICogfCAgeCAgfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgfCAgWCAgfCBUaW1lem9uZSAoSVNPLTg2MDEpICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgfFxuICogfCAgeiAgfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgfCAgWiogfCBUaW1lem9uZSAoYWxpYXNlcykgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAhIGFyZSBub24tc3RhbmRhcmQsIGJ1dCBpbXBsZW1lbnRlZCBieSBkYXRlLWZuczpcbiAqIC0gYG9gIG1vZGlmaWVzIHRoZSBwcmV2aW91cyB0b2tlbiB0byB0dXJuIGl0IGludG8gYW4gb3JkaW5hbCAoc2VlIGBmb3JtYXRgIGRvY3MpXG4gKiAtIGBpYCBpcyBJU08gZGF5IG9mIHdlZWsuIEZvciBgaWAgYW5kIGBpaWAgaXMgcmV0dXJucyBudW1lcmljIElTTyB3ZWVrIGRheXMsXG4gKiAgIGkuZS4gNyBmb3IgU3VuZGF5LCAxIGZvciBNb25kYXksIGV0Yy5cbiAqIC0gYElgIGlzIElTTyB3ZWVrIG9mIHllYXIsIGFzIG9wcG9zZWQgdG8gYHdgIHdoaWNoIGlzIGxvY2FsIHdlZWsgb2YgeWVhci5cbiAqIC0gYFJgIGlzIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLCBhcyBvcHBvc2VkIHRvIGBZYCB3aGljaCBpcyBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogICBgUmAgaXMgc3VwcG9zZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBJYCBhbmQgYGlgXG4gKiAgIGZvciB1bml2ZXJzYWwgSVNPIHdlZWstbnVtYmVyaW5nIGRhdGUsIHdoZXJlYXNcbiAqICAgYFlgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgd2AgYW5kIGBlYFxuICogICBmb3Igd2Vlay1udW1iZXJpbmcgZGF0ZSBzcGVjaWZpYyB0byB0aGUgbG9jYWxlLlxuICogLSBgUGAgaXMgbG9uZyBsb2NhbGl6ZWQgZGF0ZSBmb3JtYXRcbiAqIC0gYHBgIGlzIGxvbmcgbG9jYWxpemVkIHRpbWUgZm9ybWF0XG4gKi9cbnZhciBmb3JtYXR0ZXJzID0ge1xuICAvLyBFcmFcbiAgRzogZnVuY3Rpb24gRyhkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgZXJhID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpID4gMCA/IDEgOiAwO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gQUQsIEJDXG4gICAgICBjYXNlICdHJzpcbiAgICAgIGNhc2UgJ0dHJzpcbiAgICAgIGNhc2UgJ0dHRyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCdcbiAgICAgICAgfSk7XG4gICAgICAvLyBBLCBCXG5cbiAgICAgIGNhc2UgJ0dHR0dHJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdydcbiAgICAgICAgfSk7XG4gICAgICAvLyBBbm5vIERvbWluaSwgQmVmb3JlIENocmlzdFxuXG4gICAgICBjYXNlICdHR0dHJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIFllYXJcbiAgeTogZnVuY3Rpb24geShkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAvLyBPcmRpbmFsIG51bWJlclxuICAgIGlmICh0b2tlbiA9PT0gJ3lvJykge1xuICAgICAgdmFyIHNpZ25lZFllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7IC8vIFJldHVybnMgMSBmb3IgMSBCQyAod2hpY2ggaXMgeWVhciAwIGluIEphdmFTY3JpcHQpXG5cbiAgICAgIHZhciB5ZWFyID0gc2lnbmVkWWVhciA+IDAgPyBzaWduZWRZZWFyIDogMSAtIHNpZ25lZFllYXI7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcih5ZWFyLCB7XG4gICAgICAgIHVuaXQ6ICd5ZWFyJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy55KGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhclxuICBZOiBmdW5jdGlvbiBZKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIHZhciBzaWduZWRXZWVrWWVhciA9IGdldFVUQ1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpOyAvLyBSZXR1cm5zIDEgZm9yIDEgQkMgKHdoaWNoIGlzIHllYXIgMCBpbiBKYXZhU2NyaXB0KVxuXG4gICAgdmFyIHdlZWtZZWFyID0gc2lnbmVkV2Vla1llYXIgPiAwID8gc2lnbmVkV2Vla1llYXIgOiAxIC0gc2lnbmVkV2Vla1llYXI7IC8vIFR3byBkaWdpdCB5ZWFyXG5cbiAgICBpZiAodG9rZW4gPT09ICdZWScpIHtcbiAgICAgIHZhciB0d29EaWdpdFllYXIgPSB3ZWVrWWVhciAlIDEwMDtcbiAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModHdvRGlnaXRZZWFyLCAyKTtcbiAgICB9IC8vIE9yZGluYWwgbnVtYmVyXG5cblxuICAgIGlmICh0b2tlbiA9PT0gJ1lvJykge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIod2Vla1llYXIsIHtcbiAgICAgICAgdW5pdDogJ3llYXInXG4gICAgICB9KTtcbiAgICB9IC8vIFBhZGRpbmdcblxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh3ZWVrWWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgUjogZnVuY3Rpb24gUihkYXRlLCB0b2tlbikge1xuICAgIHZhciBpc29XZWVrWWVhciA9IGdldFVUQ0lTT1dlZWtZZWFyKGRhdGUpOyAvLyBQYWRkaW5nXG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBFeHRlbmRlZCB5ZWFyLiBUaGlzIGlzIGEgc2luZ2xlIG51bWJlciBkZXNpZ25hdGluZyB0aGUgeWVhciBvZiB0aGlzIGNhbGVuZGFyIHN5c3RlbS5cbiAgLy8gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIGB5YCBhbmQgYHVgIGxvY2FsaXplcnMgYXJlIEIuQy4geWVhcnM6XG4gIC8vIHwgWWVhciB8IGB5YCB8IGB1YCB8XG4gIC8vIHwtLS0tLS18LS0tLS18LS0tLS18XG4gIC8vIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gIC8vIHwgQkMgMSB8ICAgMSB8ICAgMCB8XG4gIC8vIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gIC8vIEFsc28gYHl5YCBhbHdheXMgcmV0dXJucyB0aGUgbGFzdCB0d28gZGlnaXRzIG9mIGEgeWVhcixcbiAgLy8gd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkLlxuICB1OiBmdW5jdGlvbiB1KGRhdGUsIHRva2VuKSB7XG4gICAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBRdWFydGVyXG4gIFE6IGZ1bmN0aW9uIFEoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgdmFyIHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpIC8gMyk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAxLCAyLCAzLCA0XG4gICAgICBjYXNlICdRJzpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0XG5cbiAgICAgIGNhc2UgJ1FRJzpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAzcmQsIDR0aFxuXG4gICAgICBjYXNlICdRbyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB1bml0OiAncXVhcnRlcidcbiAgICAgICAgfSk7XG4gICAgICAvLyBRMSwgUTIsIFEzLCBRNFxuXG4gICAgICBjYXNlICdRUVEnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gMSwgMiwgMywgNCAobmFycm93IHF1YXJ0ZXI7IGNvdWxkIGJlIG5vdCBudW1lcmljYWwpXG5cbiAgICAgIGNhc2UgJ1FRUVFRJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiAnbmFycm93JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLlxuXG4gICAgICBjYXNlICdRUVFRJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogJ3dpZGUnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIFN0YW5kLWFsb25lIHF1YXJ0ZXJcbiAgcTogZnVuY3Rpb24gcShkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgcXVhcnRlciA9IE1hdGguY2VpbCgoZGF0ZS5nZXRVVENNb250aCgpICsgMSkgLyAzKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDEsIDIsIDMsIDRcbiAgICAgIGNhc2UgJ3EnOlxuICAgICAgICByZXR1cm4gU3RyaW5nKHF1YXJ0ZXIpO1xuICAgICAgLy8gMDEsIDAyLCAwMywgMDRcblxuICAgICAgY2FzZSAncXEnOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHF1YXJ0ZXIsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIDNyZCwgNHRoXG5cbiAgICAgIGNhc2UgJ3FvJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIocXVhcnRlciwge1xuICAgICAgICAgIHVuaXQ6ICdxdWFydGVyJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFExLCBRMiwgUTMsIFE0XG5cbiAgICAgIGNhc2UgJ3FxcSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZSdcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcblxuICAgICAgY2FzZSAncXFxcXEnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uXG5cbiAgICAgIGNhc2UgJ3FxcXEnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gTW9udGhcbiAgTTogZnVuY3Rpb24gTShkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlICdNJzpcbiAgICAgIGNhc2UgJ01NJzpcbiAgICAgICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5NKGRhdGUsIHRva2VuKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGhcblxuICAgICAgY2FzZSAnTW8nOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHtcbiAgICAgICAgICB1bml0OiAnbW9udGgnXG4gICAgICAgIH0pO1xuICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjXG5cbiAgICAgIGNhc2UgJ01NTSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIEosIEYsIC4uLiwgRFxuXG4gICAgICBjYXNlICdNTU1NTSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiAnbmFycm93JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuXG4gICAgICBjYXNlICdNTU1NJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gU3RhbmQtYWxvbmUgbW9udGhcbiAgTDogZnVuY3Rpb24gTChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAxLCAyLCAuLi4sIDEyXG4gICAgICBjYXNlICdMJzpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhtb250aCArIDEpO1xuICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyXG5cbiAgICAgIGNhc2UgJ0xMJzpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuXG4gICAgICBjYXNlICdMbyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwge1xuICAgICAgICAgIHVuaXQ6ICdtb250aCdcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcblxuICAgICAgY2FzZSAnTExMJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgICAgLy8gSiwgRiwgLi4uLCBEXG5cbiAgICAgIGNhc2UgJ0xMTExMJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyXG5cbiAgICAgIGNhc2UgJ0xMTEwnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZSdcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBMb2NhbCB3ZWVrIG9mIHllYXJcbiAgdzogZnVuY3Rpb24gdyhkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgd2VlayA9IGdldFVUQ1dlZWsoZGF0ZSwgb3B0aW9ucyk7XG5cbiAgICBpZiAodG9rZW4gPT09ICd3bycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWssIHtcbiAgICAgICAgdW5pdDogJ3dlZWsnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHdlZWssIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIElTTyB3ZWVrIG9mIHllYXJcbiAgSTogZnVuY3Rpb24gSShkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgaXNvV2VlayA9IGdldFVUQ0lTT1dlZWsoZGF0ZSk7XG5cbiAgICBpZiAodG9rZW4gPT09ICdJbycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb1dlZWssIHtcbiAgICAgICAgdW5pdDogJ3dlZWsnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWssIHRva2VuLmxlbmd0aCk7XG4gIH0sXG4gIC8vIERheSBvZiB0aGUgbW9udGhcbiAgZDogZnVuY3Rpb24gZChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09ICdkbycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0VVRDRGF0ZSgpLCB7XG4gICAgICAgIHVuaXQ6ICdkYXRlJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5kKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gRGF5IG9mIHllYXJcbiAgRDogZnVuY3Rpb24gRChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgZGF5T2ZZZWFyID0gZ2V0VVRDRGF5T2ZZZWFyKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSAnRG8nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXlPZlllYXIsIHtcbiAgICAgICAgdW5pdDogJ2RheU9mWWVhcidcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF5T2ZZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBEYXkgb2Ygd2Vla1xuICBFOiBmdW5jdGlvbiBFKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gVHVlXG4gICAgICBjYXNlICdFJzpcbiAgICAgIGNhc2UgJ0VFJzpcbiAgICAgIGNhc2UgJ0VFRSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVFxuXG4gICAgICBjYXNlICdFRUVFRSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG5cbiAgICAgIGNhc2UgJ0VFRUVFRSc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICdzaG9ydCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuXG4gICAgICBjYXNlICdFRUVFJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBMb2NhbCBkYXkgb2Ygd2Vla1xuICBlOiBmdW5jdGlvbiBlKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpO1xuICAgIHZhciBsb2NhbERheU9mV2VlayA9IChkYXlPZldlZWsgLSBvcHRpb25zLndlZWtTdGFydHNPbiArIDgpICUgNyB8fCA3O1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gTnVtZXJpY2FsIHZhbHVlIChOdGggZGF5IG9mIHdlZWsgd2l0aCBjdXJyZW50IGxvY2FsZSBvciB3ZWVrU3RhcnRzT24pXG4gICAgICBjYXNlICdlJzpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7XG4gICAgICAvLyBQYWRkZWQgbnVtZXJpY2FsIHZhbHVlXG5cbiAgICAgIGNhc2UgJ2VlJzpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhsb2NhbERheU9mV2VlaywgMik7XG4gICAgICAvLyAxc3QsIDJuZCwgLi4uLCA3dGhcblxuICAgICAgY2FzZSAnZW8nOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihsb2NhbERheU9mV2Vlaywge1xuICAgICAgICAgIHVuaXQ6ICdkYXknXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdlZWUnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFRcblxuICAgICAgY2FzZSAnZWVlZWUnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnbmFycm93JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuXG4gICAgICBjYXNlICdlZWVlZWUnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFR1ZXNkYXlcblxuICAgICAgY2FzZSAnZWVlZSc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gU3RhbmQtYWxvbmUgbG9jYWwgZGF5IG9mIHdlZWtcbiAgYzogZnVuY3Rpb24gYyhkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgICB2YXIgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIE51bWVyaWNhbCB2YWx1ZSAoc2FtZSBhcyBpbiBgZWApXG4gICAgICBjYXNlICdjJzpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7XG4gICAgICAvLyBQYWRkZWQgbnVtZXJpY2FsIHZhbHVlXG5cbiAgICAgIGNhc2UgJ2NjJzpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhsb2NhbERheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDd0aFxuXG4gICAgICBjYXNlICdjbyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGxvY2FsRGF5T2ZXZWVrLCB7XG4gICAgICAgICAgdW5pdDogJ2RheSdcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2NjYyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVFxuXG4gICAgICBjYXNlICdjY2NjYyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG5cbiAgICAgIGNhc2UgJ2NjY2NjYyc6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICdzaG9ydCcsXG4gICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuXG4gICAgICBjYXNlICdjY2NjJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZSdcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBJU08gZGF5IG9mIHdlZWtcbiAgaTogZnVuY3Rpb24gaShkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTtcbiAgICB2YXIgaXNvRGF5T2ZXZWVrID0gZGF5T2ZXZWVrID09PSAwID8gNyA6IGRheU9mV2VlaztcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDJcbiAgICAgIGNhc2UgJ2knOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGlzb0RheU9mV2Vlayk7XG4gICAgICAvLyAwMlxuXG4gICAgICBjYXNlICdpaSc6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMm5kXG5cbiAgICAgIGNhc2UgJ2lvJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvRGF5T2ZXZWVrLCB7XG4gICAgICAgICAgdW5pdDogJ2RheSdcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVcblxuICAgICAgY2FzZSAnaWlpJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG5cbiAgICAgIGNhc2UgJ2lpaWlpJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVcblxuICAgICAgY2FzZSAnaWlpaWlpJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ3Nob3J0JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG5cbiAgICAgIGNhc2UgJ2lpaWknOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogJ3dpZGUnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIEFNIG9yIFBNXG4gIGE6IGZ1bmN0aW9uIGEoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICAgIHZhciBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyAncG0nIDogJ2FtJztcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgJ2EnOlxuICAgICAgY2FzZSAnYWEnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAnYWFhJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgY2FzZSAnYWFhYWEnOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiAnbmFycm93JyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2FhYWEnOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ3dpZGUnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vIEFNLCBQTSwgbWlkbmlnaHQsIG5vb25cbiAgYjogZnVuY3Rpb24gYihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XG4gICAgdmFyIGRheVBlcmlvZEVudW1WYWx1ZTtcblxuICAgIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID09PSAwKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyAncG0nIDogJ2FtJztcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlICdiJzpcbiAgICAgIGNhc2UgJ2JiJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2JiYic6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGNhc2UgJ2JiYmJiJzpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdiYmJiJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICd3aWRlJyxcbiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZydcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvLyBpbiB0aGUgbW9ybmluZywgaW4gdGhlIGFmdGVybm9vbiwgaW4gdGhlIGV2ZW5pbmcsIGF0IG5pZ2h0XG4gIEI6IGZ1bmN0aW9uIEIoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICAgIHZhciBkYXlQZXJpb2RFbnVtVmFsdWU7XG5cbiAgICBpZiAoaG91cnMgPj0gMTcpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uZXZlbmluZztcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDEyKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLmFmdGVybm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDQpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubW9ybmluZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5uaWdodDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlICdCJzpcbiAgICAgIGNhc2UgJ0JCJzpcbiAgICAgIGNhc2UgJ0JCQic6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICdCQkJCQic6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6ICduYXJyb3cnLFxuICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJ1xuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAnQkJCQic6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiAnd2lkZScsXG4gICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLy8gSG91ciBbMS0xMl1cbiAgaDogZnVuY3Rpb24gaChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09ICdobycpIHtcbiAgICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKSAlIDEyO1xuICAgICAgaWYgKGhvdXJzID09PSAwKSBob3VycyA9IDEyO1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHtcbiAgICAgICAgdW5pdDogJ2hvdXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmgoZGF0ZSwgdG9rZW4pO1xuICB9LFxuICAvLyBIb3VyIFswLTIzXVxuICBIOiBmdW5jdGlvbiBIKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gJ0hvJykge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRVVENIb3VycygpLCB7XG4gICAgICAgIHVuaXQ6ICdob3VyJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5IKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gSG91ciBbMC0xMV1cbiAgSzogZnVuY3Rpb24gSyhkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCkgJSAxMjtcblxuICAgIGlmICh0b2tlbiA9PT0gJ0tvJykge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHtcbiAgICAgICAgdW5pdDogJ2hvdXInXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGhvdXJzLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuICAvLyBIb3VyIFsxLTI0XVxuICBrOiBmdW5jdGlvbiBrKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKTtcbiAgICBpZiAoaG91cnMgPT09IDApIGhvdXJzID0gMjQ7XG5cbiAgICBpZiAodG9rZW4gPT09ICdrbycpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7XG4gICAgICAgIHVuaXQ6ICdob3VyJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gTWludXRlXG4gIG06IGZ1bmN0aW9uIG0oZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSAnbW8nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFVUQ01pbnV0ZXMoKSwge1xuICAgICAgICB1bml0OiAnbWludXRlJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5tKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gU2Vjb25kXG4gIHM6IGZ1bmN0aW9uIHMoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSAnc28nKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFVUQ1NlY29uZHMoKSwge1xuICAgICAgICB1bml0OiAnc2Vjb25kJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5zKGRhdGUsIHRva2VuKTtcbiAgfSxcbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFM6IGZ1bmN0aW9uIFMoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLlMoZGF0ZSwgdG9rZW4pO1xuICB9LFxuICAvLyBUaW1lem9uZSAoSVNPLTg2MDEuIElmIG9mZnNldCBpcyAwLCBvdXRwdXQgaXMgYWx3YXlzIGAnWidgKVxuICBYOiBmdW5jdGlvbiBYKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBpZiAodGltZXpvbmVPZmZzZXQgPT09IDApIHtcbiAgICAgIHJldHVybiAnWic7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gSG91cnMgYW5kIG9wdGlvbmFsIG1pbnV0ZXNcbiAgICAgIGNhc2UgJ1gnOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYFhYYFxuXG4gICAgICBjYXNlICdYWFhYJzpcbiAgICAgIGNhc2UgJ1hYJzpcbiAgICAgICAgLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCk7XG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGBYWFhgXG5cbiAgICAgIGNhc2UgJ1hYWFhYJzpcbiAgICAgIGNhc2UgJ1hYWCc6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltaXRlclxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7XG4gICAgfVxuICB9LFxuICAvLyBUaW1lem9uZSAoSVNPLTg2MDEuIElmIG9mZnNldCBpcyAwLCBvdXRwdXQgaXMgYCcrMDA6MDAnYCBvciBlcXVpdmFsZW50KVxuICB4OiBmdW5jdGlvbiB4KGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBIb3VycyBhbmQgb3B0aW9uYWwgbWludXRlc1xuICAgICAgY2FzZSAneCc6XG4gICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXModGltZXpvbmVPZmZzZXQpO1xuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHhgXG5cbiAgICAgIGNhc2UgJ3h4eHgnOlxuICAgICAgY2FzZSAneHgnOlxuICAgICAgICAvLyBIb3VycyBhbmQgbWludXRlcyB3aXRob3V0IGA6YCBkZWxpbWl0ZXJcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0KTtcbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGggYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYHh4eGBcblxuICAgICAgY2FzZSAneHh4eHgnOlxuICAgICAgY2FzZSAneHh4JzogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCwgJzonKTtcbiAgICB9XG4gIH0sXG4gIC8vIFRpbWV6b25lIChHTVQpXG4gIE86IGZ1bmN0aW9uIE8oZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIHZhciBvcmlnaW5hbERhdGUgPSBvcHRpb25zLl9vcmlnaW5hbERhdGUgfHwgZGF0ZTtcbiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlICdPJzpcbiAgICAgIGNhc2UgJ09PJzpcbiAgICAgIGNhc2UgJ09PTyc6XG4gICAgICAgIHJldHVybiAnR01UJyArIGZvcm1hdFRpbWV6b25lU2hvcnQodGltZXpvbmVPZmZzZXQsICc6Jyk7XG4gICAgICAvLyBMb25nXG5cbiAgICAgIGNhc2UgJ09PT08nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdHTVQnICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7XG4gICAgfVxuICB9LFxuICAvLyBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0aW9uKVxuICB6OiBmdW5jdGlvbiB6KGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gb3JpZ2luYWxEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSAneic6XG4gICAgICBjYXNlICd6eic6XG4gICAgICBjYXNlICd6enonOlxuICAgICAgICByZXR1cm4gJ0dNVCcgKyBmb3JtYXRUaW1lem9uZVNob3J0KHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgICAgLy8gTG9uZ1xuXG4gICAgICBjYXNlICd6enp6JzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnR01UJyArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCAnOicpO1xuICAgIH1cbiAgfSxcbiAgLy8gU2Vjb25kcyB0aW1lc3RhbXBcbiAgdDogZnVuY3Rpb24gdChkYXRlLCB0b2tlbiwgX2xvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgdmFyIG9yaWdpbmFsRGF0ZSA9IG9wdGlvbnMuX29yaWdpbmFsRGF0ZSB8fCBkYXRlO1xuICAgIHZhciB0aW1lc3RhbXAgPSBNYXRoLmZsb29yKG9yaWdpbmFsRGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHRpbWVzdGFtcCwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbiAgLy8gTWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICBUOiBmdW5jdGlvbiBUKGRhdGUsIHRva2VuLCBfbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7XG4gICAgdmFyIHRpbWVzdGFtcCA9IG9yaWdpbmFsRGF0ZS5nZXRUaW1lKCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0aW1lc3RhbXAsIHRva2VuLmxlbmd0aCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lU2hvcnQob2Zmc2V0LCBkaXJ0eURlbGltaXRlcikge1xuICB2YXIgc2lnbiA9IG9mZnNldCA+IDAgPyAnLScgOiAnKyc7XG4gIHZhciBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKGFic09mZnNldCAvIDYwKTtcbiAgdmFyIG1pbnV0ZXMgPSBhYnNPZmZzZXQgJSA2MDtcblxuICBpZiAobWludXRlcyA9PT0gMCkge1xuICAgIHJldHVybiBzaWduICsgU3RyaW5nKGhvdXJzKTtcbiAgfVxuXG4gIHZhciBkZWxpbWl0ZXIgPSBkaXJ0eURlbGltaXRlciB8fCAnJztcbiAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpICsgZGVsaW1pdGVyICsgYWRkTGVhZGluZ1plcm9zKG1pbnV0ZXMsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXMob2Zmc2V0LCBkaXJ0eURlbGltaXRlcikge1xuICBpZiAob2Zmc2V0ICUgNjAgPT09IDApIHtcbiAgICB2YXIgc2lnbiA9IG9mZnNldCA+IDAgPyAnLScgOiAnKyc7XG4gICAgcmV0dXJuIHNpZ24gKyBhZGRMZWFkaW5nWmVyb3MoTWF0aC5hYnMob2Zmc2V0KSAvIDYwLCAyKTtcbiAgfVxuXG4gIHJldHVybiBmb3JtYXRUaW1lem9uZShvZmZzZXQsIGRpcnR5RGVsaW1pdGVyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmUob2Zmc2V0LCBkaXJ0eURlbGltaXRlcikge1xuICB2YXIgZGVsaW1pdGVyID0gZGlydHlEZWxpbWl0ZXIgfHwgJyc7XG4gIHZhciBzaWduID0gb2Zmc2V0ID4gMCA/ICctJyA6ICcrJztcbiAgdmFyIGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIHZhciBob3VycyA9IGFkZExlYWRpbmdaZXJvcyhNYXRoLmZsb29yKGFic09mZnNldCAvIDYwKSwgMik7XG4gIHZhciBtaW51dGVzID0gYWRkTGVhZGluZ1plcm9zKGFic09mZnNldCAlIDYwLCAyKTtcbiAgcmV0dXJuIHNpZ24gKyBob3VycyArIGRlbGltaXRlciArIG1pbnV0ZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZvcm1hdHRlcnM7IiwidmFyIGRhdGVMb25nRm9ybWF0dGVyID0gZnVuY3Rpb24gZGF0ZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZykge1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlICdQJzpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoe1xuICAgICAgICB3aWR0aDogJ3Nob3J0J1xuICAgICAgfSk7XG5cbiAgICBjYXNlICdQUCc6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHtcbiAgICAgICAgd2lkdGg6ICdtZWRpdW0nXG4gICAgICB9KTtcblxuICAgIGNhc2UgJ1BQUCc6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHtcbiAgICAgICAgd2lkdGg6ICdsb25nJ1xuICAgICAgfSk7XG5cbiAgICBjYXNlICdQUFBQJzpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7XG4gICAgICAgIHdpZHRoOiAnZnVsbCdcbiAgICAgIH0pO1xuICB9XG59O1xuXG52YXIgdGltZUxvbmdGb3JtYXR0ZXIgPSBmdW5jdGlvbiB0aW1lTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKSB7XG4gIHN3aXRjaCAocGF0dGVybikge1xuICAgIGNhc2UgJ3AnOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7XG4gICAgICAgIHdpZHRoOiAnc2hvcnQnXG4gICAgICB9KTtcblxuICAgIGNhc2UgJ3BwJzpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoe1xuICAgICAgICB3aWR0aDogJ21lZGl1bSdcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAncHBwJzpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoe1xuICAgICAgICB3aWR0aDogJ2xvbmcnXG4gICAgICB9KTtcblxuICAgIGNhc2UgJ3BwcHAnOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHtcbiAgICAgICAgd2lkdGg6ICdmdWxsJ1xuICAgICAgfSk7XG4gIH1cbn07XG5cbnZhciBkYXRlVGltZUxvbmdGb3JtYXR0ZXIgPSBmdW5jdGlvbiBkYXRlVGltZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZykge1xuICB2YXIgbWF0Y2hSZXN1bHQgPSBwYXR0ZXJuLm1hdGNoKC8oUCspKHArKT8vKSB8fCBbXTtcbiAgdmFyIGRhdGVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMV07XG4gIHZhciB0aW1lUGF0dGVybiA9IG1hdGNoUmVzdWx0WzJdO1xuXG4gIGlmICghdGltZVBhdHRlcm4pIHtcbiAgICByZXR1cm4gZGF0ZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZyk7XG4gIH1cblxuICB2YXIgZGF0ZVRpbWVGb3JtYXQ7XG5cbiAgc3dpdGNoIChkYXRlUGF0dGVybikge1xuICAgIGNhc2UgJ1AnOlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHtcbiAgICAgICAgd2lkdGg6ICdzaG9ydCdcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdQUCc6XG4gICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoe1xuICAgICAgICB3aWR0aDogJ21lZGl1bSdcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdQUFAnOlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHtcbiAgICAgICAgd2lkdGg6ICdsb25nJ1xuICAgICAgfSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ1BQUFAnOlxuICAgIGRlZmF1bHQ6XG4gICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoe1xuICAgICAgICB3aWR0aDogJ2Z1bGwnXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGRhdGVUaW1lRm9ybWF0LnJlcGxhY2UoJ3t7ZGF0ZX19JywgZGF0ZUxvbmdGb3JtYXR0ZXIoZGF0ZVBhdHRlcm4sIGZvcm1hdExvbmcpKS5yZXBsYWNlKCd7e3RpbWV9fScsIHRpbWVMb25nRm9ybWF0dGVyKHRpbWVQYXR0ZXJuLCBmb3JtYXRMb25nKSk7XG59O1xuXG52YXIgbG9uZ0Zvcm1hdHRlcnMgPSB7XG4gIHA6IHRpbWVMb25nRm9ybWF0dGVyLFxuICBQOiBkYXRlVGltZUxvbmdGb3JtYXR0ZXJcbn07XG5leHBvcnQgZGVmYXVsdCBsb25nRm9ybWF0dGVyczsiLCIvKipcbiAqIEdvb2dsZSBDaHJvbWUgYXMgb2YgNjcuMC4zMzk2Ljg3IGludHJvZHVjZWQgdGltZXpvbmVzIHdpdGggb2Zmc2V0IHRoYXQgaW5jbHVkZXMgc2Vjb25kcy5cbiAqIFRoZXkgdXN1YWxseSBhcHBlYXIgZm9yIGRhdGVzIHRoYXQgZGVub3RlIHRpbWUgYmVmb3JlIHRoZSB0aW1lem9uZXMgd2VyZSBpbnRyb2R1Y2VkXG4gKiAoZS5nLiBmb3IgJ0V1cm9wZS9QcmFndWUnIHRpbWV6b25lIHRoZSBvZmZzZXQgaXMgR01UKzAwOjU3OjQ0IGJlZm9yZSAxIE9jdG9iZXIgMTg5MVxuICogYW5kIEdNVCswMTowMDowMCBhZnRlciB0aGF0IGRhdGUpXG4gKlxuICogRGF0ZSNnZXRUaW1lem9uZU9mZnNldCByZXR1cm5zIHRoZSBvZmZzZXQgaW4gbWludXRlcyBhbmQgd291bGQgcmV0dXJuIDU3IGZvciB0aGUgZXhhbXBsZSBhYm92ZSxcbiAqIHdoaWNoIHdvdWxkIGxlYWQgdG8gaW5jb3JyZWN0IGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaWxsaXNlY29uZHMgdGhhdCB0YWtlcyBzZWNvbmRzIGluIGFjY291bnQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMoZGF0ZSkge1xuICB2YXIgdXRjRGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSwgZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCksIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpKTtcbiAgdXRjRGF0ZS5zZXRVVENGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkpO1xuICByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLSB1dGNEYXRlLmdldFRpbWUoKTtcbn0iLCJ2YXIgcHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW5zID0gWydEJywgJ0REJ107XG52YXIgcHJvdGVjdGVkV2Vla1llYXJUb2tlbnMgPSBbJ1lZJywgJ1lZWVknXTtcbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuKHRva2VuKSB7XG4gIHJldHVybiBwcm90ZWN0ZWREYXlPZlllYXJUb2tlbnMuaW5kZXhPZih0b2tlbikgIT09IC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbih0b2tlbikge1xuICByZXR1cm4gcHJvdGVjdGVkV2Vla1llYXJUb2tlbnMuaW5kZXhPZih0b2tlbikgIT09IC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRocm93UHJvdGVjdGVkRXJyb3IodG9rZW4sIGZvcm1hdCwgaW5wdXQpIHtcbiAgaWYgKHRva2VuID09PSAnWVlZWScpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlVzZSBgeXl5eWAgaW5zdGVhZCBvZiBgWVlZWWAgKGluIGBcIi5jb25jYXQoZm9ybWF0LCBcImApIGZvciBmb3JtYXR0aW5nIHllYXJzIHRvIHRoZSBpbnB1dCBgXCIpLmNvbmNhdChpbnB1dCwgXCJgOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcIikpO1xuICB9IGVsc2UgaWYgKHRva2VuID09PSAnWVknKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJVc2UgYHl5YCBpbnN0ZWFkIG9mIGBZWWAgKGluIGBcIi5jb25jYXQoZm9ybWF0LCBcImApIGZvciBmb3JtYXR0aW5nIHllYXJzIHRvIHRoZSBpbnB1dCBgXCIpLmNvbmNhdChpbnB1dCwgXCJgOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcIikpO1xuICB9IGVsc2UgaWYgKHRva2VuID09PSAnRCcpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlVzZSBgZGAgaW5zdGVhZCBvZiBgRGAgKGluIGBcIi5jb25jYXQoZm9ybWF0LCBcImApIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHRvIHRoZSBpbnB1dCBgXCIpLmNvbmNhdChpbnB1dCwgXCJgOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcIikpO1xuICB9IGVsc2UgaWYgKHRva2VuID09PSAnREQnKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJVc2UgYGRkYCBpbnN0ZWFkIG9mIGBERGAgKGluIGBcIi5jb25jYXQoZm9ybWF0LCBcImApIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHRvIHRoZSBpbnB1dCBgXCIpLmNvbmNhdChpbnB1dCwgXCJgOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcIikpO1xuICB9XG59IiwidmFyIGZvcm1hdERpc3RhbmNlTG9jYWxlID0ge1xuICBsZXNzVGhhblhTZWNvbmRzOiB7XG4gICAgb25lOiAnbGVzcyB0aGFuIGEgc2Vjb25kJyxcbiAgICBvdGhlcjogJ2xlc3MgdGhhbiB7e2NvdW50fX0gc2Vjb25kcydcbiAgfSxcbiAgeFNlY29uZHM6IHtcbiAgICBvbmU6ICcxIHNlY29uZCcsXG4gICAgb3RoZXI6ICd7e2NvdW50fX0gc2Vjb25kcydcbiAgfSxcbiAgaGFsZkFNaW51dGU6ICdoYWxmIGEgbWludXRlJyxcbiAgbGVzc1RoYW5YTWludXRlczoge1xuICAgIG9uZTogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsXG4gICAgb3RoZXI6ICdsZXNzIHRoYW4ge3tjb3VudH19IG1pbnV0ZXMnXG4gIH0sXG4gIHhNaW51dGVzOiB7XG4gICAgb25lOiAnMSBtaW51dGUnLFxuICAgIG90aGVyOiAne3tjb3VudH19IG1pbnV0ZXMnXG4gIH0sXG4gIGFib3V0WEhvdXJzOiB7XG4gICAgb25lOiAnYWJvdXQgMSBob3VyJyxcbiAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSBob3VycydcbiAgfSxcbiAgeEhvdXJzOiB7XG4gICAgb25lOiAnMSBob3VyJyxcbiAgICBvdGhlcjogJ3t7Y291bnR9fSBob3VycydcbiAgfSxcbiAgeERheXM6IHtcbiAgICBvbmU6ICcxIGRheScsXG4gICAgb3RoZXI6ICd7e2NvdW50fX0gZGF5cydcbiAgfSxcbiAgYWJvdXRYV2Vla3M6IHtcbiAgICBvbmU6ICdhYm91dCAxIHdlZWsnLFxuICAgIG90aGVyOiAnYWJvdXQge3tjb3VudH19IHdlZWtzJ1xuICB9LFxuICB4V2Vla3M6IHtcbiAgICBvbmU6ICcxIHdlZWsnLFxuICAgIG90aGVyOiAne3tjb3VudH19IHdlZWtzJ1xuICB9LFxuICBhYm91dFhNb250aHM6IHtcbiAgICBvbmU6ICdhYm91dCAxIG1vbnRoJyxcbiAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSBtb250aHMnXG4gIH0sXG4gIHhNb250aHM6IHtcbiAgICBvbmU6ICcxIG1vbnRoJyxcbiAgICBvdGhlcjogJ3t7Y291bnR9fSBtb250aHMnXG4gIH0sXG4gIGFib3V0WFllYXJzOiB7XG4gICAgb25lOiAnYWJvdXQgMSB5ZWFyJyxcbiAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSB5ZWFycydcbiAgfSxcbiAgeFllYXJzOiB7XG4gICAgb25lOiAnMSB5ZWFyJyxcbiAgICBvdGhlcjogJ3t7Y291bnR9fSB5ZWFycydcbiAgfSxcbiAgb3ZlclhZZWFyczoge1xuICAgIG9uZTogJ292ZXIgMSB5ZWFyJyxcbiAgICBvdGhlcjogJ292ZXIge3tjb3VudH19IHllYXJzJ1xuICB9LFxuICBhbG1vc3RYWWVhcnM6IHtcbiAgICBvbmU6ICdhbG1vc3QgMSB5ZWFyJyxcbiAgICBvdGhlcjogJ2FsbW9zdCB7e2NvdW50fX0geWVhcnMnXG4gIH1cbn07XG5cbnZhciBmb3JtYXREaXN0YW5jZSA9IGZ1bmN0aW9uIGZvcm1hdERpc3RhbmNlKHRva2VuLCBjb3VudCwgb3B0aW9ucykge1xuICB2YXIgcmVzdWx0O1xuICB2YXIgdG9rZW5WYWx1ZSA9IGZvcm1hdERpc3RhbmNlTG9jYWxlW3Rva2VuXTtcblxuICBpZiAodHlwZW9mIHRva2VuVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZTtcbiAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkge1xuICAgIHJlc3VsdCA9IHRva2VuVmFsdWUub25lO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9IHRva2VuVmFsdWUub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQudG9TdHJpbmcoKSk7XG4gIH1cblxuICBpZiAob3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgJiYgb3B0aW9ucy5hZGRTdWZmaXgpIHtcbiAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uICYmIG9wdGlvbnMuY29tcGFyaXNvbiA+IDApIHtcbiAgICAgIHJldHVybiAnaW4gJyArIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc3VsdCArICcgYWdvJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZm9ybWF0RGlzdGFuY2U7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYnVpbGRGb3JtYXRMb25nRm4oYXJncykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICAvLyBUT0RPOiBSZW1vdmUgU3RyaW5nKClcbiAgICB2YXIgd2lkdGggPSBvcHRpb25zLndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgdmFyIGZvcm1hdCA9IGFyZ3MuZm9ybWF0c1t3aWR0aF0gfHwgYXJncy5mb3JtYXRzW2FyZ3MuZGVmYXVsdFdpZHRoXTtcbiAgICByZXR1cm4gZm9ybWF0O1xuICB9O1xufSIsImltcG9ydCBidWlsZEZvcm1hdExvbmdGbiBmcm9tIFwiLi4vLi4vLi4vX2xpYi9idWlsZEZvcm1hdExvbmdGbi9pbmRleC5qc1wiO1xudmFyIGRhdGVGb3JtYXRzID0ge1xuICBmdWxsOiAnRUVFRSwgTU1NTSBkbywgeScsXG4gIGxvbmc6ICdNTU1NIGRvLCB5JyxcbiAgbWVkaXVtOiAnTU1NIGQsIHknLFxuICBzaG9ydDogJ01NL2RkL3l5eXknXG59O1xudmFyIHRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiAnaDptbTpzcyBhIHp6enonLFxuICBsb25nOiAnaDptbTpzcyBhIHonLFxuICBtZWRpdW06ICdoOm1tOnNzIGEnLFxuICBzaG9ydDogJ2g6bW0gYSdcbn07XG52YXIgZGF0ZVRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiBcInt7ZGF0ZX19ICdhdCcge3t0aW1lfX1cIixcbiAgbG9uZzogXCJ7e2RhdGV9fSAnYXQnIHt7dGltZX19XCIsXG4gIG1lZGl1bTogJ3t7ZGF0ZX19LCB7e3RpbWV9fScsXG4gIHNob3J0OiAne3tkYXRlfX0sIHt7dGltZX19J1xufTtcbnZhciBmb3JtYXRMb25nID0ge1xuICBkYXRlOiBidWlsZEZvcm1hdExvbmdGbih7XG4gICAgZm9ybWF0czogZGF0ZUZvcm1hdHMsXG4gICAgZGVmYXVsdFdpZHRoOiAnZnVsbCdcbiAgfSksXG4gIHRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiB0aW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6ICdmdWxsJ1xuICB9KSxcbiAgZGF0ZVRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiBkYXRlVGltZUZvcm1hdHMsXG4gICAgZGVmYXVsdFdpZHRoOiAnZnVsbCdcbiAgfSlcbn07XG5leHBvcnQgZGVmYXVsdCBmb3JtYXRMb25nOyIsInZhciBmb3JtYXRSZWxhdGl2ZUxvY2FsZSA9IHtcbiAgbGFzdFdlZWs6IFwiJ2xhc3QnIGVlZWUgJ2F0JyBwXCIsXG4gIHllc3RlcmRheTogXCIneWVzdGVyZGF5IGF0JyBwXCIsXG4gIHRvZGF5OiBcIid0b2RheSBhdCcgcFwiLFxuICB0b21vcnJvdzogXCIndG9tb3Jyb3cgYXQnIHBcIixcbiAgbmV4dFdlZWs6IFwiZWVlZSAnYXQnIHBcIixcbiAgb3RoZXI6ICdQJ1xufTtcblxudmFyIGZvcm1hdFJlbGF0aXZlID0gZnVuY3Rpb24gZm9ybWF0UmVsYXRpdmUodG9rZW4sIF9kYXRlLCBfYmFzZURhdGUsIF9vcHRpb25zKSB7XG4gIHJldHVybiBmb3JtYXRSZWxhdGl2ZUxvY2FsZVt0b2tlbl07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmb3JtYXRSZWxhdGl2ZTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZExvY2FsaXplRm4oYXJncykge1xuICByZXR1cm4gZnVuY3Rpb24gKGRpcnR5SW5kZXgsIG9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwICYmIG9wdGlvbnMuY29udGV4dCA/IFN0cmluZyhvcHRpb25zLmNvbnRleHQpIDogJ3N0YW5kYWxvbmUnO1xuICAgIHZhciB2YWx1ZXNBcnJheTtcblxuICAgIGlmIChjb250ZXh0ID09PSAnZm9ybWF0dGluZycgJiYgYXJncy5mb3JtYXR0aW5nVmFsdWVzKSB7XG4gICAgICB2YXIgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIHx8IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgICAgdmFyIHdpZHRoID0gb3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgJiYgb3B0aW9ucy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGRlZmF1bHRXaWR0aDtcbiAgICAgIHZhbHVlc0FycmF5ID0gYXJncy5mb3JtYXR0aW5nVmFsdWVzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF9kZWZhdWx0V2lkdGggPSBhcmdzLmRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFyIF93aWR0aCA9IG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwICYmIG9wdGlvbnMud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFsdWVzQXJyYXkgPSBhcmdzLnZhbHVlc1tfd2lkdGhdIHx8IGFyZ3MudmFsdWVzW19kZWZhdWx0V2lkdGhdO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IGFyZ3MuYXJndW1lbnRDYWxsYmFjayA/IGFyZ3MuYXJndW1lbnRDYWxsYmFjayhkaXJ0eUluZGV4KSA6IGRpcnR5SW5kZXg7IC8vIEB0cy1pZ25vcmU6IEZvciBzb21lIHJlYXNvbiBUeXBlU2NyaXB0IGp1c3QgZG9uJ3Qgd2FudCB0byBtYXRjaCBpdCwgbm8gbWF0dGVyIGhvdyBoYXJkIHdlIHRyeS4gSSBjaGFsbGVuZ2UgeW91IHRvIHRyeSB0byByZW1vdmUgaXQhXG5cbiAgICByZXR1cm4gdmFsdWVzQXJyYXlbaW5kZXhdO1xuICB9O1xufSIsImltcG9ydCBidWlsZExvY2FsaXplRm4gZnJvbSBcIi4uLy4uLy4uL19saWIvYnVpbGRMb2NhbGl6ZUZuL2luZGV4LmpzXCI7XG52YXIgZXJhVmFsdWVzID0ge1xuICBuYXJyb3c6IFsnQicsICdBJ10sXG4gIGFiYnJldmlhdGVkOiBbJ0JDJywgJ0FEJ10sXG4gIHdpZGU6IFsnQmVmb3JlIENocmlzdCcsICdBbm5vIERvbWluaSddXG59O1xudmFyIHF1YXJ0ZXJWYWx1ZXMgPSB7XG4gIG5hcnJvdzogWycxJywgJzInLCAnMycsICc0J10sXG4gIGFiYnJldmlhdGVkOiBbJ1ExJywgJ1EyJywgJ1EzJywgJ1E0J10sXG4gIHdpZGU6IFsnMXN0IHF1YXJ0ZXInLCAnMm5kIHF1YXJ0ZXInLCAnM3JkIHF1YXJ0ZXInLCAnNHRoIHF1YXJ0ZXInXVxufTsgLy8gTm90ZTogaW4gRW5nbGlzaCwgdGhlIG5hbWVzIG9mIGRheXMgb2YgdGhlIHdlZWsgYW5kIG1vbnRocyBhcmUgY2FwaXRhbGl6ZWQuXG4vLyBJZiB5b3UgYXJlIG1ha2luZyBhIG5ldyBsb2NhbGUgYmFzZWQgb24gdGhpcyBvbmUsIGNoZWNrIGlmIHRoZSBzYW1lIGlzIHRydWUgZm9yIHRoZSBsYW5ndWFnZSB5b3UncmUgd29ya2luZyBvbi5cbi8vIEdlbmVyYWxseSwgZm9ybWF0dGVkIGRhdGVzIHNob3VsZCBsb29rIGxpa2UgdGhleSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhIHNlbnRlbmNlLFxuLy8gZS5nLiBpbiBTcGFuaXNoIGxhbmd1YWdlIHRoZSB3ZWVrZGF5cyBhbmQgbW9udGhzIHNob3VsZCBiZSBpbiB0aGUgbG93ZXJjYXNlLlxuXG52YXIgbW9udGhWYWx1ZXMgPSB7XG4gIG5hcnJvdzogWydKJywgJ0YnLCAnTScsICdBJywgJ00nLCAnSicsICdKJywgJ0EnLCAnUycsICdPJywgJ04nLCAnRCddLFxuICBhYmJyZXZpYXRlZDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLFxuICB3aWRlOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXVxufTtcbnZhciBkYXlWYWx1ZXMgPSB7XG4gIG5hcnJvdzogWydTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJ10sXG4gIHNob3J0OiBbJ1N1JywgJ01vJywgJ1R1JywgJ1dlJywgJ1RoJywgJ0ZyJywgJ1NhJ10sXG4gIGFiYnJldmlhdGVkOiBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddLFxuICB3aWRlOiBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J11cbn07XG52YXIgZGF5UGVyaW9kVmFsdWVzID0ge1xuICBuYXJyb3c6IHtcbiAgICBhbTogJ2EnLFxuICAgIHBtOiAncCcsXG4gICAgbWlkbmlnaHQ6ICdtaScsXG4gICAgbm9vbjogJ24nLFxuICAgIG1vcm5pbmc6ICdtb3JuaW5nJyxcbiAgICBhZnRlcm5vb246ICdhZnRlcm5vb24nLFxuICAgIGV2ZW5pbmc6ICdldmVuaW5nJyxcbiAgICBuaWdodDogJ25pZ2h0J1xuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiAnQU0nLFxuICAgIHBtOiAnUE0nLFxuICAgIG1pZG5pZ2h0OiAnbWlkbmlnaHQnLFxuICAgIG5vb246ICdub29uJyxcbiAgICBtb3JuaW5nOiAnbW9ybmluZycsXG4gICAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJyxcbiAgICBldmVuaW5nOiAnZXZlbmluZycsXG4gICAgbmlnaHQ6ICduaWdodCdcbiAgfSxcbiAgd2lkZToge1xuICAgIGFtOiAnYS5tLicsXG4gICAgcG06ICdwLm0uJyxcbiAgICBtaWRuaWdodDogJ21pZG5pZ2h0JyxcbiAgICBub29uOiAnbm9vbicsXG4gICAgbW9ybmluZzogJ21vcm5pbmcnLFxuICAgIGFmdGVybm9vbjogJ2FmdGVybm9vbicsXG4gICAgZXZlbmluZzogJ2V2ZW5pbmcnLFxuICAgIG5pZ2h0OiAnbmlnaHQnXG4gIH1cbn07XG52YXIgZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06ICdhJyxcbiAgICBwbTogJ3AnLFxuICAgIG1pZG5pZ2h0OiAnbWknLFxuICAgIG5vb246ICduJyxcbiAgICBtb3JuaW5nOiAnaW4gdGhlIG1vcm5pbmcnLFxuICAgIGFmdGVybm9vbjogJ2luIHRoZSBhZnRlcm5vb24nLFxuICAgIGV2ZW5pbmc6ICdpbiB0aGUgZXZlbmluZycsXG4gICAgbmlnaHQ6ICdhdCBuaWdodCdcbiAgfSxcbiAgYWJicmV2aWF0ZWQ6IHtcbiAgICBhbTogJ0FNJyxcbiAgICBwbTogJ1BNJyxcbiAgICBtaWRuaWdodDogJ21pZG5pZ2h0JyxcbiAgICBub29uOiAnbm9vbicsXG4gICAgbW9ybmluZzogJ2luIHRoZSBtb3JuaW5nJyxcbiAgICBhZnRlcm5vb246ICdpbiB0aGUgYWZ0ZXJub29uJyxcbiAgICBldmVuaW5nOiAnaW4gdGhlIGV2ZW5pbmcnLFxuICAgIG5pZ2h0OiAnYXQgbmlnaHQnXG4gIH0sXG4gIHdpZGU6IHtcbiAgICBhbTogJ2EubS4nLFxuICAgIHBtOiAncC5tLicsXG4gICAgbWlkbmlnaHQ6ICdtaWRuaWdodCcsXG4gICAgbm9vbjogJ25vb24nLFxuICAgIG1vcm5pbmc6ICdpbiB0aGUgbW9ybmluZycsXG4gICAgYWZ0ZXJub29uOiAnaW4gdGhlIGFmdGVybm9vbicsXG4gICAgZXZlbmluZzogJ2luIHRoZSBldmVuaW5nJyxcbiAgICBuaWdodDogJ2F0IG5pZ2h0J1xuICB9XG59O1xuXG52YXIgb3JkaW5hbE51bWJlciA9IGZ1bmN0aW9uIG9yZGluYWxOdW1iZXIoZGlydHlOdW1iZXIsIF9vcHRpb25zKSB7XG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpOyAvLyBJZiBvcmRpbmFsIG51bWJlcnMgZGVwZW5kIG9uIGNvbnRleHQsIGZvciBleGFtcGxlLFxuICAvLyBpZiB0aGV5IGFyZSBkaWZmZXJlbnQgZm9yIGRpZmZlcmVudCBncmFtbWF0aWNhbCBnZW5kZXJzLFxuICAvLyB1c2UgYG9wdGlvbnMudW5pdGAuXG4gIC8vXG4gIC8vIGB1bml0YCBjYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RhdGUnLCAnZGF5T2ZZZWFyJyxcbiAgLy8gJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLlxuXG4gIHZhciByZW0xMDAgPSBudW1iZXIgJSAxMDA7XG5cbiAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7XG4gICAgc3dpdGNoIChyZW0xMDAgJSAxMCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3N0JztcblxuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ25kJztcblxuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3JkJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVtYmVyICsgJ3RoJztcbn07XG5cbnZhciBsb2NhbGl6ZSA9IHtcbiAgb3JkaW5hbE51bWJlcjogb3JkaW5hbE51bWJlcixcbiAgZXJhOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZXJhVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnXG4gIH0pLFxuICBxdWFydGVyOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogcXVhcnRlclZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6ICd3aWRlJyxcbiAgICBhcmd1bWVudENhbGxiYWNrOiBmdW5jdGlvbiBhcmd1bWVudENhbGxiYWNrKHF1YXJ0ZXIpIHtcbiAgICAgIHJldHVybiBxdWFydGVyIC0gMTtcbiAgICB9XG4gIH0pLFxuICBtb250aDogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IG1vbnRoVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnXG4gIH0pLFxuICBkYXk6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBkYXlWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiAnd2lkZSdcbiAgfSksXG4gIGRheVBlcmlvZDogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGRheVBlcmlvZFZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6ICd3aWRlJyxcbiAgICBmb3JtYXR0aW5nVmFsdWVzOiBmb3JtYXR0aW5nRGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRGb3JtYXR0aW5nV2lkdGg6ICd3aWRlJ1xuICB9KVxufTtcbmV4cG9ydCBkZWZhdWx0IGxvY2FsaXplOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihhcmdzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgdmFyIG1hdGNoUGF0dGVybiA9IHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0gfHwgYXJncy5tYXRjaFBhdHRlcm5zW2FyZ3MuZGVmYXVsdE1hdGNoV2lkdGhdO1xuICAgIHZhciBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChtYXRjaFBhdHRlcm4pO1xuXG4gICAgaWYgKCFtYXRjaFJlc3VsdCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1hdGNoZWRTdHJpbmcgPSBtYXRjaFJlc3VsdFswXTtcbiAgICB2YXIgcGFyc2VQYXR0ZXJucyA9IHdpZHRoICYmIGFyZ3MucGFyc2VQYXR0ZXJuc1t3aWR0aF0gfHwgYXJncy5wYXJzZVBhdHRlcm5zW2FyZ3MuZGVmYXVsdFBhcnNlV2lkdGhdO1xuICAgIHZhciBrZXkgPSBBcnJheS5pc0FycmF5KHBhcnNlUGF0dGVybnMpID8gZmluZEluZGV4KHBhcnNlUGF0dGVybnMsIGZ1bmN0aW9uIChwYXR0ZXJuKSB7XG4gICAgICByZXR1cm4gcGF0dGVybi50ZXN0KG1hdGNoZWRTdHJpbmcpO1xuICAgIH0pIDogZmluZEtleShwYXJzZVBhdHRlcm5zLCBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKTtcbiAgICB9KTtcbiAgICB2YXIgdmFsdWU7XG4gICAgdmFsdWUgPSBhcmdzLnZhbHVlQ2FsbGJhY2sgPyBhcmdzLnZhbHVlQ2FsbGJhY2soa2V5KSA6IGtleTtcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFjayA/IG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB2YXIgcmVzdCA9IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHJlc3Q6IHJlc3RcbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBmaW5kS2V5KG9iamVjdCwgcHJlZGljYXRlKSB7XG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkgJiYgcHJlZGljYXRlKG9iamVjdFtrZXldKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKHZhciBrZXkgPSAwOyBrZXkgPCBhcnJheS5sZW5ndGg7IGtleSsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtrZXldKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufSIsImltcG9ydCBidWlsZE1hdGNoRm4gZnJvbSBcIi4uLy4uLy4uL19saWIvYnVpbGRNYXRjaEZuL2luZGV4LmpzXCI7XG5pbXBvcnQgYnVpbGRNYXRjaFBhdHRlcm5GbiBmcm9tIFwiLi4vLi4vLi4vX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuL2luZGV4LmpzXCI7XG52YXIgbWF0Y2hPcmRpbmFsTnVtYmVyUGF0dGVybiA9IC9eKFxcZCspKHRofHN0fG5kfHJkKT8vaTtcbnZhciBwYXJzZU9yZGluYWxOdW1iZXJQYXR0ZXJuID0gL1xcZCsvaTtcbnZhciBtYXRjaEVyYVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eKGJ8YSkvaSxcbiAgYWJicmV2aWF0ZWQ6IC9eKGJcXC4/XFxzP2NcXC4/fGJcXC4/XFxzP2NcXC4/XFxzP2VcXC4/fGFcXC4/XFxzP2RcXC4/fGNcXC4/XFxzP2VcXC4/KS9pLFxuICB3aWRlOiAvXihiZWZvcmUgY2hyaXN0fGJlZm9yZSBjb21tb24gZXJhfGFubm8gZG9taW5pfGNvbW1vbiBlcmEpL2lcbn07XG52YXIgcGFyc2VFcmFQYXR0ZXJucyA9IHtcbiAgYW55OiBbL15iL2ksIC9eKGF8YykvaV1cbn07XG52YXIgbWF0Y2hRdWFydGVyUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bMTIzNF0vaSxcbiAgYWJicmV2aWF0ZWQ6IC9ecVsxMjM0XS9pLFxuICB3aWRlOiAvXlsxMjM0XSh0aHxzdHxuZHxyZCk/IHF1YXJ0ZXIvaVxufTtcbnZhciBwYXJzZVF1YXJ0ZXJQYXR0ZXJucyA9IHtcbiAgYW55OiBbLzEvaSwgLzIvaSwgLzMvaSwgLzQvaV1cbn07XG52YXIgbWF0Y2hNb250aFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eW2pmbWFzb25kXS9pLFxuICBhYmJyZXZpYXRlZDogL14oamFufGZlYnxtYXJ8YXByfG1heXxqdW58anVsfGF1Z3xzZXB8b2N0fG5vdnxkZWMpL2ksXG4gIHdpZGU6IC9eKGphbnVhcnl8ZmVicnVhcnl8bWFyY2h8YXByaWx8bWF5fGp1bmV8anVseXxhdWd1c3R8c2VwdGVtYmVyfG9jdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXIpL2lcbn07XG52YXIgcGFyc2VNb250aFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IFsvXmovaSwgL15mL2ksIC9ebS9pLCAvXmEvaSwgL15tL2ksIC9eai9pLCAvXmovaSwgL15hL2ksIC9ecy9pLCAvXm8vaSwgL15uL2ksIC9eZC9pXSxcbiAgYW55OiBbL15qYS9pLCAvXmYvaSwgL15tYXIvaSwgL15hcC9pLCAvXm1heS9pLCAvXmp1bi9pLCAvXmp1bC9pLCAvXmF1L2ksIC9ecy9pLCAvXm8vaSwgL15uL2ksIC9eZC9pXVxufTtcbnZhciBtYXRjaERheVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eW3NtdHdmXS9pLFxuICBzaG9ydDogL14oc3V8bW98dHV8d2V8dGh8ZnJ8c2EpL2ksXG4gIGFiYnJldmlhdGVkOiAvXihzdW58bW9ufHR1ZXx3ZWR8dGh1fGZyaXxzYXQpL2ksXG4gIHdpZGU6IC9eKHN1bmRheXxtb25kYXl8dHVlc2RheXx3ZWRuZXNkYXl8dGh1cnNkYXl8ZnJpZGF5fHNhdHVyZGF5KS9pXG59O1xudmFyIHBhcnNlRGF5UGF0dGVybnMgPSB7XG4gIG5hcnJvdzogWy9ecy9pLCAvXm0vaSwgL150L2ksIC9edy9pLCAvXnQvaSwgL15mL2ksIC9ecy9pXSxcbiAgYW55OiBbL15zdS9pLCAvXm0vaSwgL150dS9pLCAvXncvaSwgL150aC9pLCAvXmYvaSwgL15zYS9pXVxufTtcbnZhciBtYXRjaERheVBlcmlvZFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eKGF8cHxtaXxufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSxcbiAgYW55OiAvXihbYXBdXFwuP1xccz9tXFwuP3xtaWRuaWdodHxub29ufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaVxufTtcbnZhciBwYXJzZURheVBlcmlvZFBhdHRlcm5zID0ge1xuICBhbnk6IHtcbiAgICBhbTogL15hL2ksXG4gICAgcG06IC9ecC9pLFxuICAgIG1pZG5pZ2h0OiAvXm1pL2ksXG4gICAgbm9vbjogL15uby9pLFxuICAgIG1vcm5pbmc6IC9tb3JuaW5nL2ksXG4gICAgYWZ0ZXJub29uOiAvYWZ0ZXJub29uL2ksXG4gICAgZXZlbmluZzogL2V2ZW5pbmcvaSxcbiAgICBuaWdodDogL25pZ2h0L2lcbiAgfVxufTtcbnZhciBtYXRjaCA9IHtcbiAgb3JkaW5hbE51bWJlcjogYnVpbGRNYXRjaFBhdHRlcm5Gbih7XG4gICAgbWF0Y2hQYXR0ZXJuOiBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuLFxuICAgIHBhcnNlUGF0dGVybjogcGFyc2VPcmRpbmFsTnVtYmVyUGF0dGVybixcbiAgICB2YWx1ZUNhbGxiYWNrOiBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICB9XG4gIH0pLFxuICBlcmE6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hFcmFQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogJ3dpZGUnLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRXJhUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknXG4gIH0pLFxuICBxdWFydGVyOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoUXVhcnRlclBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiAnd2lkZScsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VRdWFydGVyUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknLFxuICAgIHZhbHVlQ2FsbGJhY2s6IGZ1bmN0aW9uIHZhbHVlQ2FsbGJhY2soaW5kZXgpIHtcbiAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgfVxuICB9KSxcbiAgbW9udGg6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiAnd2lkZScsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55J1xuICB9KSxcbiAgZGF5OiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6ICd3aWRlJyxcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55J1xuICB9KSxcbiAgZGF5UGVyaW9kOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6ICdhbnknLFxuICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknXG4gIH0pXG59O1xuZXhwb3J0IGRlZmF1bHQgbWF0Y2g7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYnVpbGRNYXRjaFBhdHRlcm5GbihhcmdzKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHZhciBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChhcmdzLm1hdGNoUGF0dGVybik7XG4gICAgaWYgKCFtYXRjaFJlc3VsdCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIG1hdGNoZWRTdHJpbmcgPSBtYXRjaFJlc3VsdFswXTtcbiAgICB2YXIgcGFyc2VSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5wYXJzZVBhdHRlcm4pO1xuICAgIGlmICghcGFyc2VSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIHZhciB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFjayA/IGFyZ3MudmFsdWVDYWxsYmFjayhwYXJzZVJlc3VsdFswXSkgOiBwYXJzZVJlc3VsdFswXTtcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFjayA/IG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB2YXIgcmVzdCA9IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHJlc3Q6IHJlc3RcbiAgICB9O1xuICB9O1xufSIsImltcG9ydCBmb3JtYXREaXN0YW5jZSBmcm9tIFwiLi9fbGliL2Zvcm1hdERpc3RhbmNlL2luZGV4LmpzXCI7XG5pbXBvcnQgZm9ybWF0TG9uZyBmcm9tIFwiLi9fbGliL2Zvcm1hdExvbmcvaW5kZXguanNcIjtcbmltcG9ydCBmb3JtYXRSZWxhdGl2ZSBmcm9tIFwiLi9fbGliL2Zvcm1hdFJlbGF0aXZlL2luZGV4LmpzXCI7XG5pbXBvcnQgbG9jYWxpemUgZnJvbSBcIi4vX2xpYi9sb2NhbGl6ZS9pbmRleC5qc1wiO1xuaW1wb3J0IG1hdGNoIGZyb20gXCIuL19saWIvbWF0Y2gvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAdHlwZSB7TG9jYWxlfVxuICogQGNhdGVnb3J5IExvY2FsZXNcbiAqIEBzdW1tYXJ5IEVuZ2xpc2ggbG9jYWxlIChVbml0ZWQgU3RhdGVzKS5cbiAqIEBsYW5ndWFnZSBFbmdsaXNoXG4gKiBAaXNvLTYzOS0yIGVuZ1xuICogQGF1dGhvciBTYXNoYSBLb3NzIFtAa29zc25vY29ycF17QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2tvc3Nub2NvcnB9XG4gKiBAYXV0aG9yIExlc2hhIEtvc3MgW0BsZXNoYWtvc3Nde0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXNoYWtvc3N9XG4gKi9cbnZhciBsb2NhbGUgPSB7XG4gIGNvZGU6ICdlbi1VUycsXG4gIGZvcm1hdERpc3RhbmNlOiBmb3JtYXREaXN0YW5jZSxcbiAgZm9ybWF0TG9uZzogZm9ybWF0TG9uZyxcbiAgZm9ybWF0UmVsYXRpdmU6IGZvcm1hdFJlbGF0aXZlLFxuICBsb2NhbGl6ZTogbG9jYWxpemUsXG4gIG1hdGNoOiBtYXRjaCxcbiAgb3B0aW9uczoge1xuICAgIHdlZWtTdGFydHNPbjogMFxuICAgIC8qIFN1bmRheSAqL1xuICAgICxcbiAgICBmaXJzdFdlZWtDb250YWluc0RhdGU6IDFcbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGxvY2FsZTsiLCJpbXBvcnQgZGVmYXVsdExvY2FsZSBmcm9tIFwiLi4vLi4vbG9jYWxlL2VuLVVTL2luZGV4LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0TG9jYWxlOyIsImltcG9ydCBpc1ZhbGlkIGZyb20gXCIuLi9pc1ZhbGlkL2luZGV4LmpzXCI7XG5pbXBvcnQgc3ViTWlsbGlzZWNvbmRzIGZyb20gXCIuLi9zdWJNaWxsaXNlY29uZHMvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IGZvcm1hdHRlcnMgZnJvbSBcIi4uL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMvaW5kZXguanNcIjtcbmltcG9ydCBsb25nRm9ybWF0dGVycyBmcm9tIFwiLi4vX2xpYi9mb3JtYXQvbG9uZ0Zvcm1hdHRlcnMvaW5kZXguanNcIjtcbmltcG9ydCBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzIGZyb20gXCIuLi9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4sIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbiwgdGhyb3dQcm90ZWN0ZWRFcnJvciB9IGZyb20gXCIuLi9fbGliL3Byb3RlY3RlZFRva2Vucy9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzXCI7XG5pbXBvcnQgZGVmYXVsdExvY2FsZSBmcm9tIFwiLi4vX2xpYi9kZWZhdWx0TG9jYWxlL2luZGV4LmpzXCI7IC8vIFRoaXMgUmVnRXhwIGNvbnNpc3RzIG9mIHRocmVlIHBhcnRzIHNlcGFyYXRlZCBieSBgfGA6XG4vLyAtIFt5WVFxTUx3SWREZWNpaEhLa21zXW8gbWF0Y2hlcyBhbnkgYXZhaWxhYmxlIG9yZGluYWwgbnVtYmVyIHRva2VuXG4vLyAgIChvbmUgb2YgdGhlIGNlcnRhaW4gbGV0dGVycyBmb2xsb3dlZCBieSBgb2ApXG4vLyAtIChcXHcpXFwxKiBtYXRjaGVzIGFueSBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGV0dGVyXG4vLyAtICcnIG1hdGNoZXMgdHdvIHF1b3RlIGNoYXJhY3RlcnMgaW4gYSByb3dcbi8vIC0gJygnJ3xbXiddKSsoJ3wkKSBtYXRjaGVzIGFueXRoaW5nIHN1cnJvdW5kZWQgYnkgdHdvIHF1b3RlIGNoYXJhY3RlcnMgKCcpLFxuLy8gICBleGNlcHQgYSBzaW5nbGUgcXVvdGUgc3ltYm9sLCB3aGljaCBlbmRzIHRoZSBzZXF1ZW5jZS5cbi8vICAgVHdvIHF1b3RlIGNoYXJhY3RlcnMgZG8gbm90IGVuZCB0aGUgc2VxdWVuY2UuXG4vLyAgIElmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHNpbmdsZSBxdW90ZVxuLy8gICB0aGVuIHRoZSBzZXF1ZW5jZSB3aWxsIGNvbnRpbnVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbi8vIC0gLiBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyIHVubWF0Y2hlZCBieSBwcmV2aW91cyBwYXJ0cyBvZiB0aGUgUmVnRXhwc1xuXG52YXIgZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IC9beVlRcU1Md0lkRGVjaWhIS2ttc11vfChcXHcpXFwxKnwnJ3wnKCcnfFteJ10pKygnfCQpfC4vZzsgLy8gVGhpcyBSZWdFeHAgY2F0Y2hlcyBzeW1ib2xzIGVzY2FwZWQgYnkgcXVvdGVzLCBhbmQgYWxzb1xuLy8gc2VxdWVuY2VzIG9mIHN5bWJvbHMgUCwgcCwgYW5kIHRoZSBjb21iaW5hdGlvbnMgbGlrZSBgUFBQUFBQUHBwcHBwYFxuXG52YXIgbG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSAvUCtwK3xQK3xwK3wnJ3wnKCcnfFteJ10pKygnfCQpfC4vZztcbnZhciBlc2NhcGVkU3RyaW5nUmVnRXhwID0gL14nKFteXSo/KSc/JC87XG52YXIgZG91YmxlUXVvdGVSZWdFeHAgPSAvJycvZztcbnZhciB1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCA9IC9bYS16QS1aXS87XG4vKipcbiAqIEBuYW1lIGZvcm1hdFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBGb3JtYXQgdGhlIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBpbiB0aGUgZ2l2ZW4gZm9ybWF0LiBUaGUgcmVzdWx0IG1heSB2YXJ5IGJ5IGxvY2FsZS5cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBgZm9ybWF0YCB0b2tlbnMgZGlmZmVyIGZyb20gTW9tZW50LmpzIGFuZCBvdGhlciBsaWJyYXJpZXMuXG4gKiA+IFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICpcbiAqIFRoZSBjaGFyYWN0ZXJzIHdyYXBwZWQgYmV0d2VlbiB0d28gc2luZ2xlIHF1b3RlcyBjaGFyYWN0ZXJzICgnKSBhcmUgZXNjYXBlZC5cbiAqIFR3byBzaW5nbGUgcXVvdGVzIGluIGEgcm93LCB3aGV0aGVyIGluc2lkZSBvciBvdXRzaWRlIGEgcXVvdGVkIHNlcXVlbmNlLCByZXByZXNlbnQgYSAncmVhbCcgc2luZ2xlIHF1b3RlLlxuICogKHNlZSB0aGUgbGFzdCBleGFtcGxlKVxuICpcbiAqIEZvcm1hdCBvZiB0aGUgc3RyaW5nIGlzIGJhc2VkIG9uIFVuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNTpcbiAqIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9GaWVsZF9TeW1ib2xfVGFibGVcbiAqIHdpdGggYSBmZXcgYWRkaXRpb25zIChzZWUgbm90ZSA3IGJlbG93IHRoZSB0YWJsZSkuXG4gKlxuICogQWNjZXB0ZWQgcGF0dGVybnM6XG4gKiB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQYXR0ZXJuIHwgUmVzdWx0IGV4YW1wbGVzICAgICAgICAgICAgICAgICAgIHwgTm90ZXMgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLXxcbiAqIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEcuLkdHRyAgfCBBRCwgQkMgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHR0dHICAgIHwgQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3QgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHR0cgICB8IEEsIEIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgQ2FsZW5kYXIgeWVhciAgICAgICAgICAgICAgICAgICB8IHkgICAgICAgfCA0NCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5byAgICAgIHwgNDR0aCwgMXN0LCAwdGgsIDE3dGggICAgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eSAgICAgfCAwNDQsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXl5ICAgIHwgMDA0NCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eXkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICB8IFkgICAgICAgfCA0NCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZbyAgICAgIHwgNDR0aCwgMXN0LCAxOTAwdGgsIDIwMTd0aCAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUsOCAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWSAgICAgfCAwNDQsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVlZICAgIHwgMDA0NCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgIHwgNSw4ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWVkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgICB8IFIgICAgICAgfCAtNDMsIDAsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUiAgICAgIHwgLTQzLCAwMCwgMDEsIDE5MDAsIDIwMTcgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSICAgICB8IC0wNDMsIDAwMCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUlIgICAgfCAtMDA0MywgMDAwMCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlJSUiAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1LDcgfFxuICogfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgIHwgdSAgICAgICB8IC00MywgMCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1ICAgICAgfCAtNDMsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXUgICAgIHwgLTA0MywgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1dSAgICB8IC0wMDQzLCAwMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dXV1ICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IFF1YXJ0ZXIgKGZvcm1hdHRpbmcpICAgICAgICAgICAgfCBRICAgICAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRICAgICAgfCAwMSwgMDIsIDAzLCAwNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVEgICAgIHwgUTEsIFEyLCBRMywgUTQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRUSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUVFRICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCA0ICAgICB8XG4gKiB8IFF1YXJ0ZXIgKHN0YW5kLWFsb25lKSAgICAgICAgICAgfCBxICAgICAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxICAgICAgfCAwMSwgMDIsIDAzLCAwNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXEgICAgIHwgUTEsIFEyLCBRMywgUTQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxcSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcXFxICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCA0ICAgICB8XG4gKiB8IE1vbnRoIChmb3JtYXR0aW5nKSAgICAgICAgICAgICAgfCBNICAgICAgIHwgMSwgMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NICAgICAgfCAwMSwgMDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU0gICAgIHwgSmFuLCBGZWIsIC4uLiwgRGVjICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NTSAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTU1NICAgfCBKLCBGLCAuLi4sIEQgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IE1vbnRoIChzdGFuZC1hbG9uZSkgICAgICAgICAgICAgfCBMICAgICAgIHwgMSwgMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMICAgICAgfCAwMSwgMDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTEwgICAgIHwgSmFuLCBGZWIsIC4uLiwgRGVjICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMTCAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTExMICAgfCBKLCBGLCAuLi4sIEQgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IExvY2FsIHdlZWsgb2YgeWVhciAgICAgICAgICAgICAgfCB3ICAgICAgIHwgMSwgMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgd28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHd3ICAgICAgfCAwMSwgMDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IElTTyB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgICAgfCBJICAgICAgIHwgMSwgMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IElJICAgICAgfCAwMSwgMDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8IERheSBvZiBtb250aCAgICAgICAgICAgICAgICAgICAgfCBkICAgICAgIHwgMSwgMiwgLi4uLCAzMSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDMxc3QgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRkICAgICAgfCAwMSwgMDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IERheSBvZiB5ZWFyICAgICAgICAgICAgICAgICAgICAgfCBEICAgICAgIHwgMSwgMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgICAgIHwgOSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDM2NXRoLCAzNjZ0aCAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEREICAgICAgfCAwMSwgMDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgfCA5ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEREQgICAgIHwgMDAxLCAwMDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRERERCAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHxcbiAqIHwgRGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgICAgICB8IEUuLkVFRSAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRUUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUVFRSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IElTTyBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgICAgfCBpICAgICAgIHwgMSwgMiwgMywgLi4uLCA3ICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDd0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpICAgICAgfCAwMSwgMDIsIC4uLiwgMDcgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWkgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWlpICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpaWkgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgNyAgICAgfFxuICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgIHwgZSAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVvICAgICAgfCAybmQsIDNyZCwgLi4uLCAxc3QgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZSAgICAgIHwgMDIsIDAzLCAuLi4sIDAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWUgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlZSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWVlICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8ICAgICAgIHxcbiAqIHwgTG9jYWwgZGF5IG9mIHdlZWsgKHN0YW5kLWFsb25lKSB8IGMgICAgICAgfCAyLCAzLCA0LCAuLi4sIDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbyAgICAgIHwgMm5kLCAzcmQsIC4uLiwgMXN0ICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2MgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjYyAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjY2MgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2NjYyAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhLi5hYSAgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhICAgICB8IGFtLCBwbSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYWEgICAgfCBhLm0uLCBwLm0uICAgICAgICAgICAgICAgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWFhYSAgIHwgYSwgcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgIHwgYi4uYmIgICB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYiAgICAgfCBhbSwgcG0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmJiICAgIHwgYS5tLiwgcC5tLiwgbm9vbiwgbWlkbmlnaHQgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYmIgICB8IGEsIHAsIG4sIG1pICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRmxleGlibGUgZGF5IHBlcmlvZCAgICAgICAgICAgICB8IEIuLkJCQiAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBCQkJCICAgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQkIgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgICB8IGggICAgICAgfCAxLCAyLCAuLi4sIDExLCAxMiAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBobyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTF0aCwgMTJ0aCAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaGggICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgICB8IEggICAgICAgfCAwLCAxLCAyLCAuLi4sIDIzICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBIbyAgICAgIHwgMHRoLCAxc3QsIDJuZCwgLi4uLCAyM3JkICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSEggICAgICB8IDAwLCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMC0xMV0gICAgICAgICAgICAgICAgICAgICB8IEsgICAgICAgfCAxLCAyLCAuLi4sIDExLCAwICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBLbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTF0aCwgMHRoICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS0sgICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMDAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMS0yNF0gICAgICAgICAgICAgICAgICAgICB8IGsgICAgICAgfCAyNCwgMSwgMiwgLi4uLCAyMyAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBrbyAgICAgIHwgMjR0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga2sgICAgICB8IDI0LCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgICB8IG0gICAgICAgfCAwLCAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtbyAgICAgIHwgMHRoLCAxc3QsIC4uLiwgNTl0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW0gICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgICB8IHMgICAgICAgfCAwLCAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzbyAgICAgIHwgMHRoLCAxc3QsIC4uLiwgNTl0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc3MgICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgICB8IFMgICAgICAgfCAwLCAxLCAuLi4sIDkgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTUyAgICAgIHwgMDAsIDAxLCAuLi4sIDk5ICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1NTICAgICB8IDAwMCwgMDAxLCAuLi4sIDk5OSAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTU1MgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzICAgICB8XG4gKiB8IFRpbWV6b25lIChJU08tODYwMSB3LyBaKSAgICAgICAgfCBYICAgICAgIHwgLTA4LCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFggICAgICB8IC0wODAwLCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWCAgICAgfCAtMDg6MDAsICswNTozMCwgWiAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFhYICAgIHwgLTA4MDAsICswNTMwLCBaLCArMTIzNDU2ICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWFggICB8IC0wODowMCwgKzA1OjMwLCBaLCArMTI6MzQ6NTYgICAgICB8ICAgICAgIHxcbiAqIHwgVGltZXpvbmUgKElTTy04NjAxIHcvbyBaKSAgICAgICB8IHggICAgICAgfCAtMDgsICswNTMwLCArMDAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eCAgICAgIHwgLTA4MDAsICswNTMwLCArMDAwMCAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4ICAgICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAgICAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eHggICAgfCAtMDgwMCwgKzA1MzAsICswMDAwLCArMTIzNDU2ICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHh4eCAgIHwgLTA4OjAwLCArMDU6MzAsICswMDowMCwgKzEyOjM0OjU2IHwgICAgICAgfFxuICogfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgIHwgTy4uLk9PTyB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE9PT08gICAgfCBHTVQtMDg6MDAsIEdNVCswNTozMCwgR01UKzAwOjAwICAgfCAyICAgICB8XG4gKiB8IFRpbWV6b25lIChzcGVjaWZpYyBub24tbG9jYXQuKSAgfCB6Li4uenp6IHwgR01ULTgsIEdNVCs1OjMwLCBHTVQrMCAgICAgICAgICAgIHwgNiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgenp6eiAgICB8IEdNVC0wODowMCwgR01UKzA1OjMwLCBHTVQrMDA6MDAgICB8IDIsNiAgIHxcbiAqIHwgU2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICAgICAgICB8IHQgICAgICAgfCA1MTI5Njk1MjAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB0dCAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw3ICAgfFxuICogfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgIHwgVCAgICAgICB8IDUxMjk2OTUyMDkwMCAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFRUICAgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDcgICB8XG4gKiB8IExvbmcgbG9jYWxpemVkIGRhdGUgICAgICAgICAgICAgfCBQICAgICAgIHwgMDQvMjkvMTQ1MyAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFAgICAgICB8IEFwciAyOSwgMTQ1MyAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUCAgICAgfCBBcHJpbCAyOXRoLCAxNDUzICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBQICAgIHwgRnJpZGF5LCBBcHJpbCAyOXRoLCAxNDUzICAgICAgICAgIHwgMiw3ICAgfFxuICogfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgIHwgcCAgICAgICB8IDEyOjAwIEFNICAgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwICAgICAgfCAxMjowMDowMCBBTSAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcHAgICAgIHwgMTI6MDA6MDAgQU0gR01UKzIgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwcCAgICB8IDEyOjAwOjAwIEFNIEdNVCswMjowMCAgICAgICAgICAgICB8IDIsNyAgIHxcbiAqIHwgQ29tYmluYXRpb24gb2YgZGF0ZSBhbmQgdGltZSAgICB8IFBwICAgICAgfCAwNC8yOS8xNDUzLCAxMjowMCBBTSAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUHBwICAgIHwgQXByIDI5LCAxNDUzLCAxMjowMDowMCBBTSAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQcHBwICB8IEFwcmlsIDI5dGgsIDE0NTMgYXQgLi4uICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUFBwcHBwfCBGcmlkYXksIEFwcmlsIDI5dGgsIDE0NTMgYXQgLi4uICAgfCAyLDcgICB8XG4gKiBOb3RlczpcbiAqIDEuIFwiRm9ybWF0dGluZ1wiIHVuaXRzIChlLmcuIGZvcm1hdHRpbmcgcXVhcnRlcikgaW4gdGhlIGRlZmF1bHQgZW4tVVMgbG9jYWxlXG4gKiAgICBhcmUgdGhlIHNhbWUgYXMgXCJzdGFuZC1hbG9uZVwiIHVuaXRzLCBidXQgYXJlIGRpZmZlcmVudCBpbiBzb21lIGxhbmd1YWdlcy5cbiAqICAgIFwiRm9ybWF0dGluZ1wiIHVuaXRzIGFyZSBkZWNsaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIG9mIHRoZSBsYW5ndWFnZVxuICogICAgaW4gdGhlIGNvbnRleHQgb2YgYSBkYXRlLiBcIlN0YW5kLWFsb25lXCIgdW5pdHMgYXJlIGFsd2F5cyBub21pbmF0aXZlIHNpbmd1bGFyOlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTExMTCcsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWQnYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTU1NTScsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWR1J2BcbiAqXG4gKiAyLiBBbnkgc2VxdWVuY2Ugb2YgdGhlIGlkZW50aWNhbCBsZXR0ZXJzIGlzIGEgcGF0dGVybiwgdW5sZXNzIGl0IGlzIGVzY2FwZWQgYnlcbiAqICAgIHRoZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyAoc2VlIGJlbG93KS5cbiAqICAgIElmIHRoZSBzZXF1ZW5jZSBpcyBsb25nZXIgdGhhbiBsaXN0ZWQgaW4gdGFibGUgKGUuZy4gYEVFRUVFRUVFRUVFYClcbiAqICAgIHRoZSBvdXRwdXQgd2lsbCBiZSB0aGUgc2FtZSBhcyBkZWZhdWx0IHBhdHRlcm4gZm9yIHRoaXMgdW5pdCwgdXN1YWxseVxuICogICAgdGhlIGxvbmdlc3Qgb25lIChpbiBjYXNlIG9mIElTTyB3ZWVrZGF5cywgYEVFRUVgKS4gRGVmYXVsdCBwYXR0ZXJucyBmb3IgdW5pdHNcbiAqICAgIGFyZSBtYXJrZWQgd2l0aCBcIjJcIiBpbiB0aGUgbGFzdCBjb2x1bW4gb2YgdGhlIHRhYmxlLlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NJykgLy89PiAnTm92J2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTScpIC8vPT4gJ04nYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAzLiBTb21lIHBhdHRlcm5zIGNvdWxkIGJlIHVubGltaXRlZCBsZW5ndGggKHN1Y2ggYXMgYHl5eXl5eXl5YCkuXG4gKiAgICBUaGUgb3V0cHV0IHdpbGwgYmUgcGFkZGVkIHdpdGggemVyb3MgdG8gbWF0Y2ggdGhlIGxlbmd0aCBvZiB0aGUgcGF0dGVybi5cbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ3l5eXl5eXl5JykgLy89PiAnMDAwMDIwMTcnYFxuICpcbiAqIDQuIGBRUVFRUWAgYW5kIGBxcXFxcWAgY291bGQgYmUgbm90IHN0cmljdGx5IG51bWVyaWNhbCBpbiBzb21lIGxvY2FsZXMuXG4gKiAgICBUaGVzZSB0b2tlbnMgcmVwcmVzZW50IHRoZSBzaG9ydGVzdCBmb3JtIG9mIHRoZSBxdWFydGVyLlxuICpcbiAqIDUuIFRoZSBtYWluIGRpZmZlcmVuY2UgYmV0d2VlbiBgeWAgYW5kIGB1YCBwYXR0ZXJucyBhcmUgQi5DLiB5ZWFyczpcbiAqXG4gKiAgICB8IFllYXIgfCBgeWAgfCBgdWAgfFxuICogICAgfC0tLS0tLXwtLS0tLXwtLS0tLXxcbiAqICAgIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gKiAgICB8IEJDIDEgfCAgIDEgfCAgIDAgfFxuICogICAgfCBCQyAyIHwgICAyIHwgIC0xIHxcbiAqXG4gKiAgICBBbHNvIGB5eWAgYWx3YXlzIHJldHVybnMgdGhlIGxhc3QgdHdvIGRpZ2l0cyBvZiBhIHllYXIsXG4gKiAgICB3aGlsZSBgdXVgIHBhZHMgc2luZ2xlIGRpZ2l0IHllYXJzIHRvIDIgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBvdGhlciB5ZWFycyB1bmNoYW5nZWQ6XG4gKlxuICogICAgfCBZZWFyIHwgYHl5YCB8IGB1dWAgfFxuICogICAgfC0tLS0tLXwtLS0tLS18LS0tLS0tfFxuICogICAgfCAxICAgIHwgICAwMSB8ICAgMDEgfFxuICogICAgfCAxNCAgIHwgICAxNCB8ICAgMTQgfFxuICogICAgfCAzNzYgIHwgICA3NiB8ICAzNzYgfFxuICogICAgfCAxNDUzIHwgICA1MyB8IDE0NTMgfFxuICpcbiAqICAgIFRoZSBzYW1lIGRpZmZlcmVuY2UgaXMgdHJ1ZSBmb3IgbG9jYWwgYW5kIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFycyAoYFlgIGFuZCBgUmApLFxuICogICAgZXhjZXB0IGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJzIGFyZSBkZXBlbmRlbnQgb24gYG9wdGlvbnMud2Vla1N0YXJ0c09uYFxuICogICAgYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKGNvbXBhcmUgW2dldElTT1dlZWtZZWFyXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL2dldElTT1dlZWtZZWFyfVxuICogICAgYW5kIFtnZXRXZWVrWWVhcl17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9nZXRXZWVrWWVhcn0pLlxuICpcbiAqIDYuIFNwZWNpZmljIG5vbi1sb2NhdGlvbiB0aW1lem9uZXMgYXJlIGN1cnJlbnRseSB1bmF2YWlsYWJsZSBpbiBgZGF0ZS1mbnNgLFxuICogICAgc28gcmlnaHQgbm93IHRoZXNlIHRva2VucyBmYWxsIGJhY2sgdG8gR01UIHRpbWV6b25lcy5cbiAqXG4gKiA3LiBUaGVzZSBwYXR0ZXJucyBhcmUgbm90IGluIHRoZSBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6XG4gKiAgICAtIGBpYDogSVNPIGRheSBvZiB3ZWVrXG4gKiAgICAtIGBJYDogSVNPIHdlZWsgb2YgeWVhclxuICogICAgLSBgUmA6IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKiAgICAtIGB0YDogc2Vjb25kcyB0aW1lc3RhbXBcbiAqICAgIC0gYFRgOiBtaWxsaXNlY29uZHMgdGltZXN0YW1wXG4gKiAgICAtIGBvYDogb3JkaW5hbCBudW1iZXIgbW9kaWZpZXJcbiAqICAgIC0gYFBgOiBsb25nIGxvY2FsaXplZCBkYXRlXG4gKiAgICAtIGBwYDogbG9uZyBsb2NhbGl6ZWQgdGltZVxuICpcbiAqIDguIGBZWWAgYW5kIGBZWVlZYCB0b2tlbnMgcmVwcmVzZW50IHdlZWstbnVtYmVyaW5nIHllYXJzIGJ1dCB0aGV5IGFyZSBvZnRlbiBjb25mdXNlZCB3aXRoIHllYXJzLlxuICogICAgWW91IHNob3VsZCBlbmFibGUgYG9wdGlvbnMudXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zYCB0byB1c2UgdGhlbS4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKlxuICogOS4gYERgIGFuZCBgRERgIHRva2VucyByZXByZXNlbnQgZGF5cyBvZiB0aGUgeWVhciBidXQgdGhleSBhcmUgb2Z0ZW4gY29uZnVzZWQgd2l0aCBkYXlzIG9mIHRoZSBtb250aC5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnNgIHRvIHVzZSB0aGVtLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBmb3JtYXQgLSB0aGUgc3RyaW5nIG9mIHRva2Vuc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlPTFdIC0gdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpc1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy51c2VBZGRpdGlvbmFsV2Vla1llYXJUb2tlbnM9ZmFsc2VdIC0gaWYgdHJ1ZSwgYWxsb3dzIHVzYWdlIG9mIHRoZSB3ZWVrLW51bWJlcmluZyB5ZWFyIHRva2VucyBgWVlgIGFuZCBgWVlZWWA7XG4gKiAgIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zPWZhbHNlXSAtIGlmIHRydWUsIGFsbG93cyB1c2FnZSBvZiB0aGUgZGF5IG9mIHllYXIgdG9rZW5zIGBEYCBhbmQgYEREYDtcbiAqICAgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgZGF0ZWAgbXVzdCBub3QgYmUgSW52YWxpZCBEYXRlXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgbG9jYWxpemVgIHByb3BlcnR5XG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgZm9ybWF0TG9uZ2AgcHJvcGVydHlcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDdcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IHVzZSBgeXl5eWAgaW5zdGVhZCBvZiBgWVlZWWAgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gdXNlIGB5eWAgaW5zdGVhZCBvZiBgWVlgIGZvciBmb3JtYXR0aW5nIHllYXJzIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IHVzZSBgZGAgaW5zdGVhZCBvZiBgRGAgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gdXNlIGBkZGAgaW5zdGVhZCBvZiBgRERgIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGZvcm1hdCBzdHJpbmcgY29udGFpbnMgYW4gdW5lc2NhcGVkIGxhdGluIGFscGhhYmV0IGNoYXJhY3RlclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBSZXByZXNlbnQgMTEgRmVicnVhcnkgMjAxNCBpbiBtaWRkbGUtZW5kaWFuIGZvcm1hdDpcbiAqIGNvbnN0IHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCAxLCAxMSksICdNTS9kZC95eXl5JylcbiAqIC8vPT4gJzAyLzExLzIwMTQnXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFJlcHJlc2VudCAyIEp1bHkgMjAxNCBpbiBFc3BlcmFudG86XG4gKiBpbXBvcnQgeyBlb0xvY2FsZSB9IGZyb20gJ2RhdGUtZm5zL2xvY2FsZS9lbydcbiAqIGNvbnN0IHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCA2LCAyKSwgXCJkbyAnZGUnIE1NTU0geXl5eVwiLCB7XG4gKiAgIGxvY2FsZTogZW9Mb2NhbGVcbiAqIH0pXG4gKiAvLz0+ICcyLWEgZGUganVsaW8gMjAxNCdcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRXNjYXBlIHN0cmluZyBieSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyczpcbiAqIGNvbnN0IHJlc3VsdCA9IGZvcm1hdChuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxNSksIFwiaCAnbycnY2xvY2snXCIpXG4gKiAvLz0+IFwiMyBvJ2Nsb2NrXCJcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmb3JtYXQoZGlydHlEYXRlLCBkaXJ0eUZvcm1hdFN0ciwgb3B0aW9ucykge1xuICB2YXIgX3JlZiwgX29wdGlvbnMkbG9jYWxlLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfb3B0aW9ucyRmaXJzdFdlZWtDb24sIF9vcHRpb25zJGxvY2FsZTIsIF9vcHRpb25zJGxvY2FsZTIkb3B0aSwgX2RlZmF1bHRPcHRpb25zJGxvY2FsLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyLCBfcmVmNSwgX3JlZjYsIF9yZWY3LCBfb3B0aW9ucyR3ZWVrU3RhcnRzT24sIF9vcHRpb25zJGxvY2FsZTMsIF9vcHRpb25zJGxvY2FsZTMkb3B0aSwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMywgX2RlZmF1bHRPcHRpb25zJGxvY2FsNDtcblxuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGZvcm1hdFN0ciA9IFN0cmluZyhkaXJ0eUZvcm1hdFN0cik7XG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIHZhciBsb2NhbGUgPSAoX3JlZiA9IChfb3B0aW9ucyRsb2NhbGUgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubG9jYWxlKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRsb2NhbGUgIT09IHZvaWQgMCA/IF9vcHRpb25zJGxvY2FsZSA6IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IGRlZmF1bHRMb2NhbGU7XG4gIHZhciBmaXJzdFdlZWtDb250YWluc0RhdGUgPSB0b0ludGVnZXIoKF9yZWYyID0gKF9yZWYzID0gKF9yZWY0ID0gKF9vcHRpb25zJGZpcnN0V2Vla0NvbiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUpICE9PSBudWxsICYmIF9vcHRpb25zJGZpcnN0V2Vla0NvbiAhPT0gdm9pZCAwID8gX29wdGlvbnMkZmlyc3RXZWVrQ29uIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlMiA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlMiRvcHRpID0gX29wdGlvbnMkbG9jYWxlMi5vcHRpb25zKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUyJG9wdGkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGxvY2FsZTIkb3B0aS5maXJzdFdlZWtDb250YWluc0RhdGUpICE9PSBudWxsICYmIF9yZWY0ICE9PSB2b2lkIDAgPyBfcmVmNCA6IGRlZmF1bHRPcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSkgIT09IG51bGwgJiYgX3JlZjMgIT09IHZvaWQgMCA/IF9yZWYzIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9IF9kZWZhdWx0T3B0aW9ucyRsb2NhbC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSkgIT09IG51bGwgJiYgX3JlZjIgIT09IHZvaWQgMCA/IF9yZWYyIDogMSk7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMSBhbmQgNyBfYW5kXyBpcyBub3QgTmFOXG5cbiAgaWYgKCEoZmlyc3RXZWVrQ29udGFpbnNEYXRlID49IDEgJiYgZmlyc3RXZWVrQ29udGFpbnNEYXRlIDw9IDcpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2ZpcnN0V2Vla0NvbnRhaW5zRGF0ZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNyBpbmNsdXNpdmVseScpO1xuICB9XG5cbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZjUgPSAoX3JlZjYgPSAoX3JlZjcgPSAoX29wdGlvbnMkd2Vla1N0YXJ0c09uID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX29wdGlvbnMkd2Vla1N0YXJ0c09uICE9PSB2b2lkIDAgPyBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUzID0gb3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUzJG9wdGkgPSBfb3B0aW9ucyRsb2NhbGUzLm9wdGlvbnMpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZTMkb3B0aSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkbG9jYWxlMyRvcHRpLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjcgIT09IHZvaWQgMCA/IF9yZWY3IDogZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmNiAhPT0gdm9pZCAwID8gX3JlZjYgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsMyA9IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDQgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwzLm9wdGlvbnMpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDQud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmNSAhPT0gdm9pZCAwID8gX3JlZjUgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICBpZiAoIWxvY2FsZS5sb2NhbGl6ZSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdsb2NhbGUgbXVzdCBjb250YWluIGxvY2FsaXplIHByb3BlcnR5Jyk7XG4gIH1cblxuICBpZiAoIWxvY2FsZS5mb3JtYXRMb25nKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2xvY2FsZSBtdXN0IGNvbnRhaW4gZm9ybWF0TG9uZyBwcm9wZXJ0eScpO1xuICB9XG5cbiAgdmFyIG9yaWdpbmFsRGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuXG4gIGlmICghaXNWYWxpZChvcmlnaW5hbERhdGUpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdGltZSB2YWx1ZScpO1xuICB9IC8vIENvbnZlcnQgdGhlIGRhdGUgaW4gc3lzdGVtIHRpbWV6b25lIHRvIHRoZSBzYW1lIGRhdGUgaW4gVVRDKzAwOjAwIHRpbWV6b25lLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhhdCB3aGVuIFVUQyBmdW5jdGlvbnMgd2lsbCBiZSBpbXBsZW1lbnRlZCwgbG9jYWxlcyB3aWxsIGJlIGNvbXBhdGlibGUgd2l0aCB0aGVtLlxuICAvLyBTZWUgYW4gaXNzdWUgYWJvdXQgVVRDIGZ1bmN0aW9uczogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzZcblxuXG4gIHZhciB0aW1lem9uZU9mZnNldCA9IGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMob3JpZ2luYWxEYXRlKTtcbiAgdmFyIHV0Y0RhdGUgPSBzdWJNaWxsaXNlY29uZHMob3JpZ2luYWxEYXRlLCB0aW1lem9uZU9mZnNldCk7XG4gIHZhciBmb3JtYXR0ZXJPcHRpb25zID0ge1xuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogZmlyc3RXZWVrQ29udGFpbnNEYXRlLFxuICAgIHdlZWtTdGFydHNPbjogd2Vla1N0YXJ0c09uLFxuICAgIGxvY2FsZTogbG9jYWxlLFxuICAgIF9vcmlnaW5hbERhdGU6IG9yaWdpbmFsRGF0ZVxuICB9O1xuICB2YXIgcmVzdWx0ID0gZm9ybWF0U3RyLm1hdGNoKGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKS5tYXAoZnVuY3Rpb24gKHN1YnN0cmluZykge1xuICAgIHZhciBmaXJzdENoYXJhY3RlciA9IHN1YnN0cmluZ1swXTtcblxuICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gJ3AnIHx8IGZpcnN0Q2hhcmFjdGVyID09PSAnUCcpIHtcbiAgICAgIHZhciBsb25nRm9ybWF0dGVyID0gbG9uZ0Zvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdO1xuICAgICAgcmV0dXJuIGxvbmdGb3JtYXR0ZXIoc3Vic3RyaW5nLCBsb2NhbGUuZm9ybWF0TG9uZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1YnN0cmluZztcbiAgfSkuam9pbignJykubWF0Y2goZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCkubWFwKGZ1bmN0aW9uIChzdWJzdHJpbmcpIHtcbiAgICAvLyBSZXBsYWNlIHR3byBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyB3aXRoIG9uZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyXG4gICAgaWYgKHN1YnN0cmluZyA9PT0gXCInJ1wiKSB7XG4gICAgICByZXR1cm4gXCInXCI7XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0Q2hhcmFjdGVyID0gc3Vic3RyaW5nWzBdO1xuXG4gICAgaWYgKGZpcnN0Q2hhcmFjdGVyID09PSBcIidcIikge1xuICAgICAgcmV0dXJuIGNsZWFuRXNjYXBlZFN0cmluZyhzdWJzdHJpbmcpO1xuICAgIH1cblxuICAgIHZhciBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW2ZpcnN0Q2hhcmFjdGVyXTtcblxuICAgIGlmIChmb3JtYXR0ZXIpIHtcbiAgICAgIGlmICghKG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwICYmIG9wdGlvbnMudXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zKSAmJiBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4oc3Vic3RyaW5nKSkge1xuICAgICAgICB0aHJvd1Byb3RlY3RlZEVycm9yKHN1YnN0cmluZywgZGlydHlGb3JtYXRTdHIsIFN0cmluZyhkaXJ0eURhdGUpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEob3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgJiYgb3B0aW9ucy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zKSAmJiBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuKHN1YnN0cmluZykpIHtcbiAgICAgICAgdGhyb3dQcm90ZWN0ZWRFcnJvcihzdWJzdHJpbmcsIGRpcnR5Rm9ybWF0U3RyLCBTdHJpbmcoZGlydHlEYXRlKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmb3JtYXR0ZXIodXRjRGF0ZSwgc3Vic3RyaW5nLCBsb2NhbGUubG9jYWxpemUsIGZvcm1hdHRlck9wdGlvbnMpO1xuICAgIH1cblxuICAgIGlmIChmaXJzdENoYXJhY3Rlci5tYXRjaCh1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCkpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdGb3JtYXQgc3RyaW5nIGNvbnRhaW5zIGFuIHVuZXNjYXBlZCBsYXRpbiBhbHBoYWJldCBjaGFyYWN0ZXIgYCcgKyBmaXJzdENoYXJhY3RlciArICdgJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1YnN0cmluZztcbiAgfSkuam9pbignJyk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGNsZWFuRXNjYXBlZFN0cmluZyhpbnB1dCkge1xuICB2YXIgbWF0Y2hlZCA9IGlucHV0Lm1hdGNoKGVzY2FwZWRTdHJpbmdSZWdFeHApO1xuXG4gIGlmICghbWF0Y2hlZCkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIHJldHVybiBtYXRjaGVkWzFdLnJlcGxhY2UoZG91YmxlUXVvdGVSZWdFeHAsIFwiJ1wiKTtcbn0iLCJpbXBvcnQgeyBkcmF3TGlzdFZpZXcgfSBmcm9tICcuL2RyYXdMaXN0Vmlldyc7XG5pbXBvcnQgeyBjbGVhclZpZXcgfSBmcm9tICcuL2NsZWFyVmlldyc7XG5pbXBvcnQgeyBhZGRUYXNrVG9MaXN0LCBUYXNrLCBnZXRUYXNrcywgZGIsc2V0RG9jLCBkb2MgfSBmcm9tICcuL3Rhc2tGYWN0b3J5JztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcblxuYXN5bmMgZnVuY3Rpb24gZHJhd0Zvcm1WaWV3KHRpdGxlLCBkZXNjLCBpbmRleFBvc2l0aW9uLCBwcmlvcml0eUxldmVsLCB0YXNrQ2F0ZWdvcnksIGR1ZURhdGUpIHtcblxuICAgIGxldCB0YXNrTGlzdCA9IGF3YWl0IGdldFRhc2tzKGRiKTtcbiAgICBsZXQgZG9jS2V5ID0gdGl0bGU7XG5cbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgIGNvbnN0IHRhc2tGb3JtQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICB0YXNrRm9ybUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgndGFza0Zvcm1Db250ZW50Jyk7XG5cbiAgICBjb25zdCB0YXNrTmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza05hbWVEaXYuY2xhc3NMaXN0LmFkZCgnZm9ybVRleHRJbnB1dCcsICd0YXNrTmFtZURpdicpO1xuICAgIGNvbnN0IHRhc2tOYW1lTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgdGFza05hbWVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJ0YXNrTmFtZVwiKTtcbiAgICB0YXNrTmFtZUxhYmVsLnRleHRDb250ZW50ID0gXCJUYXNrIG5hbWU6XCI7XG4gICAgY29uc3QgdGFza05hbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB0YXNrTmFtZUZpZWxkLnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwiXCIpO1xuICAgIGlmICh0aXRsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgIHRhc2tOYW1lRmllbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdGl0bGUpO1xuICAgIH1cbiAgICB0YXNrTmFtZUZpZWxkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGFza05hbWVcIik7XG4gICAgdGFza05hbWVGaWVsZC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidGFza05hbWVcIik7XG5cbiAgICBjb25zdCB0YXNrRGVzY0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0Rlc2NEaXYuY2xhc3NMaXN0LmFkZCgnZm9ybVRleHRJbnB1dCcsICd0YXNrRGVzY0RpdicpO1xuICAgIGNvbnN0IHRhc2tEZXNjTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgdGFza0Rlc2NMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJ0YXNrRGVzY1wiKTtcbiAgICB0YXNrRGVzY0xhYmVsLnRleHRDb250ZW50ID0gXCJEZXNjcmlwdGlvbjpcIjtcbiAgICBjb25zdCB0YXNrRGVzY0ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgIHRhc2tEZXNjRmllbGQuc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIik7XG4gICAgaWYgKGRlc2MgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhc2tEZXNjRmllbGQudGV4dENvbnRlbnQgPSBkZXNjO1xuICAgIH1cbiAgICB0YXNrRGVzY0ZpZWxkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGFza0Rlc2NcIik7XG4gICAgdGFza0Rlc2NGaWVsZC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidGFza0Rlc2NcIik7XG5cbiAgICBjb25zdCB0YXNrUHJpb3JpdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2tQcmlvcml0eURpdi5jbGFzc0xpc3QuYWRkKCdmb3JtVGV4dElucHV0JywgJ3Rhc2tQcmlvcml0eURpdicpO1xuICAgIGNvbnN0IHRhc2tQcmlvcml0eUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIHRhc2tQcmlvcml0eUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInRhc2tQcmlvcml0eVwiKTtcbiAgICB0YXNrUHJpb3JpdHlMYWJlbC50ZXh0Q29udGVudCA9IFwiUHJpb3JpdHk6XCI7XG4gICAgY29uc3QgdGFza1ByaW9yaXR5RmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuXG4gICAgdGFza1ByaW9yaXR5RmllbGQuc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIik7XG4gICAgaWYgKHByaW9yaXR5TGV2ZWwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhc2tQcmlvcml0eUZpZWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHByaW9yaXR5TGV2ZWwpO1xuICAgIH1cbiAgICB0YXNrUHJpb3JpdHlGaWVsZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInRhc2tQcmlvcml0eVwiKTtcbiAgICB0YXNrUHJpb3JpdHlGaWVsZC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidGFza1ByaW9yaXR5XCIpO1xuXG4gICAgY29uc3QgZXNzZW50aWFsT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBlc3NlbnRpYWxPcHRpb24udGV4dENvbnRlbnQ9IFwiRXNzZW50aWFsXCI7XG4gICAgZXNzZW50aWFsT3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnRXNzZW50aWFsJyk7XG4gICAgY29uc3Qgbm9ybWFsT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBub3JtYWxPcHRpb24udGV4dENvbnRlbnQ9IFwiTm9ybWFsXCI7XG4gICAgbm9ybWFsT3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnTm9ybWFsJyk7XG5cbiAgICB0YXNrUHJpb3JpdHlGaWVsZC5hcHBlbmRDaGlsZChub3JtYWxPcHRpb24pO1xuICAgIHRhc2tQcmlvcml0eUZpZWxkLmFwcGVuZENoaWxkKGVzc2VudGlhbE9wdGlvbik7XG5cbiAgICBjb25zdCB0YXNrQ2F0ZWdvcnlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2tDYXRlZ29yeURpdi5jbGFzc0xpc3QuYWRkKCdmb3JtVGV4dElucHV0JywgJ3Rhc2tDYXRlZ29yeURpdicpO1xuICAgIGNvbnN0IHRhc2tDYXRlZ29yeUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIHRhc2tDYXRlZ29yeUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInRhc2tDYXRlZ29yeVwiKTtcbiAgICB0YXNrQ2F0ZWdvcnlMYWJlbC50ZXh0Q29udGVudCA9IFwiQ2F0ZWdvcnk6XCI7XG4gICAgY29uc3QgdGFza0NhdGVnb3J5RmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuXG4gICAgY29uc3Qgd29ya09wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgd29ya09wdGlvbi50ZXh0Q29udGVudD0gXCJXb3JrXCI7XG4gICAgd29ya09wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ1dvcmsnKTtcbiAgICBjb25zdCBob3VzZU9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgaG91c2VPcHRpb24udGV4dENvbnRlbnQ9IFwiSG91c2VcIjtcbiAgICBob3VzZU9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ0hvdXNlJyk7XG4gICAgY29uc3QgaG9iYnlPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIGhvYmJ5T3B0aW9uLnRleHRDb250ZW50PSBcIkhvYmJ5XCI7XG4gICAgaG9iYnlPcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsICdIb2JieScpO1xuXG4gICAgdGFza0NhdGVnb3J5RmllbGQuYXBwZW5kQ2hpbGQod29ya09wdGlvbik7XG4gICAgdGFza0NhdGVnb3J5RmllbGQuYXBwZW5kQ2hpbGQoaG91c2VPcHRpb24pO1xuICAgIHRhc2tDYXRlZ29yeUZpZWxkLmFwcGVuZENoaWxkKGhvYmJ5T3B0aW9uKTtcblxuICAgIHRhc2tDYXRlZ29yeUZpZWxkLnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwiXCIpO1xuICAgIGlmICh0YXNrQ2F0ZWdvcnkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhc2tDYXRlZ29yeUZpZWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHRhc2tDYXRlZ29yeSk7XG4gICAgfVxuICAgIHRhc2tDYXRlZ29yeUZpZWxkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY2F0ZWdvcnlcIik7XG4gICAgdGFza0NhdGVnb3J5RmllbGQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImNhdGVnb3J5XCIpO1xuXG4gICAgY29uc3QgZHVlRGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZHVlRGF0ZURpdi5jbGFzc0xpc3QuYWRkKCdmb3JtVGV4dElucHV0JywgJ2R1ZURhdGVEaXYnKTtcbiAgICBjb25zdCBkdWVEYXRlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgZHVlRGF0ZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImR1ZURhdGVcIik7XG4gICAgZHVlRGF0ZUxhYmVsLnRleHRDb250ZW50ID0gXCJEdWUgZGF0ZTpcIjtcbiAgICBjb25zdCBkdWVEYXRlRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgZHVlRGF0ZUZpZWxkLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgIGR1ZURhdGVGaWVsZC5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLCBcIlwiKTtcbiAgICBpZiAoZHVlRGF0ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHVlRGF0ZUZpZWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGR1ZURhdGUpO1xuICAgIH1cbiAgICBkdWVEYXRlRmllbGQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkdWVEYXRlSW5wdXRcIik7XG4gICAgZHVlRGF0ZUZpZWxkLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJkdWVEYXRlSW5wdXRcIik7XG5cbiAgICAvLyBBZGQgbmV3IHRhc2sgdG8gbGlzdCBhbmQgcmV0dXJuIHRvIGxpc3Qgdmlld1xuICAgIGNvbnN0IHN1Ym1pdE5ld1Rhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHN1Ym1pdE5ld1Rhc2tCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICBzdWJtaXROZXdUYXNrQnRuLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWRkVGFza1wiKTtcbiAgICBzdWJtaXROZXdUYXNrQnRuLnRleHRDb250ZW50ID0gXCJBZGQgVGFza1wiO1xuICAgIFxuICAgIC8vIENhbmNlbCBuZXcgdGFzayBjcmVhdGlvbiBhbmQgcmV0dXJuIHRvIGxpc3Qgdmlld1xuICAgIGNvbnN0IGNhbmNlbE5ld1Rhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjYW5jZWxOZXdUYXNrQnRuLmNsYXNzTGlzdC5hZGQoJ2NhbmNlbE5ld1Rhc2tCdG4nKTtcbiAgICBjYW5jZWxOZXdUYXNrQnRuLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgICBjYW5jZWxOZXdUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVmlldygpO1xuICAgICAgICBkcmF3TGlzdFZpZXcoKTtcbiAgICB9KTtcblxuICAgIHRhc2tGb3JtQ29udGVudC5hcHBlbmRDaGlsZCh0YXNrTmFtZURpdik7XG4gICAgdGFza05hbWVEaXYuYXBwZW5kQ2hpbGQodGFza05hbWVMYWJlbCk7XG4gICAgdGFza05hbWVEaXYuYXBwZW5kQ2hpbGQodGFza05hbWVGaWVsZCk7XG5cbiAgICB0YXNrRm9ybUNvbnRlbnQuYXBwZW5kQ2hpbGQodGFza0NhdGVnb3J5RGl2KTtcbiAgICB0YXNrQ2F0ZWdvcnlEaXYuYXBwZW5kQ2hpbGQodGFza0NhdGVnb3J5TGFiZWwpO1xuICAgIHRhc2tDYXRlZ29yeURpdi5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnlGaWVsZCk7XG5cbiAgICB0YXNrRm9ybUNvbnRlbnQuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5RGl2KTtcbiAgICB0YXNrUHJpb3JpdHlEaXYuYXBwZW5kQ2hpbGQodGFza1ByaW9yaXR5TGFiZWwpO1xuICAgIHRhc2tQcmlvcml0eURpdi5hcHBlbmRDaGlsZCh0YXNrUHJpb3JpdHlGaWVsZCk7XG5cbiAgICB0YXNrRm9ybUNvbnRlbnQuYXBwZW5kQ2hpbGQoZHVlRGF0ZURpdik7XG4gICAgZHVlRGF0ZURpdi5hcHBlbmRDaGlsZChkdWVEYXRlTGFiZWwpO1xuICAgIGR1ZURhdGVEaXYuYXBwZW5kQ2hpbGQoZHVlRGF0ZUZpZWxkKTtcblxuICAgIHRhc2tGb3JtQ29udGVudC5hcHBlbmRDaGlsZCh0YXNrRGVzY0Rpdik7XG4gICAgdGFza0Rlc2NEaXYuYXBwZW5kQ2hpbGQodGFza0Rlc2NMYWJlbCk7XG4gICAgdGFza0Rlc2NEaXYuYXBwZW5kQ2hpbGQodGFza0Rlc2NGaWVsZCk7XG4gICAgY29uc3QgZm9ybUJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGZvcm1CdXR0b25EaXYuY2xhc3NMaXN0LmFkZCgnZm9ybUJ1dHRvbkRpdicpO1xuICAgIHRhc2tGb3JtQ29udGVudC5hcHBlbmRDaGlsZChmb3JtQnV0dG9uRGl2KTtcbiAgICBmb3JtQnV0dG9uRGl2LmFwcGVuZENoaWxkKGNhbmNlbE5ld1Rhc2tCdG4pO1xuICAgIGZvcm1CdXR0b25EaXYuYXBwZW5kQ2hpbGQoc3VibWl0TmV3VGFza0J0bik7XG4gICAgLy9UT0RPOiBtb3ZlIHRoaXMgdG8gY3JlYXRlVGFzayBtb2R1bGVcbiAgICB0YXNrRm9ybUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGZvcm1hdHRlZERhdGUgPSBmb3JtYXQobmV3IERhdGUoYCR7ZHVlRGF0ZUlucHV0LnZhbHVlfVQwMDowMGApLCAnUFAnKTtcbiAgICAgICAgbGV0IG5ld1Rhc2sgPSBuZXcgVGFzayAodGFza05hbWUudmFsdWUsIHRhc2tEZXNjLnZhbHVlLCBmb3JtYXR0ZWREYXRlLCB0YXNrUHJpb3JpdHlGaWVsZC52YWx1ZSwgY2F0ZWdvcnkudmFsdWUpO1xuICAgICAgICAvLyBpZiAoaW5kZXhQb3NpdGlvbiAhPSBudWxsKSB7XG4gICAgICAgIC8vICAgICB0YXNrTGlzdC5zcGxpY2UoaW5kZXhQb3NpdGlvbiwgMSk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgYWRkVGFza1RvTGlzdChuZXdUYXNrLCBkb2NLZXkpO1xuICAgICAgICBjbGVhclZpZXcoKTtcbiAgICAgICAgZHJhd0xpc3RWaWV3KCk7XG4gICAgfSk7XG5cbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHRhc2tGb3JtQ29udGVudCk7XG59XG5cbmV4cG9ydCB7IGRyYXdGb3JtVmlldyB9OyIsIi8vUG9wdWxhdGVzIHRhc2tEZXNjIGNvbHVtbiB3aXRoIHRhc2sgZGV0YWlscywgZWRpdCBidXR0b24sIGFuZCBkZWxldGUgYnV0dG9uXG5pbXBvcnQgeyB0YXNrTGlzdCwgdXBkYXRlU3RvcmFnZSwgdG9EYXRlLCBkZWxldGVUYXNrIH0gZnJvbSBcIi4vdGFza0ZhY3RvcnlcIjtcbmltcG9ydCB7IGNsZWFyVmlldyB9IGZyb20gXCIuL2NsZWFyVmlld1wiO1xuaW1wb3J0IHsgZHJhd0xpc3RWaWV3IH0gZnJvbSBcIi4vZHJhd0xpc3RWaWV3XCI7XG5pbXBvcnQgeyBkcmF3Rm9ybVZpZXcgfSBmcm9tIFwiLi9kcmF3Rm9ybVZpZXdcIjtcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcblxuZnVuY3Rpb24gZmlsbFRhc2tEZXNjKHRpdGxlLCBkZXNjLCBwcmlvcml0eSwgY2F0ZWdvcnksIGR1ZURhdGUpIHtcbiAgICBjb25zdCB0YXNrRGVzY0NvbHVtbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrRGVzY0NvbHVtbicpO1xuXG4gICAgLy9DbGVhciBwbGFjZWhvbGRlciB0ZXh0XG4gICAgd2hpbGUgKHRhc2tEZXNjQ29sdW1uLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdGFza0Rlc2NDb2x1bW4ucmVtb3ZlQ2hpbGQodGFza0Rlc2NDb2x1bW4ubGFzdENoaWxkKTtcbiAgICB9XG5cbiAgICAvL3Rhc2tEZXNjQ29sdW1uLnRleHRDb250ZW50ID0gbnVsbDtcbiAgICBjb25zdCB0YXNrRGV0YWlsTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEZXRhaWxOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZXRhaWxOYW1lJyk7XG4gICAgdGFza0RldGFpbE5hbWUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICBjb25zdCB0YXNrRGV0YWlsQ2F0ZWdvcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YXNrRGV0YWlsQ2F0ZWdvcnkuY2xhc3NMaXN0LmFkZCgndGFza0RldGFpbENhdGVnb3J5Jyk7XG4gICAgdGFza0RldGFpbENhdGVnb3J5LnRleHRDb250ZW50ID0gY2F0ZWdvcnk7XG4gICAgY29uc3QgdGFza0RldGFpbFByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGFza0RldGFpbFByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZXRhaWxQcmlvcml0eScpO1xuICAgIHRhc2tEZXRhaWxQcmlvcml0eS50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xuXG4gICAgY29uc3QgdGFza0RldGFpbER1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YXNrRGV0YWlsRHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrRGV0YWlsRHVlRGF0ZScpO1xuICAgIC8vT0xEIFdheTogdGFza0RldGFpbER1ZURhdGUudGV4dENvbnRlbnQgPSBkdWVEYXRlO1xuICAgIHRhc2tEZXRhaWxEdWVEYXRlLnRleHRDb250ZW50ID0gZm9ybWF0KG5ldyBEYXRlKGR1ZURhdGUpLCAnUFAnKVxuICAgIFxuICAgIGNvbnN0IHRhc2tEZXRhaWxEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEZXRhaWxEZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd0YXNrRGV0YWlsRGVzY3JpcHRpb24nKTtcbiAgICB0YXNrRGV0YWlsRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjO1xuXG4gICAgY29uc3QgZWRpdFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBlZGl0VGFza0J0bi5jbGFzc0xpc3QuYWRkKCdlZGl0VGFza0J0bicpO1xuICAgIGVkaXRUYXNrQnRuLnRleHRDb250ZW50ID0gXCJFZGl0XCI7XG4gICAgZWRpdFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9CcmluZ3MgdXAgXCJOZXcgdGFzayBmb3JtXCIgcG9wdWxhdGVkIHdpdGggY3VycmVudCB0YXNrIGRldGFpbHMgYW5kIHBvc2l0aW9uIHRvIG92ZXJyaWRlIG9sZCB2ZXJzaW9uIG9uIHN1Ym1pc3Npb25cbiAgICAgICAgY2xlYXJWaWV3KCk7XG4gICAgICAgIGRyYXdGb3JtVmlldyh0aXRsZSwgZGVzYyk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkZWxldGVUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZGVsZXRlVGFza0J0bi5jbGFzc0xpc3QuYWRkKCdkZWxldGVUYXNrQnRuJyk7XG4gICAgZGVsZXRlVGFza0J0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgZGVsZXRlVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBSZW1vdmVzIGN1cnJlbnQgdGFzayBmcm9tIGFycmF5IGFuZCByZWRyYXdzIGxpc3Qgdmlld1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlbW92ZWQhXCIpXG4gICAgICAgIGRlbGV0ZVRhc2sodGl0bGUpO1xuICAgICAgICAvLyB0YXNrTGlzdC5zcGxpY2UoaW5kZXhQb3NpdGlvbiwgMSk7XG4gICAgICAgIC8vIHVwZGF0ZVN0b3JhZ2UoKTtcbiAgICAgICAgY2xlYXJWaWV3KCk7XG4gICAgICAgIGRyYXdMaXN0VmlldygpO1xuICAgIH0pO1xuICAgIHRhc2tEZXNjQ29sdW1uLmFwcGVuZENoaWxkKHRhc2tEZXRhaWxOYW1lKTtcbiAgICB0YXNrRGVzY0NvbHVtbi5hcHBlbmRDaGlsZCh0YXNrRGV0YWlsQ2F0ZWdvcnkpO1xuICAgIHRhc2tEZXNjQ29sdW1uLmFwcGVuZENoaWxkKHRhc2tEZXRhaWxQcmlvcml0eSk7XG4gICAgdGFza0Rlc2NDb2x1bW4uYXBwZW5kQ2hpbGQodGFza0RldGFpbER1ZURhdGUpO1xuICAgIHRhc2tEZXNjQ29sdW1uLmFwcGVuZENoaWxkKHRhc2tEZXRhaWxEZXNjcmlwdGlvbik7XG4gICAgdGFza0Rlc2NDb2x1bW4uYXBwZW5kQ2hpbGQoZWRpdFRhc2tCdG4pO1xuICAgIHRhc2tEZXNjQ29sdW1uLmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdG4pO1xufVxuXG5leHBvcnQgeyBmaWxsVGFza0Rlc2MgfTsiLCIvLyBSZWFkcyBhcnJheSBvZiB0YXNrcyBhbmQgY3JlYXRlcyBhIGRpdiBmb3IgZWFjaCBvbmVcblxuaW1wb3J0IHsgIGNoZWNrU3RvcmFnZSwgZ2V0VGFza3MsIGRiIH0gZnJvbSBcIi4vdGFza0ZhY3RvcnlcIjtcbmltcG9ydCB7IGZpbGxUYXNrRGVzYyB9IGZyb20gXCIuL2ZpbGxUYXNrRGVzY1wiO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG4vL0ZpbGwgbGlzdCB2aWV3IHVzaW5nIHRhc2tMaXN0IEFycmF5XG5hc3luYyBmdW5jdGlvbiBwb3B1bGF0ZUxpc3QoY2F0ZWdvcnkpIHtcbiAgICBjb25zdCBkaXNwbGF5ZWRUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaXNwbGF5ZWRUYXNrcycpO1xuXG4gICAgd2hpbGUgKGRpc3BsYXllZFRhc2tzLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZGlzcGxheWVkVGFza3MucmVtb3ZlQ2hpbGQoZGlzcGxheWVkVGFza3MubGFzdENoaWxkKTtcbiAgICB9XG4gICAgLy9HZXQgY3VycmVudCB0YXNrTGlzdCBmcm9tIGxvY2FsU3RvcmFnZVxuICAgIC8vIGxldCB0YXNrTGlzdCA9IGNoZWNrU3RvcmFnZSgpO1xuICAgIGxldCB0YXNrTGlzdCA9IGF3YWl0IGdldFRhc2tzKGRiKTtcbiAgICAgICAgLy8gR2V0cyBhbGwgdGFza3MgXG4gICAgICAgIGlmIChjYXRlZ29yeSA9PSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhc2sgaW4gdGFza0xpc3QpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGFza1JvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tSb3cuY2xhc3NMaXN0LmFkZCgndGFza1JvdycpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRhc2tSYWRpb1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrUm93TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRhc2tSb3dOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2tSb3dOYW1lJyk7XG4gICAgICAgICAgICAgICAgbGV0IHRhc2tSb3dEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGFza1Jvd0RhdGUuY2xhc3NMaXN0LmFkZCgndGFza1Jvd0RhdGUnKTtcbiAgICAgICAgICAgICAgICBsZXQgdGFza1Jvd1NlbGVjdE1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0YXNrUm93U2VsZWN0TWFyay5jbGFzc0xpc3QuYWRkKCd0YXNrUm93RGVmYXVsdE1hcmsnKTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0aW9uUmFkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblJhZGlvLnNldEF0dHJpYnV0ZSgndHlwZScsICdyYWRpbycpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblJhZGlvLnNldEF0dHJpYnV0ZSgnbmFtZScsICdjdXJyZW50U2VsZWN0aW9uJyk7XG5cbiAgICAgICAgICAgICAgICB0YXNrUm93TmFtZS50ZXh0Q29udGVudCA9IHRhc2tMaXN0W3Rhc2tdLnRpdGxlO1xuICAgICAgICAgICAgICAgIC8vVGVzdGluZyBkYXRlLWZuc1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZvcm1hdChuZXcgRGF0ZSh0YXNrTGlzdFt0YXNrXS5kdWVEYXRlKSwgJ1BQJykpO1xuXG4gICAgICAgICAgICAgICAgLy9PTEQgV0FZOiB0YXNrUm93RGF0ZS50ZXh0Q29udGVudCA9IHRhc2tMaXN0W3Rhc2tdLmR1ZURhdGU7XG4gICAgICAgICAgICAgICAgdGFza1Jvd0RhdGUudGV4dENvbnRlbnQgPSBmb3JtYXQobmV3IERhdGUodGFza0xpc3RbdGFza10uZHVlRGF0ZSksICdQUCcpO1xuXG4gICAgICAgICAgICAgICAgdGFza1Jvdy5hcHBlbmRDaGlsZCh0YXNrUm93TmFtZSk7XG4gICAgICAgICAgICAgICAgdGFza1Jvdy5hcHBlbmRDaGlsZCh0YXNrUm93RGF0ZSk7XG4gICAgICAgICAgICAgICAgdGFza1Jvdy5hcHBlbmRDaGlsZCh0YXNrUm93U2VsZWN0TWFyayk7XG4gICAgICAgICAgICAgICAgdGFza1Jvd1NlbGVjdE1hcmsuYXBwZW5kQ2hpbGQoc2VsZWN0aW9uUmFkaW8pO1xuXG4gICAgICAgICAgICAgICAgdGFza1Jvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsVGFza0Rlc2ModGFza0xpc3RbdGFza10udGl0bGUsIHRhc2tMaXN0W3Rhc2tdLmRlc2NyaXB0aW9uLCB0YXNrTGlzdFt0YXNrXS5wcmlvcml0eUxldmVsLCB0YXNrTGlzdFt0YXNrXS50YXNrQ2F0ZWdvcnksIHRhc2tMaXN0W3Rhc2tdLmR1ZURhdGUpO1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGZ1bmN0aW9uIHRvIGNoYW5nZSBjbGFzcyBvZiB0YXNrUm93U2VsZWN0TWFyaywgbWFrZSBjdXJyZW50IHJvdyBZRUxMT1dcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHVuc2VsZWN0ZWRUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rhc2tSb3dEZWZhdWx0TWFyaycpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1bnNlbGVjdGVkVGFza3MpO1xuICAgICAgICAgICAgICAgICAgICAvLyB1bnNlbGVjdGVkVGFza3MuY2xhc3NMaXN0LnJlbW92ZSgndGFza1Jvd0N1cnJlbnRNYXJrJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRhc2tSb3dTZWxlY3RNYXJrLmNsYXNzTGlzdC5hZGQoJ3Rhc2tSb3dDdXJyZW50TWFyaycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhc2tSYWRpb1NwYW4uYXBwZW5kQ2hpbGQodGFza1Jvdyk7XG4gICAgICAgICAgICAgICAgZGlzcGxheWVkVGFza3MuYXBwZW5kQ2hpbGQodGFza1JhZGlvU3Bhbik7XG4gICAgICAgICAgICB9IFxuICAgICAgICB9XG4gICAgICAgIC8vIEdldHMgb25seSB0YXNrcyBpbiBjaG9zZW4gY2F0ZWdvcnlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhc2sgaW4gdGFza0xpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tMaXN0W3Rhc2tdLnRhc2tDYXRlZ29yeSA9PSBjYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFza1JvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUm93LmNsYXNzTGlzdC5hZGQoJ3Rhc2tSb3cnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXNrUmFkaW9TcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tSb3dOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tSb3dOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2tSb3dOYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXNrUm93RGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUm93RGF0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrUm93RGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFza1Jvd1NlbGVjdE1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1Jvd1NlbGVjdE1hcmsuY2xhc3NMaXN0LmFkZCgndGFza1Jvd0RlZmF1bHRNYXJrJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3Rpb25SYWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblJhZGlvLnNldEF0dHJpYnV0ZSgndHlwZScsICdyYWRpbycpO1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25SYWRpby5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnY3VycmVudFNlbGVjdGlvbicpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRhc2tSb3dOYW1lLnRleHRDb250ZW50ID0gdGFza0xpc3RbdGFza10udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tSb3dEYXRlLnRleHRDb250ZW50ID0gdGFza0xpc3RbdGFza10uZHVlRGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1Jvdy5hcHBlbmRDaGlsZCh0YXNrUm93TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tSb3cuYXBwZW5kQ2hpbGQodGFza1Jvd0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUm93LmFwcGVuZENoaWxkKHRhc2tSb3dTZWxlY3RNYXJrKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1Jvd1NlbGVjdE1hcmsuYXBwZW5kQ2hpbGQoc2VsZWN0aW9uUmFkaW8pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRhc2tSb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxUYXNrRGVzYyh0YXNrTGlzdFt0YXNrXS50aXRsZSwgdGFza0xpc3RbdGFza10uZGVzY3JpcHRpb24sIHRhc2tMaXN0W3Rhc2tdLnByaW9yaXR5TGV2ZWwsIHRhc2tMaXN0W3Rhc2tdLnRhc2tDYXRlZ29yeSwgdGFza0xpc3RbdGFza10uZHVlRGF0ZSwgdGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRhc2tSYWRpb1NwYW4uYXBwZW5kQ2hpbGQodGFza1Jvdyk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXllZFRhc2tzLmFwcGVuZENoaWxkKHRhc2tSYWRpb1NwYW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG4gICAgICAgIH1cbn1cblxuZXhwb3J0IHsgcG9wdWxhdGVMaXN0IH07IiwiLy8gRHJhd3MgbGF5b3V0IHdpdGggbGlzdCBvZiB0YXNrcyBvbiBsZWZ0LCBkZXNjcmlwdGlvbiBvZiBjdXJyZW50IGxlc3Qgb24gcmlnaHRcblxuaW1wb3J0IHsgcG9wdWxhdGVMaXN0IH0gZnJvbSBcIi4vcG9wdWxhdGVMaXN0XCI7XG4vLyBpbXBvcnQgeyB0YXNrTGlzdCB9IGZyb20gXCIuL3Rhc2tGYWN0b3J5XCI7XG4vLyBpbXBvcnQgeyBmaWxsVGFza0Rlc2MgfSBmcm9tIFwiLi9maWxsVGFza0Rlc2NcIjtcbi8vIGltcG9ydCB7IGNsZWFyVmlldyB9IGZyb20gXCIuL2NsZWFyVmlld1wiO1xuXG5jb25zdCBkcmF3TGlzdFZpZXcgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgIGNvbnN0IGxpc3RWaWV3Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RWaWV3Q29udGVudC5jbGFzc0xpc3QuYWRkKCdsaXN0Vmlld0NvbnRlbnQnKTtcbiAgICBjb25zdCB0YXNrTGlzdENvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tMaXN0Q29sdW1uLmNsYXNzTGlzdC5hZGQoJ3Rhc2tMaXN0Q29sdW1uJyk7XG5cbiAgICAvLyBEcmF3cyBjYXRlZ29yeSBmaWx0ZXIgYnV0dG9uc1xuICAgIGNvbnN0IHRhc2tDYXRlZ29yeVRhYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YXNrQ2F0ZWdvcnlUYWJzLmNsYXNzTGlzdC5hZGQoJ3Rhc2tDYXRlZ29yeVRhYnMnKTtcbiAgICBjb25zdCBtYWluVGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY29uc3Qgd29ya1RhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNvbnN0IGhvdXNlVGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY29uc3QgaG9iYnlUYWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBtYWluVGFiLnRleHRDb250ZW50ID0gXCJBbGxcIlxuICAgIGhvdXNlVGFiLnRleHRDb250ZW50ID0gXCJIb3VzZVwiXG4gICAgd29ya1RhYi50ZXh0Q29udGVudCA9IFwiV29ya1wiXG4gICAgaG9iYnlUYWIudGV4dENvbnRlbnQgPSBcIkhvYmJpZXNcIlxuXG4gICAgbWFpblRhYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBwb3B1bGF0ZUxpc3QoKTtcbiAgICB9KTtcblxuICAgIHdvcmtUYWIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcG9wdWxhdGVMaXN0KFwiV29ya1wiKTtcbiAgICB9KTtcblxuICAgIGhvdXNlVGFiLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBvcHVsYXRlTGlzdChcIkhvdXNlXCIpO1xuICAgIH0pO1xuXG4gICAgaG9iYnlUYWIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcG9wdWxhdGVMaXN0KFwiSG9iYnlcIik7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkaXNwbGF5ZWRUYXNrcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpc3BsYXllZFRhc2tzLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXllZFRhc2tzJyk7XG5cbiAgICBjb25zdCB0YXNrRGVzY0NvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEZXNjQ29sdW1uLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZXNjQ29sdW1uJyk7XG4gICAgLy9UT0RPIC0gU3R5bGUgdGV4dCBjb250ZW50IGluIGl0J3Mgb3duIGRpdiAobWF5YmUgY2hhbmdlIGNsYXNzIG9mIHRhc2tEZXNjQ29sdW1uPylcbiAgICBjb25zdCBibGFua0Rlc2NQbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJsYW5rRGVzY1BsYWNlaG9sZGVyLmNsYXNzTGlzdC5hZGQoJ2JsYW5rRGVzY1BsYWNlaG9sZGVyJyk7XG4gICAgYmxhbmtEZXNjUGxhY2Vob2xkZXIudGV4dENvbnRlbnQgPSBcIlNlbGVjdCBhIHRhc2sgdG8gZGlzcGxheSBkZXRhaWxzIGFuZCBvcHRpb25zXCI7XG5cbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGxpc3RWaWV3Q29udGVudCk7XG4gICAgbGlzdFZpZXdDb250ZW50LmFwcGVuZENoaWxkKHRhc2tMaXN0Q29sdW1uKTtcbiAgICB0YXNrTGlzdENvbHVtbi5hcHBlbmRDaGlsZCh0YXNrQ2F0ZWdvcnlUYWJzKTtcbiAgICB0YXNrTGlzdENvbHVtbi5hcHBlbmRDaGlsZChkaXNwbGF5ZWRUYXNrcyk7XG4gICAgdGFza0NhdGVnb3J5VGFicy5hcHBlbmRDaGlsZChtYWluVGFiKTtcbiAgICB0YXNrQ2F0ZWdvcnlUYWJzLmFwcGVuZENoaWxkKGhvdXNlVGFiKTtcbiAgICB0YXNrQ2F0ZWdvcnlUYWJzLmFwcGVuZENoaWxkKHdvcmtUYWIpO1xuICAgIHRhc2tDYXRlZ29yeVRhYnMuYXBwZW5kQ2hpbGQoaG9iYnlUYWIpO1xuICAgIGxpc3RWaWV3Q29udGVudC5hcHBlbmRDaGlsZCh0YXNrRGVzY0NvbHVtbik7XG4gICAgdGFza0Rlc2NDb2x1bW4uYXBwZW5kQ2hpbGQoYmxhbmtEZXNjUGxhY2Vob2xkZXIpO1xuICAgIFxuICAgIHBvcHVsYXRlTGlzdCgpO1xufVxuXG5leHBvcnQgeyBkcmF3TGlzdFZpZXcgfTsiLCJpbXBvcnQgJy4vcmVzZXQuY3NzJztcbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xuaW1wb3J0IHsgZHJhd0xpc3RWaWV3IH0gZnJvbSAnLi9kcmF3TGlzdFZpZXcnO1xuaW1wb3J0IHsgZHJhd0Zvcm1WaWV3IH0gZnJvbSAnLi9kcmF3Rm9ybVZpZXcnO1xuaW1wb3J0IHsgY2xlYXJWaWV3IH0gZnJvbSAnLi9jbGVhclZpZXcnO1xuXG4vLyBpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcbi8vIGltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbi8vIGNvbnN0IGZpcmViYXNlQXBwID0gaW5pdGlhbGl6ZUFwcCh7XG4vLyAgIGFwaUtleTogXCJBSXphU3lDSHhUcVF2blRBamw1b29zY01XdnBRYWg2T0hDTUNYSjRcIixcbi8vICAgYXV0aERvbWFpbjogXCJ0by1kby1saXN0LTk1M2JlLmZpcmViYXNlYXBwLmNvbVwiLFxuLy8gICBwcm9qZWN0SWQ6IFwidG8tZG8tbGlzdC05NTNiZVwiLFxuLy8gICBzdG9yYWdlQnVja2V0OiBcInRvLWRvLWxpc3QtOTUzYmUuYXBwc3BvdC5jb21cIixcbi8vICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNDIwMTE3MDc5MTNcIixcbi8vICAgYXBwSWQ6IFwiMTo0MjAxMTcwNzkxMzp3ZWI6MWQ0MDBjYzNhNThlNzgzNzJkODZkOFwiLFxuLy8gICBtZWFzdXJlbWVudElkOiBcIkctMUIyMjI5SkxRWVwiXG4vLyB9KTtcblxuLy8gY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoZmlyZWJhc2VBcHApXG5cblxuLy8gbG9jYWxTdG9yYWdlIFRlc3RcbmZ1bmN0aW9uIHN0b3JhZ2VBdmFpbGFibGUodHlwZSkge1xuICBsZXQgc3RvcmFnZTtcbiAgdHJ5IHtcbiAgICBzdG9yYWdlID0gd2luZG93W3R5cGVdO1xuICAgIGNvbnN0IHggPSBcIl9fc3RvcmFnZV90ZXN0X19cIjtcbiAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XG4gICAgc3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiZcbiAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcbiAgICAgIChlLmNvZGUgPT09IDIyIHx8XG4gICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XG4gICAgICAgIC8vIHRlc3QgbmFtZSBmaWVsZCB0b28sIGJlY2F1c2UgY29kZSBtaWdodCBub3QgYmUgcHJlc2VudFxuICAgICAgICAvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XG4gICAgICAgIGUubmFtZSA9PT0gXCJRdW90YUV4Y2VlZGVkRXJyb3JcIiB8fFxuICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgIGUubmFtZSA9PT0gXCJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRFwiKSAmJlxuICAgICAgLy8gYWNrbm93bGVkZ2UgUXVvdGFFeGNlZWRlZEVycm9yIG9ubHkgaWYgdGhlcmUncyBzb21ldGhpbmcgYWxyZWFkeSBzdG9yZWRcbiAgICAgIHN0b3JhZ2UgJiZcbiAgICAgIHN0b3JhZ2UubGVuZ3RoICE9PSAwXG4gICAgKTtcbiAgfVxufVxuXG5pZiAoc3RvcmFnZUF2YWlsYWJsZShcImxvY2FsU3RvcmFnZVwiKSkge1xuICAvLyBjb25zb2xlLmxvZygnV2UgY2FuIHVzZSBsb2NhbFN0b3JhZ2UnKVxufSBlbHNlIHtcbiAgLy8gY29uc29sZS5sb2coJ05vIGxvY2FsU3RvcmFnZSBmb3IgdXMnKVxufVxuXG5cbiAgXG4vL0RyYXcgZGVmYXVsdCBzY3JlZW4gb24gcGFnZSBsb2FkXG5kcmF3TGlzdFZpZXcoKTtcblxuLy9SZW1vdmVzIGxpc3QgdmlldyBhbmQgY2FsbHMgZm9ybVxuY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUYXNrQnV0dG9uJyk7XG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJWaWV3KCk7XG4gICAgZHJhd0Zvcm1WaWV3KCk7XG59KTtcbiJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fIiwiVVJMIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyIsImV4cG9ydHMiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1hcCIsIml0ZW0iLCJjb250ZW50IiwibmVlZExheWVyIiwiY29uY2F0IiwibGVuZ3RoIiwiam9pbiIsImkiLCJtb2R1bGVzIiwibWVkaWEiLCJkZWR1cGUiLCJzdXBwb3J0cyIsImxheWVyIiwidW5kZWZpbmVkIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImsiLCJfayIsInVybCIsIm9wdGlvbnMiLCJTdHJpbmciLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInRlc3QiLCJzbGljZSIsImhhc2giLCJuZWVkUXVvdGVzIiwicmVwbGFjZSIsImNzc01hcHBpbmciLCJidG9hIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJzdHlsZXNJbkRPTSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsIm1vZHVsZXNUb0RvbSIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsImJhc2UiLCJjb3VudCIsImluZGV4QnlJZGVudGlmaWVyIiwib2JqIiwiY3NzIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJhZGRFbGVtZW50U3R5bGUiLCJieUluZGV4Iiwic3BsaWNlIiwiYXBpIiwiZG9tQVBJIiwidXBkYXRlIiwibmV3T2JqIiwicmVtb3ZlIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsImluZGV4IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJtZW1vIiwiaW5zZXJ0Iiwic3R5bGUiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsInN0eWxlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJuIiwiZ2V0dGVyIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInAiLCJiIiwiYmFzZVVSSSIsInNlbGYiLCJocmVmIiwibmMiLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwiYyIsImNoYXJDb2RlQXQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsImVuY29kZVN0cmluZyIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJhcmd1bWVudHMiLCJuYW1lIiwiYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmciLCJ1dGY4Qnl0ZXMiLCJiYXNlNjRFbmNvZGUiLCJnZXREZWZhdWx0cyIsImdldEdsb2JhbCIsIl9fRklSRUJBU0VfREVGQVVMVFNfXyIsInByb2Nlc3MiLCJlbnYiLCJkZWZhdWx0c0pzb25TdHJpbmciLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwibWF0Y2giLCJjb29raWUiLCJkZWNvZGVkIiwiY29uc29sZSIsImVycm9yIiwiYmFzZTY0RGVjb2RlIiwiZ2V0RGVmYXVsdHNGcm9tQ29va2llIiwiaW5mbyIsIkRlZmVycmVkIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJ2YWx1ZSIsImNhdGNoIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsIl9kZWxlZ2F0ZSIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJfYSIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJlbnRyaWVzIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsImFzeW5jIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImFkZCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJsb2ciLCJ3YXJuIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsInNvcnQiLCJkb25lIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJET01FeGNlcHRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uIiwib2JqZWN0IiwiSURCT2JqZWN0U3RvcmUiLCJJREJJbmRleCIsInNvbWUiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0Iiwic3VjY2VzcyIsInRoZW4iLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsInN0b3JlTmFtZSIsInN0b3JlIiwic2hpZnQiLCJvbGRUcmFwcyIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJyZWdpc3RlclZlcnNpb24iLCJsaWJyYXJ5S2V5T3JOYW1lIiwidmFyaWFudCIsImxpYnJhcnlNaXNtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwiYmxvY2tlZCIsInVwZ3JhZGUiLCJibG9ja2luZyIsInRlcm1pbmF0ZWQiLCJpbmRleGVkREIiLCJvcGVuIiwib3BlblByb21pc2UiLCJldmVudCIsIm9sZFZlcnNpb24iLCJuZXdWZXJzaW9uIiwiZGIiLCJvcGVuREIiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJhZ2VudCIsImRhdGUiLCJnZXRVVENEYXRlU3RyaW5nIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwiaGVhcnRiZWF0cyIsInNpbmdsZURhdGVIZWFydGJlYXQiLCJoYlRpbWVzdGFtcCIsInZhbHVlT2YiLCJvdmVyd3JpdGUiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwib25zdWNjZXNzIiwiY2xvc2UiLCJkZWxldGVEYXRhYmFzZSIsIm9udXBncmFkZW5lZWRlZCIsIm9uZXJyb3IiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWwiLCJlc20iLCJnb29nIiwibCIsImFhIiwiYmEiLCJkYSIsIk1hdGgiLCJyYW5kb20iLCJlYSIsImZhIiwiYmluZCIsImhhIiwidW5zaGlmdCIsInEiLCJpbmRleE9mIiwiamEiLCJyIiwiJCIsImFjIiwiZiIsImgiLCJ2IiwicyIsInJhIiwiTiIsIm1hIiwibmEiLCJvYSIsInciLCJkZWZhdWx0UHJldmVudGVkIiwicGEiLCJxYSIsInRyaW0iLCJleGVjIiwic2EiLCJ0YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIngiLCJ1YSIsInZhIiwiQ2EiLCJ3YSIsInkiLCJ4YSIsInlhIiwiemEiLCJ0b0xvd2VyQ2FzZSIsIkFhIiwiQmEiLCJkb2N1bWVudE1vZGUiLCJEYSIsIkVhIiwiRmEiLCJwYXJzZUZsb2F0IiwiSWEiLCJHYSIsInBhcnNlSW50IiwiS2EiLCJ6IiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiTmEiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiQSIsIk9hIiwiUGEiLCJsaXN0ZW5lciIsInByb3h5IiwiY2FwdHVyZSIsImxhIiwiaWEiLCJRYSIsIlJhIiwiU2EiLCJUYSIsInNwbGl0IiwiVWEiLCJWYSIsIlhhIiwiV2EiLCJZYSIsIlphIiwiYWIiLCJvbmNlIiwiYmIiLCJjYiIsIk8iLCJlYiIsImZiIiwiYXR0YWNoRXZlbnQiLCJnYiIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJQIiwiaWIiLCJqYiIsImRldGFjaEV2ZW50Iiwia2IiLCJoYW5kbGVFdmVudCIsIkIiLCJTIiwiSiIsIkMiLCJsYiIsInQiLCJtYiIsIm5iIiwib2IiLCJuZXh0IiwidWIiLCJxYiIsImoiLCJyYiIsInJlc2V0Iiwic2IiLCJzZXRUaW1lb3V0IiwidGIiLCJ4YiIsInZiIiwid2IiLCJ5YiIsInpiIiwiZ2EiLCJUIiwiY2xlYXJUaW1lb3V0IiwiQWIiLCJOdW1iZXIiLCJCYiIsInN0YXJ0IiwiQ2IiLCJEYiIsIkViIiwiR2IiLCJIYiIsIkliIiwiRCIsIkxiIiwiRSIsIk5iIiwiT2IiLCJQYiIsIlFiIiwiUmIiLCJTVEFUX0VWRU5UIiwic3RhdCIsIkYiLCJTYiIsInNpemUiLCJUYiIsIlViIiwiTk9fRVJST1IiLCJGYiIsIlRJTUVPVVQiLCJWYiIsIktiIiwiSmIiLCIkYiIsIldiIiwiWGIiLCJZYiIsImJjIiwiWmIiLCJPUEVOIiwiY2MiLCJkYyIsIlciLCJVIiwiZWMiLCJWIiwiSSIsIkwiLCJHIiwiWSIsIk0iLCJjYSIsIksiLCJmYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZ2MiLCJoYyIsImljIiwiamMiLCJrYyIsImxjIiwibWMiLCJxYyIsIkhhIiwidGMiLCJ2YyIsInNjIiwid2MiLCJyYyIsImlzTmFOIiwic3Vic3RyIiwieGMiLCJwYyIsIkgiLCJ1YyIsImFib3J0IiwieWMiLCJKYSIsInpjIiwiQWMiLCJCYyIsIkNjIiwiTGEiLCJNYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiRGMiLCJFYyIsIkZjIiwiR2MiLCJIYyIsIkljIiwiTGMiLCJmb3JFYWNoIiwiWiIsIktjIiwiSmMiLCJvYyIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwic3RyZWFtIiwiY2FuY2VsIiwiTWIiLCJNYyIsIlJlZ0V4cCIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiU2MiLCJhZCIsIlljIiwiVGMiLCJaYyIsImZsb29yIiwiYWJzIiwiZGVjb2RlVVJJIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZW5jb2RlVVJJIiwiJGMiLCJVYyIsIlZjIiwiV2MiLCJYYyIsIk5jIiwiYmQiLCJkZCIsImVkIiwiUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nIiwicGVyZm9ybWFuY2UiLCJnZXRFbnRyaWVzQnlUeXBlIiwibmV4dEhvcFByb3RvY29sIiwiZmQiLCJnZCIsImhkIiwiamQiLCJsZCIsIm9ubG9hZCIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJtZCIsIm5kIiwicmVhZHlTdGF0ZSIsIm9kIiwic3RhdHVzIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsImNsZWFyIiwicmQiLCJrYSIsInFkIiwicGQiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJib2R5IiwiZmV0Y2giLCJSZXF1ZXN0IiwiJGEiLCJhcnJheUJ1ZmZlciIsIlJlYWRhYmxlU3RyZWFtIiwiZ2V0UmVhZGVyIiwidGV4dCIsIlVpbnQ4QXJyYXkiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiYXBwZW5kIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwic2QiLCJ0ZCIsInVkIiwidmQiLCJ3ZCIsInpkIiwiQWQiLCJCZCIsInByb3RvY29sIiwieGQiLCJtb3pSZXNwb25zZUFycmF5QnVmZmVyIiwiQ2QiLCJEZCIsIkVkIiwiaW50ZXJuYWxDaGFubmVsUGFyYW1zIiwiRmQiLCJ4bWxIdHRwRmFjdG9yeSIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImZvcmNlTG9uZ1BvbGxpbmciLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsIkdkIiwiSGQiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJJZCIsIk1kIiwiTGQiLCJyb3VuZCIsIm1pbiIsIm1heCIsIktkIiwiTmQiLCJKZCIsInBiIiwia2QiLCJob3N0bmFtZSIsInBvcnQiLCJPZCIsIlBkIiwiUSIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlIiLCJRZCIsIl9fc21fXyIsIlJkIiwiYmxvY2tTaXplIiwiVGQiLCJ0b1VwcGVyQ2FzZSIsImdldFByb3RvdHlwZU9mIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ0aW1lb3V0IiwieWQiLCJfX2RhdGFfXyIsIlVkIiwiVmQiLCJpc0Zpbml0ZSIsIldkIiwiWWQiLCJaZCIsIlgiLCJhZSIsImJlIiwiY2UiLCIkZCIsImRlIiwiY2VpbCIsIkxOMiIsInBvdyIsImFuZCIsIm9yIiwieG9yIiwiY3JlYXRlV2ViQ2hhbm5lbCIsIkhUVFBfRVJST1IiLCJDT01QTEVURSIsIkV2ZW50VHlwZSIsIkNMT1NFIiwiTUVTU0FHRSIsImxpc3RlbiIsImxpc3Rlbk9uY2UiLCJnZXRMYXN0RXJyb3IiLCJnZXRMYXN0RXJyb3JDb2RlIiwiZ2V0U3RhdHVzIiwiZ2V0UmVzcG9uc2VKc29uIiwiZ2V0UmVzcG9uc2VUZXh0Iiwic2V0V2l0aENyZWRlbnRpYWxzIiwiZGlnZXN0IiwibXVsdGlwbHkiLCJtb2R1bG8iLCJjb21wYXJlIiwidG9OdW1iZXIiLCJnZXRCaXRzIiwiZnJvbU51bWJlciIsImZyb21TdHJpbmciLCJYZCIsImNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQiLCJnZXRTdGF0RXZlbnRUYXJnZXQiLCJFcnJvckNvZGUiLCJFdmVudCIsIlN0YXQiLCJQUk9YWSIsIk5PUFJPWFkiLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiV2ViQ2hhbm5lbCIsIlhocklvIiwiTWQ1IiwiSW50ZWdlciIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsInRvS2V5IiwiaXNFcXVhbCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwidXNlciIsImdldFRva2VuIiwiaW52YWxpZGF0ZVRva2VuIiwiZW5xdWV1ZVJldHJ5YWJsZSIsInNodXRkb3duIiwidG9rZW4iLCJjaGFuZ2VMaXN0ZW5lciIsImN1cnJlbnRVc2VyIiwiZm9yY2VSZWZyZXNoIiwiYXV0aCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsImFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsInR0Iiwic3RhdGljIiwiZXQiLCJudCIsImV2ZXJ5IiwiaXQiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwiZ2V0VGltZSIsInRvRGF0ZSIsInRvTWlsbGlzIiwiX2NvbXBhcmVUbyIsInRvSlNPTiIsInBhZFN0YXJ0IiwicnQiLCJ0aW1lc3RhbXAiLCJjb21wYXJlVG8iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwib3QiLCJzZWdtZW50cyIsIm9mZnNldCIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc0VtcHR5IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwidXQiLCJjYW5vbmljYWxTdHJpbmciLCJjdCIsImF0IiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwiaHQiLCJwYXRoIiwiZW1wdHlQYXRoIiwiY29sbGVjdGlvbkdyb3VwIiwiaGFzQ29sbGVjdGlvbklkIiwiZ2V0Q29sbGVjdGlvbkdyb3VwIiwiZ2V0Q29sbGVjdGlvblBhdGgiLCJwdCIsIkl0IiwicmVhZFRpbWUiLCJkb2N1bWVudEtleSIsImxhcmdlc3RCYXRjaElkIiwiZW1wdHkiLCJUdCIsIkF0Iiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiUnQiLCJ2dCIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiRHQiLCIkdCIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwiRnQiLCJCdCIsIm1lIiwiZ2UiLCJ5ZSIsInBlIiwicm9vdCIsIlRlIiwiRU1QVFkiLCJjb3B5IiwiQkxBQ0siLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiSWUiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJFZSIsImZpcnN0IiwibGFzdCIsImZvckVhY2hJblJhbmdlIiwiZm9yRWFjaFdoaWxlIiwiZmlyc3RBZnRlck9yRXF1YWwiLCJBZSIsInVuaW9uV2l0aCIsIml0ZXIiLCJ2ZSIsImZpZWxkcyIsImNvdmVycyIsIlBlIiwiVmUiLCJiaW5hcnlTdHJpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiU2UiLCJEZSIsIm5hbm9zIiwiQ2UiLCJ4ZSIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIk5lIiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwia2UiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJNZSIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJPZSIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCIkZSIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJGZSIsIkxlIiwiZW4iLCJxZSIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsIlVlIiwiS2UiLCJHZSIsIlFlIiwiamUiLCJmcm9tTmFtZSIsIkhlIiwiSmUiLCJZZSIsIlhlIiwiWmUiLCJ0biIsInVuIiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsImNuIiwiYW4iLCJkb2N1bWVudFR5cGUiLCJjcmVhdGVUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsImNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQiLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50Iiwic2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJzZXRSZWFkVGltZSIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiaGFzUGVuZGluZ1dyaXRlcyIsImlzVmFsaWREb2N1bWVudCIsImlzRm91bmREb2N1bWVudCIsImlzTm9Eb2N1bWVudCIsImlzVW5rbm93bkRvY3VtZW50IiwibXV0YWJsZUNvcHkiLCJobiIsInBvc2l0aW9uIiwiaW5jbHVzaXZlIiwibG4iLCJkaXIiLCJmbiIsImRuIiwiX24iLCJ3biIsIm1uIiwib3AiLCJjcmVhdGVLZXlGaWVsZEluRmlsdGVyIiwiUG4iLCJEbiIsIkNuIiwieG4iLCJObiIsImJuIiwiVm4iLCJtYXRjaGVzIiwibWF0Y2hlc0NvbXBhcmlzb24iLCJpc0luZXF1YWxpdHkiLCJnZXRGbGF0dGVuZWRGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsImdldEZpcnN0SW5lcXVhbGl0eUZpZWxkIiwiZ24iLCJmaWx0ZXJzIiwieW4iLCJyZWR1Y2UiLCJsdCIsIkluIiwiVG4iLCJFbiIsIkFuIiwidm4iLCJTbiIsIm51bGxWYWx1ZSIsImtuIiwib3JkZXJCeSIsInN0YXJ0QXQiLCJlbmRBdCIsImZ0IiwiTW4iLCJPbiIsIiRuIiwiRm4iLCJpc0RvY3VtZW50S2V5IiwiVW4iLCJleHBsaWNpdE9yZGVyQnkiLCJsaW1pdFR5cGUiLCJkdCIsIl90IiwiR24iLCJRbiIsIkhuIiwiem4iLCJqbiIsImtleUZpZWxkIiwiSm4iLCJYbiIsIlpuIiwidHMiLCJlcyIsIm5zIiwiaXMiLCJycyIsIm9zIiwibWFwS2V5Rm4iLCJlcXVhbHNGbiIsImlubmVyIiwiaW5uZXJTaXplIiwidXMiLCJjcyIsImFzIiwiaHMiLCJscyIsIm92ZXJsYXllZERvY3VtZW50IiwiZnMiLCJfcyIsImRzIiwid3MiLCJtcyIsImdzIiwieXMiLCJJcyIsInVzZVByb3RvM0pzb24iLCJUcyIsIkVzIiwiaXNJbnRlZ2VyIiwiTUFYX1NBRkVfSU5URUdFUiIsIk1JTl9TQUZFX0lOVEVHRVIiLCJMdCIsIkFzIiwiUnMiLCJicyIsIlZzIiwiU3MiLCJEcyIsIkNzIiwiUHMiLCJOcyIsInd0Iiwic2VyaWFsaXplciIsInZzIiwieHMiLCJlbGVtZW50cyIsImtzIiwiJHMiLCJ0cmFuc2Zvcm1SZXN1bHRzIiwiRnMiLCJ1cGRhdGVUaW1lIiwiZXhpc3RzIiwiaXNOb25lIiwiQnMiLCJMcyIsInFzIiwiWXMiLCJub25lIiwianMiLCJ6cyIsIlVzIiwiSHMiLCJmaWVsZFRyYW5zZm9ybXMiLCJwcmVjb25kaXRpb24iLCJXcyIsIktzIiwiSnMiLCJmaWVsZE1hc2siLCJHcyIsInRyYW5zZm9ybSIsIlFzIiwiT3MiLCJnZXRGaWVsZE1hc2siLCJYcyIsIlpzIiwiYmF0Y2hJZCIsImxvY2FsV3JpdGVUaW1lIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIm11dGF0aW9uUmVzdWx0cyIsImFwcGx5VG9Mb2NhbFZpZXciLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsIm11dGF0ZWRGaWVsZHMiLCJ0aSIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsImRvY1ZlcnNpb25zIiwiZWkiLCJtdXRhdGlvbiIsImdldEtleSIsInNpIiwidW5jaGFuZ2VkTmFtZXMiLCJpaSIsInJpIiwidWkiLCJjaSIsIm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MiLCJhaSIsIm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2giLCJub3RpZnlPbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoIiwibGkiLCJmaSIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwiZGkiLCJEYXRhVmlldyIsImJ1ZmZlciIsImdldFVpbnQzMiIsImJpdG1hcCIsInBhZGRpbmciLCJoYXNoQ291bnQiLCJ3aSIsInl0IiwiRXQiLCJtaSIsInNuYXBzaG90VmVyc2lvbiIsInRhcmdldENoYW5nZXMiLCJ0YXJnZXRNaXNtYXRjaGVzIiwiZG9jdW1lbnRVcGRhdGVzIiwicmVzb2x2ZWRMaW1ib0RvY3VtZW50cyIsImdpIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwicmVzdW1lVG9rZW4iLCJjdXJyZW50IiwiYWRkZWREb2N1bWVudHMiLCJtb2RpZmllZERvY3VtZW50cyIsInJlbW92ZWREb2N1bWVudHMiLCJ5aSIsInJlbW92ZWRUYXJnZXRJZHMiLCJQdCIsInBpIiwidGFyZ2V0SWQiLCJidCIsIklpIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJUaSIsIlZ0IiwiU3QiLCJSaSIsIkN0IiwieHQiLCJOdCIsImt0IiwiTXQiLCJPdCIsInF0IiwiVXQiLCJFaSIsIkt0IiwiR3QiLCJRdCIsImp0IiwiQWkiLCJ6dCIsIld0IiwiSHQiLCJKdCIsIll0IiwiZm9yRWFjaFRhcmdldCIsIlh0IiwiWnQiLCJyZW1vdmVUYXJnZXQiLCJ0ZSIsImVlIiwibmUiLCJuZXdOb0RvY3VtZW50Iiwic2UiLCJpZSIsImxvY2FsQ2FjaGVDb3VudCIsImV4aXN0ZW5jZUZpbHRlckNvdW50IiwiYmxvb21GaWx0ZXIiLCJhcHBsaWVkIiwiYml0bWFwTGVuZ3RoIiwiYml0cyIsInJlIiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIm9lIiwidWUiLCJwdXJwb3NlIiwiaGUiLCJ2aSIsImFzYyIsImRlc2MiLCJQaSIsImluIiwiYmkiLCJWaSIsIlNpIiwiRGkiLCJDaSIsInhpIiwiTmkiLCJmcm9tVGltZXN0YW1wIiwia2kiLCJNaSIsInVyIiwiT2kiLCIkaSIsInFpIiwiRmkiLCJMaSIsIlVpIiwiSGkiLCJkb2N1bWVudHMiLCJKaSIsInN0cnVjdHVyZWRRdWVyeSIsInBhcmVudCIsImNvbGxlY3Rpb25JZCIsImFsbERlc2NlbmRhbnRzIiwicnIiLCJ3aGVyZSIsInNyIiwiZGlyZWN0aW9uIiwidHIiLCJiZWZvcmUiLCJZaSIsIkJpIiwiWmkiLCJpciIsIktuIiwidW5hcnlGaWx0ZXIiLCJOYU4iLCJmaWVsZEZpbHRlciIsImNvbXBvc2l0ZUZpbHRlciIsImVyIiwibnIiLCJmaWVsZFBhdGgiLCJmcm9tU2VydmVyRm9ybWF0IiwiZmllbGRQYXRocyIsImNyIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZXhwZWN0ZWRDb3VudCIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhFeHBlY3RlZENvdW50Iiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJhciIsImxlIiwieXIiLCJiciIsIl9lIiwid2UiLCJSZSIsInpyIiwic24iLCJXciIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiYWRkRmllbGRJbmRleCIsImRlbGV0ZUZpZWxkSW5kZXgiLCJnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCIsImdldEluZGV4VHlwZSIsImdldEZpZWxkSW5kZXhlcyIsImdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSIsImdldE1pbk9mZnNldCIsImdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVDb2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVJbmRleEVudHJpZXMiLCJzbyIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwibG8iLCJSbyIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImFkZEVudHJ5IiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwibmV3SW52YWxpZERvY3VtZW50IiwiZ2V0RW50cnkiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJObyIsImtvIiwicmVtb3RlRG9jdW1lbnRDYWNoZSIsIm11dGF0aW9uUXVldWUiLCJkb2N1bWVudE92ZXJsYXlDYWNoZSIsImluZGV4TWFuYWdlciIsImdldERvY3VtZW50IiwiZ2V0T3ZlcmxheSIsImdldERvY3VtZW50cyIsImdldExvY2FsVmlld09mRG9jdW1lbnRzIiwicG9wdWxhdGVPdmVybGF5cyIsImNvbXB1dGVWaWV3cyIsImdldE92ZXJsYXllZERvY3VtZW50cyIsImdldE92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMiLCJzYXZlT3ZlcmxheXMiLCJyZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyIsImdldERvY3VtZW50c01hdGNoaW5nUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkiLCJXbiIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSIsImdldE5leHREb2N1bWVudHMiLCJnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAiLCJnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24iLCJNbyIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiZ2V0TmFtZWRRdWVyeSIsInNhdmVOYW1lZFF1ZXJ5IiwicXVlcnkiLCJidW5kbGVkUXVlcnkiLCJPbyIsIm92ZXJsYXlzIiwicmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkIiwiJG8iLCJGbyIsImFkZFJlZmVyZW5jZSIsInJlbW92ZVJlZmVyZW5jZSIsInBzIiwiY29udGFpbnNLZXkiLCJCbyIsInJlZmVyZW5jZURlbGVnYXRlIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJQT1NJVElWRV9JTkZJTklUWSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJMbyIsImRvY3MiLCJzZXRJbmRleE1hbmFnZXIiLCJuZXdDaGFuZ2VCdWZmZXIiLCJxbyIsImdldFNpemUiLCJVbyIsInBlcnNpc3RlbmNlIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImhpZ2hlc3RUYXJnZXRJZCIsInRhcmdldENvdW50IiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJhZGRUYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXRzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJnZXRUYXJnZXRDb3VudCIsImdldFRhcmdldERhdGEiLCJhZGRNYXRjaGluZ0tleXMiLCJyZW1vdmVNYXRjaGluZ0tleXMiLCJnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIktvIiwiTXMiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsImdldEluZGV4TWFuYWdlciIsImdldERvY3VtZW50T3ZlcmxheUNhY2hlIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFRhcmdldENhY2hlIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldEJ1bmRsZUNhY2hlIiwicnVuVHJhbnNhY3Rpb24iLCJHbyIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsIlFvIiwiZnJvbVBhdGgiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwidHUiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiZXUiLCJLaSIsIkdpIiwiUWkiLCJqaSIsInppIiwibnUiLCJXaSIsIlhpIiwibG9jYWxEb2N1bWVudHMiLCJjb2xsZWN0R2FyYmFnZSIsImNvbGxlY3QiLCJpdSIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJvdSIsImF1IiwibHUiLCJmdSIsInd1Iiwic3MiLCJ2dSIsImFjdGl2ZVRhcmdldElkcyIsImhyIiwibHIiLCJ1cGRhdGVUaW1lTXMiLCJidSIsIkhyIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJWdSIsIkpyIiwiU3UiLCJZciIsIlhyIiwiWnIiLCJlbyIsIm5vIiwiRHUiLCJDdSIsInh1IiwiQmF0Y2hHZXREb2N1bWVudHMiLCJDb21taXQiLCJSdW5RdWVyeSIsIlJ1bkFnZ3JlZ2F0aW9uUXVlcnkiLCJOdSIsImlvIiwicm8iLCJvbyIsInVvIiwiY28iLCJhbyIsIm9uTWVzc2FnZSIsImhvIiwiZm8iLCJfbyIsImt1IiwiTXUiLCJkYXRhYmFzZUluZm8iLCJ3byIsIm1vIiwieW8iLCJwbyIsIklvIiwiVG8iLCJFbyIsIkFvIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwiJHUiLCJGdSIsIkJ1IiwidGltZXJJZCIsInZvIiwiUG8iLCJibyIsIlZvIiwiU28iLCJEbyIsIkNvIiwieG8iLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsInNraXBEZWxheSIsIkx1IiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwiam8iLCJ6byIsIldvIiwiSG8iLCJKbyIsIllvIiwiWG8iLCJabyIsImVucXVldWVBbmRGb3JnZXQiLCJxdSIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwic3UiLCJVdSIsInJ1IiwibGFzdFN0cmVhbVRva2VuIiwic3RyZWFtVG9rZW4iLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwidXUiLCJjdSIsIndyaXRlcyIsInVwZGF0ZU1hc2siLCJ2ZXJpZnkiLCJ1cGRhdGVUcmFuc2Zvcm1zIiwic2V0VG9TZXJ2ZXJWYWx1ZSIsImFwcGVuZE1pc3NpbmdFbGVtZW50cyIsInJlbW92ZUFsbEZyb21BcnJheSIsImluY3JlbWVudCIsImN1cnJlbnREb2N1bWVudCIsIkt1IiwiYXV0aENyZWRlbnRpYWxzIiwiYXBwQ2hlY2tDcmVkZW50aWFscyIsImh1IiwidGVybWluYXRlIiwiUXUiLCJhc3luY1F1ZXVlIiwiZHUiLCJfdSIsIm11IiwiZ3UiLCJ5dSIsInB1IiwiSXUiLCJqdSIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJUdSIsIkV1IiwiQXUiLCJSdSIsIld1IiwiUHUiLCJ6dSIsIkh1IiwiWnUiLCJZdSIsIkp1IiwiWHUiLCJyZWplY3RMaXN0ZW4iLCJhcHBseVJlbW90ZUV2ZW50IiwiX2MiLCJhcHBseVN1Y2Nlc3NmdWxXcml0ZSIsIm9pIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsInN0b3AiLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJ0aW1lckhhbmRsZSIsImhhbmRsZURlbGF5RWxhcHNlZCIsImtleWVkTWFwIiwic29ydGVkU2V0IiwidHJhY2siLCJvbGREb2NzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJoYXNDYWNoZWRSZXN1bHRzIiwiZW1wdHlTZXQiLCJsaXN0ZW5lcnMiLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJvbkVycm9yIiwiT3UiLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJzbmFwc2hvdCIsInZpZXciLCJyZW1vdGVTdG9yZSIsImV2ZW50TWFuYWdlciIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJpc1ByaW1hcnlDbGllbnQiLCJ0cmFja1JlbW92YWxzIiwic3luY2hyb25pemVUYWJzIiwiY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUiLCJjcmVhdGVQZXJzaXN0ZW5jZSIsImNyZWF0ZUxvY2FsU3RvcmUiLCJnY1NjaGVkdWxlciIsImNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyIiwiaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyIiwiY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyIiwiaW5pdGlhbFVzZXIiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwib2JzZXJ2ZXIiLCJtdXRlZCIsImNsaWVudElkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwic2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsImlzU2h1dHRpbmdEb3duIiwiZW50ZXJSZXN0cmljdGVkTW9kZSIsImVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkIiwiX29ubGluZUNvbXBvbmVudHMiLCJfb2ZmbGluZUNvbXBvbmVudHMiLCJnZXRDb25maWd1cmF0aW9uIiwiX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIiLCJfb2ZmbGluZSIsIl9vbmxpbmUiLCJvbkxpc3RlbiIsIm9uVW5saXN0ZW4iLCJ0aCIsImVoIiwic2giLCJpaCIsInJoIiwib2giLCJjaCIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJsb2NhbENhY2hlIiwiY2FjaGVTaXplQnl0ZXMiLCJuaCIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJhaCIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJsaCIsImNvbnZlcnRlciIsIl9rZXkiLCJmaXJlc3RvcmUiLCJfcGF0aCIsImRoIiwid2l0aENvbnZlcnRlciIsImZoIiwiX3F1ZXJ5IiwibWgiLCJwaCIsInZpc2liaWxpdHlTdGF0ZSIsImVucXVldWUiLCJzdGFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwiQWgiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiYmgiLCJQaCIsIl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfb25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfb2ZmbGluZUtpbmQiLCJraW5kIiwicWgiLCJfYnl0ZVN0cmluZyIsIlVoIiwiX2ludGVybmFsUGF0aCIsIkdoIiwiX21ldGhvZE5hbWUiLCJRaCIsIl9sYXQiLCJfbG9uZyIsImpoIiwiemgiLCJ0b011dGF0aW9uIiwiSGgiLCJKaCIsIm1sIiwibWV0aG9kTmFtZSIsImNvbnRhaW5zIiwiWWgiLCJYaCIsIlpoIiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsImZsIiwiaGwiLCJkbCIsImdsIiwiYWwiLCJsbCIsIl90b0ZpZWxkVHJhbnNmb3JtIiwiZnJvbURhdGUiLCJ3bCIsIl9sIiwic2VhcmNoIiwieWwiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInJlZiIsInBsIiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsIklsIiwiemwiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydE9iamVjdE1hcCIsImNvbnZlcnREb2N1bWVudEtleSIsImVmIiwibmYiLCJfZmlyZXN0b3JlSW1wbCIsIm1ldGFkYXRhIiwic2YiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwicmYiLCJfc25hcHNob3QiLCJfY2FjaGVkQ2hhbmdlcyIsIl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJvZiIsImFmIiwiVGYiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsImdldEFwcCIsInByb2R1Y3ROYW1lIiwiX2IiLCJlbXVsYXRvckhvc3RzIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsInNlcGFyYXRvckluZGV4IiwibGFzdEluZGV4T2YiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQiLCJtb2NrVXNlclRva2VuIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsImFsZyIsImNyZWF0ZU1vY2tVc2VyVG9rZW4iLCJoaCIsImFwaUtleSIsImF1dGhEb21haW4iLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJtZWFzdXJlbWVudElkIiwiZ2V0VGFza3MiLCJ0YXNrc0NvbCIsIlRsIiwiVGFzayIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHlMZXZlbCIsInRhc2tDYXRlZ29yeSIsImNsZWFyVmlldyIsImxhc3RDaGlsZCIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiX3R5cGVvZiIsImlzRGF0ZSIsImFyZ3VtZW50IiwiYXJnU3RyIiwiaXNWYWxpZCIsImRpcnR5RGF0ZSIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiYWRkTWlsbGlzZWNvbmRzIiwiZGlydHlBbW91bnQiLCJhbW91bnQiLCJzdWJNaWxsaXNlY29uZHMiLCJNSUxMSVNFQ09ORFNfSU5fREFZIiwic3RhcnRPZlVUQ0lTT1dlZWsiLCJ3ZWVrU3RhcnRzT24iLCJkYXkiLCJnZXRVVENEYXkiLCJkaWZmIiwic2V0VVRDRGF0ZSIsImdldFVUQ0RhdGUiLCJzZXRVVENIb3VycyIsImdldFVUQ0lTT1dlZWtZZWFyIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhciIsInNldFVUQ0Z1bGxZZWFyIiwic3RhcnRPZk5leHRZZWFyIiwiZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhciIsInN0YXJ0T2ZUaGlzWWVhciIsInN0YXJ0T2ZVVENJU09XZWVrWWVhciIsImZvdXJ0aE9mSmFudWFyeSIsIk1JTExJU0VDT05EU19JTl9XRUVLIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsInN0YXJ0T2ZVVENXZWVrIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwibG9jYWxlIiwiUmFuZ2VFcnJvciIsImdldFVUQ1dlZWtZZWFyIiwiX29wdGlvbnMkZmlyc3RXZWVrQ29uIiwiZmlyc3RXZWVrQ29udGFpbnNEYXRlIiwiZmlyc3RXZWVrT2ZOZXh0WWVhciIsImZpcnN0V2Vla09mVGhpc1llYXIiLCJzdGFydE9mVVRDV2Vla1llYXIiLCJmaXJzdFdlZWsiLCJhZGRMZWFkaW5nWmVyb3MiLCJ0YXJnZXRMZW5ndGgiLCJzaWduIiwic2lnbmVkWWVhciIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJnZXRVVENIb3VycyIsImdldFVUQ01pbnV0ZXMiLCJnZXRVVENTZWNvbmRzIiwibnVtYmVyT2ZEaWdpdHMiLCJtaWxsaXNlY29uZHMiLCJnZXRVVENNaWxsaXNlY29uZHMiLCJsb2NhbGl6ZSIsImVyYSIsIndpZHRoIiwib3JkaW5hbE51bWJlciIsInVuaXQiLCJsaWdodEZvcm1hdHRlcnMiLCJzaWduZWRXZWVrWWVhciIsIndlZWtZZWFyIiwicXVhcnRlciIsImNvbnRleHQiLCJ3ZWVrIiwiZ2V0VVRDV2VlayIsImlzb1dlZWsiLCJnZXRVVENJU09XZWVrIiwiZGF5T2ZZZWFyIiwic2V0VVRDTW9udGgiLCJzdGFydE9mWWVhclRpbWVzdGFtcCIsImRpZmZlcmVuY2UiLCJnZXRVVENEYXlPZlllYXIiLCJkYXlPZldlZWsiLCJsb2NhbERheU9mV2VlayIsImlzb0RheU9mV2VlayIsImRheVBlcmlvZEVudW1WYWx1ZSIsImRheVBlcmlvZCIsImhvdXJzIiwiX2xvY2FsaXplIiwidGltZXpvbmVPZmZzZXQiLCJfb3JpZ2luYWxEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXMiLCJmb3JtYXRUaW1lem9uZSIsImZvcm1hdFRpbWV6b25lU2hvcnQiLCJvcmlnaW5hbERhdGUiLCJkaXJ0eURlbGltaXRlciIsImFic09mZnNldCIsIm1pbnV0ZXMiLCJkZWxpbWl0ZXIiLCJkYXRlTG9uZ0Zvcm1hdHRlciIsInBhdHRlcm4iLCJmb3JtYXRMb25nIiwidGltZUxvbmdGb3JtYXR0ZXIiLCJ0aW1lIiwiZGF0ZVRpbWVGb3JtYXQiLCJtYXRjaFJlc3VsdCIsImRhdGVQYXR0ZXJuIiwidGltZVBhdHRlcm4iLCJkYXRlVGltZSIsImdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMiLCJ1dGNEYXRlIiwiVVRDIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwicHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW5zIiwicHJvdGVjdGVkV2Vla1llYXJUb2tlbnMiLCJpc1Byb3RlY3RlZERheU9mWWVhclRva2VuIiwiaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuIiwidGhyb3dQcm90ZWN0ZWRFcnJvciIsImZvcm1hdCIsImZvcm1hdERpc3RhbmNlTG9jYWxlIiwibGVzc1RoYW5YU2Vjb25kcyIsIm9uZSIsIm90aGVyIiwieFNlY29uZHMiLCJoYWxmQU1pbnV0ZSIsImxlc3NUaGFuWE1pbnV0ZXMiLCJ4TWludXRlcyIsImFib3V0WEhvdXJzIiwieEhvdXJzIiwieERheXMiLCJhYm91dFhXZWVrcyIsInhXZWVrcyIsImFib3V0WE1vbnRocyIsInhNb250aHMiLCJhYm91dFhZZWFycyIsInhZZWFycyIsIm92ZXJYWWVhcnMiLCJhbG1vc3RYWWVhcnMiLCJidWlsZEZvcm1hdExvbmdGbiIsImRlZmF1bHRXaWR0aCIsImZvcm1hdHMiLCJmdWxsIiwibG9uZyIsIm1lZGl1bSIsInNob3J0IiwiZm9ybWF0UmVsYXRpdmVMb2NhbGUiLCJsYXN0V2VlayIsInllc3RlcmRheSIsInRvZGF5IiwidG9tb3Jyb3ciLCJuZXh0V2VlayIsImJ1aWxkTG9jYWxpemVGbiIsImRpcnR5SW5kZXgiLCJ2YWx1ZXNBcnJheSIsImZvcm1hdHRpbmdWYWx1ZXMiLCJkZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIiwiX2RlZmF1bHRXaWR0aCIsIl93aWR0aCIsImFyZ3VtZW50Q2FsbGJhY2siLCJyZW0xMDAiLCJuYXJyb3ciLCJhYmJyZXZpYXRlZCIsIndpZGUiLCJhbSIsInBtIiwibWlkbmlnaHQiLCJub29uIiwibW9ybmluZyIsImFmdGVybm9vbiIsImV2ZW5pbmciLCJuaWdodCIsImJ1aWxkTWF0Y2hGbiIsInN0cmluZyIsIm1hdGNoUGF0dGVybiIsIm1hdGNoUGF0dGVybnMiLCJkZWZhdWx0TWF0Y2hXaWR0aCIsIm1hdGNoZWRTdHJpbmciLCJwYXJzZVBhdHRlcm5zIiwiZGVmYXVsdFBhcnNlV2lkdGgiLCJmaW5kSW5kZXgiLCJmaW5kS2V5IiwidmFsdWVDYWxsYmFjayIsInJlc3QiLCJwcmVkaWNhdGUiLCJhcnJheSIsInBhcnNlUGF0dGVybiIsInBhcnNlUmVzdWx0IiwiYW55IiwiZm9ybWF0RGlzdGFuY2UiLCJ0b2tlblZhbHVlIiwiYWRkU3VmZml4IiwiY29tcGFyaXNvbiIsImZvcm1hdFJlbGF0aXZlIiwiX2RhdGUiLCJfYmFzZURhdGUiLCJmb3JtYXR0aW5nVG9rZW5zUmVnRXhwIiwibG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHAiLCJlc2NhcGVkU3RyaW5nUmVnRXhwIiwiZG91YmxlUXVvdGVSZWdFeHAiLCJ1bmVzY2FwZWRMYXRpbkNoYXJhY3RlclJlZ0V4cCIsImRpcnR5Rm9ybWF0U3RyIiwiX3JlZjQiLCJfb3B0aW9ucyRsb2NhbGUyIiwiX29wdGlvbnMkbG9jYWxlMiRvcHRpIiwiX3JlZjUiLCJfcmVmNiIsIl9yZWY3IiwiX29wdGlvbnMkbG9jYWxlMyIsIl9vcHRpb25zJGxvY2FsZTMkb3B0aSIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbDMiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWw0IiwiZm9ybWF0U3RyIiwiZGVmYXVsdExvY2FsZSIsImZvcm1hdHRlck9wdGlvbnMiLCJmaXJzdENoYXJhY3RlciIsImxvbmdGb3JtYXR0ZXIiLCJjbGVhbkVzY2FwZWRTdHJpbmciLCJmb3JtYXR0ZXIiLCJ1c2VBZGRpdGlvbmFsV2Vla1llYXJUb2tlbnMiLCJ1c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zIiwibWF0Y2hlZCIsImRyYXdGb3JtVmlldyIsImluZGV4UG9zaXRpb24iLCJkb2NLZXkiLCJ0YXNrRm9ybUNvbnRlbnQiLCJjbGFzc0xpc3QiLCJ0YXNrTmFtZURpdiIsInRhc2tOYW1lTGFiZWwiLCJ0ZXh0Q29udGVudCIsInRhc2tOYW1lRmllbGQiLCJ0YXNrRGVzY0RpdiIsInRhc2tEZXNjTGFiZWwiLCJ0YXNrRGVzY0ZpZWxkIiwidGFza1ByaW9yaXR5RGl2IiwidGFza1ByaW9yaXR5TGFiZWwiLCJ0YXNrUHJpb3JpdHlGaWVsZCIsImVzc2VudGlhbE9wdGlvbiIsIm5vcm1hbE9wdGlvbiIsInRhc2tDYXRlZ29yeURpdiIsInRhc2tDYXRlZ29yeUxhYmVsIiwidGFza0NhdGVnb3J5RmllbGQiLCJ3b3JrT3B0aW9uIiwiaG91c2VPcHRpb24iLCJob2JieU9wdGlvbiIsImR1ZURhdGVEaXYiLCJkdWVEYXRlTGFiZWwiLCJkdWVEYXRlRmllbGQiLCJzdWJtaXROZXdUYXNrQnRuIiwiY2FuY2VsTmV3VGFza0J0biIsImRyYXdMaXN0VmlldyIsImZvcm1CdXR0b25EaXYiLCJmb3JtYXR0ZWREYXRlIiwiZHVlRGF0ZUlucHV0IiwidG9GaXJlc3RvcmUiLCJXbCIsImFkZFRhc2tUb0xpc3QiLCJ0YXNrTmFtZSIsInRhc2tEZXNjIiwiY2F0ZWdvcnkiLCJmaWxsVGFza0Rlc2MiLCJwcmlvcml0eSIsInRhc2tEZXNjQ29sdW1uIiwidGFza0RldGFpbE5hbWUiLCJ0YXNrRGV0YWlsQ2F0ZWdvcnkiLCJ0YXNrRGV0YWlsUHJpb3JpdHkiLCJ0YXNrRGV0YWlsRHVlRGF0ZSIsInRhc2tEZXRhaWxEZXNjcmlwdGlvbiIsImVkaXRUYXNrQnRuIiwiZGVsZXRlVGFza0J0biIsImRlbGV0ZVRhc2siLCJwb3B1bGF0ZUxpc3QiLCJkaXNwbGF5ZWRUYXNrcyIsInRhc2tMaXN0IiwidGFzayIsInRhc2tSb3ciLCJ0YXNrUmFkaW9TcGFuIiwidGFza1Jvd05hbWUiLCJ0YXNrUm93RGF0ZSIsInRhc2tSb3dTZWxlY3RNYXJrIiwic2VsZWN0aW9uUmFkaW8iLCJsaXN0Vmlld0NvbnRlbnQiLCJ0YXNrTGlzdENvbHVtbiIsInRhc2tDYXRlZ29yeVRhYnMiLCJtYWluVGFiIiwid29ya1RhYiIsImhvdXNlVGFiIiwiaG9iYnlUYWIiLCJibGFua0Rlc2NQbGFjZWhvbGRlciIsInN0b3JhZ2UiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsInN0b3JhZ2VBdmFpbGFibGUiLCJnZXRFbGVtZW50QnlJZCJdLCJzb3VyY2VSb290IjoiIn0=